!function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var e={exports:{}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,function(e){if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const n="The message port closed before a response was received.",wrapAPIs=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class DefaultWeakMap extends WeakMap{constructor(e,n=void 0){super(n),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const isThenable=e=>e&&"object"==typeof e&&"function"==typeof e.then,makeCallback=(n,t)=>(...r)=>{e.runtime.lastError?n.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||r.length<=1&&!1!==t.singleCallbackArg?n.resolve(r[0]):n.resolve(r)},pluralizeArguments=e=>1==e?"argument":"arguments",wrapAsyncFunction=(e,n)=>function(t,...r){if(r.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${pluralizeArguments(n.minArgs)} for ${e}(), got ${r.length}`);if(r.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${pluralizeArguments(n.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((s,a)=>{if(n.fallbackToNoCallback)try{t[e](...r,makeCallback({resolve:s,reject:a},n))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),t[e](...r),n.fallbackToNoCallback=!1,n.noCallback=!0,s()}else n.noCallback?(t[e](...r),s()):t[e](...r,makeCallback({resolve:s,reject:a},n))}))},wrapMethod=(e,n,t)=>new Proxy(n,{apply:(n,r,s)=>t.call(r,e,...s)});let r=Function.call.bind(Object.prototype.hasOwnProperty);const wrapObject=(e,n={},t={})=>{let s=Object.create(null),a={has:(n,t)=>t in e||t in s,get(a,o,i){if(o in s)return s[o];if(!(o in e))return;let m=e[o];if("function"==typeof m)if("function"==typeof n[o])m=wrapMethod(e,e[o],n[o]);else if(r(t,o)){let n=wrapAsyncFunction(o,t[o]);m=wrapMethod(e,e[o],n)}else m=m.bind(e);else if("object"==typeof m&&null!==m&&(r(n,o)||r(t,o)))m=wrapObject(m,n[o],t[o]);else{if(!r(t,"*"))return Object.defineProperty(s,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(n){e[o]=n}}),m;m=wrapObject(m,n[o],t["*"])}return s[o]=m,m},set:(n,t,r,a)=>(t in s?s[t]=r:e[t]=r,!0),defineProperty:(e,n,t)=>Reflect.defineProperty(s,n,t),deleteProperty:(e,n)=>Reflect.deleteProperty(s,n)},o=Object.create(e);return new Proxy(o,a)},wrapEvent=e=>({addListener(n,t,...r){n.addListener(e.get(t),...r)},hasListener:(n,t)=>n.hasListener(e.get(t)),removeListener(n,t){n.removeListener(e.get(t))}}),s=new DefaultWeakMap((e=>"function"!=typeof e?e:function(n){const t=wrapObject(n,{},{getContent:{minArgs:0,maxArgs:0}});e(t)})),a=new DefaultWeakMap((e=>"function"!=typeof e?e:function(n,t,r){let s,a,o=!1,i=new Promise((e=>{s=function(n){o=!0,e(n)}}));try{a=e(n,t,s)}catch(g){a=Promise.reject(g)}const m=!0!==a&&isThenable(a);if(!0!==a&&!m&&!o)return!1;const sendPromisedResult=e=>{e.then((e=>{r(e)}),(e=>{let n;n=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:n})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return sendPromisedResult(m?a:i),!0})),wrappedSendMessageCallback=({reject:t,resolve:r},s)=>{e.runtime.lastError?e.runtime.lastError.message===n?r():t(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?t(new Error(s.message)):r(s)},wrappedSendMessage=(e,n,t,...r)=>{if(r.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${pluralizeArguments(n.minArgs)} for ${e}(), got ${r.length}`);if(r.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${pluralizeArguments(n.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((e,n)=>{const s=wrappedSendMessageCallback.bind(null,{resolve:e,reject:n});r.push(s),t.sendMessage(...r)}))},o={devtools:{network:{onRequestFinished:wrapEvent(s)}},runtime:{onMessage:wrapEvent(a),onMessageExternal:wrapEvent(a),sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},i={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":i},services:{"*":i},websites:{"*":i}},wrapObject(e,o,t)};e.exports=wrapAPIs(chrome)}else e.exports=globalThis.browser}(e);var n=getDefaultExportFromCjs(e.exports);const t={matches:["*://*.confirmit.com/*"],runAt:"document_idle",async main(){let e=null,t=null;const r="confirmit-extension-notification",s="confirmit-blocking-overlay";let a=!1;function injectStyles(){if(document.getElementById("confirmit-notification-styles"))return;const e=document.createElement("style");e.id="confirmit-notification-styles",e.textContent=`\n        #${r} {\n          position: fixed !important;\n          bottom: 20px !important;\n          left: 50% !important;\n          transform: translateX(-50%) !important;\n          z-index: 9999 !important;\n          display: none;\n          flex-direction: row !important;\n          justify-content: center !important;\n          align-items: center !important;\n          text-align: center !important;\n          background-color: rgba(255, 255, 255, 0.98) !important;\n          border-radius: 9px !important;\n          padding: 18px 27px !important;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;\n          border: 1px solid #e5e7eb !important;\n        }\n\n        #${r}.active { display: flex !important; }\n\n        #confirmit-toast-notification {\n          position: fixed !important;\n          top: 20px !important;\n          left: 50% !important;\n          transform: translateX(-50%) translateY(-100px) !important;\n          z-index: 99999 !important;\n          background-color: #fef3c7 !important;\n          border: 2px solid #f59e0b !important;\n          border-radius: 8px !important;\n          padding: 12px 20px !important;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n          font-size: 14px !important;\n          font-weight: 500 !important;\n          color: #92400e !important;\n          opacity: 0 !important;\n          transition: opacity 0.3s ease, transform 0.3s ease !important;\n          pointer-events: none !important;\n        }\n\n        #confirmit-toast-notification.show {\n          opacity: 1 !important;\n          transform: translateX(-50%) translateY(0) !important;\n        }\n\n        #${r} .metaforms-notification {\n          display: flex !important;\n          flex-direction: row !important;\n          align-items: center !important;\n          justify-content: center !important;\n          gap: 14px !important;\n          line-height: 27px !important;\n        }\n\n        #${r} .spinner {\n          width: 27px !important;\n          height: 27px !important;\n          flex-shrink: 0 !important;\n        }\n\n        #${r} .spinner svg {\n          width: 27px !important;\n          height: 27px !important;\n          animation: confirmit-spin 0.8s linear infinite !important;\n        }\n\n        #${r} .message {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n          font-size: 18px !important;\n          font-weight: 500 !important;\n          color: #1f2937 !important;\n          white-space: nowrap !important;\n        }\n\n        @keyframes confirmit-spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n\n        /* Blocking Overlay */\n        #${s} {\n          position: fixed !important;\n          top: 0 !important;\n          left: 0 !important;\n          right: 0 !important;\n          bottom: 0 !important;\n          width: 100vw !important;\n          height: 100vh !important;\n          display: none;\n          align-items: center;\n          justify-content: center;\n          z-index: 2147483647 !important;\n          pointer-events: all !important;\n          background-color: rgba(0, 0, 0, 0.6) !important;\n          backdrop-filter: blur(2px);\n          -webkit-backdrop-filter: blur(2px);\n        }\n\n        #${s}.active {\n          display: flex !important;\n        }\n\n        #${s} .blocking-content {\n          background-color: rgba(255, 255, 255, 0.98) !important;\n          border-radius: 12px !important;\n          padding: 32px 48px !important;\n          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15),\n                      0 10px 10px -5px rgba(0, 0, 0, 0.08) !important;\n          text-align: center !important;\n          max-width: 400px !important;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;\n          font-size: 16px !important;\n          color: #1f2937 !important;\n          font-weight: 500 !important;\n          line-height: 1.5 !important;\n        }\n\n        @media (prefers-color-scheme: dark) {\n          #${r} {\n            background-color: rgba(31, 41, 55, 0.98) !important;\n            border-color: #4b5563 !important;\n          }\n          #${r} .message { color: #f3f4f6 !important; }\n          \n          #${s} .blocking-content {\n            background-color: rgba(31, 41, 55, 0.98) !important;\n            color: #f3f4f6 !important;\n          }\n        }\n      `,document.head.appendChild(e)}function show(){injectStyles(),e||(e=function(){const e=document.createElement("div");return e.id=r,e.innerHTML='\n         <div class="metaforms-notification">\n           <div class="spinner">\n             <svg viewBox="0 0 24 24" fill="none">\n               <circle cx="12" cy="12" r="10" stroke="#e5e7eb" stroke-width="3"/>\n               <path d="M12 2 A10 10 0 0 1 22 12" stroke="#3b82f6" stroke-width="3" stroke-linecap="round"/>\n             </svg>\n           </div>\n           <div class="message">Metaforms is processing, please do not create or delete</div>\n         </div>\n       ',document.body.appendChild(e),e}()),function(){if(a)return;a=!0,findAndBlockButtons(),o=new MutationObserver((()=>{findAndBlockButtons()})),o.observe(document.body,{childList:!0,subtree:!0}),console.log("Button blocking activated")}(),t&&t.classList.remove("active"),e.classList.add("active")}function showBlockingOverlay(){injectStyles(),t||(t=function(){const e=document.createElement("div");return e.id=s,e.innerHTML='\n        <div class="blocking-content">\n          Please wait until all actions are executed.\n        </div>\n      ',document.body.appendChild(e),e}()),e&&e.classList.remove("active"),t.classList.add("active")}function hideBlockingOverlay(){t&&(t.classList.remove("active"),console.log("Blocking overlay hidden"))}let o=null;const i=new WeakMap;let m=null,g=null;function blockButton(e){if(i.has(e))return;const blocker=e=>{var n;a&&(e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),n="Metaforms is processing, please wait",m||(m=document.createElement("div"),m.id="confirmit-toast-notification",document.body.appendChild(m)),g&&clearTimeout(g),m.textContent=n,m.classList.add("show"),g=window.setTimeout((()=>{m?.classList.remove("show")}),2e3))};["click","mousedown","mouseup"].forEach((n=>e.addEventListener(n,blocker,!0))),i.set(e,blocker)}function findAndBlockButtons(){document.querySelectorAll('button[class*="comd-button"][data-guide-action="add-first"], button[data-add-node="true"][data-position="Before"], button[data-add-node="true"][data-position="After"], button[data-add-node="true"][data-position="Inside"], li[data-dropdown-action="add-Before"], li[data-dropdown-action="add-After"], li[data-dropdown-action="add-Inside"], li[data-dropdown-action="duplicate"], li[data-dropdown-action="delete"], li[data-dropdown-action="createQuota"]').forEach((e=>blockButton(e)))}function findAndUnblockAllButtons(){document.querySelectorAll('button[class*="comd-button"][data-guide-action="add-first"], button[data-add-node="true"][data-position], [data-dropdown-action^="add-"], li[data-dropdown-action="duplicate"], li[data-dropdown-action="delete"], li[data-dropdown-action="createQuota"]').forEach((e=>function(e){const n=i.get(e);n&&(["click","mousedown","mouseup"].forEach((t=>e.removeEventListener(t,n,!0))),i.delete(e))}(e)))}function stopGlobalBlocking(){a&&(a=!1,o&&(o.disconnect(),o=null),findAndUnblockAllButtons(),m&&m.classList.remove("show"),g&&(clearTimeout(g),g=null))}n.runtime.onMessage.addListener(((n,i,l)=>{switch(n.type){case"SHOW_OVERLAY":return show(),l({success:!0}),!0;case"HIDE_OVERLAY":return e&&e.classList.remove("active"),stopGlobalBlocking(),hideBlockingOverlay(),l({success:!0}),!0;case"SHOW_BLOCKING_OVERLAY":return showBlockingOverlay(),l({success:!0}),!0;case"HIDE_BLOCKING_OVERLAY":return hideBlockingOverlay(),l({success:!0}),!0;case"GET_OVERLAY_STATUS":return l({success:!0,isActive:e?.classList.contains("active")||!1,overlayExists:!!e}),!0;case"CLEANUP_OVERLAY":return function(){stopGlobalBlocking();const n=document.getElementById(r);n&&n.remove();const i=document.getElementById(s);i&&i.remove();const l=document.getElementById("confirmit-toast-notification");l&&l.remove();const c=document.getElementById("confirmit-notification-styles");c&&c.remove(),o&&(o.disconnect(),o=null),findAndUnblockAllButtons(),a=!1,e=null,t=null,m=null,g&&(clearTimeout(g),g=null)}(),l({success:!0}),!0;default:return}})),console.log("Confirmit notification ready")}};var logger_error=(...e)=>{console.error};(async()=>{try{await t.main()}catch(e){logger_error('The unlisted script "content-overlay" crashed on startup!',e)}})()}();
