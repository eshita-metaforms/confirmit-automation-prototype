var __defProp=Object.defineProperty,__defNormalProp=(n,s,o)=>s in n?__defProp(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o,__publicField=(n,s,o)=>__defNormalProp(n,"symbol"!=typeof s?s+"":s,o);!function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var n={exports:{}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,function(n){if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const s="The message port closed before a response was received.",wrapAPIs=n=>{const o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(o).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class DefaultWeakMap extends WeakMap{constructor(n,s=void 0){super(s),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const isThenable2=n=>n&&"object"==typeof n&&"function"==typeof n.then,makeCallback=(s,o)=>(...l)=>{n.runtime.lastError?s.reject(new Error(n.runtime.lastError.message)):o.singleCallbackArg||l.length<=1&&!1!==o.singleCallbackArg?s.resolve(l[0]):s.resolve(l)},pluralizeArguments=n=>1==n?"argument":"arguments",wrapAsyncFunction=(n,s)=>function(o,...l){if(l.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${pluralizeArguments(s.minArgs)} for ${n}(), got ${l.length}`);if(l.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${pluralizeArguments(s.maxArgs)} for ${n}(), got ${l.length}`);return new Promise(((c,d)=>{if(s.fallbackToNoCallback)try{o[n](...l,makeCallback({resolve:c,reject:d},s))}catch(h){console.warn(`${n} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,h),o[n](...l),s.fallbackToNoCallback=!1,s.noCallback=!0,c()}else s.noCallback?(o[n](...l),c()):o[n](...l,makeCallback({resolve:c,reject:d},s))}))},wrapMethod=(n,s,o)=>new Proxy(s,{apply:(s,l,c)=>o.call(l,n,...c)});let l=Function.call.bind(Object.prototype.hasOwnProperty);const wrapObject=(n,s={},o={})=>{let c=Object.create(null),d={has:(s,o)=>o in n||o in c,get(d,h,p){if(h in c)return c[h];if(!(h in n))return;let f=n[h];if("function"==typeof f)if("function"==typeof s[h])f=wrapMethod(n,n[h],s[h]);else if(l(o,h)){let s=wrapAsyncFunction(h,o[h]);f=wrapMethod(n,n[h],s)}else f=f.bind(n);else if("object"==typeof f&&null!==f&&(l(s,h)||l(o,h)))f=wrapObject(f,s[h],o[h]);else{if(!l(o,"*"))return Object.defineProperty(c,h,{configurable:!0,enumerable:!0,get:()=>n[h],set(s){n[h]=s}}),f;f=wrapObject(f,s[h],o["*"])}return c[h]=f,f},set:(s,o,l,d)=>(o in c?c[o]=l:n[o]=l,!0),defineProperty:(n,s,o)=>Reflect.defineProperty(c,s,o),deleteProperty:(n,s)=>Reflect.deleteProperty(c,s)},h=Object.create(n);return new Proxy(h,d)},wrapEvent=n=>({addListener(s,o,...l){s.addListener(n.get(o),...l)},hasListener:(s,o)=>s.hasListener(n.get(o)),removeListener(s,o){s.removeListener(n.get(o))}}),c=new DefaultWeakMap((n=>"function"!=typeof n?n:function(s){const o=wrapObject(s,{},{getContent:{minArgs:0,maxArgs:0}});n(o)})),d=new DefaultWeakMap((n=>"function"!=typeof n?n:function(s,o,l){let c,d,h=!1,p=new Promise((n=>{c=function(s){h=!0,n(s)}}));try{d=n(s,o,c)}catch(m){d=Promise.reject(m)}const f=!0!==d&&isThenable2(d);if(!0!==d&&!f&&!h)return!1;const sendPromisedResult=n=>{n.then((n=>{l(n)}),(n=>{let s;s=n&&(n instanceof Error||"string"==typeof n.message)?n.message:"An unexpected error occurred",l({__mozWebExtensionPolyfillReject__:!0,message:s})})).catch((n=>{console.error("Failed to send onMessage rejected reply",n)}))};return sendPromisedResult(f?d:p),!0})),wrappedSendMessageCallback=({reject:o,resolve:l},c)=>{n.runtime.lastError?n.runtime.lastError.message===s?l():o(new Error(n.runtime.lastError.message)):c&&c.__mozWebExtensionPolyfillReject__?o(new Error(c.message)):l(c)},wrappedSendMessage=(n,s,o,...l)=>{if(l.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${pluralizeArguments(s.minArgs)} for ${n}(), got ${l.length}`);if(l.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${pluralizeArguments(s.maxArgs)} for ${n}(), got ${l.length}`);return new Promise(((n,s)=>{const c=wrappedSendMessageCallback.bind(null,{resolve:n,reject:s});l.push(c),o.sendMessage(...l)}))},h={devtools:{network:{onRequestFinished:wrapEvent(c)}},runtime:{onMessage:wrapEvent(d),onMessageExternal:wrapEvent(d),sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},wrapObject(n,h,o)};n.exports=wrapAPIs(chrome)}else n.exports=globalThis.browser}(n);var s=getDefaultExportFromCjs(n.exports),o="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},l="1.9.0",c=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var d=function(n){var s=new Set([n]),o=new Set,l=n.match(c);if(!l)return function(){return!1};var d=+l[1],h=+l[2],p=+l[3];if(null!=l[4])return function(s){return s===n};function _reject(n){return o.add(n),!1}function _accept(n){return s.add(n),!0}return function(n){if(s.has(n))return!0;if(o.has(n))return!1;var l=n.match(c);if(!l)return _reject(n);var f=+l[1],m=+l[2],_=+l[3];return null!=l[4]||d!==f?_reject(n):0===d?h===m&&p<=_?_accept(n):_reject(n):h<=m?_accept(n):_reject(n)}}(l),h=l.split(".")[0],p=Symbol.for("opentelemetry.js.api."+h),f=o;function registerGlobal(n,s,o,c){var d;void 0===c&&(c=!1);var h=f[p]=null!==(d=f[p])&&void 0!==d?d:{version:l};if(!c&&h[n]){var m=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+n);return o.error(m.stack||m.message),!1}if(h.version!==l){m=new Error("@opentelemetry/api: Registration of version v"+h.version+" for "+n+" does not match previously registered API v"+l);return o.error(m.stack||m.message),!1}return h[n]=s,o.debug("@opentelemetry/api: Registered a global for "+n+" v"+l+"."),!0}function getGlobal(n){var s,o,l=null===(s=f[p])||void 0===s?void 0:s.version;if(l&&d(l))return null===(o=f[p])||void 0===o?void 0:o[n]}function unregisterGlobal(n,s){s.debug("@opentelemetry/api: Unregistering a global for "+n+" v"+l+".");var o=f[p];o&&delete o[n]}var m,_,y=function(){function DiagComponentLogger2(n){this._namespace=n.namespace||"DiagComponentLogger"}return DiagComponentLogger2.prototype.debug=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return logProxy("debug",this._namespace,n)},DiagComponentLogger2.prototype.error=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return logProxy("error",this._namespace,n)},DiagComponentLogger2.prototype.info=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return logProxy("info",this._namespace,n)},DiagComponentLogger2.prototype.warn=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return logProxy("warn",this._namespace,n)},DiagComponentLogger2.prototype.verbose=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return logProxy("verbose",this._namespace,n)},DiagComponentLogger2}();function logProxy(n,s,o){var l=getGlobal("diag");if(l)return o.unshift(s),l[n].apply(l,function(n,s,o){if(o||2===arguments.length)for(var l,c=0,d=s.length;c<d;c++)!l&&c in s||(l||(l=Array.prototype.slice.call(s,0,c)),l[c]=s[c]);return n.concat(l||Array.prototype.slice.call(s))}([],function(n,s){var o="function"==typeof Symbol&&n[Symbol.iterator];if(!o)return n;var l,c,d=o.call(n),h=[];try{for(;(void 0===s||s-- >0)&&!(l=d.next()).done;)h.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(o=d.return)&&o.call(d)}finally{if(c)throw c.error}}return h}(o),!1))}(_=m||(m={}))[_.NONE=0]="NONE",_[_.ERROR=30]="ERROR",_[_.WARN=50]="WARN",_[_.INFO=60]="INFO",_[_.DEBUG=70]="DEBUG",_[_.VERBOSE=80]="VERBOSE",_[_.ALL=9999]="ALL";var E=function(){function DiagAPI2(){function _logProxy(n){return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var l=getGlobal("diag");if(l)return l[n].apply(l,function(n,s,o){if(o||2===arguments.length)for(var l,c=0,d=s.length;c<d;c++)!l&&c in s||(l||(l=Array.prototype.slice.call(s,0,c)),l[c]=s[c]);return n.concat(l||Array.prototype.slice.call(s))}([],function(n,s){var o="function"==typeof Symbol&&n[Symbol.iterator];if(!o)return n;var l,c,d=o.call(n),h=[];try{for(;(void 0===s||s-- >0)&&!(l=d.next()).done;)h.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(o=d.return)&&o.call(d)}finally{if(c)throw c.error}}return h}(s),!1))}}var n=this;n.setLogger=function(s,o){var l,c,d;if(void 0===o&&(o={logLevel:m.INFO}),s===n){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error(null!==(l=h.stack)&&void 0!==l?l:h.message),!1}"number"==typeof o&&(o={logLevel:o});var p=getGlobal("diag"),f=function(n,s){function _filterFunc(o,l){var c=s[o];return"function"==typeof c&&n>=l?c.bind(s):function(){}}return n<m.NONE?n=m.NONE:n>m.ALL&&(n=m.ALL),s=s||{},{error:_filterFunc("error",m.ERROR),warn:_filterFunc("warn",m.WARN),info:_filterFunc("info",m.INFO),debug:_filterFunc("debug",m.DEBUG),verbose:_filterFunc("verbose",m.VERBOSE)}}(null!==(c=o.logLevel)&&void 0!==c?c:m.INFO,s);if(p&&!o.suppressOverrideMessage){var _=null!==(d=(new Error).stack)&&void 0!==d?d:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+_),f.warn("Current logger will overwrite one already registered from "+_)}return registerGlobal("diag",f,n,!0)},n.disable=function(){unregisterGlobal("diag",n)},n.createComponentLogger=function(n){return new y(n)},n.verbose=_logProxy("verbose"),n.debug=_logProxy("debug"),n.info=_logProxy("info"),n.warn=_logProxy("warn"),n.error=_logProxy("error")}return DiagAPI2.instance=function(){return this._instance||(this._instance=new DiagAPI2),this._instance},DiagAPI2}(),M=function(){function BaggageImpl2(n){this._entries=n?new Map(n):new Map}return BaggageImpl2.prototype.getEntry=function(n){var s=this._entries.get(n);if(s)return Object.assign({},s)},BaggageImpl2.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(n){var s=function(n,s){var o="function"==typeof Symbol&&n[Symbol.iterator];if(!o)return n;var l,c,d=o.call(n),h=[];try{for(;(void 0===s||s-- >0)&&!(l=d.next()).done;)h.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(o=d.return)&&o.call(d)}finally{if(c)throw c.error}}return h}(n,2);return[s[0],s[1]]}))},BaggageImpl2.prototype.setEntry=function(n,s){var o=new BaggageImpl2(this._entries);return o._entries.set(n,s),o},BaggageImpl2.prototype.removeEntry=function(n){var s=new BaggageImpl2(this._entries);return s._entries.delete(n),s},BaggageImpl2.prototype.removeEntries=function(){for(var n,s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var c=new BaggageImpl2(this._entries);try{for(var d=function(n){var s="function"==typeof Symbol&&Symbol.iterator,o=s&&n[s],l=0;if(o)return o.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&l>=n.length&&(n=void 0),{value:n&&n[l++],done:!n}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),h=d.next();!h.done;h=d.next()){var p=h.value;c._entries.delete(p)}}catch(f){n={error:f}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}return c},BaggageImpl2.prototype.clear=function(){return new BaggageImpl2},BaggageImpl2}(),P=Symbol("BaggageEntryMetadata"),L=E.instance();function createBaggage(n){return void 0===n&&(n={}),new M(new Map(Object.entries(n)))}function createContextKey(n){return Symbol.for(n)}var N,F,D=new(function(){return function BaseContext2(n){var s=this;s._currentContext=n?new Map(n):new Map,s.getValue=function(n){return s._currentContext.get(n)},s.setValue=function(n,o){var l=new BaseContext2(s._currentContext);return l._currentContext.set(n,o),l},s.deleteValue=function(n){var o=new BaseContext2(s._currentContext);return o._currentContext.delete(n),o}}}()),B=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],$=function(){return function(){function _consoleFunc(n){return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(console){var l=console[n];if("function"!=typeof l&&(l=console.log),"function"==typeof l)return l.apply(console,s)}}}for(var n=0;n<B.length;n++)this[B[n].n]=_consoleFunc(B[n].c)}}(),U=function(){var extendStatics=function(n,s){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])})(n,s)};return function(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function __(){this.constructor=n}extendStatics(n,s),n.prototype=null===s?Object.create(s):(__.prototype=s.prototype,new __)}}(),H=function(){function NoopMeter2(){}return NoopMeter2.prototype.createGauge=function(n,s){return pe},NoopMeter2.prototype.createHistogram=function(n,s){return fe},NoopMeter2.prototype.createCounter=function(n,s){return ce},NoopMeter2.prototype.createUpDownCounter=function(n,s){return ge},NoopMeter2.prototype.createObservableGauge=function(n,s){return Oe},NoopMeter2.prototype.createObservableCounter=function(n,s){return be},NoopMeter2.prototype.createObservableUpDownCounter=function(n,s){return Ne},NoopMeter2.prototype.addBatchObservableCallback=function(n,s){},NoopMeter2.prototype.removeBatchObservableCallback=function(n){},NoopMeter2}(),z=function(){return function(){}}(),q=function(n){function NoopCounterMetric2(){return null!==n&&n.apply(this,arguments)||this}return U(NoopCounterMetric2,n),NoopCounterMetric2.prototype.add=function(n,s){},NoopCounterMetric2}(z),V=function(n){function NoopUpDownCounterMetric2(){return null!==n&&n.apply(this,arguments)||this}return U(NoopUpDownCounterMetric2,n),NoopUpDownCounterMetric2.prototype.add=function(n,s){},NoopUpDownCounterMetric2}(z),Z=function(n){function NoopGaugeMetric2(){return null!==n&&n.apply(this,arguments)||this}return U(NoopGaugeMetric2,n),NoopGaugeMetric2.prototype.record=function(n,s){},NoopGaugeMetric2}(z),ee=function(n){function NoopHistogramMetric2(){return null!==n&&n.apply(this,arguments)||this}return U(NoopHistogramMetric2,n),NoopHistogramMetric2.prototype.record=function(n,s){},NoopHistogramMetric2}(z),ne=function(){function NoopObservableMetric2(){}return NoopObservableMetric2.prototype.addCallback=function(n){},NoopObservableMetric2.prototype.removeCallback=function(n){},NoopObservableMetric2}(),ie=function(n){function NoopObservableCounterMetric2(){return null!==n&&n.apply(this,arguments)||this}return U(NoopObservableCounterMetric2,n),NoopObservableCounterMetric2}(ne),se=function(n){function NoopObservableGaugeMetric2(){return null!==n&&n.apply(this,arguments)||this}return U(NoopObservableGaugeMetric2,n),NoopObservableGaugeMetric2}(ne),oe=function(n){function NoopObservableUpDownCounterMetric2(){return null!==n&&n.apply(this,arguments)||this}return U(NoopObservableUpDownCounterMetric2,n),NoopObservableUpDownCounterMetric2}(ne),le=new H,ce=new q,pe=new Z,fe=new ee,ge=new V,be=new ie,Oe=new se,Ne=new oe,Fe={get:function(n,s){if(null!=n)return n[s]},keys:function(n){return null==n?[]:Object.keys(n)}},De={set:function(n,s,o){null!=n&&(n[s]=o)}},Be=function(){function NoopContextManager2(){}return NoopContextManager2.prototype.active=function(){return D},NoopContextManager2.prototype.with=function(n,s,o){for(var l=[],c=3;c<arguments.length;c++)l[c-3]=arguments[c];return s.call.apply(s,function(n,s,o){if(o||2===arguments.length)for(var l,c=0,d=s.length;c<d;c++)!l&&c in s||(l||(l=Array.prototype.slice.call(s,0,c)),l[c]=s[c]);return n.concat(l||Array.prototype.slice.call(s))}([o],function(n,s){var o="function"==typeof Symbol&&n[Symbol.iterator];if(!o)return n;var l,c,d=o.call(n),h=[];try{for(;(void 0===s||s-- >0)&&!(l=d.next()).done;)h.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(o=d.return)&&o.call(d)}finally{if(c)throw c.error}}return h}(l),!1))},NoopContextManager2.prototype.bind=function(n,s){return s},NoopContextManager2.prototype.enable=function(){return this},NoopContextManager2.prototype.disable=function(){return this},NoopContextManager2}(),Ue="context",He=new Be,qe=function(){function ContextAPI2(){}return ContextAPI2.getInstance=function(){return this._instance||(this._instance=new ContextAPI2),this._instance},ContextAPI2.prototype.setGlobalContextManager=function(n){return registerGlobal(Ue,n,E.instance())},ContextAPI2.prototype.active=function(){return this._getContextManager().active()},ContextAPI2.prototype.with=function(n,s,o){for(var l,c=[],d=3;d<arguments.length;d++)c[d-3]=arguments[d];return(l=this._getContextManager()).with.apply(l,function(n,s,o){if(o||2===arguments.length)for(var l,c=0,d=s.length;c<d;c++)!l&&c in s||(l||(l=Array.prototype.slice.call(s,0,c)),l[c]=s[c]);return n.concat(l||Array.prototype.slice.call(s))}([n,s,o],function(n,s){var o="function"==typeof Symbol&&n[Symbol.iterator];if(!o)return n;var l,c,d=o.call(n),h=[];try{for(;(void 0===s||s-- >0)&&!(l=d.next()).done;)h.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(o=d.return)&&o.call(d)}finally{if(c)throw c.error}}return h}(c),!1))},ContextAPI2.prototype.bind=function(n,s){return this._getContextManager().bind(n,s)},ContextAPI2.prototype._getContextManager=function(){return getGlobal(Ue)||He},ContextAPI2.prototype.disable=function(){this._getContextManager().disable(),unregisterGlobal(Ue,E.instance())},ContextAPI2}();(F=N||(N={}))[F.NONE=0]="NONE",F[F.SAMPLED=1]="SAMPLED";var Ve="0000000000000000",Je="00000000000000000000000000000000",tt={traceId:Je,spanId:Ve,traceFlags:N.NONE},nt=function(){function NonRecordingSpan2(n){void 0===n&&(n=tt),this._spanContext=n}return NonRecordingSpan2.prototype.spanContext=function(){return this._spanContext},NonRecordingSpan2.prototype.setAttribute=function(n,s){return this},NonRecordingSpan2.prototype.setAttributes=function(n){return this},NonRecordingSpan2.prototype.addEvent=function(n,s){return this},NonRecordingSpan2.prototype.addLink=function(n){return this},NonRecordingSpan2.prototype.addLinks=function(n){return this},NonRecordingSpan2.prototype.setStatus=function(n){return this},NonRecordingSpan2.prototype.updateName=function(n){return this},NonRecordingSpan2.prototype.end=function(n){},NonRecordingSpan2.prototype.isRecording=function(){return!1},NonRecordingSpan2.prototype.recordException=function(n,s){},NonRecordingSpan2}(),it=createContextKey("OpenTelemetry Context Key SPAN");function getSpan(n){return n.getValue(it)||void 0}function getActiveSpan(){return getSpan(qe.getInstance().active())}function setSpan(n,s){return n.setValue(it,s)}function deleteSpan(n){return n.deleteValue(it)}function setSpanContext(n,s){return setSpan(n,new nt(s))}function getSpanContext(n){var s;return null===(s=getSpan(n))||void 0===s?void 0:s.spanContext()}var ft=/^([0-9a-f]{32})$/i,gt=/^[0-9a-f]{16}$/i;function isValidTraceId(n){return ft.test(n)&&n!==Je}function isSpanContextValid(n){return isValidTraceId(n.traceId)&&(s=n.spanId,gt.test(s)&&s!==Ve);var s}function wrapSpanContext(n){return new nt(n)}var vt=qe.getInstance(),_t=function(){function NoopTracer2(){}return NoopTracer2.prototype.startSpan=function(n,s,o){if(void 0===o&&(o=vt.active()),Boolean(null==s?void 0:s.root))return new nt;var l,c=o&&getSpanContext(o);return"object"==typeof(l=c)&&"string"==typeof l.spanId&&"string"==typeof l.traceId&&"number"==typeof l.traceFlags&&isSpanContextValid(c)?new nt(c):new nt},NoopTracer2.prototype.startActiveSpan=function(n,s,o,l){var c,d,h;if(!(arguments.length<2)){2===arguments.length?h=s:3===arguments.length?(c=s,h=o):(c=s,d=o,h=l);var p=null!=d?d:vt.active(),f=this.startSpan(n,c,p),m=setSpan(p,f);return vt.with(m,h,void 0,f)}},NoopTracer2}();var kt,xt,It,Et,Tt,Mt,Ot=new _t,Lt=function(){function ProxyTracer2(n,s,o,l){this._provider=n,this.name=s,this.version=o,this.options=l}return ProxyTracer2.prototype.startSpan=function(n,s,o){return this._getTracer().startSpan(n,s,o)},ProxyTracer2.prototype.startActiveSpan=function(n,s,o,l){var c=this._getTracer();return Reflect.apply(c.startActiveSpan,c,arguments)},ProxyTracer2.prototype._getTracer=function(){if(this._delegate)return this._delegate;var n=this._provider.getDelegateTracer(this.name,this.version,this.options);return n?(this._delegate=n,this._delegate):Ot},ProxyTracer2}(),Ft=new(function(){function NoopTracerProvider2(){}return NoopTracerProvider2.prototype.getTracer=function(n,s,o){return new _t},NoopTracerProvider2}()),Dt=function(){function ProxyTracerProvider2(){}return ProxyTracerProvider2.prototype.getTracer=function(n,s,o){var l;return null!==(l=this.getDelegateTracer(n,s,o))&&void 0!==l?l:new Lt(this,n,s,o)},ProxyTracerProvider2.prototype.getDelegate=function(){var n;return null!==(n=this._delegate)&&void 0!==n?n:Ft},ProxyTracerProvider2.prototype.setDelegate=function(n){this._delegate=n},ProxyTracerProvider2.prototype.getDelegateTracer=function(n,s,o){var l;return null===(l=this._delegate)||void 0===l?void 0:l.getTracer(n,s,o)},ProxyTracerProvider2}();(xt=kt||(kt={}))[xt.NOT_RECORD=0]="NOT_RECORD",xt[xt.RECORD=1]="RECORD",xt[xt.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED",(Et=It||(It={}))[Et.INTERNAL=0]="INTERNAL",Et[Et.SERVER=1]="SERVER",Et[Et.CLIENT=2]="CLIENT",Et[Et.PRODUCER=3]="PRODUCER",Et[Et.CONSUMER=4]="CONSUMER",(Mt=Tt||(Tt={}))[Mt.UNSET=0]="UNSET",Mt[Mt.OK=1]="OK",Mt[Mt.ERROR=2]="ERROR";var Bt=qe.getInstance(),Ht=E.instance(),jt=new(function(){function NoopMeterProvider2(){}return NoopMeterProvider2.prototype.getMeter=function(n,s,o){return le},NoopMeterProvider2}()),Wt="metrics",Vt=function(){function MetricsAPI2(){}return MetricsAPI2.getInstance=function(){return this._instance||(this._instance=new MetricsAPI2),this._instance},MetricsAPI2.prototype.setGlobalMeterProvider=function(n){return registerGlobal(Wt,n,E.instance())},MetricsAPI2.prototype.getMeterProvider=function(){return getGlobal(Wt)||jt},MetricsAPI2.prototype.getMeter=function(n,s,o){return this.getMeterProvider().getMeter(n,s,o)},MetricsAPI2.prototype.disable=function(){unregisterGlobal(Wt,E.instance())},MetricsAPI2}().getInstance(),Gt=function(){function NoopTextMapPropagator2(){}return NoopTextMapPropagator2.prototype.inject=function(n,s){},NoopTextMapPropagator2.prototype.extract=function(n,s){return n},NoopTextMapPropagator2.prototype.fields=function(){return[]},NoopTextMapPropagator2}(),Yt=createContextKey("OpenTelemetry Baggage Key");function getBaggage(n){return n.getValue(Yt)||void 0}function getActiveBaggage(){return getBaggage(qe.getInstance().active())}function setBaggage(n,s){return n.setValue(Yt,s)}function deleteBaggage(n){return n.deleteValue(Yt)}var Zt="propagation",Kt=new Gt,Qt=function(){function PropagationAPI2(){this.createBaggage=createBaggage,this.getBaggage=getBaggage,this.getActiveBaggage=getActiveBaggage,this.setBaggage=setBaggage,this.deleteBaggage=deleteBaggage}return PropagationAPI2.getInstance=function(){return this._instance||(this._instance=new PropagationAPI2),this._instance},PropagationAPI2.prototype.setGlobalPropagator=function(n){return registerGlobal(Zt,n,E.instance())},PropagationAPI2.prototype.inject=function(n,s,o){return void 0===o&&(o=De),this._getGlobalPropagator().inject(n,s,o)},PropagationAPI2.prototype.extract=function(n,s,o){return void 0===o&&(o=Fe),this._getGlobalPropagator().extract(n,s,o)},PropagationAPI2.prototype.fields=function(){return this._getGlobalPropagator().fields()},PropagationAPI2.prototype.disable=function(){unregisterGlobal(Zt,E.instance())},PropagationAPI2.prototype._getGlobalPropagator=function(){return getGlobal(Zt)||Kt},PropagationAPI2}().getInstance(),er="trace",tr=function(){function TraceAPI2(){this._proxyTracerProvider=new Dt,this.wrapSpanContext=wrapSpanContext,this.isSpanContextValid=isSpanContextValid,this.deleteSpan=deleteSpan,this.getSpan=getSpan,this.getActiveSpan=getActiveSpan,this.getSpanContext=getSpanContext,this.setSpan=setSpan,this.setSpanContext=setSpanContext}return TraceAPI2.getInstance=function(){return this._instance||(this._instance=new TraceAPI2),this._instance},TraceAPI2.prototype.setGlobalTracerProvider=function(n){var s=registerGlobal(er,this._proxyTracerProvider,E.instance());return s&&this._proxyTracerProvider.setDelegate(n),s},TraceAPI2.prototype.getTracerProvider=function(){return getGlobal(er)||this._proxyTracerProvider},TraceAPI2.prototype.getTracer=function(n,s){return this.getTracerProvider().getTracer(n,s)},TraceAPI2.prototype.disable=function(){unregisterGlobal(er,E.instance()),this._proxyTracerProvider=new Dt},TraceAPI2}().getInstance();class NoopLogger{emit(n){}}const rr=new NoopLogger;const sr=new class{getLogger(n,s,o){return new NoopLogger}};class ProxyLogger{constructor(n,s,o,l){this._provider=n,this.name=s,this.version=o,this.options=l}emit(n){this._getLogger().emit(n)}_getLogger(){if(this._delegate)return this._delegate;const n=this._provider.getDelegateLogger(this.name,this.version,this.options);return n?(this._delegate=n,this._delegate):rr}}class ProxyLoggerProvider{getLogger(n,s,o){var l;return null!==(l=this.getDelegateLogger(n,s,o))&&void 0!==l?l:new ProxyLogger(this,n,s,o)}getDelegate(){var n;return null!==(n=this._delegate)&&void 0!==n?n:sr}setDelegate(n){this._delegate=n}getDelegateLogger(n,s,o){var l;return null===(l=this._delegate)||void 0===l?void 0:l.getLogger(n,s,o)}}const or="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},ar=Symbol.for("io.opentelemetry.js.api.logs"),ur=or;class LogsAPI{constructor(){this._proxyLoggerProvider=new ProxyLoggerProvider}static getInstance(){return this._instance||(this._instance=new LogsAPI),this._instance}setGlobalLoggerProvider(n){return ur[ar]?this.getLoggerProvider():(ur[ar]=(s=1,o=n,l=sr,n=>n===s?o:l),this._proxyLoggerProvider.setDelegate(n),n);var s,o,l}getLoggerProvider(){var n,s;return null!==(s=null===(n=ur[ar])||void 0===n?void 0:n.call(ur,1))&&void 0!==s?s:this._proxyLoggerProvider}getLogger(n,s,o){return this.getLoggerProvider().getLogger(n,s,o)}disable(){delete ur[ar],this._proxyLoggerProvider=new ProxyLoggerProvider}}const dr=LogsAPI.getInstance();const pr=createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function suppressTracing(n){return n.setValue(pr,!0)}function isTracingSuppressed(n){return!0===n.getValue(pr)}const fr="baggage";function parsePairKeyValue(n){const s=n.split(";");if(s.length<=0)return;const o=s.shift();if(!o)return;const l=o.indexOf("=");if(l<=0)return;const c=decodeURIComponent(o.substring(0,l).trim()),d=decodeURIComponent(o.substring(l+1).trim());let h;var p;return s.length>0&&("string"!=typeof(p=s.join(";"))&&(L.error("Cannot create baggage metadata from unknown type: "+typeof p),p=""),h={__TYPE__:P,toString:function(){return p}}),{key:c,value:d,metadata:h}}class W3CBaggagePropagator{inject(n,s,o){const l=Qt.getBaggage(n);if(!l||isTracingSuppressed(n))return;const c=function(n){return n.getAllEntries().map((([n,s])=>{let o=`${encodeURIComponent(n)}=${encodeURIComponent(s.value)}`;return void 0!==s.metadata&&(o+=";"+s.metadata.toString()),o}))}(l).filter((n=>n.length<=4096)).slice(0,180),d=function(n){return n.reduce(((n,s)=>{const o=`${n}${""!==n?",":""}${s}`;return o.length>8192?n:o}),"")}(c);d.length>0&&o.set(s,fr,d)}extract(n,s,o){const l=o.get(s,fr),c=Array.isArray(l)?l.join(","):l;if(!c)return n;const d={};if(0===c.length)return n;return c.split(",").forEach((n=>{const s=parsePairKeyValue(n);if(s){const n={value:s.value};s.metadata&&(n.metadata=s.metadata),d[s.key]=n}})),0===Object.entries(d).length?n:Qt.setBaggage(n,Qt.createBaggage(d))}fields(){return[fr]}}function sanitizeAttributes(n){const s={};if("object"!=typeof n||null==n)return s;for(const[o,l]of Object.entries(n))isAttributeKey(o)?isAttributeValue(l)?Array.isArray(l)?s[o]=l.slice():s[o]=l:Ht.warn(`Invalid attribute value set for key: ${o}`):Ht.warn(`Invalid attribute key: ${o}`);return s}function isAttributeKey(n){return"string"==typeof n&&n.length>0}function isAttributeValue(n){return null==n||(Array.isArray(n)?function(n){let s;for(const o of n)if(null!=o){if(!s){if(isValidPrimitiveAttributeValue(o)){s=typeof o;continue}return!1}if(typeof o!==s)return!1}return!0}(n):isValidPrimitiveAttributeValue(n))}function isValidPrimitiveAttributeValue(n){switch(typeof n){case"number":case"boolean":case"string":return!0}return!1}let delegateHandler=n=>{Ht.error(function(n){return"string"==typeof n?n:JSON.stringify(function(n){const s={};let o=n;for(;null!==o;)Object.getOwnPropertyNames(o).forEach((n=>{if(s[n])return;const l=o[n];l&&(s[n]=String(l))})),o=Object.getPrototypeOf(o);return s}(n))}(n))};function globalErrorHandler(n){try{delegateHandler(n)}catch{}}const gr=performance,vr="exception.message",wr="exception.stacktrace",Sr="exception.type",Cr="service.name",kr="service.version",Ir="telemetry.sdk.language",Er="webjs",Tr="telemetry.sdk.name",Ar="telemetry.sdk.version",Mr="user_agent.original",Rr="process.runtime.name",Or={[Tr]:"opentelemetry",[Rr]:"browser",[Ir]:Er,[Ar]:"2.0.1"};const jr=Math.pow(10,6),zr=Math.pow(10,9);function millisToHrTime(n){const s=n/1e3;return[Math.trunc(s),Math.round(n%1e3*jr)]}function getTimeOrigin(){let n=gr.timeOrigin;if("number"!=typeof n){const s=gr;n=s.timing&&s.timing.fetchStart}return n}function hrTimeToMicroseconds(n){return 1e6*n[0]+n[1]/1e3}function isTimeInputHrTime(n){return Array.isArray(n)&&2===n.length&&"number"==typeof n[0]&&"number"==typeof n[1]}function isTimeInput(n){return isTimeInputHrTime(n)||"number"==typeof n||n instanceof Date}function addHrTimes(n,s){const o=[n[0]+s[0],n[1]+s[1]];return o[1]>=zr&&(o[1]-=zr,o[0]+=1),o}var qr,Vr;(Vr=qr||(qr={}))[Vr.SUCCESS=0]="SUCCESS",Vr[Vr.FAILED=1]="FAILED";class CompositePropagator{constructor(n={}){__publicField(this,"_propagators"),__publicField(this,"_fields"),this._propagators=n.propagators??[],this._fields=Array.from(new Set(this._propagators.map((n=>"function"==typeof n.fields?n.fields():[])).reduce(((n,s)=>n.concat(s)),[])))}inject(n,s,o){for(const c of this._propagators)try{c.inject(n,s,o)}catch(l){Ht.warn(`Failed to inject with ${c.constructor.name}. Err: ${l.message}`)}}extract(n,s,o){return this._propagators.reduce(((n,l)=>{try{return l.extract(n,s,o)}catch(c){Ht.warn(`Failed to extract with ${l.constructor.name}. Err: ${c.message}`)}return n}),n)}fields(){return this._fields.slice()}}const Gr="[_0-9a-z-*/]",Yr=new RegExp(`^(?:${`[a-z]${Gr}{0,255}`}|${`[a-z0-9]${Gr}{0,240}@[a-z]${Gr}{0,13}`})$`),Zr=/^[ -~]{0,255}[!-~]$/,Kr=/,|=/;class TraceState{constructor(n){__publicField(this,"_internalState",new Map),n&&this._parse(n)}set(n,s){const o=this._clone();return o._internalState.has(n)&&o._internalState.delete(n),o._internalState.set(n,s),o}unset(n){const s=this._clone();return s._internalState.delete(n),s}get(n){return this._internalState.get(n)}serialize(){return this._keys().reduce(((n,s)=>(n.push(s+"="+this.get(s)),n)),[]).join(",")}_parse(n){n.length>512||(this._internalState=n.split(",").reverse().reduce(((n,s)=>{const o=s.trim(),l=o.indexOf("=");if(-1!==l){const c=o.slice(0,l),d=o.slice(l+1,s.length);(function(n){return Yr.test(n)})(c)&&function(n){return Zr.test(n)&&!Kr.test(n)}(d)&&n.set(c,d)}return n}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const n=new TraceState;return n._internalState=new Map(this._internalState),n}}const en="traceparent",tn="tracestate",rn=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");class W3CTraceContextPropagator{inject(n,s,o){const l=tr.getSpanContext(n);if(!l||isTracingSuppressed(n)||!isSpanContextValid(l))return;const c=`00-${l.traceId}-${l.spanId}-0${Number(l.traceFlags||N.NONE).toString(16)}`;o.set(s,en,c),l.traceState&&o.set(s,tn,l.traceState.serialize())}extract(n,s,o){const l=o.get(s,en);if(!l)return n;const c=Array.isArray(l)?l[0]:l;if("string"!=typeof c)return n;const d=function(n){const s=rn.exec(n);return s?"00"===s[1]&&s[5]?null:{traceId:s[2],spanId:s[3],traceFlags:parseInt(s[4],16)}:null}(c);if(!d)return n;d.isRemote=!0;const h=o.get(s,tn);if(h){const n=Array.isArray(h)?h.join(","):h;d.traceState=new TraceState("string"==typeof n?n:void 0)}return tr.setSpanContext(n,d)}fields(){return[en,tn]}}const nn="[object Null]",sn="[object Undefined]",on=Function.prototype.toString,an=on.call(Object),ln=Object.getPrototypeOf,un=Object.prototype,dn=un.hasOwnProperty,hn=Symbol?Symbol.toStringTag:void 0,pn=un.toString;function isPlainObject$1(n){if(!function(n){return null!=n&&"object"==typeof n}(n)||"[object Object]"!==function(n){if(null==n)return void 0===n?sn:nn;return hn&&hn in Object(n)?function(n){const s=dn.call(n,hn),o=n[hn];let l=!1;try{n[hn]=void 0,l=!0}catch(es){}const c=pn.call(n);l&&(s?n[hn]=o:delete n[hn]);return c}(n):function(n){return pn.call(n)}(n)}(n))return!1;const s=ln(n);if(null===s)return!0;const o=dn.call(s,"constructor")&&s.constructor;return"function"==typeof o&&o instanceof o&&on.call(o)===an}function takeValue(n){return isArray(n)?n.slice():n}function mergeTwoObjects(n,s,o=0,l){let c;if(!(o>20)){if(o++,isPrimitive(n)||isPrimitive(s)||isFunction(s))c=takeValue(s);else if(isArray(n)){if(c=n.slice(),isArray(s))for(let n=0,o=s.length;n<o;n++)c.push(takeValue(s[n]));else if(isObject(s)){const n=Object.keys(s);for(let o=0,l=n.length;o<l;o++){const l=n[o];c[l]=takeValue(s[l])}}}else if(isObject(n))if(isObject(s)){if(!function(n,s){if(!isPlainObject$1(n)||!isPlainObject$1(s))return!1;return!0}(n,s))return s;c=Object.assign({},n);const d=Object.keys(s);for(let h=0,p=d.length;h<p;h++){const p=d[h],f=s[p];if(isPrimitive(f))void 0===f?delete c[p]:c[p]=f;else{const d=c[p],h=f;if(wasObjectReferenced(n,p,l)||wasObjectReferenced(s,p,l))delete c[p];else{if(isObject(d)&&isObject(h)){const o=l.get(d)||[],c=l.get(h)||[];o.push({obj:n,key:p}),c.push({obj:s,key:p}),l.set(d,o),l.set(h,c)}c[p]=mergeTwoObjects(c[p],f,o,l)}}}}else c=s;return c}}function wasObjectReferenced(n,s,o){const l=o.get(n[s])||[];for(let c=0,d=l.length;c<d;c++){const o=l[c];if(o.key===s&&o.obj===n)return!0}return!1}function isArray(n){return Array.isArray(n)}function isFunction(n){return"function"==typeof n}function isObject(n){return!isPrimitive(n)&&!isArray(n)&&!isFunction(n)&&"object"==typeof n}function isPrimitive(n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n||void 0===n||n instanceof Date||n instanceof RegExp||null===n}class Deferred{constructor(){__publicField(this,"_promise"),__publicField(this,"_resolve"),__publicField(this,"_reject"),this._promise=new Promise(((n,s)=>{this._resolve=n,this._reject=s}))}get promise(){return this._promise}resolve(n){this._resolve(n)}reject(n){this._reject(n)}}class BindOnceFuture{constructor(n,s){__publicField(this,"_callback"),__publicField(this,"_that"),__publicField(this,"_isCalled",!1),__publicField(this,"_deferred",new Deferred),this._callback=n,this._that=s}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...n){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...n)).then((n=>this._deferred.resolve(n)),(n=>this._deferred.reject(n)))}catch(s){this._deferred.reject(s)}}return this._deferred.promise}}const wn={_export:function(n,s){return new Promise((o=>{Bt.with(suppressTracing(Bt.active()),(()=>{n.export(s,(n=>{o(n)}))}))}))}};const isPromiseLike=n=>null!==n&&"object"==typeof n&&"function"==typeof n.then;class ResourceImpl{constructor(n){__publicField(this,"_rawAttributes"),__publicField(this,"_asyncAttributesPending",!1),__publicField(this,"_memoizedAttributes");const s=n.attributes??{};this._rawAttributes=Object.entries(s).map((([n,s])=>(isPromiseLike(s)&&(this._asyncAttributesPending=!0),[n,s]))),this._rawAttributes=guardedRawAttributes(this._rawAttributes)}static FromAttributeList(n){const s=new ResourceImpl({});return s._rawAttributes=guardedRawAttributes(n),s._asyncAttributesPending=n.filter((([n,s])=>isPromiseLike(s))).length>0,s}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let n=0;n<this._rawAttributes.length;n++){const[s,o]=this._rawAttributes[n];this._rawAttributes[n]=[s,isPromiseLike(o)?await o:o]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&Ht.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;const n={};for(const[s,o]of this._rawAttributes)isPromiseLike(o)?Ht.debug(`Unsettled resource attribute ${s} skipped`):null!=o&&(n[s]??(n[s]=o));return this._asyncAttributesPending||(this._memoizedAttributes=n),n}getRawAttributes(){return this._rawAttributes}merge(n){return null==n?this:ResourceImpl.FromAttributeList([...n.getRawAttributes(),...this.getRawAttributes()])}}function resourceFromAttributes(n){return ResourceImpl.FromAttributeList(Object.entries(n))}function guardedRawAttributes(n){return n.map((([n,s])=>isPromiseLike(s)?[n,s.catch((s=>{Ht.debug("promise rejection for resource attribute: %s - %s",n,s)}))]:[n,s]))}class SpanImpl{constructor(n){__publicField(this,"_spanContext"),__publicField(this,"kind"),__publicField(this,"parentSpanContext"),__publicField(this,"attributes",{}),__publicField(this,"links",[]),__publicField(this,"events",[]),__publicField(this,"startTime"),__publicField(this,"resource"),__publicField(this,"instrumentationScope"),__publicField(this,"_droppedAttributesCount",0),__publicField(this,"_droppedEventsCount",0),__publicField(this,"_droppedLinksCount",0),__publicField(this,"name"),__publicField(this,"status",{code:Tt.UNSET}),__publicField(this,"endTime",[0,0]),__publicField(this,"_ended",!1),__publicField(this,"_duration",[-1,-1]),__publicField(this,"_spanProcessor"),__publicField(this,"_spanLimits"),__publicField(this,"_attributeValueLengthLimit"),__publicField(this,"_performanceStartTime"),__publicField(this,"_performanceOffset"),__publicField(this,"_startTimeProvided");const s=Date.now();this._spanContext=n.spanContext,this._performanceStartTime=gr.now(),this._performanceOffset=s-(this._performanceStartTime+getTimeOrigin()),this._startTimeProvided=null!=n.startTime,this._spanLimits=n.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=n.spanProcessor,this.name=n.name,this.parentSpanContext=n.parentSpanContext,this.kind=n.kind,this.links=n.links||[],this.startTime=this._getTime(n.startTime??s),this.resource=n.resource,this.instrumentationScope=n.scope,null!=n.attributes&&this.setAttributes(n.attributes),this._spanProcessor.onStart(this,n.context)}spanContext(){return this._spanContext}setAttribute(n,s){if(null==s||this._isSpanEnded())return this;if(0===n.length)return Ht.warn(`Invalid attribute key: ${n}`),this;if(!isAttributeValue(s))return Ht.warn(`Invalid attribute value set for key: ${n}`),this;const{attributeCountLimit:o}=this._spanLimits;return void 0!==o&&Object.keys(this.attributes).length>=o&&!Object.prototype.hasOwnProperty.call(this.attributes,n)?(this._droppedAttributesCount++,this):(this.attributes[n]=this._truncateToSize(s),this)}setAttributes(n){for(const[s,o]of Object.entries(n))this.setAttribute(s,o);return this}addEvent(n,s,o){if(this._isSpanEnded())return this;const{eventCountLimit:l}=this._spanLimits;if(0===l)return Ht.warn("No events allowed."),this._droppedEventsCount++,this;void 0!==l&&this.events.length>=l&&(0===this._droppedEventsCount&&Ht.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),isTimeInput(s)&&(isTimeInput(o)||(o=s),s=void 0);const c=sanitizeAttributes(s);return this.events.push({name:n,attributes:c,time:this._getTime(o),droppedAttributesCount:0}),this}addLink(n){return this.links.push(n),this}addLinks(n){return this.links.push(...n),this}setStatus(n){return this._isSpanEnded()||(this.status={...n},null!=this.status.message&&"string"!=typeof n.message&&(Ht.warn(`Dropping invalid status.message of type '${typeof n.message}', expected 'string'`),delete this.status.message)),this}updateName(n){return this._isSpanEnded()||(this.name=n),this}end(n){this._isSpanEnded()?Ht.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`):(this._ended=!0,this.endTime=this._getTime(n),this._duration=function(n,s){let o=s[0]-n[0],l=s[1]-n[1];return l<0&&(o-=1,l+=zr),[o,l]}(this.startTime,this.endTime),this._duration[0]<0&&(Ht.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Ht.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this))}_getTime(n){if("number"==typeof n&&n<=gr.now())return s=n+this._performanceOffset,addHrTimes(millisToHrTime(getTimeOrigin()),millisToHrTime("number"==typeof s?s:gr.now()));var s;if("number"==typeof n)return millisToHrTime(n);if(n instanceof Date)return millisToHrTime(n.getTime());if(isTimeInputHrTime(n))return n;if(this._startTimeProvided)return millisToHrTime(Date.now());const o=gr.now()-this._performanceStartTime;return addHrTimes(this.startTime,millisToHrTime(o))}isRecording(){return!1===this._ended}recordException(n,s){const o={};"string"==typeof n?o[vr]=n:n&&(n.code?o[Sr]=n.code.toString():n.name&&(o[Sr]=n.name),n.message&&(o[vr]=n.message),n.stack&&(o[wr]=n.stack)),o[Sr]||o[vr]?this.addEvent("exception",o,s):Ht.warn(`Failed to record an exception ${n}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){const n=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);Ht.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,n)}return this._ended}_truncateToLimitUtil(n,s){return n.length<=s?n:n.substring(0,s)}_truncateToSize(n){const s=this._attributeValueLengthLimit;return s<=0?(Ht.warn(`Attribute value limit must be positive, got ${s}`),n):"string"==typeof n?this._truncateToLimitUtil(n,s):Array.isArray(n)?n.map((n=>"string"==typeof n?this._truncateToLimitUtil(n,s):n)):n}}var Cn;!function(n){n[n.NOT_RECORD=0]="NOT_RECORD",n[n.RECORD=1]="RECORD",n[n.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Cn||(Cn={}));class AlwaysOffSampler{shouldSample(){return{decision:Cn.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class AlwaysOnSampler{shouldSample(){return{decision:Cn.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}class ParentBasedSampler{constructor(n){__publicField(this,"_root"),__publicField(this,"_remoteParentSampled"),__publicField(this,"_remoteParentNotSampled"),__publicField(this,"_localParentSampled"),__publicField(this,"_localParentNotSampled"),this._root=n.root,this._root||(globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new AlwaysOnSampler),this._remoteParentSampled=n.remoteParentSampled??new AlwaysOnSampler,this._remoteParentNotSampled=n.remoteParentNotSampled??new AlwaysOffSampler,this._localParentSampled=n.localParentSampled??new AlwaysOnSampler,this._localParentNotSampled=n.localParentNotSampled??new AlwaysOffSampler}shouldSample(n,s,o,l,c,d){const h=tr.getSpanContext(n);return h&&isSpanContextValid(h)?h.isRemote?h.traceFlags&N.SAMPLED?this._remoteParentSampled.shouldSample(n,s,o,l,c,d):this._remoteParentNotSampled.shouldSample(n,s,o,l,c,d):h.traceFlags&N.SAMPLED?this._localParentSampled.shouldSample(n,s,o,l,c,d):this._localParentNotSampled.shouldSample(n,s,o,l,c,d):this._root.shouldSample(n,s,o,l,c,d)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}class TraceIdRatioBasedSampler{constructor(n=0){__publicField(this,"_ratio"),__publicField(this,"_upperBound"),this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(n,s){return{decision:isValidTraceId(s)&&this._accumulate(s)<this._upperBound?Cn.RECORD_AND_SAMPLED:Cn.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return"number"!=typeof n||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let s=0;for(let o=0;o<n.length/8;o++){const l=8*o;s=(s^parseInt(n.slice(l,l+8),16))>>>0}return s}}function loadDefaultConfig(){return{sampler:buildSamplerFromEnv(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},spanLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128,linkCountLimit:128,eventCountLimit:128,attributePerEventCountLimit:128,attributePerLinkCountLimit:128}}}function buildSamplerFromEnv(){const n="parentbased_always_on";switch(n){case"always_on":return new AlwaysOnSampler;case"always_off":return new AlwaysOffSampler;case"parentbased_always_on":return new ParentBasedSampler({root:new AlwaysOnSampler});case"parentbased_always_off":return new ParentBasedSampler({root:new AlwaysOffSampler});case"traceidratio":return new TraceIdRatioBasedSampler(getSamplerProbabilityFromEnv());case"parentbased_traceidratio":return new ParentBasedSampler({root:new TraceIdRatioBasedSampler(getSamplerProbabilityFromEnv())});default:return Ht.error(`OTEL_TRACES_SAMPLER value "${n}" invalid, defaulting to "parentbased_always_on".`),new ParentBasedSampler({root:new AlwaysOnSampler})}}function getSamplerProbabilityFromEnv(){return Ht.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to 1."),1}const On=1/0;class BatchSpanProcessorBase{constructor(n,s){__publicField(this,"_exporter"),__publicField(this,"_maxExportBatchSize"),__publicField(this,"_maxQueueSize"),__publicField(this,"_scheduledDelayMillis"),__publicField(this,"_exportTimeoutMillis"),__publicField(this,"_isExporting",!1),__publicField(this,"_finishedSpans",[]),__publicField(this,"_timer"),__publicField(this,"_shutdownOnce"),__publicField(this,"_droppedSpansCount",0),this._exporter=n,this._maxExportBatchSize="number"==typeof s?.maxExportBatchSize?s.maxExportBatchSize:512,this._maxQueueSize="number"==typeof s?.maxQueueSize?s.maxQueueSize:2048,this._scheduledDelayMillis="number"==typeof s?.scheduledDelayMillis?s.scheduledDelayMillis:5e3,this._exportTimeoutMillis="number"==typeof s?.exportTimeoutMillis?s.exportTimeoutMillis:3e4,this._shutdownOnce=new BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Ht.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(n,s){}onEnd(n){this._shutdownOnce.isCalled||n.spanContext().traceFlags&N.SAMPLED&&this._addToBuffer(n)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown()))}_addToBuffer(n){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&Ht.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(Ht.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(n),this._maybeStartTimer()}_flushAll(){return new Promise(((n,s)=>{const o=[];for(let l=0,c=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);l<c;l++)o.push(this._flushOneBatch());Promise.all(o).then((()=>{n()})).catch(s)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((n,s)=>{const o=setTimeout((()=>{s(new Error("Timeout"))}),this._exportTimeoutMillis);Bt.with(suppressTracing(Bt.active()),(()=>{let l;this._finishedSpans.length<=this._maxExportBatchSize?(l=this._finishedSpans,this._finishedSpans=[]):l=this._finishedSpans.splice(0,this._maxExportBatchSize);const doExport=()=>this._exporter.export(l,(l=>{clearTimeout(o),l.code===qr.SUCCESS?n():s(l.error??new Error("BatchSpanProcessor: span export failed"))}));let c=null;for(let n=0,s=l.length;n<s;n++){const s=l[n];s.resource.asyncAttributesPending&&s.resource.waitForAsyncAttributes&&(c??(c=[]),c.push(s.resource.waitForAsyncAttributes()))}null===c?doExport():Promise.all(c).then(doExport,(n=>{globalErrorHandler(n),s(n)}))}))}))}_maybeStartTimer(){if(this._isExporting)return;const flush=()=>{this._isExporting=!0,this._flushOneBatch().finally((()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((n=>{this._isExporting=!1,globalErrorHandler(n)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return flush();void 0===this._timer&&(this._timer=setTimeout((()=>flush()),this._scheduledDelayMillis),this._timer)}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}class BatchSpanProcessor extends BatchSpanProcessorBase{constructor(n,s){super(n,s),__publicField(this,"_visibilityChangeListener"),__publicField(this,"_pageHideListener"),this.onInit(s)}onInit(n){!0!==n?.disableAutoFlushOnDocumentHide&&"undefined"!=typeof document&&(this._visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush().catch((n=>{globalErrorHandler(n)}))},this._pageHideListener=()=>{this.forceFlush().catch((n=>{globalErrorHandler(n)}))},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}}class RandomIdGenerator{constructor(){__publicField(this,"generateTraceId",getIdGenerator(16)),__publicField(this,"generateSpanId",getIdGenerator(8))}}const Ln=Array(32);function getIdGenerator(n){return function(){for(let s=0;s<2*n;s++)Ln[s]=Math.floor(16*Math.random())+48,Ln[s]>=58&&(Ln[s]+=39);return String.fromCharCode.apply(null,Ln.slice(0,2*n))}}class Tracer{constructor(n,s,o,l){__publicField(this,"_sampler"),__publicField(this,"_generalLimits"),__publicField(this,"_spanLimits"),__publicField(this,"_idGenerator"),__publicField(this,"instrumentationScope"),__publicField(this,"_resource"),__publicField(this,"_spanProcessor");const c=function(n){const s={sampler:buildSamplerFromEnv()},o=loadDefaultConfig(),l=Object.assign({},o,s,n);return l.generalLimits=Object.assign({},o.generalLimits,n.generalLimits||{}),l.spanLimits=Object.assign({},o.spanLimits,n.spanLimits||{}),l}(s);this._sampler=c.sampler,this._generalLimits=c.generalLimits,this._spanLimits=c.spanLimits,this._idGenerator=s.idGenerator||new RandomIdGenerator,this._resource=o,this._spanProcessor=l,this.instrumentationScope=n}startSpan(n,s={},o=Bt.active()){s.root&&(o=tr.deleteSpan(o));const l=tr.getSpan(o);if(isTracingSuppressed(o)){Ht.debug("Instrumentation suppressed, returning Noop Span");return tr.wrapSpanContext(tt)}const c=l?.spanContext(),d=this._idGenerator.generateSpanId();let h,p,f;c&&tr.isSpanContextValid(c)?(p=c.traceId,f=c.traceState,h=c):p=this._idGenerator.generateTraceId();const m=s.kind??It.INTERNAL,_=(s.links??[]).map((n=>({context:n.context,attributes:sanitizeAttributes(n.attributes)}))),y=sanitizeAttributes(s.attributes),E=this._sampler.shouldSample(o,p,n,m,y,_);f=E.traceState??f;const M={traceId:p,spanId:d,traceFlags:E.decision===kt.RECORD_AND_SAMPLED?N.SAMPLED:N.NONE,traceState:f};if(E.decision===kt.NOT_RECORD){Ht.debug("Recording is off, propagating context in a non-recording span");return tr.wrapSpanContext(M)}const P=sanitizeAttributes(Object.assign(y,E.attributes));return new SpanImpl({resource:this._resource,scope:this.instrumentationScope,context:o,spanContext:M,name:n,kind:m,links:_,parentSpanContext:h,attributes:P,startTime:s.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(n,s,o,l){let c,d,h;if(arguments.length<2)return;2===arguments.length?h=s:3===arguments.length?(c=s,h=o):(c=s,d=o,h=l);const p=d??Bt.active(),f=this.startSpan(n,c,p),m=tr.setSpan(p,f);return Bt.with(m,h,void 0,f)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class MultiSpanProcessor{constructor(n){__publicField(this,"_spanProcessors"),this._spanProcessors=n}forceFlush(){const n=[];for(const s of this._spanProcessors)n.push(s.forceFlush());return new Promise((s=>{Promise.all(n).then((()=>{s()})).catch((n=>{globalErrorHandler(n||new Error("MultiSpanProcessor: forceFlush failed")),s()}))}))}onStart(n,s){for(const o of this._spanProcessors)o.onStart(n,s)}onEnd(n){for(const s of this._spanProcessors)s.onEnd(n)}shutdown(){const n=[];for(const s of this._spanProcessors)n.push(s.shutdown());return new Promise(((s,o)=>{Promise.all(n).then((()=>{s()}),o)}))}}var Fn,Dn;(Dn=Fn||(Fn={}))[Dn.resolved=0]="resolved",Dn[Dn.timeout=1]="timeout",Dn[Dn.error=2]="error",Dn[Dn.unresolved=3]="unresolved";class BasicTracerProvider{constructor(n={}){__publicField(this,"_config"),__publicField(this,"_tracers",new Map),__publicField(this,"_resource"),__publicField(this,"_activeSpanProcessor");const s=function(...n){let s=n.shift();const o=new WeakMap;for(;n.length>0;)s=mergeTwoObjects(s,n.shift(),0,o);return s}({},loadDefaultConfig(),function(n){const s=Object.assign({},n.spanLimits);return s.attributeCountLimit=n.spanLimits?.attributeCountLimit??n.generalLimits?.attributeCountLimit??void 0??void 0??128,s.attributeValueLengthLimit=n.spanLimits?.attributeValueLengthLimit??n.generalLimits?.attributeValueLengthLimit??void 0??void 0??On,Object.assign({},n,{spanLimits:s})}(n));this._resource=s.resource??resourceFromAttributes({[Cr]:"unknown_service",[Ir]:Or[Ir],[Tr]:Or[Tr],[Ar]:Or[Ar]}),this._config=Object.assign({},s,{resource:this._resource});const o=[];n.spanProcessors?.length&&o.push(...n.spanProcessors),this._activeSpanProcessor=new MultiSpanProcessor(o)}getTracer(n,s,o){const l=`${n}@${s||""}:${o?.schemaUrl||""}`;return this._tracers.has(l)||this._tracers.set(l,new Tracer({name:n,version:s,schemaUrl:o?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(l)}forceFlush(){const n=this._config.forceFlushTimeoutMillis,s=this._activeSpanProcessor._spanProcessors.map((s=>new Promise((o=>{let l;const c=setTimeout((()=>{o(new Error(`Span processor did not completed within timeout period of ${n} ms`)),l=Fn.timeout}),n);s.forceFlush().then((()=>{clearTimeout(c),l!==Fn.timeout&&(l=Fn.resolved,o(l))})).catch((n=>{clearTimeout(c),l=Fn.error,o(n)}))}))));return new Promise(((n,o)=>{Promise.all(s).then((s=>{const l=s.filter((n=>n!==Fn.resolved));l.length>0?o(l):n()})).catch((n=>o([n])))}))}shutdown(){return this._activeSpanProcessor.shutdown()}}class SimpleSpanProcessor{constructor(n){__publicField(this,"_exporter"),__publicField(this,"_shutdownOnce"),__publicField(this,"_pendingExports"),this._exporter=n,this._shutdownOnce=new BindOnceFuture(this._shutdown,this),this._pendingExports=new Set}async forceFlush(){await Promise.all(Array.from(this._pendingExports)),this._exporter.forceFlush&&await this._exporter.forceFlush()}onStart(n,s){}onEnd(n){if(this._shutdownOnce.isCalled)return;if(!(n.spanContext().traceFlags&N.SAMPLED))return;const s=this._doExport(n).catch((n=>globalErrorHandler(n)));this._pendingExports.add(s),s.finally((()=>this._pendingExports.delete(s)))}async _doExport(n){n.resource.asyncAttributesPending&&await(n.resource.waitForAsyncAttributes?.());const s=await wn._export(this._exporter,[n]);if(s.code!==qr.SUCCESS)throw s.error??new Error(`SimpleSpanProcessor: span export failed (status ${s})`)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return this._exporter.shutdown()}}class StackContextManager{constructor(){__publicField(this,"_enabled",!1),__publicField(this,"_currentContext",D)}_bindFunction(n=D,s){const o=this,contextWrapper=function(...l){return o.with(n,(()=>s.apply(this,l)))};return Object.defineProperty(contextWrapper,"length",{enumerable:!1,configurable:!0,writable:!1,value:s.length}),contextWrapper}active(){return this._currentContext}bind(n,s){return void 0===n&&(n=this.active()),"function"==typeof s?this._bindFunction(n,s):s}disable(){return this._currentContext=D,this._enabled=!1,this}enable(){return this._enabled||(this._enabled=!0,this._currentContext=D),this}with(n,s,o,...l){const c=this._currentContext;this._currentContext=n||D;try{return s.call(o,...l)}finally{this._currentContext=c}}}class WebTracerProvider extends BasicTracerProvider{constructor(n={}){super(n)}register(n={}){var s;tr.setGlobalTracerProvider(this),null!==(s=n.propagator)&&(void 0!==s?Qt.setGlobalPropagator(s):Qt.setGlobalPropagator(new CompositePropagator({propagators:[new W3CTraceContextPropagator,new W3CBaggagePropagator]}))),function(n){if(null!==n){if(void 0===n){const n=new StackContextManager;return n.enable(),void Bt.setGlobalContextManager(n)}n.enable(),Bt.setGlobalContextManager(n)}}(n.contextManager)}}const Bn="browser.brands",$n="browser.language",Un="browser.mobile",Hn="browser.platform",jn="deployment.environment.name",zn="http.url";var qn=Object.defineProperty,_$1=(n,s,o)=>((n,s,o)=>s in n?qn(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(n,"symbol"!=typeof s?s+"":s,o);const Wn="logfire",Vn=`${Wn}.level_num`,Gn=`${Wn}.span_type`,Yn=`${Wn}.tags`,Zn=`${Wn}.msg_template`,Jn=`${Wn}.scrubbed`,Xn="logfire";let Kn=class extends Error{constructor(n){super(n),this.name="KnownFormattingError"}};const Qn=new class{constructor(){_$1(this,"parseRegex",/(\{\{)|(\}\})|(\{([^{}]*)(?::([^{}]*))?\})/g)}chunks(n,s,o){const[l,c]=this.vformatChunks(n,s,o);return[l,c,n]}formatField(n,s){if(!s)return String(n);if("number"==typeof n&&s.includes(".")){const[,o]=s.split(".");return n.toFixed(parseInt(o,10))}return String(n)}getField(n,s){if(!n.includes(".")&&!n.includes("[")){if(n in s)return[s[n],n];throw new Kn(`The field ${n} is not defined.`)}try{const o=n.split(".");let l=s[o[0]??""];for(let c=1;c<o.length;c++){const d=o[c]??"";if(!(d in s))throw new Kn(`The field ${n} is not an object.`);l=s[d]}return[l,o[0]??""]}catch{if(n in s)return[s[n],n];throw new Kn(`The field ${n} is not defined.`)}}parse(n){const s=[];let o,l=0,c="";for(;null!==(o=this.parseRegex.exec(n));){const[d,h,p,f,m,_]=o;c+=n.substring(l,o.index),h?c+="{":p?c+="}":f&&(s.push([c,m??null,_??null,null]),c=""),l=o.index+d.length}return l<n.length&&(c+=n.substring(l)),c&&s.push([c,null,null,null]),s}cleanValue(n,s,o){if(o.SAFE_KEYS.includes(n))return[F$1(s,2e3),[]];const[l,c]=o.scrubValue(["message",n],s);return[F$1(l,2e3),c]}vformatChunks(n,s,o,l=2){if(l<0)throw new Kn("Max format spec recursion exceeded");const c=[],d=[];for(const[p,f,m]of this.parse(n))if(p&&c.push({type:"lit",value:p}),null!==f){if(""===f)throw new Kn("Empty curly brackets `{}` are not allowed. A field name is required.");let n,l,p=f;if(f.endsWith("=")){const n=c[c.length-1]??null;null!==n&&"lit"===n.type?n.value+=f:c.push({type:"lit",value:f}),p=f.slice(0,-1)}try{[n]=this.getField(p,s)}catch(h){throw h instanceof Kn?h:new Kn(`Error getting field ${p}: ${String(h)}`)}try{l=this.formatField(n,m??"")}catch(h){throw new Kn(`Error formatting field ${p}: ${String(h)}`)}const[_,y]=this.cleanValue(p,l,o);d.push(...y);const E={type:"arg",value:_};m&&(E.spec=m),c.push(E)}return[c,d.length>0?{[Jn]:d}:{}]}};function C$1(n,s,o){try{const[l,c,d]=Qn.chunks(n,s,o);return[l.map((n=>n.value)).join(""),c,d]}catch(l){return l instanceof Kn?console.warn(`Formatting error: ${l.message}`):console.error("Unexpected error during formatting:",l),[n,{},n]}}function F$1(n,s){return n.length<=s?n:n.substring(0,s-3)+"..."}const hi=["password","passwd","mysql_pwd","secret","auth(?!ors?\\b)","credential","private[._ -]?key","api[._ -]?key","session","cookie","csrf","xsrf","jwt","ssn","social[._ -]?security","credit[._ -]?card"],mi=new Set(["code.filepath","code.function","code.lineno","db.plan","db.statement","exception.stacktrace","exception.type","http.method","http.route","http.scheme","http.status_code","http.target","http.url","logfire.json_schema","logfire.level_name","logfire.level_num","logfire.logger_name","logfire.msg","logfire.msg_template","logfire.null_args","logfire.package_versions","logfire.pending_parent_id","logfire.sample_rate","logfire.scrubbed","logfire.span_type","logfire.tags","schema.url","url.full","url.path","url.query"]);let vi=class{constructor(n,s){_$1(this,"SAFE_KEYS",Array.from(mi)),_$1(this,"_callback"),_$1(this,"_pattern");const o=[...hi,...n??[]];this._pattern=new RegExp(o.join("|"),"i"),this._callback=s}scrubValue(n,s){const o=[];return[this.scrub(n,s,o),o]}redact(n,s,o,l){if(this._callback){const l=this._callback({path:n,patternMatch:o,value:s});if(null!=l)return l}const c=o[0];return l.push({matched_substring:c,path:n}),`[Scrubbed due to '${c}']`}scrub(n,s,o){if("string"==typeof s){const l=s.match(this._pattern);if(l&&(0!==l.index||l[0].length!==s.length))try{const l=JSON.parse(s),c=this.scrub(n,l,o);return JSON.stringify(c)}catch{return this.redact(n,s,l,o)}return s}if(Array.isArray(s))return s.map(((s,l)=>this.scrub([...n,l],s,o)));if(s&&"object"==typeof s){const l={};for(const[c,d]of Object.entries(s))if(mi.has(c)||["boolean","number","undefined"].includes(typeof d)||null===d)l[c]=d;else{const s=c.match(this._pattern);if(s){const h=this.redact([...n,c],d,s,o);l[c]=h}else l[c]=this.scrub([...n,c],d,o)}return l}return s}},_i=class{constructor(){_$1(this,"SAFE_KEYS",[])}scrubValue(n,s){return[s,[]]}};function B$1(n){const s=yi.scrubber,o=Gn in n,[l,c]=o?[n,[]]:s.scrubValue([],n),d={},h=[],p={properties:{},type:"object"};c.length>0&&(Jn in l?l[Jn].push(...c):l[Jn]=c);for(const[f,m]of Object.entries(l))f!==Yn?null==m?h.push(f):"string"==typeof m||"number"==typeof m||"boolean"==typeof m?d[f]=m:m instanceof Date?d[f]=m.toISOString():Array.isArray(m)?(p.properties[f]={type:"array"},d[f]=JSON.stringify(m)):(p.properties[f]={type:"object"},d[f]=JSON.stringify(m)):d[f]=m;return h.length>0&&(d["logfire.null_args"]=h),Object.keys(p.properties).length>0&&(d["logfire.json_schema"]=JSON.stringify(p)),d}new _i;const yi={otelScope:Xn,scrubber:new vi,tracer:tr.getTracer(Xn)};function le$1(n){void 0!==n.scrubbing&&(yi.scrubber=function(n){return void 0!==n?!1===n?new _i:new vi(n.extraPatterns,n.callback):new vi}(n.scrubbing)),void 0!==n.otelScope&&(yi.otelScope=n.otelScope,yi.tracer=tr.getTracer(n.otelScope))}let wi=class extends RandomIdGenerator{constructor(){super(...arguments),_$1(this,"generateTraceId",(()=>function(){let n=BigInt(Date.now());const s=crypto.getRandomValues(new Uint8Array(10));for(const o of s)n<<=BigInt(8),n|=BigInt(o);return n}().toString(16).padStart(32,"0")))}};const ki=5,xi=9,Ei=13,Mi=17;function N$1(n,s={},{log:o,tags:l=[],level:c=xi,parentSpan:d}={}){const[h,p,f]=C$1(n,s,yi.scrubber),m=d?tr.setSpan(Bt.active(),d):Bt.active();return yi.tracer.startSpan(h,{attributes:{...B$1({...s,...p}),[Zn]:f,[Vn]:c,[Yn]:Array.from(new Set(l).values()),[Gn]:o?"log":"span"}},m)}function pe$1(n,...s){let o,l,c={},d=xi,h=[];1===s.length?(c=s[0].attributes??{},d=s[0].level??xi,h=s[0].tags??[],o=s[0].callback,l=s[0].parentSpan):(c=s[0],d=s[1].level??xi,h=s[1].tags??[],l=s[1].parentSpan,o=s[2]);const[p,f,m]=C$1(n,c,yi.scrubber),_=l?tr.setSpan(Bt.active(),l):Bt.active();return yi.tracer.startActiveSpan(p,{attributes:{...B$1({...c,...f}),[Zn]:m,[Vn]:d,[Yn]:Array.from(new Set(h).values())}},_,(n=>{const s=o(n);return"object"==typeof s&&null!==s&&"finally"in s&&"function"==typeof s.finally?s.finally((()=>{n.end()})):n.end(),s}))}function E$1(n,s={},o={}){N$1(n,s,{...o,log:!0}).end()}function ge$1(n,s={},o={}){E$1(n,s,{...o,level:ki})}function be$1(n,s={},o={}){E$1(n,s,{...o,level:xi})}function he$1(n,s={},o={}){E$1(n,s,{...o,level:Mi})}function Se$1(n,s={},o={}){E$1(n,s,{...o,level:Ei})}class OTLPExporterBase{constructor(n){__publicField(this,"_delegate"),this._delegate=n}export(n,s){this._delegate.export(n,s)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}}class OTLPExporterError extends Error{constructor(n,s,o){super(n),__publicField(this,"code"),__publicField(this,"name","OTLPExporterError"),__publicField(this,"data"),this.data=o,this.code=s}}function validateTimeoutMillis(n){if(Number.isFinite(n)&&n>0)return n;throw new Error(`Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '${n}')`)}class BoundedQueueExportPromiseHandler{constructor(n){__publicField(this,"_concurrencyLimit"),__publicField(this,"_sendingPromises",[]),this._concurrencyLimit=n}pushPromise(n){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(n);const popPromise=()=>{const s=this._sendingPromises.indexOf(n);this._sendingPromises.splice(s,1)};n.then(popPromise,popPromise)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}async awaitAll(){await Promise.all(this._sendingPromises)}}function createBoundedQueueExportPromiseHandler(n){return new BoundedQueueExportPromiseHandler(n.concurrencyLimit)}function createLoggingPartialSuccessResponseHandler(){return{handleResponse(n){null!=n&&function(n){return Object.prototype.hasOwnProperty.call(n,"partialSuccess")}(n)&&null!=n.partialSuccess&&0!==Object.keys(n.partialSuccess).length&&Ht.warn("Received Partial Success response:",JSON.stringify(n.partialSuccess))}}}class OTLPExportDelegate{constructor(n,s,o,l,c){__publicField(this,"_transport"),__publicField(this,"_serializer"),__publicField(this,"_responseHandler"),__publicField(this,"_promiseQueue"),__publicField(this,"_timeout"),__publicField(this,"_diagLogger"),this._transport=n,this._serializer=s,this._responseHandler=o,this._promiseQueue=l,this._timeout=c,this._diagLogger=Ht.createComponentLogger({namespace:"OTLPExportDelegate"})}export(n,s){if(this._diagLogger.debug("items to be sent",n),this._promiseQueue.hasReachedLimit())return void s({code:qr.FAILED,error:new Error("Concurrent export limit reached")});const o=this._serializer.serializeRequest(n);null!=o?this._promiseQueue.pushPromise(this._transport.send(o,this._timeout).then((n=>{if("success"!==n.status)"failure"===n.status&&n.error?s({code:qr.FAILED,error:n.error}):"retryable"===n.status?s({code:qr.FAILED,error:new OTLPExporterError("Export failed with retryable status")}):s({code:qr.FAILED,error:new OTLPExporterError("Export failed with unknown error")});else{if(null!=n.data)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(n.data))}catch(es){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",es,n.data)}s({code:qr.SUCCESS})}}),(n=>s({code:qr.FAILED,error:n})))):s({code:qr.FAILED,error:new Error("Nothing to send")})}forceFlush(){return this._promiseQueue.awaitAll()}async shutdown(){this._diagLogger.debug("shutdown started"),await this.forceFlush(),this._transport.shutdown()}}function createOtlpNetworkExportDelegate(n,s,o){return l={transport:o,serializer:s,promiseHandler:createBoundedQueueExportPromiseHandler(n)},c={timeout:n.timeoutMillis},new OTLPExportDelegate(l.transport,l.serializer,createLoggingPartialSuccessResponseHandler(),l.promiseHandler,c.timeout);var l,c}class RetryingTransport{constructor(n){__publicField(this,"_transport"),this._transport=n}retry(n,s,o){return new Promise(((l,c)=>{setTimeout((()=>{this._transport.send(n,s).then(l,c)}),o)}))}async send(n,s){const o=Date.now()+s;let l=await this._transport.send(n,s),c=5,d=1e3;for(;"retryable"===l.status&&c>0;){c--;const s=Math.max(Math.min(d,5e3)+(.4*Math.random()-.2),0);d*=1.5;const h=l.retryInMillis??s,p=o-Date.now();if(h>p)return l;l=await this.retry(n,p,h)}return l}shutdown(){return this._transport.shutdown()}}function parseRetryAfterToMills(n){if(null==n)return;const s=Number.parseInt(n,10);if(Number.isInteger(s))return s>0?1e3*s:-1;const o=new Date(n).getTime()-Date.now();return o>=0?o:0}class XhrTransport{constructor(n){__publicField(this,"_parameters"),this._parameters=n}send(n,s){return new Promise((o=>{const l=new XMLHttpRequest;l.timeout=s,l.open("POST",this._parameters.url);const c=this._parameters.headers();Object.entries(c).forEach((([n,s])=>{l.setRequestHeader(n,s)})),l.ontimeout=n=>{o({status:"failure",error:new Error("XHR request timed out")})},l.onreadystatechange=()=>{var n;l.status>=200&&l.status<=299?(Ht.debug("XHR success"),o({status:"success"})):l.status&&(n=l.status,[429,502,503,504].includes(n))?o({status:"retryable",retryInMillis:parseRetryAfterToMills(l.getResponseHeader("Retry-After"))}):0!==l.status&&o({status:"failure",error:new Error("XHR request failed with non-retryable status")})},l.onabort=()=>{o({status:"failure",error:new Error("XHR request aborted")})},l.onerror=()=>{o({status:"failure",error:new Error("XHR request errored")})},l.send(n)}))}shutdown(){}}function createOtlpXhrExportDelegate(n,s){return createOtlpNetworkExportDelegate(n,s,function(n){return new RetryingTransport(n.transport)}({transport:(o=n,new XhrTransport(o))}));var o}function intValue(n){return n>=48&&n<=57?n-48:n>=97&&n<=102?n-87:n-55}function hexToBinary(n){const s=new Uint8Array(n.length/2);let o=0;for(let l=0;l<n.length;l+=2){const c=intValue(n.charCodeAt(l)),d=intValue(n.charCodeAt(l+1));s[o++]=c<<4|d}return s}function hrTimeToNanos(n){const s=BigInt(1e9);return BigInt(n[0])*s+BigInt(n[1])}const Ri="undefined"!=typeof BigInt?function(n){return hrTimeToNanos(n).toString()}:function(n){return n[0]*zr+n[1]};function identity(n){return n}const Pi={encodeHrTime:function(n){const s=hrTimeToNanos(n);return o=s,{low:Number(BigInt.asUintN(32,o)),high:Number(BigInt.asUintN(32,o>>BigInt(32)))};var o},encodeSpanContext:hexToBinary,encodeOptionalSpanContext:function(n){if(void 0!==n)return hexToBinary(n)}};function createResource(n){return{attributes:toAttributes(n.attributes),droppedAttributesCount:0}}function toAttributes(n){return Object.keys(n).map((s=>toKeyValue(s,n[s])))}function toKeyValue(n,s){return{key:n,value:toAnyValue(s)}}function toAnyValue(n){const s=typeof n;return"string"===s?{stringValue:n}:"number"===s?Number.isInteger(n)?{intValue:n}:{doubleValue:n}:"boolean"===s?{boolValue:n}:n instanceof Uint8Array?{bytesValue:n}:Array.isArray(n)?{arrayValue:{values:n.map(toAnyValue)}}:"object"===s&&null!=n?{kvlistValue:{values:Object.entries(n).map((([n,s])=>toKeyValue(n,s)))}}:{}}function sdkSpanToOtlpSpan(n,s){const o=n.spanContext(),l=n.status,c=n.parentSpanContext?.spanId?s.encodeSpanContext(n.parentSpanContext?.spanId):void 0;return{traceId:s.encodeSpanContext(o.traceId),spanId:s.encodeSpanContext(o.spanId),parentSpanId:c,traceState:o.traceState?.serialize(),name:n.name,kind:null==n.kind?0:n.kind+1,startTimeUnixNano:s.encodeHrTime(n.startTime),endTimeUnixNano:s.encodeHrTime(n.endTime),attributes:toAttributes(n.attributes),droppedAttributesCount:n.droppedAttributesCount,events:n.events.map((n=>function(n,s){return{attributes:n.attributes?toAttributes(n.attributes):[],name:n.name,timeUnixNano:s.encodeHrTime(n.time),droppedAttributesCount:n.droppedAttributesCount||0}}(n,s))),droppedEventsCount:n.droppedEventsCount,status:{code:l.code,message:l.message},links:n.links.map((n=>function(n,s){return{attributes:n.attributes?toAttributes(n.attributes):[],spanId:s.encodeSpanContext(n.context.spanId),traceId:s.encodeSpanContext(n.context.traceId),traceState:n.context.traceState?.serialize(),droppedAttributesCount:n.droppedAttributesCount||0}}(n,s))),droppedLinksCount:n.droppedLinksCount}}function createExportTraceServiceRequest(n,s){const o=function(n){return void 0===n?Pi:{encodeHrTime:Ri,encodeSpanContext:identity,encodeOptionalSpanContext:identity}}(s);return{resourceSpans:spanRecordsToResourceSpans(n,o)}}function spanRecordsToResourceSpans(n,s){const o=function(n){const s=new Map;for(const o of n){let n=s.get(o.resource);n||(n=new Map,s.set(o.resource,n));const l=`${o.instrumentationScope.name}@${o.instrumentationScope.version||""}:${o.instrumentationScope.schemaUrl||""}`;let c=n.get(l);c||(c=[],n.set(l,c)),c.push(o)}return s}(n),l=[],c=o.entries();let d=c.next();for(;!d.done;){const[n,o]=d.value,p=[],f=o.values();let m=f.next();for(;!m.done;){const n=m.value;if(n.length>0){const o=n.map((n=>sdkSpanToOtlpSpan(n,s)));p.push({scope:(h=n[0].instrumentationScope,{name:h.name,version:h.version}),spans:o,schemaUrl:n[0].instrumentationScope.schemaUrl})}m=f.next()}const _={resource:createResource(n),scopeSpans:p,schemaUrl:void 0};l.push(_),d=c.next()}var h;return l}const Ni={serializeRequest:n=>{const s=createExportTraceServiceRequest(n,{});return(new TextEncoder).encode(JSON.stringify(s))},deserializeResponse:n=>{if(0===n.length)return{};const s=new TextDecoder;return JSON.parse(s.decode(n))}};var Fi=Object.defineProperty,i$1=(n,s,o)=>((n,s,o)=>s in n?Fi(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o)(n,"symbol"!=typeof s?s+"":s,o);const ji="target_xpath",qi={1:"trace",5:"debug",9:"info",10:"notice",13:"warning",17:"error",21:"fatal"},Vi={debug:"#E3E3E3",error:"#EA4335",fatal:"#EA4335",info:"#9EC1FB",notice:"#A5D490","on-debug":"#636262","on-error":"#FFEDE9","on-fatal":"#FFEDE9","on-info":"#063175","on-notice":"#222222","on-trace":"#636262","on-warning":"#613A0D",trace:"#E3E3E3",warning:"#EFB77A"};let Gi=class{export(n,s){this.sendSpans(n,s)}forceFlush(){return Promise.resolve()}shutdown(){return this.sendSpans([]),this.forceFlush()}exportInfo(n){var s;return{attributes:n.attributes,duration:hrTimeToMicroseconds(n.duration),events:n.events,id:n.spanContext().spanId,instrumentationScope:n.instrumentationScope,kind:n.kind,links:n.links,name:n.name,parentSpanContext:n.parentSpanContext,resource:{attributes:n.resource.attributes},status:n.status,timestamp:hrTimeToMicroseconds(n.startTime),traceId:n.spanContext().traceId,traceState:null==(s=n.spanContext().traceState)?void 0:s.serialize()}}sendSpans(n,s){for(const o of n){const n=qi[o.attributes["logfire.level_num"]]??"info",{attributes:s,name:l,...c}=this.exportInfo(o);console.log(`%cLogfire %c${n}`,"background-color: #E520E9; color: #FFFFFF",`background-color: ${Vi[`on-${n}`]}; color: ${Vi[n]}`,l,s,c)}s&&s({code:qr.SUCCESS})}},Yi=class{constructor(n,s){i$1(this,"console"),i$1(this,"wrapped"),s&&(this.console=new SimpleSpanProcessor(new Gi)),this.wrapped=n}async forceFlush(){var n;return await(null==(n=this.console)?void 0:n.forceFlush()),this.wrapped.forceFlush()}onEnd(n){var s;null==(s=this.console)||s.onEnd(n),this.wrapped.onEnd(n)}onStart(n,s){var o;if(zn in n.attributes){const s=new URL(n.attributes[zn]);Reflect.set(n,"name",`${n.name} ${s.pathname}`)}ji in n.attributes&&Reflect.set(n,"name",`${n.attributes.event_type??"unknown"} ${n.attributes[ji]??""}`),null==(o=this.console)||o.onStart(n,s),this.wrapped.onStart(n,s)}async shutdown(){var n;return await(null==(n=this.console)?void 0:n.shutdown()),this.wrapped.shutdown()}},Ji=class extends OTLPExporterBase{constructor(n,s){var o,l,c;super(createOtlpXhrExportDelegate({...(o={compression:n.compression,concurrencyLimit:n.concurrencyLimit,timeoutMillis:n.timeoutMillis},l={},c={timeoutMillis:1e4,concurrencyLimit:30,compression:"none"},{timeoutMillis:validateTimeoutMillis(o.timeoutMillis??l.timeoutMillis??c.timeoutMillis),concurrencyLimit:o.concurrencyLimit??l.concurrencyLimit??c.concurrencyLimit,compression:o.compression??l.compression??c.compression}),agentOptions:{keepAlive:!0},headers:()=>({"Content-Type":"application/json",...n.headers??{},...s?s():{}}),url:n.url??"http://localhost:4318/v1/traces"},Ni))}};function J$1(){return{}}function se$1(n){void 0!==n.diagLogLevel&&Ht.setLogger(new $,n.diagLogLevel),void 0!==n.scrubbing&&le$1({scrubbing:n.scrubbing});const s=resourceFromAttributes({[$n]:navigator.language,[Cr]:n.serviceName??"logfire-browser",[kr]:n.serviceVersion??"0.0.1",[Ir]:Er,[Tr]:"logfire-browser",...n.environment?{[jn]:n.environment}:{},[Ar]:"0.9.0",...navigator.userAgentData?{[Bn]:navigator.userAgentData.brands.map((n=>`${n.brand} ${n.version}`)),[Un]:navigator.userAgentData.mobile,[Hn]:navigator.userAgentData.platform}:{[Mr]:navigator.userAgent}});Ht.info("logfire-browser: starting");const o=new WebTracerProvider({idGenerator:new wi,resource:s,spanProcessors:[new Yi(new BatchSpanProcessor(new Ji({...n.traceExporterConfig,url:n.traceUrl},n.traceExporterHeaders??J$1),n.batchSpanProcessorConfig),!!n.console)]});o.register({contextManager:n.contextManager??new StackContextManager});const l=function(n){const s=n.tracerProvider||tr.getTracerProvider(),o=n.meterProvider||Vt.getMeterProvider(),l=n.loggerProvider||dr.getLoggerProvider(),c=n.instrumentations?.flat()??[];return function(n,s,o,l){for(let c=0,d=n.length;c<d;c++){const d=n[c];s&&d.setTracerProvider(s),o&&d.setMeterProvider(o),l&&d.setLoggerProvider&&d.setLoggerProvider(l),d.getConfig().enabled||d.enable()}}(c,s,o,l),()=>{!function(n){n.forEach((n=>n.disable()))}(c)}}({instrumentations:n.instrumentations??[],tracerProvider:o});return async()=>{Ht.info("logfire-browser: shutting down"),l(),await o.forceFlush(),await o.shutdown(),Ht.info("logfire-browser: shut down complete")}}const Xi=class _ConfirmitLogfireManager{constructor(){__publicField(this,"isInitialized",!1)}static getInstance(){return _ConfirmitLogfireManager.instance||(_ConfirmitLogfireManager.instance=new _ConfirmitLogfireManager),_ConfirmitLogfireManager.instance}initialize(n){if(this.isInitialized)return;const s={...{traceUrl:"https://logfire-api.pydantic.dev/v1/traces",serviceName:"confirmit-extension",serviceVersion:chrome?.runtime?.getManifest?.()?.version||"1.0.0",environment:"production",console:!1,scrubbing:!1,traceExporterHeaders:()=>({Authorization:"Bearer pylf_v1_us_ZX6yCHqCpNcX8pJ0N33dG9n6kqCF7fxplj05HDpg29KJ"})},...n};try{se$1(s);console.log("[Logfire] Real Logfire SDK initialized successfully")}catch(o){throw console.error("[Logfire] Failed to initialize real SDK:",o),o}this.setupAutoInstrumentation(),this.isInitialized=!0,be$1("Logfire initialized for Confirmit Extension",{service:s.serviceName,version:s.serviceVersion,environment:s.environment})}setupAutoInstrumentation(){this.instrumentFetch(),this.instrumentUserInteractions(),this.instrumentErrors(),this.instrumentPerformance()}instrumentFetch(){const n=window.fetch;window.fetch=async(s,o)=>{const l="string"==typeof s?s:s.toString(),c=o?.method||"GET";return await pe$1(`HTTP ${c}`,{attributes:{"http.method":c,"http.url":this.sanitizeUrl(l),"http.user_agent":navigator.userAgent,component:"fetch"},callback:async l=>{try{const c=await n(s,o);return l.setAttributes({"http.status_code":c.status,"http.response_size":c.headers.get("content-length")||0,"http.success":c.ok}),c}catch(c){throw l.recordException(c),c}}})}}instrumentUserInteractions(){document.addEventListener("click",(n=>{const s=n.target;be$1("User click",{"ui.element.tag":s.tagName.toLowerCase(),"ui.element.class":s.className,"ui.element.id":s.id,"ui.element.text":s.textContent?.slice(0,100),"ui.coordinates.x":n.clientX,"ui.coordinates.y":n.clientY})})),document.addEventListener("submit",(n=>{const s=n.target;be$1("User form submit",{"ui.form.action":s.action,"ui.form.method":s.method,"ui.form.id":s.id,"ui.form.class":s.className})}))}instrumentErrors(){window.addEventListener("error",(n=>{this.reportException(n.error||new Error(n.message),{"error.type":"uncaught_error","error.filename":n.filename,"error.line":n.lineno,"error.column":n.colno})})),window.addEventListener("unhandledrejection",(n=>{const s=n.reason instanceof Error?n.reason:new Error(String(n.reason));this.reportException(s,{"error.type":"unhandled_rejection"})}))}instrumentPerformance(){"memory"in performance&&setInterval((()=>{const n=performance.memory;ge$1("Performance memory",{"memory.used_js_heap_size":n.usedJSHeapSize,"memory.total_js_heap_size":n.totalJSHeapSize,"memory.js_heap_size_limit":n.jsHeapSizeLimit})}),3e4)}trackToolCall(n,s,o){return pe$1(`tool_call.${s}`,{attributes:{"tool_call.id":n,"tool_call.type":s,component:"tool_executor"},callback:async l=>{try{const c=await o();return l.setAttributes({"tool_call.success":!0,"tool_call.result_size":JSON.stringify(c).length}),be$1(`Tool call ${s} completed successfully`,{toolCallId:n,toolCallType:s,success:!0}),c}catch(c){throw l.recordException(c),l.setAttributes({"tool_call.success":!1,"tool_call.error":c.message}),he$1(`Tool call ${s} failed`,{toolCallId:n,toolCallType:s,component:"tool_executor",errorMessage:c.message}),c}}})}trackApiOperation(n,s,o,l){return pe$1(`api.${n}`,{attributes:{"api.endpoint":this.sanitizeUrl(s),"api.method":o,"api.operation":n,component:"api_client"},callback:async c=>{try{const d=await l();return c.setAttributes({"api.success":!0,"api.response_size":JSON.stringify(d).length}),be$1(`API ${n} completed successfully`,{operationName:n,endpoint:this.sanitizeUrl(s),method:o,success:!0}),d}catch(d){throw c.recordException(d),c.setAttributes({"api.success":!1,"api.error":d.message}),he$1(`API ${n} failed`,{operationName:n,endpoint:this.sanitizeUrl(s),method:o,component:"api_client",errorMessage:d.message}),d}}})}createSpan(n,s,o){return o?pe$1(n,{attributes:s,callback:async n=>{try{return await o()}catch(s){throw n.recordException(s),s}}}):N$1(n,s)}log(n,s,o){const l={"log.level":n,"log.timestamp":(new Date).toISOString(),...o};switch(n){case"debug":ge$1(s,l);break;case"info":be$1(s,l);break;case"warn":Se$1(s,l);break;case"error":he$1(s,l)}}reportException(n,s){const o=n instanceof Error?n:new Error(String(n)),l={"error.message":o.message,"error.name":o.name,"error.stack":o.stack,"error.timestamp":(new Date).toISOString(),"extension.version":chrome?.runtime?.getManifest?.()?.version||"unknown","browser.user_agent":navigator.userAgent,"browser.language":navigator.language,"page.url":window.location.href,"page.referrer":document.referrer,...s};he$1(`Exception: ${o.name}`,l);try{!function(n,s,o={}){const l=N$1(n,{[vr]:s.message??"error",[wr]:s.stack,...o},{level:Mi});l.recordException(s),l.setStatus({code:Tt.ERROR}),l.end()}(`${o.name}: ${o.message}`,o)}catch(c){console.error("[Logfire] Failed to report exception:",c)}}trackWebSocketConnection(n,s,o){const l={"websocket.url":this.sanitizeUrl(n),"websocket.status":s,"websocket.timestamp":(new Date).toISOString(),component:"websocket",...o};switch(s){case"connecting":be$1("WebSocket connecting",l);break;case"connected":be$1("WebSocket connected",l);break;case"closing":Se$1("WebSocket closing",l);break;case"closed":Se$1("WebSocket closed",l);break;case"error":he$1("WebSocket error",l)}}trackWebSocketMessageSent(n,s,o){be$1("WebSocket message sent",{"websocket.message.type":n,"websocket.message.direction":"outbound","websocket.message.size":JSON.stringify(s).length,"websocket.message.timestamp":(new Date).toISOString(),component:"websocket",...o})}trackWebSocketMessageReceived(n,s,o){ge$1("WebSocket message received",{"websocket.message.type":n,"websocket.message.direction":"inbound","websocket.message.size":JSON.stringify(s).length,"websocket.message.timestamp":(new Date).toISOString(),component:"websocket",...o})}trackWebSocketReconnection(n,s,o){Se$1("WebSocket reconnection attempt",{"websocket.reconnection.attempt":n,"websocket.reconnection.max_attempts":s,"websocket.reconnection.timestamp":(new Date).toISOString(),component:"websocket",...o})}trackWebSocketBatch(n,s,o){return pe$1("websocket.batch",{attributes:{"websocket.batch.id":n,"websocket.batch.tool_count":s.length,"websocket.batch.tool_types":s.map((n=>n.type)).join(", "),component:"websocket_batch"},callback:async l=>{try{const c=await o();return l.setAttributes({"websocket.batch.success":!0,"websocket.batch.completed_at":(new Date).toISOString()}),be$1("WebSocket batch completed",{batchId:n,toolCount:s.length,success:!0}),c}catch(c){throw l.recordException(c),l.setAttributes({"websocket.batch.success":!1,"websocket.batch.error":c.message}),he$1("WebSocket batch failed",{batchId:n,toolCount:s.length,errorMessage:c.message}),c}}})}trackWebSocketBatchProgress(n,s,o,l){ge$1("WebSocket batch progress",{"websocket.batch.id":n,"websocket.batch.completed":s,"websocket.batch.total":o,"websocket.batch.percentage":Math.round(s/o*100),"websocket.batch.current_tool.id":l.id,"websocket.batch.current_tool.type":l.type,"websocket.batch.current_tool.status":l.status,component:"websocket_batch"})}trackWebSocketAck(n,s,o,l){s?ge$1("WebSocket message acknowledged",{"websocket.ack.event_uid":n,"websocket.ack.duration_ms":o,"websocket.ack.status":"success",component:"websocket",...l}):Se$1("WebSocket message not acknowledged",{"websocket.ack.event_uid":n,"websocket.ack.status":"timeout",component:"websocket",...l})}sanitizeUrl(n){return n}};__publicField(Xi,"instance");const Ki=Xi.getInstance();function e(n,s,o,l,c,d,h){try{var p=n[d](h),f=p.value}catch(m){return void o(m)}p.done?s(f):Promise.resolve(f).then(l,c)}function t(n){return function(){var s=this,o=arguments;return new Promise((function(l,c){var d=n.apply(s,o);function a2(n){e(d,l,c,a2,l2,"next",n)}function l2(n){e(d,l,c,a2,l2,"throw",n)}a2(void 0)}))}}function r(){return r=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var l in o)({}).hasOwnProperty.call(o,l)&&(n[l]=o[l])}return n},r.apply(null,arguments)}function i(n,s){if(null==n)return{};var o={};for(var l in n)if({}.hasOwnProperty.call(n,l)){if(-1!==s.indexOf(l))continue;o[l]=n[l]}return o}var Qi,es,ts=["type"],rs=Object.defineProperty,a=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?rs(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d},ns=Object.defineProperty,u=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?ns(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d},is=((es=is||{})[es.Document=0]="Document",es[es.DocumentType=1]="DocumentType",es[es.Element=2]="Element",es[es.Text=3]="Text",es[es.CDATA=4]="CDATA",es[es.Comment=5]="Comment",es),ss={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},os={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},as={};function v(n){if(as[n])return as[n];var s,o,l,c=(s=n,((l=null==globalThis||null==(o=globalThis.Zone)||null==o.__symbol__?void 0:o.__symbol__(s))&&globalThis[l]?globalThis[l]:void 0)||globalThis[n]),d=c.prototype,h=n in ss?ss[n]:void 0,p=Boolean(h&&h.every((n=>{var s,o;return Boolean(null==(o=null==(s=Object.getOwnPropertyDescriptor(d,n))?void 0:s.get)?void 0:o.toString().includes("[native code]"))}))),f=n in os?os[n]:void 0,m=Boolean(f&&f.every((n=>{var s;return"function"==typeof d[n]&&(null==(s=d[n])?void 0:s.toString().includes("[native code]"))})));if(p&&m)return as[n]=c.prototype,c.prototype;try{var _=document.createElement("iframe");document.body.appendChild(_);var y=_.contentWindow;if(!y)return c.prototype;var E=y[n].prototype;return document.body.removeChild(_),E?as[n]=E:c.prototype}catch(s){return c.prototype}}var ls={};function g(n,s,o){var l,c=n+"."+String(o);if(ls[c])return ls[c].call(s);var d=v(n),h=null==(l=Object.getOwnPropertyDescriptor(d,o))?void 0:l.get;return h?(ls[c]=h,h.call(s)):s[o]}var y_childNodes=function(n){return g("Node",n,"childNodes")},y_parentNode=function(n){return g("Node",n,"parentNode")},y_parentElement=function(n){return g("Node",n,"parentElement")},y_textContent=function(n){return g("Node",n,"textContent")},y_host=function(n){return n&&"host"in n?g("ShadowRoot",n,"host"):null},y_shadowRoot=function(n){return n&&"shadowRoot"in n?g("Element",n,"shadowRoot"):null};function b(n){return n.nodeType===n.ELEMENT_NODE}function S(n){var s=n&&"host"in n&&"mode"in n&&y_host(n)||null;return Boolean(s&&"shadowRoot"in s&&y_shadowRoot(s)===n)}function w(n){return"[object ShadowRoot]"===Object.prototype.toString.call(n)}function C(n){try{var s=n.rules||n.cssRules;return s?((o=Array.from(s,(s=>I(s,n.href))).join("")).includes(" background-clip: text;")&&!o.includes(" -webkit-background-clip: text;")&&(o=o.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),o):null}catch(l){return null}var o}function I(n,s){if("styleSheet"in n){var o;try{o=C(n.styleSheet)||function(n){var{cssText:s}=n;if(s.split('"').length<3)return s;var o=["@import","url("+JSON.stringify(n.href)+")"];return""===n.layerName?o.push("layer"):n.layerName&&o.push("layer("+n.layerName+")"),n.supportsText&&o.push("supports("+n.supportsText+")"),n.media.length&&o.push(n.media.mediaText),o.join(" ")+";"}(n)}catch(d){o=n.cssText}return n.styleSheet.href?O(o,n.styleSheet.href):o}var l,c=n.cssText;return function(n){return"selectorText"in n}(n)&&n.selectorText.includes(":")&&(l=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,c=c.replace(l,"$1\\$2")),s?O(c,s):c}function k(n,s){return Array.from(n.styleSheets).find((n=>n.href===s))}let cs=class{constructor(){u(this,"idNodeMap",new Map),u(this,"nodeMetaMap",new WeakMap)}getId(n){var s;if(!n)return-1;var o=null==(s=this.getMeta(n))?void 0:s.id;return null!=o?o:-1}getNode(n){return this.idNodeMap.get(n)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(n){return this.nodeMetaMap.get(n)||null}removeNodeFromMap(n){var s=this.getId(n);this.idNodeMap.delete(s),n.childNodes&&n.childNodes.forEach((n=>this.removeNodeFromMap(n)))}has(n){return this.idNodeMap.has(n)}hasNode(n){return this.nodeMetaMap.has(n)}add(n,s){var o=s.id;this.idNodeMap.set(o,n),this.nodeMetaMap.set(n,s)}replace(n,s){var o=this.getNode(n);if(o){var l=this.nodeMetaMap.get(o);l&&this.nodeMetaMap.set(s,l)}this.idNodeMap.set(n,s)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function x(n){var{element:s,maskInputOptions:o,tagName:l,type:c,value:d,maskInputFn:h}=n,p=d||"",f=c&&T(c);return(o[l.toLowerCase()]||f&&o[f])&&(p=h?h(p,s):"*".repeat(p.length)),p}function T(n){return n.toLowerCase()}var us="__rrweb_original__";function R(n){var s=n.type;return n.hasAttribute("data-rr-is-password")?"password":s?T(s):null}function A(n,s){var o,l;try{l=new URL(n,null!=s?s:window.location.href)}catch(d){return null}var c=l.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(o=null==c?void 0:c[1])&&void 0!==o?o:null}var ds=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Cs=/^(?:[a-z+]+:)?\/\//i,Es=/^www\..*/i,Ms=/^(data:)([^,]*),(.*)/i;function O(n,s){return(n||"").replace(ds,((n,o,l,c,d,h)=>{var p,f=l||d||h,m=o||c||"";if(!f)return n;if(Cs.test(f)||Es.test(f))return"url("+m+f+m+")";if(Ms.test(f))return"url("+m+f+m+")";if("/"===f[0])return"url("+m+(((p=s).indexOf("//")>-1?p.split("/").slice(0,3).join("/"):p.split("/")[0]).split("?")[0]+f)+m+")";var _=s.split("/"),y=f.split("/");for(var E of(_.pop(),y))"."!==E&&(".."===E?_.pop():_.push(E));return"url("+m+_.join("/")+m+")"}))}var Os,Ps,Ls=1,Ns=new RegExp("[^a-z0-9-_:]");function W(){return Ls++}var Fs=/^[^ \t\n\r\u000c]+/,Ds=/^[, \t\n\r\u000c]+/,Us=new WeakMap;function j(n,s){return s&&""!==s.trim()?Y(n,s):s}function G(n){return Boolean("svg"===n.tagName||n.ownerSVGElement)}function Y(n,s){var o=Us.get(n);if(o||(o=n.createElement("a"),Us.set(n,o)),s){if(s.startsWith("blob:")||s.startsWith("data:"))return s}else s="";return o.setAttribute("href",s),o.href}function X(n,s,o,l){return l?"src"===o||"href"===o&&("use"!==s||"#"!==l[0])||"xlink:href"===o&&"#"!==l[0]?j(n,l):"background"!==o||"table"!==s&&"td"!==s&&"th"!==s?"srcset"===o?function(n,s){if(""===s.trim())return s;var o=0;function i3(n){var l,c=n.exec(s.substring(o));return c?(l=c[0],o+=l.length,l):""}for(var l=[];i3(Ds),!(o>=s.length);){var c=i3(Fs);if(","===c.slice(-1))c=j(n,c.substring(0,c.length-1)),l.push(c);else{var d="";c=j(n,c);for(var h=!1;;){var p=s.charAt(o);if(""===p){l.push((c+d).trim());break}if(h)")"===p&&(h=!1);else{if(","===p){o+=1,l.push((c+d).trim());break}"("===p&&(h=!0)}d+=p,o+=1}}}return l.join(", ")}(n,l):"style"===o?O(l,Y(n)):"object"===s&&"data"===o?j(n,l):l:j(n,l):l}function K(n,s,o){return("video"===n||"audio"===n)&&"autoplay"===s}function J(n,s,o){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return!!o&&J(y_parentNode(n),s,o);for(var l=n.classList.length;l--;){var c=n.classList[l];if(s.test(c))return!0}return!!o&&J(y_parentNode(n),s,o)}function Q(n,s,o,l){var c;if(b(n)){if(!y_childNodes(c=n).length)return!1}else{if(null===y_parentElement(n))return!1;c=y_parentElement(n)}try{if("string"==typeof s){if(l){if(c.closest("."+s))return!0}else if(c.classList.contains(s))return!0}else if(J(c,s,l))return!0;if(o)if(l){if(c.closest(o))return!0}else if(c.matches(o))return!0}catch(d){}return!1}function te(n){return null==n?"":n.toLowerCase()}function re(n,s){var{doc:o,mirror:l,blockClass:c,blockSelector:d,maskTextClass:h,maskTextSelector:p,skipChild:f=!1,inlineStylesheet:m=!0,maskInputOptions:_={},maskTextFn:y,maskInputFn:E,slimDOMOptions:M,dataURLOptions:P={},inlineImages:L=!1,recordCanvas:N=!1,onSerialize:F,onIframeLoad:D,iframeLoadTimeout:B=5e3,onStylesheetLoad:$,stylesheetLoadTimeout:U=5e3,keepIframeSrcFn:H=()=>!1,newlyAddedElement:z=!1}=s,{needsMask:q}=s,{preserveWhiteSpace:V=!0}=s;q||(q=Q(n,h,p,void 0===q));var Z,ee=function(n,s){var{doc:o,mirror:l,blockClass:c,blockSelector:d,needsMask:h,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:m,maskInputFn:_,dataURLOptions:y={},inlineImages:E,recordCanvas:M,keepIframeSrcFn:P,newlyAddedElement:L=!1}=s,N=function(n,s){if(s.hasNode(n)){var o=s.getId(n);return 1===o?void 0:o}}(o,l);switch(n.nodeType){case n.DOCUMENT_NODE:return"CSS1Compat"!==n.compatMode?{type:is.Document,childNodes:[],compatMode:n.compatMode}:{type:is.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:is.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:N};case n.ELEMENT_NODE:return function(n,s){for(var o,{doc:l,blockClass:c,blockSelector:d,inlineStylesheet:h,maskInputOptions:p={},maskInputFn:f,dataURLOptions:m={},inlineImages:_,recordCanvas:y,keepIframeSrcFn:E,newlyAddedElement:M=!1,rootId:P}=s,L=function(n,s,o){try{if("string"==typeof s){if(n.classList.contains(s))return!0}else for(var l=n.classList.length;l--;){var c=n.classList[l];if(s.test(c))return!0}if(o)return n.matches(o)}catch(d){}return!1}(n,c,d),N=function(n){if(n instanceof HTMLFormElement)return"form";var s=T(n.tagName);return Ns.test(s)?"div":s}(n),F={},D=n.attributes.length,B=0;B<D;B++){var $=n.attributes[B];K(N,$.name,$.value)||(F[$.name]=X(l,N,T($.name),$.value))}if("link"===N&&h){var U=null==(q=n)?void 0:q.href;if(U){var H=k(l,U);!H&&U.includes(".css")&&(H=k(l,window.location.origin+"/"+U.replace(window.location.href,"")));var z=null;H&&(z=C(H)),z&&(delete F.rel,delete F.href,F._cssText=z)}}var q;if("style"===N&&n.sheet&&!(n.innerText||y_textContent(n)||"").trim().length){var V=C(n.sheet);V&&(F._cssText=V)}if("input"===N||"textarea"===N||"select"===N){var Z=n.value,ee=n.checked;"radio"!==F.type&&"checkbox"!==F.type&&"submit"!==F.type&&"button"!==F.type&&Z?F.value=x({element:n,type:R(n),tagName:N,value:Z,maskInputOptions:p,maskInputFn:f}):ee&&(F.checked=ee)}if("option"===N&&(n.selected&&!p.select?F.selected=!0:delete F.selected),"dialog"===N&&n.open)try{F.rr_open_mode=n.matches("dialog:modal")?"modal":"non-modal"}catch(q){F.rr_open_mode="modal",F.ph_rr_could_not_detect_modal=!0}if("canvas"===N&&y)if("2d"===n.__context)(function(n){var s=n.getContext("2d");if(!s)return!0;for(var o=0;o<n.width;o+=50)for(var l=0;l<n.height;l+=50){var c=s.getImageData,d=us in c?c[us]:c;if(new Uint32Array(d.call(s,o,l,Math.min(50,n.width-o),Math.min(50,n.height-l)).data.buffer).some((n=>0!==n)))return!1}return!0})(n)||(F.rr_dataURL=n.toDataURL(m.type,m.quality));else if(!("__context"in n)){var ne=n.toDataURL(m.type,m.quality),ie=l.createElement("canvas");ie.width=n.width,ie.height=n.height,ne!==ie.toDataURL(m.type,m.quality)&&(F.rr_dataURL=ne)}if("img"===N&&_){Os||(Os=l.createElement("canvas"),Ps=Os.getContext("2d"));var se=n,oe=se.currentSrc||se.getAttribute("src")||"<unknown-src>",le=se.crossOrigin,U2=()=>{se.removeEventListener("load",U2);try{Os.width=se.naturalWidth,Os.height=se.naturalHeight,Ps.drawImage(se,0,0),F.rr_dataURL=Os.toDataURL(m.type,m.quality)}catch(q){if("anonymous"!==se.crossOrigin)return se.crossOrigin="anonymous",void(se.complete&&0!==se.naturalWidth?U2():se.addEventListener("load",U2));console.warn("Cannot inline img src="+oe+"! Error: "+q)}"anonymous"===se.crossOrigin&&(le?F.crossOrigin=le:se.removeAttribute("crossorigin"))};se.complete&&0!==se.naturalWidth?U2():se.addEventListener("load",U2)}if("audio"===N||"video"===N){var ce=F;ce.rr_mediaState=n.paused?"paused":"played",ce.rr_mediaCurrentTime=n.currentTime,ce.rr_mediaPlaybackRate=n.playbackRate,ce.rr_mediaMuted=n.muted,ce.rr_mediaLoop=n.loop,ce.rr_mediaVolume=n.volume}if(M||(n.scrollLeft&&(F.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(F.rr_scrollTop=n.scrollTop)),L){var{width:pe,height:fe}=n.getBoundingClientRect();F={class:F.class,rr_width:pe+"px",rr_height:fe+"px"}}"iframe"!==N||E(F.src)||(n.contentDocument||(F.rr_src=F.src),delete F.src);try{customElements.get(N)&&(o=!0)}catch(q){}return{type:is.Element,tagName:N,attributes:F,childNodes:[],isSVG:G(n)||void 0,needBlock:L,rootId:P,isCustom:o}}(n,{doc:o,blockClass:c,blockSelector:d,inlineStylesheet:p,maskInputOptions:f,maskInputFn:_,dataURLOptions:y,inlineImages:E,recordCanvas:M,keepIframeSrcFn:P,newlyAddedElement:L,rootId:N});case n.TEXT_NODE:return function(n,s){var o,{needsMask:l,maskTextFn:c,rootId:d}=s,h=y_parentNode(n),p=h&&h.tagName,f=y_textContent(n),m="STYLE"===p||void 0,_="SCRIPT"===p||void 0;if(m&&f){try{n.nextSibling||n.previousSibling||(null==(o=h.sheet)?void 0:o.cssRules)&&(f=C(h.sheet))}catch(y){console.warn("Cannot get CSS styles from text's parentNode. Error: "+y,n)}f=O(f,Y(s.doc))}return _&&(f="SCRIPT_PLACEHOLDER"),!m&&!_&&f&&l&&(f=c?c(f,y_parentElement(n)):f.replace(/[\S]/g,"*")),{type:is.Text,textContent:f||"",isStyle:m,rootId:d}}(n,{doc:o,needsMask:h,maskTextFn:m,rootId:N});case n.CDATA_SECTION_NODE:return{type:is.CDATA,textContent:"",rootId:N};case n.COMMENT_NODE:return{type:is.Comment,textContent:y_textContent(n)||"",rootId:N};default:return!1}}(n,{doc:o,mirror:l,blockClass:c,blockSelector:d,needsMask:q,inlineStylesheet:m,maskInputOptions:_,maskTextFn:y,maskInputFn:E,dataURLOptions:P,inlineImages:L,recordCanvas:N,keepIframeSrcFn:H,newlyAddedElement:z});if(!ee)return console.warn(n,"not serialized"),null;Z=l.hasNode(n)?l.getId(n):!function(n,s){if(s.comment&&n.type===is.Comment)return!0;if(n.type===is.Element){if(s.script&&("script"===n.tagName||"link"===n.tagName&&("preload"===n.attributes.rel||"modulepreload"===n.attributes.rel)&&"script"===n.attributes.as||"link"===n.tagName&&"prefetch"===n.attributes.rel&&"string"==typeof n.attributes.href&&"js"===A(n.attributes.href)))return!0;if(s.headFavicon&&("link"===n.tagName&&"shortcut icon"===n.attributes.rel||"meta"===n.tagName&&(te(n.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===te(n.attributes.name)||"icon"===te(n.attributes.rel)||"apple-touch-icon"===te(n.attributes.rel)||"shortcut icon"===te(n.attributes.rel))))return!0;if("meta"===n.tagName){if(s.headMetaDescKeywords&&te(n.attributes.name).match(/^description|keywords$/))return!0;if(s.headMetaSocial&&(te(n.attributes.property).match(/^(og|twitter|fb):/)||te(n.attributes.name).match(/^(og|twitter):/)||"pinterest"===te(n.attributes.name)))return!0;if(s.headMetaRobots&&("robots"===te(n.attributes.name)||"googlebot"===te(n.attributes.name)||"bingbot"===te(n.attributes.name)))return!0;if(s.headMetaHttpEquiv&&void 0!==n.attributes["http-equiv"])return!0;if(s.headMetaAuthorship&&("author"===te(n.attributes.name)||"generator"===te(n.attributes.name)||"framework"===te(n.attributes.name)||"publisher"===te(n.attributes.name)||"progid"===te(n.attributes.name)||te(n.attributes.property).match(/^article:/)||te(n.attributes.property).match(/^product:/)))return!0;if(s.headMetaVerification&&("google-site-verification"===te(n.attributes.name)||"yandex-verification"===te(n.attributes.name)||"csrf-token"===te(n.attributes.name)||"p:domain_verify"===te(n.attributes.name)||"verify-v1"===te(n.attributes.name)||"verification"===te(n.attributes.name)||"shopify-checkout-api-token"===te(n.attributes.name)))return!0}}return!1}(ee,M)&&(V||ee.type!==is.Text||ee.isStyle||ee.textContent.replace(/^\s+|\s+$/gm,"").length)?W():-2;var ne=Object.assign(ee,{id:Z});if(l.add(n,ne),-2===Z)return null;F&&F(n);var ie=!f;if(ne.type===is.Element){ie=ie&&!ne.needBlock,delete ne.needBlock;var se=y_shadowRoot(n);se&&w(se)&&(ne.isShadowHost=!0)}if((ne.type===is.Document||ne.type===is.Element)&&ie){M.headWhitespace&&ne.type===is.Element&&"head"===ne.tagName&&(V=!1);var oe={doc:o,mirror:l,blockClass:c,blockSelector:d,needsMask:q,maskTextClass:h,maskTextSelector:p,skipChild:f,inlineStylesheet:m,maskInputOptions:_,maskTextFn:y,maskInputFn:E,slimDOMOptions:M,dataURLOptions:P,inlineImages:L,recordCanvas:N,preserveWhiteSpace:V,onSerialize:F,onIframeLoad:D,iframeLoadTimeout:B,onStylesheetLoad:$,stylesheetLoadTimeout:U,keepIframeSrcFn:H};if(ne.type===is.Element&&"textarea"===ne.tagName&&void 0!==ne.attributes.value);else for(var le of Array.from(y_childNodes(n))){var ce=re(le,oe);ce&&ne.childNodes.push(ce)}var pe=null;if(b(n)&&(pe=y_shadowRoot(n)))for(var fe of Array.from(y_childNodes(pe))){var ge=re(fe,oe);ge&&(w(pe)&&(ge.isShadow=!0),ne.childNodes.push(ge))}}var be=y_parentNode(n);return be&&S(be)&&w(be)&&(ne.isShadow=!0),ne.type===is.Element&&"iframe"===ne.tagName&&function(n,s,o){var l=n.contentWindow;if(l){var c,d=!1;try{c=l.document.readyState}catch(f){return}if("complete"===c){var h="about:blank";if(l.location.href!==h||n.src===h||""===n.src)return setTimeout(s,0),n.addEventListener("load",s);n.addEventListener("load",s)}else{var p=setTimeout((()=>{d||(s(),d=!0)}),o);n.addEventListener("load",(()=>{clearTimeout(p),d=!0,s()}))}}}(n,(()=>{var s=n.contentDocument;if(s&&D){var o=re(s,{doc:s,mirror:l,blockClass:c,blockSelector:d,needsMask:q,maskTextClass:h,maskTextSelector:p,skipChild:!1,inlineStylesheet:m,maskInputOptions:_,maskTextFn:y,maskInputFn:E,slimDOMOptions:M,dataURLOptions:P,inlineImages:L,recordCanvas:N,preserveWhiteSpace:V,onSerialize:F,onIframeLoad:D,iframeLoadTimeout:B,onStylesheetLoad:$,stylesheetLoadTimeout:U,keepIframeSrcFn:H});o&&D(n,o)}}),B),ne.type===is.Element&&"link"===ne.tagName&&"string"==typeof ne.attributes.rel&&("stylesheet"===ne.attributes.rel||"preload"===ne.attributes.rel&&"string"==typeof ne.attributes.href&&"css"===A(ne.attributes.href))&&function(n,s,o){var l,c=!1;try{l=n.sheet}catch(h){return}if(!l){var d=setTimeout((()=>{c||(s(),c=!0)}),o);n.addEventListener("load",(()=>{clearTimeout(d),c=!0,s()}))}}(n,(()=>{if($){var s=re(n,{doc:o,mirror:l,blockClass:c,blockSelector:d,needsMask:q,maskTextClass:h,maskTextSelector:p,skipChild:!1,inlineStylesheet:m,maskInputOptions:_,maskTextFn:y,maskInputFn:E,slimDOMOptions:M,dataURLOptions:P,inlineImages:L,recordCanvas:N,preserveWhiteSpace:V,onSerialize:F,onIframeLoad:D,iframeLoadTimeout:B,onStylesheetLoad:$,stylesheetLoadTimeout:U,keepIframeSrcFn:H});s&&$(n,s)}}),U),ne}let Gs=class e2{constructor(){__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}get childNodes(){for(var n=[],s=this.firstChild;s;)n.push(s),s=s.nextSibling;return n}contains(n){if(!(n instanceof e2))return!1;if(n.ownerDocument!==this.ownerDocument)return!1;if(n===this)return!0;for(;n.parentNode;){if(n.parentNode===this)return!0;n=n.parentNode}return!1}appendChild(n){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(n,s){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(n){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};var Zs={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},ro={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},oo={};function ae(n){if(oo[n])return oo[n];var s,o,l,c=(s=n,((l=null==globalThis||null==(o=globalThis.Zone)||null==o.__symbol__?void 0:o.__symbol__(s))&&globalThis[l]?globalThis[l]:void 0)||globalThis[n]),d=c.prototype,h=n in Zs?Zs[n]:void 0,p=Boolean(h&&h.every((n=>{var s,o;return Boolean(null==(o=null==(s=Object.getOwnPropertyDescriptor(d,n))?void 0:s.get)?void 0:o.toString().includes("[native code]"))}))),f=n in ro?ro[n]:void 0,m=Boolean(f&&f.every((n=>{var s;return"function"==typeof d[n]&&(null==(s=d[n])?void 0:s.toString().includes("[native code]"))})));if(p&&m)return oo[n]=c.prototype,c.prototype;try{var _=document.createElement("iframe");document.body.appendChild(_);var y=_.contentWindow;if(!y)return c.prototype;var E=y[n].prototype;return document.body.removeChild(_),E?oo[n]=E:d}catch(s){return d}}var ao={};function ue(n,s,o){var l,c=n+"."+String(o);if(ao[c])return ao[c].call(s);var d=ae(n),h=null==(l=Object.getOwnPropertyDescriptor(d,o))?void 0:l.get;return h?(ao[c]=h,h.call(s)):s[o]}var co={};function de(n,s,o){var l=n+"."+String(o);if(co[l])return co[l].bind(s);var c=ae(n)[o];return"function"!=typeof c?s[o]:(co[l]=c,c.bind(s))}function he(){return ae("MutationObserver").constructor}var pe_childNodes=function(n){return ue("Node",n,"childNodes")},pe_parentNode=function(n){return ue("Node",n,"parentNode")},pe_parentElement=function(n){return ue("Node",n,"parentElement")},pe_textContent=function(n){return ue("Node",n,"textContent")},pe_contains=function(n,s){return de("Node",n,"contains")(s)},pe_getRootNode=function(n){return de("Node",n,"getRootNode")()},pe_host=function(n){return n&&"host"in n?ue("ShadowRoot",n,"host"):null},pe_shadowRoot=function(n){return n&&"shadowRoot"in n?ue("Element",n,"shadowRoot"):null};function ve(n,s,o){void 0===o&&(o=document);var l={capture:!0,passive:!0};return o.addEventListener(n,s,l),()=>o.removeEventListener(n,s,l)}var ho="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",po={map:{},getId:()=>(console.error(ho),-1),getNode:()=>(console.error(ho),null),removeNodeFromMap(){console.error(ho)},has:()=>(console.error(ho),!1),reset(){console.error(ho)}};function _e(n,s,o){void 0===o&&(o={});var l=null,c=0;return function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];var f=Date.now();c||!1!==o.leading||(c=f);var m=s-(f-c),_=this;m<=0||m>s?(l&&(clearTimeout(l),l=null),c=f,n.apply(_,h)):l||!1===o.trailing||(l=setTimeout((()=>{c=!1===o.leading?0:Date.now(),l=null,n.apply(_,h)}),m))}}function me(n,s,o,l,c){void 0===c&&(c=window);var d=c.Object.getOwnPropertyDescriptor(n,s);return c.Object.defineProperty(n,s,l?o:{set(n){setTimeout((()=>{o.set.call(this,n)}),0),d&&d.set&&d.set.call(this,n)}}),()=>me(n,s,d||{},!0)}function ye(n,s,o){try{if(!(s in n))return()=>{};var l=n[s],c=o(l);return"function"==typeof c&&(c.prototype=c.prototype||{},Object.defineProperties(c,{__rrweb_original__:{enumerable:!1,value:l}})),n[s]=c,()=>{n[s]=l}}catch(d){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(po=new Proxy(po,{get:(n,s,o)=>("map"===s&&console.error(ho),Reflect.get(n,s,o))}));var fo=Date.now;function Se(n){var s,o,l,c,d=n.document;return{left:d.scrollingElement?d.scrollingElement.scrollLeft:void 0!==n.pageXOffset?n.pageXOffset:d.documentElement.scrollLeft||(null==d?void 0:d.body)&&(null==(s=pe_parentElement(d.body))?void 0:s.scrollLeft)||(null==(o=null==d?void 0:d.body)?void 0:o.scrollLeft)||0,top:d.scrollingElement?d.scrollingElement.scrollTop:void 0!==n.pageYOffset?n.pageYOffset:(null==d?void 0:d.documentElement.scrollTop)||(null==d?void 0:d.body)&&(null==(l=pe_parentElement(d.body))?void 0:l.scrollTop)||(null==(c=null==d?void 0:d.body)?void 0:c.scrollTop)||0}}function we(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Ce(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Ie(n){return n?n.nodeType===n.ELEMENT_NODE?n:pe_parentElement(n):null}function ke(n,s,o,l){if(!n)return!1;var c=Ie(n);if(!c)return!1;try{if("string"==typeof s){if(c.classList.contains(s))return!0;if(l&&null!==c.closest("."+s))return!0}else if(J(c,s,l))return!0}catch(d){}if(o){if(c.matches(o))return!0;if(l&&null!==c.closest(o))return!0}return!1}function Ee(n,s,o){return!("TITLE"!==n.tagName||!o.headTitleMutations)||-2===s.getId(n)}function xe(n,s){if(S(n))return!1;var o=s.getId(n);if(!s.has(o))return!0;var l=pe_parentNode(n);return(!l||l.nodeType!==n.DOCUMENT_NODE)&&(!l||xe(l,s))}function Te(n){return Boolean(n.changedTouches)}function Me(n,s){return Boolean("IFRAME"===n.nodeName&&s.getMeta(n))}function Re(n,s){return Boolean("LINK"===n.nodeName&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&"stylesheet"===n.getAttribute("rel")&&s.getMeta(n))}function Ae(n){return!!n&&(n instanceof Gs&&"shadowRoot"in n?Boolean(n.shadowRoot):Boolean(pe_shadowRoot(n)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(fo=()=>(new Date).getTime());let go=class{constructor(){a(this,"id",1),a(this,"styleIDMap",new WeakMap),a(this,"idStyleMap",new Map)}getId(n){var s;return null!==(s=this.styleIDMap.get(n))&&void 0!==s?s:-1}has(n){return this.styleIDMap.has(n)}add(n,s){return this.has(n)?this.getId(n):(o=void 0===s?this.id++:s,this.styleIDMap.set(n,o),this.idStyleMap.set(o,n),o);var o}getStyle(n){return this.idStyleMap.get(n)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Pe(n){var s,o=null;return"getRootNode"in n&&(null==(s=pe_getRootNode(n))?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&pe_host(pe_getRootNode(n))&&(o=pe_host(pe_getRootNode(n))),o}function Le(n){var s=n.ownerDocument;return!!s&&(pe_contains(s,n)||function(n){var s=n.ownerDocument;if(!s)return!1;var o=function(n){for(var s,o=n;s=Pe(o);)o=s;return o}(n);return pe_contains(s,o)}(n))}var mo=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(mo||{}),vo=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))(vo||{}),_o=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(_o||{}),yo=(n=>(n[n.Mouse=0]="Mouse",n[n.Pen=1]="Pen",n[n.Touch=2]="Touch",n))(yo||{}),bo=(n=>(n[n["2D"]=0]="2D",n[n.WebGL=1]="WebGL",n[n.WebGL2=2]="WebGL2",n))(bo||{}),wo=(n=>(n[n.Play=0]="Play",n[n.Pause=1]="Pause",n[n.Seeked=2]="Seeked",n[n.VolumeChange=3]="VolumeChange",n[n.RateChange=4]="RateChange",n))(wo||{});function $e(n){return"__ln"in n}class We{constructor(){a(this,"length",0),a(this,"head",null),a(this,"tail",null)}get(n){if(n>=this.length)throw new Error("Position outside of list range");for(var s=this.head,o=0;o<n;o++)s=(null==s?void 0:s.next)||null;return s}addNode(n){var s={value:n,previous:null,next:null};if(n.__ln=s,n.previousSibling&&$e(n.previousSibling)){var o=n.previousSibling.__ln.next;s.next=o,s.previous=n.previousSibling.__ln,n.previousSibling.__ln.next=s,o&&(o.previous=s)}else if(n.nextSibling&&$e(n.nextSibling)&&n.nextSibling.__ln.previous){var l=n.nextSibling.__ln.previous;s.previous=l,s.next=n.nextSibling.__ln,n.nextSibling.__ln.previous=s,l&&(l.next=s)}else this.head&&(this.head.previous=s),s.next=this.head,this.head=s;null===s.next&&(this.tail=s),this.length++}removeNode(n){var s=n.__ln;this.head&&(s.previous?(s.previous.next=s.next,s.next?s.next.previous=s.previous:this.tail=s.previous):(this.head=s.next,this.head?this.head.previous=null:this.tail=null),n.__ln&&delete n.__ln,this.length--)}}var So,Ze=(n,s)=>n+"@"+s;class ze{constructor(){a(this,"frozen",!1),a(this,"locked",!1),a(this,"texts",[]),a(this,"attributes",[]),a(this,"attributeMap",new WeakMap),a(this,"removes",[]),a(this,"mapRemoves",[]),a(this,"movedMap",{}),a(this,"addedSet",new Set),a(this,"movedSet",new Set),a(this,"droppedSet",new Set),a(this,"mutationCb"),a(this,"blockClass"),a(this,"blockSelector"),a(this,"maskTextClass"),a(this,"maskTextSelector"),a(this,"inlineStylesheet"),a(this,"maskInputOptions"),a(this,"maskTextFn"),a(this,"maskInputFn"),a(this,"keepIframeSrcFn"),a(this,"recordCanvas"),a(this,"inlineImages"),a(this,"slimDOMOptions"),a(this,"dataURLOptions"),a(this,"doc"),a(this,"mirror"),a(this,"iframeManager"),a(this,"stylesheetManager"),a(this,"shadowDomManager"),a(this,"canvasManager"),a(this,"processedNodeManager"),a(this,"unattachedDoc"),a(this,"processMutations",(n=>{n.forEach(this.processMutation),this.emit()})),a(this,"emit",(()=>{if(!this.frozen&&!this.locked){for(var n=[],s=new Set,o=new We,i2=n=>{for(var s=n,o=-2;-2===o;)o=(s=s&&s.nextSibling)&&this.mirror.getId(s);return o},n2=l=>{var c=pe_parentNode(l);if(c&&Le(l)&&"TEXTAREA"!==c.tagName){var d=S(c)?this.mirror.getId(Pe(l)):this.mirror.getId(c),h=i2(l);if(-1===d||-1===h)return o.addNode(l);var p=re(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:n=>{Me(n,this.mirror)&&this.iframeManager.addIframe(n),Re(n,this.mirror)&&this.stylesheetManager.trackLinkElement(n),Ae(l)&&this.shadowDomManager.addShadowRoot(pe_shadowRoot(l),this.doc)},onIframeLoad:(n,s)=>{this.iframeManager.attachIframe(n,s),this.shadowDomManager.observeAttachShadow(n)},onStylesheetLoad:(n,s)=>{this.stylesheetManager.attachLinkElement(n,s)}});p&&(n.push({parentId:d,nextId:h,node:p}),s.add(p.id))}};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(var l of this.movedSet)Ge(this.removes,l,this.mirror)&&!this.movedSet.has(pe_parentNode(l))||n2(l);for(var c of this.addedSet)Ye(this.droppedSet,c)||Ge(this.removes,c,this.mirror)?Ye(this.movedSet,c)?n2(c):this.droppedSet.add(c):n2(c);for(var d=null;o.length;){var h=null;if(d){var p=this.mirror.getId(pe_parentNode(d.value)),f=i2(d.value);-1!==p&&-1!==f&&(h=d)}if(!h)for(var m=o.tail;m;){var _=m;if(m=m.previous,_){var y=this.mirror.getId(pe_parentNode(_.value));if(-1===i2(_.value))continue;if(-1!==y){h=_;break}var E=_.value,M=pe_parentNode(E);if(M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var P=pe_host(M);if(-1!==this.mirror.getId(P)){h=_;break}}}}if(!h){for(;o.head;)o.removeNode(o.head.value);break}d=h.previous,o.removeNode(h.value),n2(h.value)}var L={texts:this.texts.map((n=>{var s=n.node,o=pe_parentNode(s);return o&&"TEXTAREA"===o.tagName&&this.genTextAreaValueMutation(o),{id:this.mirror.getId(s),value:n.value}})).filter((n=>!s.has(n.id))).filter((n=>this.mirror.has(n.id))),attributes:this.attributes.map((n=>{var{attributes:s}=n;if("string"==typeof s.style){var o=JSON.stringify(n.styleDiff),l=JSON.stringify(n._unchangedStyles);o.length<s.style.length&&(o+l).split("var(").length===s.style.split("var(").length&&(s.style=n.styleDiff)}return{id:this.mirror.getId(n.node),attributes:s}})).filter((n=>!s.has(n.id))).filter((n=>this.mirror.has(n.id))),removes:this.removes,adds:n};(L.texts.length||L.attributes.length||L.removes.length||L.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(L))}})),a(this,"genTextAreaValueMutation",(n=>{var s=this.attributeMap.get(n);s||(s={node:n,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(n,s)),s.attributes.value=Array.from(pe_childNodes(n),(n=>pe_textContent(n)||"")).join("")})),a(this,"processMutation",(n=>{if(!Ee(n.target,this.mirror,this.slimDOMOptions))switch(n.type){case"characterData":var s=pe_textContent(n.target);ke(n.target,this.blockClass,this.blockSelector,!1)||s===n.oldValue||this.texts.push({value:Q(n.target,this.maskTextClass,this.maskTextSelector,!0)&&s?this.maskTextFn?this.maskTextFn(s,Ie(n.target)):s.replace(/[\S]/g,"*"):s,node:n.target});break;case"attributes":var o=n.target,l=n.attributeName,c=n.target.getAttribute(l);if("value"===l){var d=R(o);c=x({element:o,maskInputOptions:this.maskInputOptions,tagName:o.tagName,type:d,value:c,maskInputFn:this.maskInputFn})}if(ke(n.target,this.blockClass,this.blockSelector,!1)||c===n.oldValue)return;var h=this.attributeMap.get(n.target);if("IFRAME"===o.tagName&&"src"===l&&!this.keepIframeSrcFn(c)){if(o.contentDocument)return;l="rr_src"}if(h||(h={node:n.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(h),this.attributeMap.set(n.target,h)),"type"===l&&"INPUT"===o.tagName&&"password"===(n.oldValue||"").toLowerCase()&&o.setAttribute("data-rr-is-password","true"),!K(o.tagName,l))if(h.attributes[l]=X(this.doc,T(o.tagName),T(l),c),"style"===l){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(E){this.unattachedDoc=this.doc}var p=this.unattachedDoc.createElement("span");for(var f of(n.oldValue&&p.setAttribute("style",n.oldValue),Array.from(o.style))){var m=o.style.getPropertyValue(f),_=o.style.getPropertyPriority(f);m!==p.style.getPropertyValue(f)||_!==p.style.getPropertyPriority(f)?h.styleDiff[f]=""===_?m:[m,_]:h._unchangedStyles[f]=[m,_]}for(var y of Array.from(p.style))""===o.style.getPropertyValue(y)&&(h.styleDiff[y]=!1)}else"open"===l&&"DIALOG"===o.tagName&&(o.matches("dialog:modal")?h.attributes.rr_open_mode="modal":h.attributes.rr_open_mode="non-modal");break;case"childList":if(ke(n.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===n.target.tagName)return void this.genTextAreaValueMutation(n.target);n.addedNodes.forEach((s=>this.genAdds(s,n.target))),n.removedNodes.forEach((s=>{var o,l=this.mirror.getId(s),c=S(n.target)?this.mirror.getId(pe_host(n.target)):this.mirror.getId(n.target);ke(n.target,this.blockClass,this.blockSelector,!1)||Ee(s,this.mirror,this.slimDOMOptions)||(o=s,-1===this.mirror.getId(o))||(this.addedSet.has(s)?(je(this.addedSet,s),this.droppedSet.add(s)):this.addedSet.has(n.target)&&-1===l||xe(n.target,this.mirror)||(this.movedSet.has(s)&&this.movedMap[Ze(l,c)]?je(this.movedSet,s):this.removes.push({parentId:c,id:l,isShadow:!(!S(n.target)||!w(n.target))||void 0})),this.mapRemoves.push(s))}))}})),a(this,"genAdds",((n,s)=>{if(!this.processedNodeManager.inOtherBuffer(n,this)&&!this.addedSet.has(n)&&!this.movedSet.has(n)){if(this.mirror.hasNode(n)){if(Ee(n,this.mirror,this.slimDOMOptions))return;this.movedSet.add(n);var o=null;s&&this.mirror.hasNode(s)&&(o=this.mirror.getId(s)),o&&-1!==o&&(this.movedMap[Ze(this.mirror.getId(n),o)]=!0)}else this.addedSet.add(n),this.droppedSet.delete(n);ke(n,this.blockClass,this.blockSelector,!1)||(pe_childNodes(n).forEach((n=>this.genAdds(n))),Ae(n)&&pe_childNodes(pe_shadowRoot(n)).forEach((s=>{this.processedNodeManager.add(s,this),this.genAdds(s,n)})))}}))}init(n){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((s=>{this[s]=n[s]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function je(n,s){n.delete(s),pe_childNodes(s).forEach((s=>je(n,s)))}function Ge(n,s,o){return 0!==n.length&&function(n,s,o){for(var l,c=pe_parentNode(s),s2=function(){var s=o.getId(c);if(n.some((n=>n.id===s)))return{v:!0};c=pe_parentNode(c)};c;)if(l=s2())return l.v;return!1}(n,s,o)}function Ye(n,s){return 0!==n.size&&Xe(n,s)}function Xe(n,s){var o=pe_parentNode(s);return!!o&&(!!n.has(o)||Xe(n,o))}var Ke=n=>So?function(){try{return n(...arguments)}catch(s){if(So&&!0===So(s))return;throw s}}:n,jo=[];function Qe(n){try{if("composedPath"in n){var s=n.composedPath();if(s.length)return s[0]}else if("path"in n&&n.path.length)return n.path[0]}catch(o){}return n&&n.target}function et(n,s){var o=new ze;jo.push(o),o.init(n);var l=new(he())(Ke(o.processMutations.bind(o)));return l.observe(s,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),l}function rt(n){var{scrollCb:s,doc:o,mirror:l,blockClass:c,blockSelector:d,sampling:h}=n;return ve("scroll",Ke(_e(Ke((n=>{var h=Qe(n);if(h&&!ke(h,c,d,!0)){var p=l.getId(h);if(h===o&&o.defaultView){var f=Se(o.defaultView);s({id:p,x:f.left,y:f.top})}else s({id:p,x:h.scrollLeft,y:h.scrollTop})}})),h.scroll||100)),o)}var zo=["INPUT","TEXTAREA","SELECT"],Go=new WeakMap;function st(n){return function(n,s){if(ut("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||ut("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||ut("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||ut("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){var o=Array.from(n.parentRule.cssRules).indexOf(n);s.unshift(o)}else if(n.parentStyleSheet){var l=Array.from(n.parentStyleSheet.cssRules).indexOf(n);s.unshift(l)}return s}(n,[])}function ot(n,s,o){var l,c;return n?(n.ownerNode?l=s.getId(n.ownerNode):c=o.getId(n),{styleId:c,id:l}):{}}function at(n,s){var o,l,c,d,{mirror:h,stylesheetManager:p}=n;d="#document"===s.nodeName?h.getId(s):h.getId(pe_host(s));var f="#document"===s.nodeName?null==(o=s.defaultView)?void 0:o.Document:null==(c=null==(l=s.ownerDocument)?void 0:l.defaultView)?void 0:c.ShadowRoot,m=(null==f?void 0:f.prototype)?Object.getOwnPropertyDescriptor(null==f?void 0:f.prototype,"adoptedStyleSheets"):void 0;return null!==d&&-1!==d&&f&&m?(Object.defineProperty(s,"adoptedStyleSheets",{configurable:m.configurable,enumerable:m.enumerable,get(){var n;return null==(n=m.get)?void 0:n.call(this)},set(n){var s,o=null==(s=m.set)?void 0:s.call(this,n);if(null!==d&&-1!==d)try{p.adoptStyleSheets(n,d)}catch(l){}return o}}),Ke((()=>{Object.defineProperty(s,"adoptedStyleSheets",{configurable:m.configurable,enumerable:m.enumerable,get:m.get,set:m.set})}))):()=>{}}function lt(n,s){void 0===s&&(s={});var o,l=n.doc.defaultView;if(!l)return()=>{};!function(n,s){var{mutationCb:o,mousemoveCb:l,mouseInteractionCb:c,scrollCb:d,viewportResizeCb:h,inputCb:p,mediaInteractionCb:f,styleSheetRuleCb:m,styleDeclarationCb:_,canvasMutationCb:y,fontCb:E,selectionCb:M,customElementCb:P}=n;n.mutationCb=function(){s.mutation&&s.mutation(...arguments),o(...arguments)},n.mousemoveCb=function(){s.mousemove&&s.mousemove(...arguments),l(...arguments)},n.mouseInteractionCb=function(){s.mouseInteraction&&s.mouseInteraction(...arguments),c(...arguments)},n.scrollCb=function(){s.scroll&&s.scroll(...arguments),d(...arguments)},n.viewportResizeCb=function(){s.viewportResize&&s.viewportResize(...arguments),h(...arguments)},n.inputCb=function(){s.input&&s.input(...arguments),p(...arguments)},n.mediaInteractionCb=function(){s.mediaInteaction&&s.mediaInteaction(...arguments),f(...arguments)},n.styleSheetRuleCb=function(){s.styleSheetRule&&s.styleSheetRule(...arguments),m(...arguments)},n.styleDeclarationCb=function(){s.styleDeclaration&&s.styleDeclaration(...arguments),_(...arguments)},n.canvasMutationCb=function(){s.canvasMutation&&s.canvasMutation(...arguments),y(...arguments)},n.fontCb=function(){s.font&&s.font(...arguments),E(...arguments)},n.selectionCb=function(){s.selection&&s.selection(...arguments),M(...arguments)},n.customElementCb=function(){s.customElement&&s.customElement(...arguments),P(...arguments)}}(n,s),n.recordDOM&&(o=et(n,n.doc));var c=function(n){var{mousemoveCb:s,sampling:o,doc:l,mirror:c}=n;if(!1===o.mousemove)return()=>{};var d,h="number"==typeof o.mousemove?o.mousemove:50,p="number"==typeof o.mousemoveCallback?o.mousemoveCallback:500,f=[],m=_e(Ke((n=>{var o=Date.now()-d;s(f.map((n=>(n.timeOffset-=o,n))),n),f=[],d=null})),p),_=Ke(_e(Ke((n=>{var s=Qe(n),{clientX:o,clientY:l}=Te(n)?n.changedTouches[0]:n;d||(d=fo()),f.push({x:o,y:l,id:c.getId(s),timeOffset:fo()-d}),m("undefined"!=typeof DragEvent&&n instanceof DragEvent?vo.Drag:n instanceof MouseEvent?vo.MouseMove:vo.TouchMove)})),h,{trailing:!1})),y=[ve("mousemove",_,l),ve("touchmove",_,l),ve("drag",_,l)];return Ke((()=>{y.forEach((n=>n()))}))}(n),d=function(n){var{mouseInteractionCb:s,doc:o,mirror:l,blockClass:c,blockSelector:d,sampling:h}=n;if(!1===h.mouseInteraction)return()=>{};var p=!0===h.mouseInteraction||void 0===h.mouseInteraction?{}:h.mouseInteraction,f=[],m=null;return Object.keys(_o).filter((n=>Number.isNaN(Number(n))&&!n.endsWith("_Departed")&&!1!==p[n])).forEach((n=>{var h=T(n),p=(n=>o=>{var h=Qe(o);if(!ke(h,c,d,!0)){var p=null,f=n;if("pointerType"in o){switch(o.pointerType){case"mouse":p=yo.Mouse;break;case"touch":p=yo.Touch;break;case"pen":p=yo.Pen}p===yo.Touch?_o[n]===_o.MouseDown?f="TouchStart":_o[n]===_o.MouseUp&&(f="TouchEnd"):yo.Pen}else Te(o)&&(p=yo.Touch);null!==p?(m=p,(f.startsWith("Touch")&&p===yo.Touch||f.startsWith("Mouse")&&p===yo.Mouse)&&(p=null)):_o[n]===_o.Click&&(p=m,m=null);var _=Te(o)?o.changedTouches[0]:o;if(_){var y=l.getId(h),{clientX:E,clientY:M}=_;Ke(s)(r({type:_o[f],id:y,x:E,y:M},null!==p&&{pointerType:p}))}}})(n);if(window.PointerEvent)switch(_o[n]){case _o.MouseDown:case _o.MouseUp:h=h.replace("mouse","pointer");break;case _o.TouchStart:case _o.TouchEnd:return}f.push(ve(h,p,o))})),Ke((()=>{f.forEach((n=>n()))}))}(n),h=rt(n),p=function(n,s){var{viewportResizeCb:o}=n,{win:l}=s,c=-1,d=-1;return ve("resize",Ke(_e(Ke((()=>{var n=we(),s=Ce();c===n&&d===s||(o({width:Number(s),height:Number(n)}),c=n,d=s)})),200)),l)}(n,{win:l}),f=function(n){var{inputCb:s,doc:o,mirror:l,blockClass:c,blockSelector:d,ignoreClass:h,ignoreSelector:p,maskInputOptions:f,maskInputFn:m,sampling:_,userTriggeredOnInput:y}=n;function p3(n){var s=Qe(n),l=n.isTrusted,_=s&&s.tagName;if(s&&"OPTION"===_&&(s=pe_parentElement(s)),s&&_&&!(zo.indexOf(_)<0)&&!ke(s,c,d,!0)&&!(s.classList.contains(h)||p&&s.matches(p))){var E=s.value,M=!1,P=R(s)||"";"radio"===P||"checkbox"===P?M=s.checked:(f[_.toLowerCase()]||f[P])&&(E=x({element:s,maskInputOptions:f,tagName:_,type:P,value:E,maskInputFn:m})),v3(s,y?{text:E,isChecked:M,userTriggered:l}:{text:E,isChecked:M});var L=s.name;"radio"===P&&L&&M&&o.querySelectorAll('input[type="radio"][name="'+L+'"]').forEach((n=>{if(n!==s){var o=n.value;v3(n,y?{text:o,isChecked:!M,userTriggered:!1}:{text:o,isChecked:!M})}}))}}function v3(n,o){var c=Go.get(n);if(!c||c.text!==o.text||c.isChecked!==o.isChecked){Go.set(n,o);var d=l.getId(n);Ke(s)(r({},o,{id:d}))}}var E=("last"===_.input?["change"]:["input","change"]).map((n=>ve(n,Ke(p3),o))),M=o.defaultView;if(!M)return()=>{E.forEach((n=>n()))};var P=M.Object.getOwnPropertyDescriptor(M.HTMLInputElement.prototype,"value"),L=[[M.HTMLInputElement.prototype,"value"],[M.HTMLInputElement.prototype,"checked"],[M.HTMLSelectElement.prototype,"value"],[M.HTMLTextAreaElement.prototype,"value"],[M.HTMLSelectElement.prototype,"selectedIndex"],[M.HTMLOptionElement.prototype,"selected"]];return P&&P.set&&E.push(...L.map((n=>me(n[0],n[1],{set(){Ke(p3)({target:this,isTrusted:!1})}},!1,M)))),Ke((()=>{E.forEach((n=>n()))}))}(n),m=function(n){var{mediaInteractionCb:s,blockClass:o,blockSelector:l,mirror:c,sampling:d,doc:h}=n,p=Ke((n=>_e(Ke((d=>{var h=Qe(d);if(h&&!ke(h,o,l,!0)){var{currentTime:p,volume:f,muted:m,playbackRate:_,loop:y}=h;s({type:n,id:c.getId(h),currentTime:p,volume:f,muted:m,playbackRate:_,loop:y})}})),d.media||500))),f=[ve("play",p(wo.Play),h),ve("pause",p(wo.Pause),h),ve("seeked",p(wo.Seeked),h),ve("volumechange",p(wo.VolumeChange),h),ve("ratechange",p(wo.RateChange),h)];return Ke((()=>{f.forEach((n=>n()))}))}(n),d2=()=>{},h2=()=>{},p2=()=>{},v2=()=>{};n.recordDOM&&(d2=function(n,s){var{styleSheetRuleCb:o,mirror:l,stylesheetManager:c}=n,{win:d}=s;if(!d.CSSStyleSheet||!d.CSSStyleSheet.prototype)return()=>{};var h=d.CSSStyleSheet.prototype.insertRule;d.CSSStyleSheet.prototype.insertRule=new Proxy(h,{apply:Ke(((n,s,d)=>{var[h,p]=d,{id:f,styleId:m}=ot(s,l,c.styleMirror);return(f&&-1!==f||m&&-1!==m)&&o({id:f,styleId:m,adds:[{rule:h,index:p}]}),n.apply(s,d)}))}),d.CSSStyleSheet.prototype.addRule=function(n,s,o){void 0===o&&(o=this.cssRules.length);var l=n+" { "+s+" }";return d.CSSStyleSheet.prototype.insertRule.apply(this,[l,o])};var p,f,m=d.CSSStyleSheet.prototype.deleteRule;d.CSSStyleSheet.prototype.deleteRule=new Proxy(m,{apply:Ke(((n,s,d)=>{var[h]=d,{id:p,styleId:f}=ot(s,l,c.styleMirror);return(p&&-1!==p||f&&-1!==f)&&o({id:p,styleId:f,removes:[{index:h}]}),n.apply(s,d)}))}),d.CSSStyleSheet.prototype.removeRule=function(n){return d.CSSStyleSheet.prototype.deleteRule.apply(this,[n])},d.CSSStyleSheet.prototype.replace&&(p=d.CSSStyleSheet.prototype.replace,d.CSSStyleSheet.prototype.replace=new Proxy(p,{apply:Ke(((n,s,d)=>{var[h]=d,{id:p,styleId:f}=ot(s,l,c.styleMirror);return(p&&-1!==p||f&&-1!==f)&&o({id:p,styleId:f,replace:h}),n.apply(s,d)}))})),d.CSSStyleSheet.prototype.replaceSync&&(f=d.CSSStyleSheet.prototype.replaceSync,d.CSSStyleSheet.prototype.replaceSync=new Proxy(f,{apply:Ke(((n,s,d)=>{var[h]=d,{id:p,styleId:f}=ot(s,l,c.styleMirror);return(p&&-1!==p||f&&-1!==f)&&o({id:p,styleId:f,replaceSync:h}),n.apply(s,d)}))}));var _={};ct("CSSGroupingRule")?_.CSSGroupingRule=d.CSSGroupingRule:(ct("CSSMediaRule")&&(_.CSSMediaRule=d.CSSMediaRule),ct("CSSConditionRule")&&(_.CSSConditionRule=d.CSSConditionRule),ct("CSSSupportsRule")&&(_.CSSSupportsRule=d.CSSSupportsRule));var y={};return Object.entries(_).forEach((n=>{var[s,d]=n;y[s]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(y[s].insertRule,{apply:Ke(((n,s,d)=>{var[h,p]=d,{id:f,styleId:m}=ot(s.parentStyleSheet,l,c.styleMirror);return(f&&-1!==f||m&&-1!==m)&&o({id:f,styleId:m,adds:[{rule:h,index:[...st(s),p||0]}]}),n.apply(s,d)}))}),d.prototype.deleteRule=new Proxy(y[s].deleteRule,{apply:Ke(((n,s,d)=>{var[h]=d,{id:p,styleId:f}=ot(s.parentStyleSheet,l,c.styleMirror);return(p&&-1!==p||f&&-1!==f)&&o({id:p,styleId:f,removes:[{index:[...st(s),h]}]}),n.apply(s,d)}))})})),Ke((()=>{d.CSSStyleSheet.prototype.insertRule=h,d.CSSStyleSheet.prototype.deleteRule=m,p&&(d.CSSStyleSheet.prototype.replace=p),f&&(d.CSSStyleSheet.prototype.replaceSync=f),Object.entries(_).forEach((n=>{var[s,o]=n;o.prototype.insertRule=y[s].insertRule,o.prototype.deleteRule=y[s].deleteRule}))}))}(n,{win:l}),h2=at(n,n.doc),p2=function(n,s){var{styleDeclarationCb:o,mirror:l,ignoreCSSAttributes:c,stylesheetManager:d}=n,{win:h}=s,p=h.CSSStyleDeclaration.prototype.setProperty;h.CSSStyleDeclaration.prototype.setProperty=new Proxy(p,{apply:Ke(((n,s,h)=>{var f,[m,_,y]=h;if(c.has(m))return p.apply(s,[m,_,y]);var{id:E,styleId:M}=ot(null==(f=s.parentRule)?void 0:f.parentStyleSheet,l,d.styleMirror);return(E&&-1!==E||M&&-1!==M)&&o({id:E,styleId:M,set:{property:m,value:_,priority:y},index:st(s.parentRule)}),n.apply(s,h)}))});var f=h.CSSStyleDeclaration.prototype.removeProperty;return h.CSSStyleDeclaration.prototype.removeProperty=new Proxy(f,{apply:Ke(((n,s,h)=>{var p,[m]=h;if(c.has(m))return f.apply(s,[m]);var{id:_,styleId:y}=ot(null==(p=s.parentRule)?void 0:p.parentStyleSheet,l,d.styleMirror);return(_&&-1!==_||y&&-1!==y)&&o({id:_,styleId:y,remove:{property:m},index:st(s.parentRule)}),n.apply(s,h)}))}),Ke((()=>{h.CSSStyleDeclaration.prototype.setProperty=p,h.CSSStyleDeclaration.prototype.removeProperty=f}))}(n,{win:l}),n.collectFonts&&(v2=function(n){var{fontCb:s,doc:o}=n,l=o.defaultView;if(!l)return()=>{};var c=[],d=new WeakMap,h=l.FontFace;l.FontFace=function(n,s,o){var l=new h(n,s,o);return d.set(l,{family:n,buffer:"string"!=typeof s,descriptors:o,fontSource:"string"==typeof s?s:JSON.stringify(Array.from(new Uint8Array(s)))}),l};var p=ye(o.fonts,"add",(function(n){return function(o){return setTimeout(Ke((()=>{var n=d.get(o);n&&(s(n),d.delete(o))})),0),n.apply(this,[o])}}));return c.push((()=>{l.FontFace=h})),c.push(p),Ke((()=>{c.forEach((n=>n()))}))}(n)));var _=function(n){var{doc:s,mirror:o,blockClass:l,blockSelector:c,selectionCb:d}=n,h=!0,p=Ke((()=>{var n=s.getSelection();if(!(!n||h&&(null==n?void 0:n.isCollapsed))){h=n.isCollapsed||!1;for(var p=[],f=n.rangeCount||0,m=0;m<f;m++){var _=n.getRangeAt(m),{startContainer:y,startOffset:E,endContainer:M,endOffset:P}=_;ke(y,l,c,!0)||ke(M,l,c,!0)||p.push({start:o.getId(y),startOffset:E,end:o.getId(M),endOffset:P})}d({ranges:p})}}));return p(),ve("selectionchange",p)}(n),y=function(n){var{doc:s,customElementCb:o}=n,l=s.defaultView;return l&&l.customElements?ye(l.customElements,"define",(function(n){return function(s,l,c){try{o({define:{name:s}})}catch(d){console.warn("Custom element callback failed for "+s)}return n.apply(this,[s,l,c])}})):()=>{}}(n),E=[];for(var M of n.plugins)E.push(M.observer(M.callback,l,M.options));return Ke((()=>{jo.forEach((n=>n.reset())),null==o||o.disconnect(),c(),d(),h(),p(),f(),m(),d2(),h2(),p2(),v2(),_(),y(),E.forEach((n=>n()))}))}function ut(n){return void 0!==window[n]}function ct(n){return Boolean(void 0!==window[n]&&window[n].prototype&&"insertRule"in window[n].prototype&&"deleteRule"in window[n].prototype)}class dt{constructor(n){a(this,"iframeIdToRemoteIdMap",new WeakMap),a(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=n}getId(n,s,o,l){var c=o||this.getIdToRemoteIdMap(n),d=l||this.getRemoteIdToIdMap(n),h=c.get(s);return h||(h=this.generateIdFn(),c.set(s,h),d.set(h,s)),h}getIds(n,s){var o=this.getIdToRemoteIdMap(n),l=this.getRemoteIdToIdMap(n);return s.map((s=>this.getId(n,s,o,l)))}getRemoteId(n,s,o){var l=o||this.getRemoteIdToIdMap(n);return"number"!=typeof s?s:l.get(s)||-1}getRemoteIds(n,s){var o=this.getRemoteIdToIdMap(n);return s.map((s=>this.getRemoteId(n,s,o)))}reset(n){if(!n)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(n),this.iframeRemoteIdToIdMap.delete(n)}getIdToRemoteIdMap(n){var s=this.iframeIdToRemoteIdMap.get(n);return s||(s=new Map,this.iframeIdToRemoteIdMap.set(n,s)),s}getRemoteIdToIdMap(n){var s=this.iframeRemoteIdToIdMap.get(n);return s||(s=new Map,this.iframeRemoteIdToIdMap.set(n,s)),s}}class ht{constructor(n){a(this,"iframes",new WeakMap),a(this,"crossOriginIframeMap",new WeakMap),a(this,"crossOriginIframeMirror",new dt(W)),a(this,"crossOriginIframeStyleMirror"),a(this,"crossOriginIframeRootIdMap",new WeakMap),a(this,"mirror"),a(this,"mutationCb"),a(this,"wrappedEmit"),a(this,"loadListener"),a(this,"stylesheetManager"),a(this,"recordCrossOriginIframes"),this.mutationCb=n.mutationCb,this.wrappedEmit=n.wrappedEmit,this.stylesheetManager=n.stylesheetManager,this.recordCrossOriginIframes=n.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new dt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=n.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(n){this.iframes.set(n,!0),n.contentWindow&&this.crossOriginIframeMap.set(n.contentWindow,n)}addLoadListener(n){this.loadListener=n}attachIframe(n,s){var o,l;this.mutationCb({adds:[{parentId:this.mirror.getId(n),nextId:null,node:s}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(o=n.contentWindow)||o.addEventListener("message",this.handleMessage.bind(this))),null==(l=this.loadListener)||l.call(this,n),n.contentDocument&&n.contentDocument.adoptedStyleSheets&&n.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.contentDocument.adoptedStyleSheets,this.mirror.getId(n.contentDocument))}handleMessage(n){var s=n;if("rrweb"===s.data.type&&s.origin===s.data.origin&&n.source){var o=this.crossOriginIframeMap.get(n.source);if(o){var l=this.transformCrossOriginEvent(o,s.data.event);l&&this.wrappedEmit(l,s.data.isCheckout)}}}transformCrossOriginEvent(n,s){var o;switch(s.type){case mo.FullSnapshot:this.crossOriginIframeMirror.reset(n),this.crossOriginIframeStyleMirror.reset(n),this.replaceIdOnNode(s.data.node,n);var l=s.data.node.id;return this.crossOriginIframeRootIdMap.set(n,l),this.patchRootIdOnNode(s.data.node,l),{timestamp:s.timestamp,type:mo.IncrementalSnapshot,data:{source:vo.Mutation,adds:[{parentId:this.mirror.getId(n),nextId:null,node:s.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case mo.Meta:case mo.Load:case mo.DomContentLoaded:return!1;case mo.Plugin:return s;case mo.Custom:return this.replaceIds(s.data.payload,n,["id","parentId","previousId","nextId"]),s;case mo.IncrementalSnapshot:switch(s.data.source){case vo.Mutation:return s.data.adds.forEach((s=>{this.replaceIds(s,n,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,n);var o=this.crossOriginIframeRootIdMap.get(n);o&&this.patchRootIdOnNode(s.node,o)})),s.data.removes.forEach((s=>{this.replaceIds(s,n,["parentId","id"])})),s.data.attributes.forEach((s=>{this.replaceIds(s,n,["id"])})),s.data.texts.forEach((s=>{this.replaceIds(s,n,["id"])})),s;case vo.Drag:case vo.TouchMove:case vo.MouseMove:return s.data.positions.forEach((s=>{this.replaceIds(s,n,["id"])})),s;case vo.ViewportResize:return!1;case vo.MediaInteraction:case vo.MouseInteraction:case vo.Scroll:case vo.CanvasMutation:case vo.Input:return this.replaceIds(s.data,n,["id"]),s;case vo.StyleSheetRule:case vo.StyleDeclaration:return this.replaceIds(s.data,n,["id"]),this.replaceStyleIds(s.data,n,["styleId"]),s;case vo.Font:return s;case vo.Selection:return s.data.ranges.forEach((s=>{this.replaceIds(s,n,["start","end"])})),s;case vo.AdoptedStyleSheet:return this.replaceIds(s.data,n,["id"]),this.replaceStyleIds(s.data,n,["styleIds"]),null==(o=s.data.styles)||o.forEach((s=>{this.replaceStyleIds(s,n,["styleId"])})),s}}return!1}replace(n,s,o,l){for(var c of l)(Array.isArray(s[c])||"number"==typeof s[c])&&(Array.isArray(s[c])?s[c]=n.getIds(o,s[c]):s[c]=n.getId(o,s[c]));return s}replaceIds(n,s,o){return this.replace(this.crossOriginIframeMirror,n,s,o)}replaceStyleIds(n,s,o){return this.replace(this.crossOriginIframeStyleMirror,n,s,o)}replaceIdOnNode(n,s){this.replaceIds(n,s,["id","rootId"]),"childNodes"in n&&n.childNodes.forEach((n=>{this.replaceIdOnNode(n,s)}))}patchRootIdOnNode(n,s){n.type===is.Document||n.rootId||(n.rootId=s),"childNodes"in n&&n.childNodes.forEach((n=>{this.patchRootIdOnNode(n,s)}))}}class pt{constructor(n){a(this,"shadowDoms",new WeakSet),a(this,"mutationCb"),a(this,"scrollCb"),a(this,"bypassOptions"),a(this,"mirror"),a(this,"restoreHandlers",[]),this.mutationCb=n.mutationCb,this.scrollCb=n.scrollCb,this.bypassOptions=n.bypassOptions,this.mirror=n.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(n,s){if(w(n)&&!this.shadowDoms.has(n)){this.shadowDoms.add(n);var o=et(r({},this.bypassOptions,{doc:s,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),n);this.restoreHandlers.push((()=>o.disconnect())),this.restoreHandlers.push(rt(r({},this.bypassOptions,{scrollCb:this.scrollCb,doc:n,mirror:this.mirror}))),setTimeout((()=>{n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(pe_host(n))),this.restoreHandlers.push(at({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},n))}),0)}}observeAttachShadow(n){n.contentWindow&&n.contentDocument&&this.patchAttachShadow(n.contentWindow.Element,n.contentDocument)}patchAttachShadow(n,s){var o=this;this.restoreHandlers.push(ye(n.prototype,"attachShadow",(function(n){return function(l){var c=n.call(this,l),d=pe_shadowRoot(this);return d&&Le(this)&&o.addShadowRoot(d,s),c}})))}reset(){this.restoreHandlers.forEach((n=>{try{n()}catch(s){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jo="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Xo=0;Xo<64;Xo++)Jo[Yo.charCodeAt(Xo)]=Xo;var Ko=new Map,mt=(n,s,o)=>{if(n&&(St(n,s)||"object"==typeof n)){var l=(d=o,h=n.constructor.name,(p=Ko.get(d))||(p=new Map,Ko.set(d,p)),p.has(h)||p.set(h,[]),p.get(h)),c=l.indexOf(n);return-1===c&&(c=l.length,l.push(n)),c}var d,h,p};function yt(n,s,o){if(n instanceof Array)return n.map((n=>yt(n,s,o)));if(null===n)return n;if(n instanceof Float32Array||n instanceof Float64Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Int16Array||n instanceof Int8Array||n instanceof Uint8ClampedArray)return{rr_type:n.constructor.name,args:[Object.values(n)]};if(n instanceof ArrayBuffer)return{rr_type:n.constructor.name,base64:function(n){var s,o=new Uint8Array(n),l=o.length,c="";for(s=0;s<l;s+=3)c+=Yo[o[s]>>2],c+=Yo[(3&o[s])<<4|o[s+1]>>4],c+=Yo[(15&o[s+1])<<2|o[s+2]>>6],c+=Yo[63&o[s+2]];return l%3==2?c=c.substring(0,c.length-1)+"=":l%3==1&&(c=c.substring(0,c.length-2)+"=="),c}(n)};if(n instanceof DataView)return{rr_type:n.constructor.name,args:[yt(n.buffer,s,o),n.byteOffset,n.byteLength]};if(n instanceof HTMLImageElement){var l=n.constructor.name,{src:c}=n;return{rr_type:l,src:c}}return n instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:n.toDataURL()}:n instanceof ImageData?{rr_type:n.constructor.name,args:[yt(n.data,s,o),n.width,n.height]}:St(n,s)||"object"==typeof n?{rr_type:n.constructor.name,index:mt(n,s,o)}:n}var bt=(n,s,o)=>n.map((n=>yt(n,s,o))),St=(n,s)=>{var o=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((n=>"function"==typeof s[n]));return Boolean(o.find((o=>n instanceof s[o])))};function wt(n,s,o,l){var c=[];try{var d=ye(n.HTMLCanvasElement.prototype,"getContext",(function(n){return function(c){for(var d=arguments.length,h=new Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];if(!ke(this,s,o,!0)){var f=function(n){return"experimental-webgl"===n?"webgl":n}(c);if("__context"in this||(this.__context=f),l&&["webgl","webgl2"].includes(f))if(h[0]&&"object"==typeof h[0]){var m=h[0];m.preserveDrawingBuffer||(m.preserveDrawingBuffer=!0)}else h.splice(0,1,{preserveDrawingBuffer:!0})}return n.apply(this,[c,...h])}}));c.push(d)}catch(h){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{c.forEach((n=>n()))}}function Ct(n,s,o,l,c,d){var h=[],p=Object.getOwnPropertyNames(n),l2=function(p){if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(p))return 0;try{if("function"!=typeof n[p])return 0;var f=ye(n,p,(function(n){return function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];var _=n.apply(this,f);if(mt(_,d,this),"tagName"in this.canvas&&!ke(this.canvas,l,c,!0)){var y=bt(f,d,this),E={type:s,property:p,args:y};o(this.canvas,E)}return _}}));h.push(f)}catch(_){var m=me(n,p,{set(n){o(this.canvas,{type:s,property:p,args:[n],setter:!0})}});h.push(m)}};for(var f of p)l2(f);return h}var Qo,ea,ta,ra,na="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",ia="undefined"!=typeof window&&window.Blob&&new Blob([(Qo=na,Uint8Array.from(atob(Qo),(n=>n.charCodeAt(0))))],{type:"text/javascript;charset=utf-8"});function Rt(n){var s;try{if(!(s=ia&&(window.URL||window.webkitURL).createObjectURL(ia)))throw"";var o=new Worker(s,{name:null==n?void 0:n.name});return o.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(s)})),o}catch(l){return new Worker("data:text/javascript;base64,"+na,{name:null==n?void 0:n.name})}finally{s&&(window.URL||window.webkitURL).revokeObjectURL(s)}}class At{constructor(n){a(this,"pendingCanvasMutations",new Map),a(this,"rafStamps",{latestId:0,invokeId:null}),a(this,"mirror"),a(this,"mutationCb"),a(this,"resetObservers"),a(this,"frozen",!1),a(this,"locked",!1),a(this,"processMutation",((n,s)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(n)||this.pendingCanvasMutations.set(n,[]),this.pendingCanvasMutations.get(n).push(s)}));var{sampling:s="all",win:o,blockClass:l,blockSelector:c,recordCanvas:d,dataURLOptions:h}=n;this.mutationCb=n.mutationCb,this.mirror=n.mirror,d&&"all"===s&&this.initCanvasMutationObserver(o,l,c),d&&"number"==typeof s&&this.initCanvasFPSObserver(s,o,l,c,{dataURLOptions:h})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(n,s,o,l,c){var d=this,h=wt(s,o,l,!0),p=new Map,f=new Rt;f.onmessage=n=>{var{id:s}=n.data;if(p.set(s,!1),"base64"in n.data){var{base64:o,type:l,width:c,height:d}=n.data;this.mutationCb({id:s,type:bo["2D"],commands:[{property:"clearRect",args:[0,0,c,d]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:l}]},0,0]}]})}};var m,_=1e3/n,y=0,p2=n=>{var h,E,M;y&&n-y<_||(y=n,(h=[],E=n=>{n.querySelectorAll("canvas").forEach((n=>{ke(n,o,l,!0)||h.push(n)})),n.querySelectorAll("*").forEach((n=>{n.shadowRoot&&E(n.shadowRoot)}))},E(s.document),h).forEach((M=t((function*(n){var s,o=d.mirror.getId(n);if(!p.get(o)&&0!==n.width&&0!==n.height){if(p.set(o,!0),["webgl","webgl2"].includes(n.__context)){var l=n.getContext(n.__context);!1===(null==(s=null==l?void 0:l.getContextAttributes())?void 0:s.preserveDrawingBuffer)&&l.clear(l.COLOR_BUFFER_BIT)}var h=n.clientWidth||n.width,m=n.clientHeight||n.height,_=yield createImageBitmap(n,{resizeWidth:h,resizeHeight:m});f.postMessage({id:o,bitmap:_,width:h,height:m,dataURLOptions:c.dataURLOptions},[_])}})),function(n){return M.apply(this,arguments)}))),m=requestAnimationFrame(p2)};m=requestAnimationFrame(p2),this.resetObservers=()=>{h(),cancelAnimationFrame(m)}}initCanvasMutationObserver(n,s,o){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var l,c,d,h,p,f=wt(n,s,o,!1),m=function(n,s,o,l){var c=[],d=Object.getOwnPropertyNames(s.CanvasRenderingContext2D.prototype),o2=function(d){try{if("function"!=typeof s.CanvasRenderingContext2D.prototype[d])return 1;var h=ye(s.CanvasRenderingContext2D.prototype,d,(function(c){return function(){for(var h=arguments.length,p=new Array(h),f=0;f<h;f++)p[f]=arguments[f];return ke(this.canvas,o,l,!0)||setTimeout((()=>{var o=bt(p,s,this);n(this.canvas,{type:bo["2D"],property:d,args:o})}),0),c.apply(this,p)}}));c.push(h)}catch(f){var p=me(s.CanvasRenderingContext2D.prototype,d,{set(s){n(this.canvas,{type:bo["2D"],property:d,args:[s],setter:!0})}});c.push(p)}};for(var h of d)o2(h);return()=>{c.forEach((n=>n()))}}(this.processMutation.bind(this),n,s,o),_=(l=this.processMutation.bind(this),d=s,h=o,(p=[]).push(...Ct((c=n).WebGLRenderingContext.prototype,bo.WebGL,l,d,h,c)),void 0!==c.WebGL2RenderingContext&&p.push(...Ct(c.WebGL2RenderingContext.prototype,bo.WebGL2,l,d,h,c)),()=>{p.forEach((n=>n()))});this.resetObservers=()=>{f(),m(),_()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){var e2=n=>{this.rafStamps.latestId=n,requestAnimationFrame(e2)};requestAnimationFrame(e2)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((n,s)=>{var o=this.mirror.getId(s);this.flushPendingCanvasMutationFor(s,o)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(n,s){if(!this.frozen&&!this.locked){var o=this.pendingCanvasMutations.get(n);if(o&&-1!==s){var l=o.map((n=>i(n,ts))),{type:c}=o[0];this.mutationCb({id:s,type:c,commands:l}),this.pendingCanvasMutations.delete(n)}}}}class Nt{constructor(n){a(this,"trackedLinkElements",new WeakSet),a(this,"mutationCb"),a(this,"adoptedStyleSheetCb"),a(this,"styleMirror",new go),this.mutationCb=n.mutationCb,this.adoptedStyleSheetCb=n.adoptedStyleSheetCb}attachLinkElement(n,s){"_cssText"in s.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:s.id,attributes:s.attributes}]}),this.trackLinkElement(n)}trackLinkElement(n){this.trackedLinkElements.has(n)||(this.trackedLinkElements.add(n),this.trackStylesheetInLinkElement(n))}adoptStyleSheets(n,s){var o=this;if(0!==n.length){var l={id:s,styleIds:[]},c=[],s2=function(n){var s;o.styleMirror.has(n)?s=o.styleMirror.getId(n):(s=o.styleMirror.add(n),c.push({styleId:s,rules:Array.from(n.rules||CSSRule,((s,o)=>({rule:I(s,n.href),index:o})))})),l.styleIds.push(s)};for(var d of n)s2(d);c.length>0&&(l.styles=c),this.adoptedStyleSheetCb(l)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(n){}}class Pt{constructor(){a(this,"nodeMap",new WeakMap),a(this,"active",!1)}inOtherBuffer(n,s){var o=this.nodeMap.get(n);return o&&Array.from(o).some((n=>n!==s))}add(n,s){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(n,(this.nodeMap.get(n)||new Set).add(s))}destroy(){}}var ha=!1;try{if(2!==Array.from([1],(n=>2*n))[0]){var ma=document.createElement("iframe");document.body.appendChild(ma),Array.from=(null==(Qi=ma.contentWindow)?void 0:Qi.Array.from)||Array.from,document.body.removeChild(ma)}}catch(es){console.debug("Unable to override Array.from",es)}var ya,ba,wa=new cs;function qt(n){void 0===n&&(n={});var{emit:s,checkoutEveryNms:o,checkoutEveryNth:l,blockClass:c="rr-block",blockSelector:d=null,ignoreClass:h="rr-ignore",ignoreSelector:p=null,maskTextClass:f="rr-mask",maskTextSelector:m=null,inlineStylesheet:_=!0,maskAllInputs:y,maskInputOptions:E,slimDOMOptions:M,maskInputFn:P,maskTextFn:L,hooks:N,packFn:F,sampling:D={},dataURLOptions:B={},mousemoveWait:$,recordDOM:U=!0,recordCanvas:H=!1,recordCrossOriginIframes:z=!1,recordAfter:q=("DOMContentLoaded"===n.recordAfter?n.recordAfter:"load"),userTriggeredOnInput:V=!1,collectFonts:Z=!1,inlineImages:ee=!1,plugins:ne,keepIframeSrcFn:ie=()=>!1,ignoreCSSAttributes:se=new Set([]),errorHandler:oe}=n;So=oe;var le=!z||window.parent===window,ce=!1;if(!le)try{window.parent.document&&(ce=!1)}catch(fe){ce=!0}if(le&&!s)throw new Error("emit function is required");if(!le&&!ce)return()=>{};void 0!==$&&void 0===D.mousemove&&(D.mousemove=$),wa.reset();var pe,fe,ge=!0===y?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==E?E:{password:!0},be=!0===M||"all"===M?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===M,headMetaDescKeywords:"all"===M,headTitleMutations:"all"===M}:M||{};void 0===fe&&(fe=window),"NodeList"in fe&&!fe.NodeList.prototype.forEach&&(fe.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in fe&&!fe.DOMTokenList.prototype.forEach&&(fe.DOMTokenList.prototype.forEach=Array.prototype.forEach);var Oe=0,B2=n=>{for(var s of ne||[])s.eventProcessor&&(n=s.eventProcessor(n));return F&&!ce&&(n=F(n)),n};ea=(n,c)=>{var d,h=n;if(h.timestamp=fo(),!(null==(d=jo[0])?void 0:d.isFrozen())||h.type===mo.FullSnapshot||h.type===mo.IncrementalSnapshot&&h.data.source===vo.Mutation||jo.forEach((n=>n.unfreeze())),le)null==s||s(B2(h),c);else if(ce){var p={type:"rrweb",event:B2(h),origin:window.location.origin,isCheckout:c};window.parent.postMessage(p,"*")}if(h.type===mo.FullSnapshot)pe=h,Oe=0;else if(h.type===mo.IncrementalSnapshot){if(h.data.source===vo.Mutation&&h.data.isAttachIframe)return;Oe++;var f=l&&Oe>=l,m=o&&h.timestamp-pe.timestamp>o;(f||m)&&ta(!0)}};var V2=n=>{ea({type:mo.IncrementalSnapshot,data:r({source:vo.Mutation},n)})},W2=n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.Scroll},n)}),U2=n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.CanvasMutation},n)}),Ne=new Nt({mutationCb:V2,adoptedStyleSheetCb:n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.AdoptedStyleSheet},n)})}),Fe=new ht({mirror:wa,mutationCb:V2,stylesheetManager:Ne,recordCrossOriginIframes:z,wrappedEmit:ea});for(var De of ne||[])De.getMirror&&De.getMirror({nodeMirror:wa,crossOriginIframeMirror:Fe.crossOriginIframeMirror,crossOriginIframeStyleMirror:Fe.crossOriginIframeStyleMirror});var Be=new Pt;ra=new At({recordCanvas:H,mutationCb:U2,win:window,blockClass:c,blockSelector:d,mirror:wa,sampling:D.canvas,dataURLOptions:B});var Ue=new pt({mutationCb:V2,scrollCb:W2,bypassOptions:{blockClass:c,blockSelector:d,maskTextClass:f,maskTextSelector:m,inlineStylesheet:_,maskInputOptions:ge,dataURLOptions:B,maskTextFn:L,maskInputFn:P,recordCanvas:H,inlineImages:ee,sampling:D,slimDOMOptions:be,iframeManager:Fe,stylesheetManager:Ne,canvasManager:ra,keepIframeSrcFn:ie,processedNodeManager:Be},mirror:wa});ta=function(n){if(void 0===n&&(n=!1),U){ea({type:mo.Meta,data:{href:window.location.href,width:Ce(),height:we()}},n),Ne.reset(),Ue.init(),jo.forEach((n=>n.lock()));var s=function(n,s){var{mirror:o=new cs,blockClass:l="rr-block",blockSelector:c=null,maskTextClass:d="rr-mask",maskTextSelector:h=null,inlineStylesheet:p=!0,inlineImages:f=!1,recordCanvas:m=!1,maskAllInputs:_=!1,maskTextFn:y,maskInputFn:E,slimDOM:M=!1,dataURLOptions:P,preserveWhiteSpace:L,onSerialize:N,onIframeLoad:F,iframeLoadTimeout:D,onStylesheetLoad:B,stylesheetLoadTimeout:$,keepIframeSrcFn:U=()=>!1}=s||{};return re(n,{doc:n,mirror:o,blockClass:l,blockSelector:c,maskTextClass:d,maskTextSelector:h,skipChild:!1,inlineStylesheet:p,maskInputOptions:!0===_?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===_?{password:!0}:_,maskTextFn:y,maskInputFn:E,slimDOMOptions:!0===M||"all"===M?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===M,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===M?{}:M,dataURLOptions:P,inlineImages:f,recordCanvas:m,preserveWhiteSpace:L,onSerialize:N,onIframeLoad:F,iframeLoadTimeout:D,onStylesheetLoad:B,stylesheetLoadTimeout:$,keepIframeSrcFn:U,newlyAddedElement:!1})}(document,{mirror:wa,blockClass:c,blockSelector:d,maskTextClass:f,maskTextSelector:m,inlineStylesheet:_,maskAllInputs:ge,maskTextFn:L,maskInputFn:P,slimDOM:be,dataURLOptions:B,recordCanvas:H,inlineImages:ee,onSerialize:n=>{Me(n,wa)&&Fe.addIframe(n),Re(n,wa)&&Ne.trackLinkElement(n),Ae(n)&&Ue.addShadowRoot(pe_shadowRoot(n),document)},onIframeLoad:(n,s)=>{Fe.attachIframe(n,s),Ue.observeAttachShadow(n)},onStylesheetLoad:(n,s)=>{Ne.attachLinkElement(n,s)},keepIframeSrcFn:ie});if(!s)return console.warn("Failed to snapshot the document");ea({type:mo.FullSnapshot,data:{node:s,initialOffset:Se(window)}},n),jo.forEach((n=>n.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ne.adoptStyleSheets(document.adoptedStyleSheets,wa.getId(document))}};try{var He=[],K2=n=>{var s;return Ke(lt)({mutationCb:V2,mousemoveCb:(n,s)=>ea({type:mo.IncrementalSnapshot,data:{source:s,positions:n}}),mouseInteractionCb:n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.MouseInteraction},n)}),scrollCb:W2,viewportResizeCb:n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.ViewportResize},n)}),inputCb:n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.Input},n)}),mediaInteractionCb:n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.MediaInteraction},n)}),styleSheetRuleCb:n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.StyleSheetRule},n)}),styleDeclarationCb:n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.StyleDeclaration},n)}),canvasMutationCb:U2,fontCb:n=>ea({type:mo.IncrementalSnapshot,data:r({source:vo.Font},n)}),selectionCb:n=>{ea({type:mo.IncrementalSnapshot,data:r({source:vo.Selection},n)})},customElementCb:n=>{ea({type:mo.IncrementalSnapshot,data:r({source:vo.CustomElement},n)})},blockClass:c,ignoreClass:h,ignoreSelector:p,maskTextClass:f,maskTextSelector:m,maskInputOptions:ge,inlineStylesheet:_,sampling:D,recordDOM:U,recordCanvas:H,inlineImages:ee,userTriggeredOnInput:V,collectFonts:Z,doc:n,maskInputFn:P,maskTextFn:L,keepIframeSrcFn:ie,blockSelector:d,slimDOMOptions:be,dataURLOptions:B,mirror:wa,iframeManager:Fe,stylesheetManager:Ne,shadowDomManager:Ue,processedNodeManager:Be,canvasManager:ra,ignoreCSSAttributes:se,plugins:(null==(s=null==ne?void 0:ne.filter((n=>n.observer)))?void 0:s.map((n=>({observer:n.observer,options:n.options,callback:s=>ea({type:mo.Plugin,data:{plugin:n.name,payload:s}})}))))||[]},N)};Fe.addLoadListener((n=>{try{He.push(K2(n.contentDocument))}catch(s){console.warn(s)}}));var J2=()=>{ta(),He.push(K2(document)),ha=!0};return"interactive"===document.readyState||"complete"===document.readyState?J2():(He.push(ve("DOMContentLoaded",(()=>{ea({type:mo.DomContentLoaded,data:{}}),"DOMContentLoaded"===q&&J2()}))),He.push(ve("load",(()=>{ea({type:mo.Load,data:{}}),"load"===q&&J2()}),window))),()=>{He.forEach((n=>n())),Be.destroy(),ha=!1,So=void 0}}catch(fe){console.warn(fe)}}qt.addCustomEvent=(n,s)=>{if(!ha)throw new Error("please add custom event after start recording");ea({type:mo.Custom,data:{tag:n,payload:s}})},qt.freezePage=()=>{jo.forEach((n=>n.freeze()))},qt.takeFullSnapshot=n=>{if(!ha)throw new Error("please take full snapshot after start recording");ta(n)},qt.mirror=wa,(ba=ya||(ya={}))[ba.NotStarted=0]="NotStarted",ba[ba.Running=1]="Running",ba[ba.Stopped=2]="Stopped";var Sa,Ca=Object.defineProperty,$t=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?Ca(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d},ka=Object.defineProperty,Ut=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?ka(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d},xa=Object.defineProperty,zt=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?xa(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d},Ia={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Ea={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Aa={};function Xt(n){if(Aa[n])return Aa[n];var s=globalThis[n],o=s.prototype,l=n in Ia?Ia[n]:void 0,c=Boolean(l&&l.every((n=>{var s,l;return Boolean(null==(l=null==(s=Object.getOwnPropertyDescriptor(o,n))?void 0:s.get)?void 0:l.toString().includes("[native code]"))}))),d=n in Ea?Ea[n]:void 0,h=Boolean(d&&d.every((n=>{var s;return"function"==typeof o[n]&&(null==(s=o[n])?void 0:s.toString().includes("[native code]"))})));if(c&&h)return Aa[n]=s.prototype,s.prototype;try{var p=document.createElement("iframe");document.body.appendChild(p);var f=p.contentWindow;if(!f)return s.prototype;var m=f[n].prototype;return document.body.removeChild(p),m?Aa[n]=m:o}catch(_){return o}}var Oa={};function Jt(n,s,o){var l,c=n+"."+String(o);if(Oa[c])return Oa[c].call(s);var d=Xt(n),h=null==(l=Object.getOwnPropertyDescriptor(d,o))?void 0:l.get;return h?(Oa[c]=h,h.call(s)):s[o]}var tr_parentNode=function(n){return Jt("Node",n,"parentNode")},tr_host=function(n){return n&&"host"in n?Jt("ShadowRoot",n,"host"):null},tr_shadowRoot=function(n){return n&&"shadowRoot"in n?Jt("Element",n,"shadowRoot"):null};function ir(n,s,o){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return!!o&&ir(tr_parentNode(n),s,o);for(var l=n.classList.length;l--;){var c=n.classList[l];if(s.test(c))return!0}return!!o&&ir(tr_parentNode(n),s,o)}class nr{constructor(){__publicField22(this,"parentElement",null),__publicField22(this,"parentNode",null),__publicField22(this,"ownerDocument"),__publicField22(this,"firstChild",null),__publicField22(this,"lastChild",null),__publicField22(this,"previousSibling",null),__publicField22(this,"nextSibling",null),__publicField22(this,"ELEMENT_NODE",1),__publicField22(this,"TEXT_NODE",3),__publicField22(this,"nodeType"),__publicField22(this,"nodeName"),__publicField22(this,"RRNodeType")}get childNodes(){for(var n=[],s=this.firstChild;s;)n.push(s),s=s.nextSibling;return n}contains(n){if(!(n instanceof nr))return!1;if(n.ownerDocument!==this.ownerDocument)return!1;if(n===this)return!0;for(;n.parentNode;){if(n.parentNode===this)return!0;n=n.parentNode}return!1}appendChild(n){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(n,s){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(n){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}var Na={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Da={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Ha={};function lr(n){if(Ha[n])return Ha[n];var s=globalThis[n],o=s.prototype,l=n in Na?Na[n]:void 0,c=Boolean(l&&l.every((n=>{var s,l;return Boolean(null==(l=null==(s=Object.getOwnPropertyDescriptor(o,n))?void 0:s.get)?void 0:l.toString().includes("[native code]"))}))),d=n in Da?Da[n]:void 0,h=Boolean(d&&d.every((n=>{var s;return"function"==typeof o[n]&&(null==(s=o[n])?void 0:s.toString().includes("[native code]"))})));if(c&&h)return Ha[n]=s.prototype,s.prototype;try{var p=document.createElement("iframe");document.body.appendChild(p);var f=p.contentWindow;if(!f)return s.prototype;var m=f[n].prototype;return document.body.removeChild(p),m?Ha[n]=m:o}catch(_){return o}}var ja={};function cr(n,s,o){var l,c=n+"."+String(o);if(ja[c])return ja[c].call(s);var d=lr(n),h=null==(l=Object.getOwnPropertyDescriptor(d,o))?void 0:l.get;return h?(ja[c]=h,h.call(s)):s[o]}var za={};function hr(n,s,o){var l=n+"."+String(o);if(za[l])return za[l].bind(s);var c=lr(n)[o];return"function"!=typeof c?s[o]:(za[l]=c,c.bind(s))}var pr_parentNode=function(n){return cr("Node",n,"parentNode")},pr_parentElement=function(n){return cr("Node",n,"parentElement")},pr_contains=function(n,s){return hr("Node",n,"contains")(s)},pr_getRootNode=function(n){return hr("Node",n,"getRootNode")()},pr_host=function(n){return n&&"host"in n?cr("ShadowRoot",n,"host"):null},pr_shadowRoot=function(n){return n&&"shadowRoot"in n?cr("Element",n,"shadowRoot"):null},Va="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",Ga={map:{},getId:()=>(console.error(Va),-1),getNode:()=>(console.error(Va),null),removeNodeFromMap(){console.error(Va)},has:()=>(console.error(Va),!1),reset(){console.error(Va)}};"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Ga=new Proxy(Ga,{get:(n,s,o)=>("map"===s&&console.error(Va),Reflect.get(n,s,o))}));var Ya,Ja=Date.now;function _r(n){return n?n.nodeType===n.ELEMENT_NODE?n:pr_parentElement(n):null}function mr(n){var s,o=null;return"getRootNode"in n&&(null==(s=pr_getRootNode(n))?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&pr_host(pr_getRootNode(n))&&(o=pr_host(pr_getRootNode(n))),o}function yr(n){for(var s,o=n;s=mr(o);)o=s;return o}function br(n){var s=n.ownerDocument;if(!s)return!1;var o=yr(n);return pr_contains(s,o)}/[1-9][0-9]{12}/.test(Date.now().toString())||(Ja=()=>(new Date).getTime());for(var Xa=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:class{constructor(){Ut(this,"id",1),Ut(this,"styleIDMap",new WeakMap),Ut(this,"idStyleMap",new Map)}getId(n){var s;return null!==(s=this.styleIDMap.get(n))&&void 0!==s?s:-1}has(n){return this.styleIDMap.has(n)}add(n,s){return this.has(n)?this.getId(n):(o=void 0===s?this.id++:s,this.styleIDMap.set(n,o),this.idStyleMap.set(o,n),o);var o}getStyle(n){return this.idStyleMap.get(n)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}},get _mirror(){return Ga},closestElementOfNode:_r,getBaseDimension:function e2(n,s){var o,l,c=null==(l=null==(o=n.ownerDocument)?void 0:o.defaultView)?void 0:l.frameElement;if(!c||c===s)return{x:0,y:0,relativeScale:1,absoluteScale:1};var d=c.getBoundingClientRect(),h=e2(c,s),p=d.height/c.clientHeight;return{x:d.x*h.relativeScale+h.x,y:d.y*h.relativeScale+h.y,relativeScale:p,absoluteScale:h.absoluteScale*p}},getNestedRule:function e2(n,s){var o=n[s[0]];return 1===s.length?o:e2(o.cssRules[s[1]].cssRules,s.slice(2))},getPositionsAndIndex:function(n){var s=[...n],o=s.pop();return{positions:s,index:o}},getRootShadowHost:yr,getShadowHost:mr,getWindowHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight},getWindowScroll:function(n){var s,o,l,c,d=n.document;return{left:d.scrollingElement?d.scrollingElement.scrollLeft:void 0!==n.pageXOffset?n.pageXOffset:d.documentElement.scrollLeft||(null==d?void 0:d.body)&&(null==(s=pr_parentElement(d.body))?void 0:s.scrollLeft)||(null==(o=null==d?void 0:d.body)?void 0:o.scrollLeft)||0,top:d.scrollingElement?d.scrollingElement.scrollTop:void 0!==n.pageYOffset?n.pageYOffset:(null==d?void 0:d.documentElement.scrollTop)||(null==d?void 0:d.body)&&(null==(l=pr_parentElement(d.body))?void 0:l.scrollTop)||(null==(c=null==d?void 0:d.body)?void 0:c.scrollTop)||0}},getWindowWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth},hasShadowRoot:function(n){return!!n&&(n instanceof nr&&"shadowRoot"in n?Boolean(n.shadowRoot):Boolean(pr_shadowRoot(n)))},hookSetter:function e2(n,s,o,l,c){void 0===c&&(c=window);var d=c.Object.getOwnPropertyDescriptor(n,s);return c.Object.defineProperty(n,s,l?o:{set(n){setTimeout((()=>{o.set.call(this,n)}),0),d&&d.set&&d.set.call(this,n)}}),()=>e2(n,s,d||{},!0)},inDom:function(n){var s=n.ownerDocument;return!!s&&(pr_contains(s,n)||br(n))},isAncestorRemoved:function e2(n,s){if(l=(o=n)&&"host"in o&&"mode"in o&&tr_host(o)||null,Boolean(l&&"shadowRoot"in l&&tr_shadowRoot(l)===o))return!1;var o,l,c=s.getId(n);if(!s.has(c))return!0;var d=pr_parentNode(n);return(!d||d.nodeType!==n.DOCUMENT_NODE)&&(!d||e2(d,s))},isBlocked:function(n,s,o,l){if(!n)return!1;var c=_r(n);if(!c)return!1;try{if("string"==typeof s){if(c.classList.contains(s))return!0;if(l&&null!==c.closest("."+s))return!0}else if(ir(c,s,l))return!0}catch(d){}if(o){if(c.matches(o))return!0;if(l&&null!==c.closest(o))return!0}return!1},isIgnored:function(n,s,o){return!("TITLE"!==n.tagName||!o.headTitleMutations)||-2===s.getId(n)},isSerialized:function(n,s){return-1!==s.getId(n)},isSerializedIframe:function(n,s){return Boolean("IFRAME"===n.nodeName&&s.getMeta(n))},isSerializedStylesheet:function(n,s){return Boolean("LINK"===n.nodeName&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&"stylesheet"===n.getAttribute("rel")&&s.getMeta(n))},iterateResolveTree:function e2(n,s){s(n.value);for(var o=n.children.length-1;o>=0;o--)e2(n.children[o],s)},legacy_isTouchEvent:function(n){return Boolean(n.changedTouches)},get nowTimestamp(){return Ja},on:function(n,s,o){void 0===o&&(o=document);var l={capture:!0,passive:!0};return o.addEventListener(n,s,l),()=>o.removeEventListener(n,s,l)},patch:function(n,s,o){try{if(!(s in n))return()=>{};var l=n[s],c=o(l);return"function"==typeof c&&(c.prototype=c.prototype||{},Object.defineProperties(c,{__rrweb_original__:{enumerable:!1,value:l}})),n[s]=c,()=>{n[s]=l}}catch(d){return()=>{}}},polyfill:function(n){void 0===n&&(n=window),"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach)},queueToResolveTrees:function(n){var s={},r2=(n,o)=>{var l={value:n,parent:o,children:[]};return s[n.node.id]=l,l},o=[];for(var l of n){var{nextId:c,parentId:d}=l;if(c&&c in s){var h=s[c];if(h.parent){var p=h.parent.children.indexOf(h);h.parent.children.splice(p,0,r2(l,h.parent))}else{var f=o.indexOf(h);o.splice(f,0,r2(l,null))}}else if(d in s){var m=s[d];m.children.push(r2(l,m))}else o.push(r2(l,null))}return o},shadowHostInDom:br,throttle:function(n,s,o){void 0===o&&(o={});var l=null,c=0;return function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];var f=Date.now();c||!1!==o.leading||(c=f);var m=s-(f-c),_=this;m<=0||m>s?(l&&(clearTimeout(l),l=null),c=f,n.apply(_,h)):l||!1===o.trailing||(l=setTimeout((()=>{c=!1===o.leading?0:Date.now(),l=null,n.apply(_,h)}),m))}},uniqueTextMutations:function(n){for(var s=new Set,o=[],l=n.length;l--;){var c=n[l];s.has(c.id)||(o.push(c),s.add(c.id))}return o}},Symbol.toStringTag,{value:"Module"})),Ka="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Qa=0;Qa<64;Qa++)Ka["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Qa)]=Qa;"undefined"!=typeof window&&window.Blob&&new Blob([Uint8Array.from(atob("KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo="),(n=>n.charCodeAt(0)))],{type:"text/javascript;charset=utf-8"});try{if(2!==Array.from([1],(n=>2*n))[0]){var el=document.createElement("iframe");document.body.appendChild(el),Array.from=(null==(Sa=el.contentWindow)?void 0:Sa.Array.from)||Array.from,document.body.removeChild(el)}}catch(es){console.debug("Unable to override Array.from",es)}new class{constructor(){zt(this,"idNodeMap",new Map),zt(this,"nodeMetaMap",new WeakMap)}getId(n){var s;if(!n)return-1;var o=null==(s=this.getMeta(n))?void 0:s.id;return null!=o?o:-1}getNode(n){return this.idNodeMap.get(n)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(n){return this.nodeMetaMap.get(n)||null}removeNodeFromMap(n){var s=this.getId(n);this.idNodeMap.delete(s),n.childNodes&&n.childNodes.forEach((n=>this.removeNodeFromMap(n)))}has(n){return this.idNodeMap.has(n)}hasNode(n){return this.nodeMetaMap.has(n)}add(n,s){var o=s.id;this.idNodeMap.set(o,n),this.nodeMetaMap.set(n,s)}replace(n,s){var o=this.getNode(n);if(o){var l=this.nodeMetaMap.get(o);l&&this.nodeMetaMap.set(s,l)}this.idNodeMap.set(n,s)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}},function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"}(Ya||(Ya={}));class xr{constructor(n){$t(this,"fileName"),$t(this,"functionName"),$t(this,"lineNumber"),$t(this,"columnNumber"),this.fileName=n.fileName||"",this.functionName=n.functionName||"",this.lineNumber=n.lineNumber,this.columnNumber=n.columnNumber}toString(){var n=this.lineNumber||"",s=this.columnNumber||"";return this.functionName?this.functionName+" ("+this.fileName+":"+n+":"+s+")":this.fileName+":"+n+":"+s}}var tl=/(^|@)\S+:\d+/,rl=/^\s*at .*(\S+:\d+|\(native\))/m,nl=/^(eval@)?(\[native code])?$/,il={parse:function(n){return n?void 0!==n.stacktrace||void 0!==n["opera#sourceloc"]?this.parseOpera(n):n.stack&&n.stack.match(rl)?this.parseV8OrIE(n):n.stack?this.parseFFOrSafari(n):(console.warn("[console-record-plugin]: Failed to parse error object:",n),[]):[]},extractLocation:function(n){if(-1===n.indexOf(":"))return[n];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n.replace(/[()]/g,""));if(!s)throw new Error("Cannot parse given url: "+n);return[s[1],s[2]||void 0,s[3]||void 0]},parseV8OrIE:function(n){return n.stack.split("\n").filter((function(n){return!!n.match(rl)}),this).map((function(n){n.indexOf("(eval ")>-1&&(n=n.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var s=n.replace(/^\s+/,"").replace(/\(eval code/g,"("),o=s.match(/ (\((.+):(\d+):(\d+)\)$)/),l=(s=o?s.replace(o[0],""):s).split(/\s+/).slice(1),c=this.extractLocation(o?o[1]:l.pop()),d=l.join(" ")||void 0,h=["eval","<anonymous>"].indexOf(c[0])>-1?void 0:c[0];return new xr({functionName:d,fileName:h,lineNumber:c[1],columnNumber:c[2]})}),this)},parseFFOrSafari:function(n){return n.stack.split("\n").filter((function(n){return!n.match(nl)}),this).map((function(n){if(n.indexOf(" > eval")>-1&&(n=n.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===n.indexOf("@")&&-1===n.indexOf(":"))return new xr({functionName:n});var s=/((.*".+"[^@]*)?[^@]*)(?:@)/,o=n.match(s),l=o&&o[1]?o[1]:void 0,c=this.extractLocation(n.replace(s,""));return new xr({functionName:l,fileName:c[0],lineNumber:c[1],columnNumber:c[2]})}),this)},parseOpera:function(n){return!n.stacktrace||n.message.indexOf("\n")>-1&&n.message.split("\n").length>n.stacktrace.split("\n").length?this.parseOpera9(n):n.stack?this.parseOpera11(n):this.parseOpera10(n)},parseOpera9:function(n){for(var s=/Line (\d+).*script (?:in )?(\S+)/i,o=n.message.split("\n"),l=[],c=2,d=o.length;c<d;c+=2){var h=s.exec(o[c]);h&&l.push(new xr({fileName:h[2],lineNumber:parseFloat(h[1])}))}return l},parseOpera10:function(n){for(var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=n.stacktrace.split("\n"),l=[],c=0,d=o.length;c<d;c+=2){var h=s.exec(o[c]);h&&l.push(new xr({functionName:h[3]||void 0,fileName:h[2],lineNumber:parseFloat(h[1])}))}return l},parseOpera11:function(n){return n.stack.split("\n").filter((function(n){return!!n.match(tl)&&!n.match(/^Error created at/)}),this).map((function(n){var s=n.split("@"),o=this.extractLocation(s.pop()),l=(s.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new xr({functionName:l,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}),this)}};function Nr(n){if(!n||!n.outerHTML)return"";for(var s="";n.parentElement;){var o=n.localName;if(!o)break;o=o.toLowerCase();var l=n.parentElement,c=[];if(l.children&&l.children.length>0)for(var d=0;d<l.children.length;d++){var h=l.children[d];h.localName&&h.localName.toLowerCase&&h.localName.toLowerCase()===o&&c.push(h)}c.length>1&&(o+=":eq("+c.indexOf(n)+")"),s=o+(s?">"+s:""),n=l}return s}function Pr(n){return"[object Object]"===Object.prototype.toString.call(n)}function Fr(n,s){if(0===s)return!0;var o=Object.keys(n);for(var l of o)if(Pr(n[l])&&Fr(n[l],s-1))return!0;return!1}function Lr(n,s){var o={numOfKeysLimit:50,depthOfLimit:4};Object.assign(o,s);var l=[],c=[];return JSON.stringify(n,(function(n,s){if(l.length>0){var d=l.indexOf(this);~d?l.splice(d+1):l.push(this),~d?c.splice(d,1/0,n):c.push(n),~l.indexOf(s)&&(s=l[0]===s?"[Circular ~]":"[Circular ~."+c.slice(0,l.indexOf(s)).join(".")+"]")}else l.push(s);if(null===s)return s;if(void 0===s)return"undefined";if(Pr(h=s)&&Object.keys(h).length>o.numOfKeysLimit||"function"==typeof h||Pr(h)&&Fr(h,o.depthOfLimit))return function(n){var s=n.toString();return o.stringLengthLimit&&s.length>o.stringLengthLimit&&(s=s.slice(0,o.stringLengthLimit)+"..."),s}(s);var h;if("bigint"==typeof s)return s.toString()+"n";if(s instanceof Event){var p={};for(var f in s){var m=s[f];Array.isArray(m)?p[f]=Nr(m.length?m[0]:null):p[f]=m}return p}return s instanceof Node?s instanceof HTMLElement?s?s.outerHTML:"":s.nodeName:s instanceof Error?s.stack?s.stack+"\nEnd of stack for Error object":s.name+": "+s.message:s}))}var sl={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function Dr(n,s,o){var l,c=o?Object.assign({},sl,o):sl,d=c.logger;if(!d)return()=>{};l="string"==typeof d?s[d]:d;var h=0,p=!1,f=[];if(c.level.includes("error")){var u2=s=>{var o=s.message,l=s.error,d=il.parse(l).map((n=>n.toString())),h=[Lr(o,c.stringifyOptions)];n({level:"error",trace:d,payload:h})};s.addEventListener("error",u2),f.push((()=>{s.removeEventListener("error",u2)}));var c2=s=>{var o,l;s.reason instanceof Error?l=[Lr("Uncaught (in promise) "+(o=s.reason).name+": "+o.message,c.stringifyOptions)]:(o=new Error,l=[Lr("Uncaught (in promise)",c.stringifyOptions),Lr(s.reason,c.stringifyOptions)]);var d=il.parse(o).map((n=>n.toString()));n({level:"error",trace:d,payload:l})};s.addEventListener("unhandledrejection",c2),f.push((()=>{s.removeEventListener("unhandledrejection",c2)}))}for(var m of c.level)f.push(h2(l,m));return()=>{f.forEach((n=>n()))};function h2(s,o){var l=this;return s[o]?Xa.patch(s,o,(s=>function(){for(var d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];if(s.apply(l,f),!("assert"===o&&f[0]||p)){p=!0;try{var _=il.parse(new Error).map((n=>n.toString())).splice(1),y=("assert"===o?f.slice(1):f).map((n=>Lr(n,c.stringifyOptions)));++h<c.lengthThreshold?n({level:o,trace:_,payload:y}):h===c.lengthThreshold&&n({level:"warn",trace:[],payload:[Lr("The number of log records reached the threshold.")]})}catch(E){s("rrweb logger error:",E,...f)}finally{p=!1}}})):()=>{}}}var Hr=n=>({name:"rrweb/console@1",observer:Dr,options:n}),ol=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Br=function(n,s){if(void 0===s&&(s=[]),!n)return!1;var o=n.toLowerCase();return ol.concat(s).some((n=>{var s=n.toLowerCase();return-1!==o.indexOf(s)}))},al=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function $r(n,s){return-1!==n.indexOf(s)}var Wr=function(n){return n.trim()},Ur=function(n){return n.replace(/^\$/,"")},ll=Array.isArray,cl=Object.prototype,ul=cl.hasOwnProperty,dl=cl.toString,hl=ll||function(n){return"[object Array]"===dl.call(n)},Xr=n=>"function"==typeof n,Jr=n=>n===Object(n)&&!hl(n),Qr=n=>{if(Jr(n)){for(var s in n)if(ul.call(n,s))return!1;return!0}return!1},ei=n=>void 0===n,ti=n=>"[object String]"==dl.call(n),ri=n=>ti(n)&&0===n.trim().length,ii=n=>null===n,ni=n=>ei(n)||ii(n),si=n=>"[object Number]"==dl.call(n),oi=n=>"[object Boolean]"===dl.call(n),ai=n=>n instanceof FormData,li=n=>$r(al,n);function ui(n){return null===n||"object"!=typeof n}function ci(n,s){return Object.prototype.toString.call(n)==="[object "+s+"]"}function di(n){return!ei(Event)&&function(n,s){try{return n instanceof s}catch(o){return!1}}(n,Event)}var pl=[!0,"true",1,"1","yes"],pi=n=>$r(pl,n),fl=[!1,"false",0,"0","no"];function fi(n,s,o,l,c){return s>o&&(l.warn("min cannot be greater than max."),s=o),si(n)?n>o?(l.warn(" cannot be  greater than max: "+o+". Using max value instead."),o):n<s?(l.warn(" cannot be less than min: "+s+". Using min value instead."),s):n:(l.warn(" must be a number. using max or fallback. max: "+o+", fallback: "+c),fi(c||o,s,o,l))}class gi{constructor(n){this._buckets={},this._onBucketRateLimited=n._onBucketRateLimited,this._bucketSize=fi(n.bucketSize,0,100,n._logger),this._refillRate=fi(n.refillRate,0,this._bucketSize,n._logger),this._refillInterval=fi(n.refillInterval,0,864e5,n._logger)}_applyRefill(n,s){var o=s-n.lastAccess,l=Math.floor(o/this._refillInterval);if(l>0){var c=l*this._refillRate;n.tokens=Math.min(n.tokens+c,this._bucketSize),n.lastAccess=n.lastAccess+l*this._refillInterval}}consumeRateLimit(n){var s,o=Date.now(),l=String(n),c=this._buckets[l];return c?this._applyRefill(c,o):(c={tokens:this._bucketSize,lastAccess:o},this._buckets[l]=c),0===c.tokens||(c.tokens--,0===c.tokens&&(null==(s=this._onBucketRateLimited)||s.call(this,n)),0===c.tokens)}stop(){this._buckets={}}}var gl,ml,vl,bi=n=>n instanceof Error;function Si(n){var s=globalThis._posthogChunkIds;if(s){var o=Object.keys(s);return vl&&o.length===ml||(ml=o.length,vl=o.reduce(((o,l)=>{gl||(gl={});var c=gl[l];if(c)o[c[0]]=c[1];else for(var d=n(l),h=d.length-1;h>=0;h--){var p=d[h],f=null==p?void 0:p.filename,m=s[l];if(f&&m){o[f]=m,gl[l]=[f,m];break}}return o}),{})),vl}}var _l="?";function Ci(n,s,o,l){var c={platform:"web:javascript",filename:n,function:"<anonymous>"===s?_l:s,in_app:!0};return ei(o)||(c.lineno=o),ei(l)||(c.colno=l),c}var Ii=(n,s)=>{var o=-1!==n.indexOf("safari-extension"),l=-1!==n.indexOf("safari-web-extension");return o||l?[-1!==n.indexOf("@")?n.split("@")[0]:_l,o?"safari-extension:"+s:"safari-web-extension:"+s]:[n,s]},yl=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,bl=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,wl=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ti=n=>{var s=yl.exec(n);if(s){var[,o,l,c]=s;return Ci(o,_l,+l,+c)}var d=bl.exec(n);if(d){if(d[2]&&0===d[2].indexOf("eval")){var h=wl.exec(d[2]);h&&(d[2]=h[1],d[3]=h[2],d[4]=h[3])}var[p,f]=Ii(d[1]||_l,d[2]);return Ci(f,p,d[3]?+d[3]:void 0,d[4]?+d[4]:void 0)}},Sl=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Cl=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ai=n=>{var s=Sl.exec(n);if(s){if(s[3]&&s[3].indexOf(" > eval")>-1){var o=Cl.exec(s[3]);o&&(s[1]=s[1]||"eval",s[3]=o[1],s[4]=o[2],s[5]="")}var l=s[3],c=s[1]||_l;return[c,l]=Ii(c,l),Ci(l,c,s[4]?+s[4]:void 0,s[5]?+s[5]:void 0)}},kl=/\(error: (.*)\)/;class Li{constructor(n,s,o){void 0===n&&(n=[]),void 0===s&&(s=[]),void 0===o&&(o=[]),this.coercers=n,this.modifiers=o,this.stackParser=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return function(n,o){void 0===o&&(o=0);for(var l=[],c=n.split("\n"),d=o;d<c.length;d++){var h=c[d];if(!(h.length>1024)){var p=kl.test(h)?h.replace(kl,"$1"):h;if(!p.match(/\S*Error: /)){for(var f of s){var m=f(p);if(m){l.push(m);break}}if(l.length>=50)break}}}return function(n){if(!n.length)return[];var s=Array.from(n);return s.reverse(),s.slice(0,50).map((n=>{return r({},n,{filename:n.filename||(o=s,o[o.length-1]||{}).filename,function:n.function||_l});var o}))}(l)}}(...s)}buildFromUnknown(n,s){void 0===s&&(s={});var o=s&&s.mechanism||{handled:!0,type:"generic"},l=this.buildCoercingContext(o,s,0).apply(n),c=this.buildParsingContext(),d=this.parseStacktrace(l,c);return{$exception_list:this.convertToExceptionList(d,o),$exception_level:"error"}}modifyFrames(n){var s=this;return t((function*(){for(var o of n)o.stacktrace&&o.stacktrace.frames&&hl(o.stacktrace.frames)&&(o.stacktrace.frames=yield s.applyModifiers(o.stacktrace.frames));return n}))()}coerceFallback(n){var s;return{type:"Error",value:"Unknown error",stack:null==(s=n.syntheticException)?void 0:s.stack,synthetic:!0}}parseStacktrace(n,s){var o,l;return null!=n.cause&&(o=this.parseStacktrace(n.cause,s)),""!=n.stack&&null!=n.stack&&(l=this.applyChunkIds(this.stackParser(n.stack,n.synthetic?1:0),s.chunkIdMap)),r({},n,{cause:o,stack:l})}applyChunkIds(n,s){return n.map((n=>(n.filename&&s&&(n.chunk_id=s[n.filename]),n)))}applyCoercers(n,s){for(var o of this.coercers)if(o.match(n))return o.coerce(n,s);return this.coerceFallback(s)}applyModifiers(n){var s=this;return t((function*(){var o=n;for(var l of s.modifiers)o=yield l(o);return o}))()}convertToExceptionList(n,s){var o,l,c,d={type:n.type,value:n.value,mechanism:{type:null!==(o=s.type)&&void 0!==o?o:"generic",handled:null===(l=s.handled)||void 0===l||l,synthetic:null!==(c=n.synthetic)&&void 0!==c&&c}};n.stack&&(d.stacktrace={type:"raw",frames:n.stack});var h=[d];return null!=n.cause&&h.push(...this.convertToExceptionList(n.cause,r({},s,{handled:!0}))),h}buildParsingContext(){return{chunkIdMap:Si(this.stackParser)}}buildCoercingContext(n,s,o){void 0===o&&(o=0);var n2=(o,l)=>{if(l<=4){var c=this.buildCoercingContext(n,s,l);return this.applyCoercers(o,c)}};return r({},s,{syntheticException:0==o?s.syntheticException:void 0,mechanism:n,apply:n=>n2(n,o),next:n=>n2(n,o+1)})}}class Oi{match(n){return this.isDOMException(n)||this.isDOMError(n)}coerce(n,s){var o=ti(n.stack);return{type:this.getType(n),value:this.getValue(n),stack:o?n.stack:void 0,cause:n.cause?s.next(n.cause):void 0,synthetic:!1}}getType(n){return this.isDOMError(n)?"DOMError":"DOMException"}getValue(n){var s=n.name||(this.isDOMError(n)?"DOMError":"DOMException");return n.message?s+": "+n.message:s}isDOMException(n){return ci(n,"DOMException")}isDOMError(n){return ci(n,"DOMError")}}class Di{match(n){return n instanceof Error}coerce(n,s){return{type:this.getType(n),value:this.getMessage(n,s),stack:this.getStack(n),cause:n.cause?s.next(n.cause):void 0,synthetic:!1}}getType(n){return n.name||n.constructor.name}getMessage(n,s){var o=n.message;return o.error&&"string"==typeof o.error.message?String(o.error.message):String(o)}getStack(n){return n.stacktrace||n.stack||void 0}}class Hi{constructor(){}match(n){return ci(n,"ErrorEvent")&&null!=n.error}coerce(n,s){var o;return s.apply(n.error)||{type:"ErrorEvent",value:n.message,stack:null==(o=s.syntheticException)?void 0:o.stack,synthetic:!0}}}var xl=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class Bi{match(n){return"string"==typeof n}coerce(n,s){var o,[l,c]=this.getInfos(n);return{type:null!=l?l:"Error",value:null!=c?c:n,stack:null==(o=s.syntheticException)?void 0:o.stack,synthetic:!0}}getInfos(n){var s="Error",o=n,l=n.match(xl);return l&&(s=l[1],o=l[2]),[s,o]}}var Il=["fatal","error","warning","log","info","debug"];function $i(n,s){void 0===s&&(s=40);var o=Object.keys(n);if(o.sort(),!o.length)return"[object has no keys]";for(var l=o.length;l>0;l--){var c=o.slice(0,l).join(", ");if(!(c.length>s))return l===o.length||c.length<=s?c:c.slice(0,s)+"..."}return""}class Wi{match(n){return"object"==typeof n&&null!==n}coerce(n,s){var o,l=this.getErrorPropertyFromObject(n);return l?s.apply(l):{type:this.getType(n),value:this.getValue(n),stack:null==(o=s.syntheticException)?void 0:o.stack,level:this.isSeverityLevel(n.level)?n.level:"error",synthetic:!0}}getType(n){return di(n)?n.constructor.name:"Error"}getValue(n){if("name"in n&&"string"==typeof n.name){var s="'"+n.name+"' captured as exception";return"message"in n&&"string"==typeof n.message&&(s+=" with message: '"+n.message+"'"),s}if("message"in n&&"string"==typeof n.message)return n.message;var o=this.getObjectClassName(n);return(o&&"Object"!==o?"'"+o+"'":"Object")+" captured as exception with keys: "+$i(n)}isSeverityLevel(n){return ti(n)&&!ri(n)&&Il.indexOf(n)>=0}getErrorPropertyFromObject(n){for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){var o=n[s];if(bi(o))return o}}getObjectClassName(n){try{var s=Object.getPrototypeOf(n);return s?s.constructor.name:void 0}catch(o){return}}}class Ui{match(n){return di(n)}coerce(n,s){var o,l=n.constructor.name;return{type:l,value:l+" captured as exception with keys: "+$i(n),stack:null==(o=s.syntheticException)?void 0:o.stack,synthetic:!0}}}class Zi{match(n){return ui(n)}coerce(n,s){var o;return{type:"Error",value:"Primitive value captured as exception: "+String(n),stack:null==(o=s.syntheticException)?void 0:o.stack,synthetic:!0}}}class zi{match(n){return ci(n,"PromiseRejectionEvent")}coerce(n,s){var o,l=this.getUnhandledRejectionReason(n);return ui(l)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(l),stack:null==(o=s.syntheticException)?void 0:o.stack,synthetic:!0}:s.apply(l)}getUnhandledRejectionReason(n){if(ui(n))return n;try{if("reason"in n)return n.reason;if("detail"in n&&"reason"in n.detail)return n.detail.reason}catch(s){}return n}}var El="undefined"!=typeof window?window:void 0,Tl="undefined"!=typeof globalThis?globalThis:El,Al=Array.prototype,Ml=Al.forEach,Rl=Al.indexOf,Ol=null==Tl?void 0:Tl.navigator,Pl=null==Tl?void 0:Tl.document,Ll=null==Tl?void 0:Tl.location,Nl=null==Tl?void 0:Tl.fetch,Fl=null!=Tl&&Tl.XMLHttpRequest&&"withCredentials"in new Tl.XMLHttpRequest?Tl.XMLHttpRequest:void 0,Bl=null==Tl?void 0:Tl.AbortController,Ul=null==Ol?void 0:Ol.userAgent,Hl=null!=El?El:{},jl={DEBUG:!1,LIB_VERSION:"1.292.0"},cn=n=>{var s={_log:function(s){if(El&&(jl.DEBUG||Hl.POSTHOG_DEBUG)&&!ei(El.console)&&El.console){for(var o=("__rrweb_original__"in El.console[s]?El.console[s].__rrweb_original__:El.console[s]),l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];o(n,...c)}},info:function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];s._log("log",...o)},warn:function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];s._log("warn",...o)},error:function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];s._log("error",...o)},critical:function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];console.error(n,...o)},uninitializedWarning:n=>{s.error("You must initialize PostHog before calling "+n)},createLogger:s=>cn(n+" "+s)};return s},zl=cn("[PostHog.js]"),Wl=zl.createLogger,Gl={};function vn(n,s,o){if(hl(n))if(Ml&&n.forEach===Ml)n.forEach(s,o);else if("length"in n&&n.length===+n.length)for(var l=0,c=n.length;l<c;l++)if(l in n&&s.call(o,n[l],l)===Gl)return}function fn(n,s,o){if(!ni(n)){if(hl(n))return vn(n,s,o);if(ai(n)){for(var l of n.entries())if(s.call(o,l[1],l[0])===Gl)return}else for(var c in n)if(ul.call(n,c)&&s.call(o,n[c],c)===Gl)return}}var gn=function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return vn(o,(function(s){for(var o in s)void 0!==s[o]&&(n[o]=s[o])})),n},_n=function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return vn(o,(function(s){vn(s,(function(s){n.push(s)}))})),n};function mn(n){for(var s=Object.keys(n),o=s.length,l=new Array(o);o--;)l[o]=[s[o],n[s[o]]];return l}var yn=function(n){try{return n()}catch(s){return}},bn=function(n){return function(){try{for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return n.apply(this,o)}catch(c){zl.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),zl.critical(c)}}},Sn=function(n){var s={};return fn(n,(function(n,o){(ti(n)&&n.length>0||si(n))&&(s[o]=n)})),s};var Yl=["herokuapp.com","vercel.app","netlify.app"];function In(n){var s=null==n?void 0:n.hostname;if(!ti(s))return!1;var o=s.split(".").slice(-2).join(".");for(var l of Yl)if(o===l)return!1;return!0}function kn(n,s){for(var o=0;o<n.length;o++)if(s(n[o]))return n[o]}function En(n,s,o,l){var{capture:c=!1,passive:d=!0}=null!=l?l:{};null==n||n.addEventListener(s,o,{capture:c,passive:d})}var xn=n=>{var s=null==Pl?void 0:Pl.createElement("a");return ei(s)?null:(s.href=n,s)},Tn=function(n,s){var o,l;void 0===s&&(s="&");var c=[];return fn(n,(function(n,s){ei(n)||ei(s)||"undefined"===s||(o=encodeURIComponent(n instanceof File?n.name:n.toString()),l=encodeURIComponent(s),c[c.length]=l+"="+o)})),c.join(s)},Mn=function(n,s){for(var o,l=((n.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),c=0;c<l.length;c++){var d=l[c].split("=");if(d[0]===s){o=d;break}}if(!hl(o)||o.length<2)return"";var h=o[1];try{h=decodeURIComponent(h)}catch(p){zl.error("Skipping decoding for malformed query param: "+h)}return h.replace(/\+/g," ")},Rn=function(n,s,o){if(!n||!s||!s.length)return n;for(var l=n.split("#"),c=l[0]||"",d=l[1],h=c.split("?"),p=h[1],f=h[0],m=(p||"").split("&"),_=[],y=0;y<m.length;y++){var E=m[y].split("=");hl(E)&&(s.includes(E[0])?_.push(E[0]+"="+o):_.push(m[y]))}var M=f;return null!=p&&(M+="?"+_.join("&")),null!=d&&(M+="#"+d),M},An=function(n,s){var o=n.match(new RegExp(s+"=([^&]*)"));return o?o[1]:null};function Nn(n,s,o){try{if(!(s in n))return()=>{};var l=n[s],c=o(l);return Xr(c)&&(c.prototype=c.prototype||{},Object.defineProperties(c,{__posthog_wrapped__:{enumerable:!1,value:!0}})),n[s]=c,()=>{n[s]=l}}catch(d){return()=>{}}}function Pn(n,s){var o,l=function(n){try{return"string"==typeof n?new URL(n).hostname:"url"in n?new URL(n.url).hostname:n.hostname}catch(s){return null}}(n),c={hostname:l,isHostDenied:!1};if(null==(o=s.payloadHostDenyList)||!o.length||null==l||!l.trim().length)return c;for(var d of s.payloadHostDenyList)if(l.endsWith(d))return{hostname:l,isHostDenied:!0};return c}var Zl="$people_distinct_id",Xl="__alias",Kl="__timers",Ql="$autocapture_disabled_server_side",ec="$heatmaps_enabled_server_side",dc="$exception_capture_enabled_server_side",pc="$error_tracking_suppression_rules",fc="$error_tracking_capture_extension_exceptions",gc="$web_vitals_enabled_server_side",mc="$dead_clicks_enabled_server_side",vc="$web_vitals_allowed_metrics",_c="$session_recording_remote_config",yc="$sesid",Ic="$session_is_sampled",Oc="$enabled_feature_flags",Pc="$early_access_features",Lc="$feature_flag_details",Nc="$stored_person_properties",Fc="$stored_group_properties",Bc="$surveys",$c="$surveys_activated",Uc="$flag_call_reported",Hc="$user_state",qc="$client_session_props",Wc="$capture_rate_limit",Vc="$initial_campaign_params",Zc="$initial_referrer_info",eu="$initial_person_info",tu="$epp",ru="__POSTHOG_TOOLBAR__",nu="$posthog_cookieless",iu=[Zl,Xl,"__cmpns",Kl,"$session_recording_enabled_server_side",ec,yc,Oc,pc,Hc,Pc,Lc,Fc,Nc,Bc,Uc,qc,Wc,Vc,Zc,tu,eu];function hs(n){return n instanceof Element&&(n.id===ru||!(null==n.closest||!n.closest(".toolbar-global-fade-container")))}function ps(n){return!!n&&1===n.nodeType}function vs(n,s){return!!n&&!!n.tagName&&n.tagName.toLowerCase()===s.toLowerCase()}function fs(n){return!!n&&3===n.nodeType}function gs(n){return!!n&&11===n.nodeType}function _s(n){return n?Wr(n).split(/\s+/):[]}function ms(n){var s=null==El?void 0:El.location.href;return!!(s&&n&&n.some((n=>s.match(n))))}function ys(n){var s="";switch(typeof n.className){case"string":s=n.className;break;case"object":s=(n.className&&"baseVal"in n.className?n.className.baseVal:null)||n.getAttribute("class")||"";break;default:s=""}return _s(s)}function bs(n){return ni(n)?null:Wr(n).split(/(\s+)/).filter((n=>Hs(n))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Ss(n){var s="";return Rs(n)&&!As(n)&&n.childNodes&&n.childNodes.length&&fn(n.childNodes,(function(n){var o;fs(n)&&n.textContent&&(s+=null!==(o=bs(n.textContent))&&void 0!==o?o:"")})),Wr(s)}function ws(n){return ei(n.target)?n.srcElement||null:null!=(s=n.target)&&s.shadowRoot?n.composedPath()[0]||null:n.target||null;var s}var su=["a","button","form","input","select","textarea","label"];function Is(n,s){if(ei(s))return!0;var o,i2=function(n){if(s.some((s=>n.matches(s))))return{v:!0}};for(var l of n)if(o=i2(l))return o.v;return!1}function ks(n){var s=n.parentNode;return!(!s||!ps(s))&&s}var au=[".ph-no-rageclick",".ph-no-capture"],xs=n=>!n||vs(n,"html")||!ps(n),Ts=(n,s)=>{if(!El||xs(n))return{parentIsUsefulElement:!1,targetElementList:[]};for(var o=!1,l=[n],c=n;c.parentNode&&!vs(c,"body");)if(gs(c.parentNode))l.push(c.parentNode.host),c=c.parentNode.host;else{var d=ks(c);if(!d)break;if(s||su.indexOf(d.tagName.toLowerCase())>-1)o=!0;else{var h=El.getComputedStyle(d);h&&"pointer"===h.getPropertyValue("cursor")&&(o=!0)}l.push(d),c=d}return{parentIsUsefulElement:o,targetElementList:l}};function Rs(n){for(var s=n;s.parentNode&&!vs(s,"body");s=s.parentNode){var o=ys(s);if($r(o,"ph-sensitive")||$r(o,"ph-no-capture"))return!1}if($r(ys(n),"ph-include"))return!0;var l=n.type||"";if(ti(l))switch(l.toLowerCase()){case"hidden":case"password":return!1}var c=n.name||n.id||"";return!ti(c)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(c.replace(/[^a-zA-Z0-9]/g,""))}function As(n){return!!(vs(n,"input")&&!["button","checkbox","submit","reset"].includes(n.type)||vs(n,"select")||vs(n,"textarea")||"true"===n.getAttribute("contenteditable"))}var lu="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",cu=new RegExp("^(?:"+lu+")$"),uu=new RegExp(lu),wu="\\d{3}-?\\d{2}-?\\d{4}",Su=new RegExp("^("+wu+")$"),Cu=new RegExp("("+wu+")");function Hs(n,s){if(void 0===s&&(s=!0),ni(n))return!1;if(ti(n)){if(n=Wr(n),(s?cu:uu).test((n||"").replace(/[- ]/g,"")))return!1;if((s?Su:Cu).test(n))return!1}return!0}function qs(n){var s=Ss(n);return Hs(s=(s+" "+Bs(n)).trim())?s:""}function Bs(n){var s="";return n&&n.childNodes&&n.childNodes.length&&fn(n.childNodes,(function(n){var o;if(n&&"span"===(null==(o=n.tagName)?void 0:o.toLowerCase()))try{var l=Ss(n);s=(s+" "+l).trim(),n.childNodes&&n.childNodes.length&&(s=(s+" "+Bs(n)).trim())}catch(c){zl.error("[AutoCapture]",c)}})),s}function Vs(n){return function(n){return n.map((n=>{var s,o,l="";if(n.tag_name&&(l+=n.tag_name),n.attr_class)for(var c of(n.attr_class.sort(),n.attr_class))l+="."+c.replace(/"/g,"");var d=r({},n.text?{text:n.text}:{},{"nth-child":null!==(s=n.nth_child)&&void 0!==s?s:0,"nth-of-type":null!==(o=n.nth_of_type)&&void 0!==o?o:0},n.href?{href:n.href}:{},n.attr_id?{attr_id:n.attr_id}:{},n.attributes),h={};return mn(d).sort(((n,s)=>{var[o]=n,[l]=s;return o.localeCompare(l)})).forEach((n=>{var[s,o]=n;return h[$s(s.toString())]=$s(o.toString())})),(l+=":")+mn(h).map((n=>{var[s,o]=n;return s+'="'+o+'"'})).join("")})).join(";")}(n.map((n=>{var s,o,l={text:null==(s=n.$el_text)?void 0:s.slice(0,400),tag_name:n.tag_name,href:null==(o=n.attr__href)?void 0:o.slice(0,2048),attr_class:Ws(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return mn(n).filter((n=>{var[s]=n;return 0===s.indexOf("attr__")})).forEach((n=>{var[s,o]=n;return l.attributes[s]=o})),l})))}function $s(n){return n.replace(/"|\\"/g,'\\"')}function Ws(n){var s=n.attr__class;return s?hl(s)?s:_s(s):void 0}var xu={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:n=>n,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},Eu=Wl("[Recorder]"),zs=n=>"navigation"===n.entryType,js=n=>"resource"===n.entryType;function Ys(n,s){return!!s&&(oi(s)||s[n])}function Xs(n){var{type:s,recordBody:o,headers:l,url:c}=n;function s2(n){var s=Object.keys(l).find((n=>"content-type"===n.toLowerCase())),o=s&&l[s];return n.some((n=>null==o?void 0:o.includes(n)))}if(!o)return!1;if(function e3(n){try{return"string"==typeof n?n.startsWith("blob:"):n instanceof URL?"blob:"===n.protocol:n instanceof Request&&e3(n.url)}catch(s){return!1}}(c))return!1;if(oi(o))return!0;if(hl(o))return s2(o);var d=o[s];return oi(d)?d:s2(d)}function Ks(n,s,o,l,c,d){return Js.apply(this,arguments)}function Js(){return Js=t((function*(n,s,o,l,c,d){return void 0===d&&(d=0),d>10?(Eu.warn("Failed to get performance entry for request",{url:o,initiatorType:s}),null):function(n,s){for(var o=n.length-1;o>=0;o-=1)if(s(n[o]))return n[o]}(n.performance.getEntriesByName(o),(n=>js(n)&&n.initiatorType===s&&(ei(l)||n.startTime>=l)&&(ei(c)||n.startTime<=c)))||(yield new Promise((n=>setTimeout(n,50*d))),Ks(n,s,o,l,c,d+1))})),Js.apply(this,arguments)}function Qs(n){var{body:s,options:o,url:l}=n;if(ni(s))return null;var{hostname:c,isHostDenied:d}=Pn(l,o);if(d)return c+" is in deny list";if(ti(s))return s;if((n=>n instanceof Document)(s))return s.textContent;if(ai(s))return Tn(s);if(Jr(s))try{return JSON.stringify(s)}catch(h){return"[SessionReplay] Failed to stringify response object"}return"[SessionReplay] Cannot read body of type "+toString.call(s)}var eo=n=>!ii(n)&&("navigation"===n.entryType||"resource"===n.entryType);function to(n){var{entry:s,method:o,status:l,networkRequest:c,isInitial:d,start:h,end:p,url:f,initiatorType:m}=n;h=s?s.startTime:h,p=s?s.responseEnd:p;var _=Math.floor(Date.now()-performance.now()),y=Math.floor(_+(h||0)),E=[r({},s?s.toJSON():{name:f},{startTime:ei(h)?void 0:Math.round(h),endTime:ei(p)?void 0:Math.round(p),timeOrigin:_,timestamp:y,method:o,initiatorType:m||(s?s.initiatorType:void 0),status:l,requestHeaders:c.requestHeaders,requestBody:c.requestBody,responseHeaders:c.responseHeaders,responseBody:c.responseBody,isInitial:d})];if(eo(s))for(var M of s.serverTiming||[])E.push({timeOrigin:_,timestamp:y,startTime:Math.round(s.startTime),name:M.name,duration:M.duration,entryType:"serverTiming"});return E}var Tu=["video/","audio/"];function io(n){return new Promise(((s,o)=>{var l=setTimeout((()=>s("[SessionReplay] Timeout while trying to read body")),500);try{n.clone().text().then((n=>s(n)),(n=>o(n))).finally((()=>clearTimeout(l)))}catch(c){clearTimeout(l),s("[SessionReplay] Failed to read body")}}))}function no(){return no=t((function*(n){var{r:s,options:o,url:l}=n,{hostname:c,isHostDenied:d}=Pn(l,o);return d?Promise.resolve(c+" is in deny list"):io(s)})),no.apply(this,arguments)}function so(){return so=t((function*(n){var{r:s,options:o,url:l}=n,c=function(n){var s,{r:o,options:l,url:c}=n;if("chunked"===o.headers.get("Transfer-Encoding"))return"Chunked Transfer-Encoding is not supported";var d=null==(s=o.headers.get("Content-Type"))?void 0:s.toLowerCase(),h=Tu.some((n=>null==d?void 0:d.startsWith(n)));if(d&&h)return"Content-Type "+d+" is not supported";var{hostname:p,isHostDenied:f}=Pn(c,l);return f?p+" is in deny list":null}({r:s,options:o,url:l});return ii(c)?io(s):Promise.resolve(c)})),so.apply(this,arguments)}var Lu=null;function lo(n,s,o){if(!("performance"in s))return()=>{};if(Lu)return Eu.warn("Network observer already initialised, doing nothing"),()=>{};var l=o?Object.assign({},xu,o):xu,s2=s=>{var o=[];s.requests.forEach((n=>{var s=l.maskRequestFn(n);s&&o.push(s)})),o.length>0&&n(r({},s,{requests:o}))},c=function(n,s,o){if(o.recordInitialRequests){var l=s.performance.getEntries().filter((n=>zs(n)||js(n)&&o.initiatorTypes.includes(n.initiatorType)));n({requests:l.flatMap((n=>to({entry:n,method:void 0,status:void 0,networkRequest:{},isInitial:!0}))),isInitial:!0})}var c=new s.PerformanceObserver((s=>{var l=s.getEntries().filter((n=>{return zs(n)||js(n)&&o.initiatorTypes.includes(n.initiatorType)&&(s=n,!o.recordBody&&!o.recordHeaders||"xmlhttprequest"!==s.initiatorType&&"fetch"!==s.initiatorType);var s}));n({requests:l.flatMap((n=>to({entry:n,method:void 0,status:void 0,networkRequest:{}})))})})),d=PerformanceObserver.supportedEntryTypes.filter((n=>o.performanceEntryTypeToObserve.includes(n)));return c.observe({entryTypes:d}),()=>{c.disconnect()}}(s2,s,l),a2=()=>{},l2=()=>{};return(l.recordHeaders||l.recordBody)&&(a2=function(n,s,o){if(!o.initiatorTypes.includes("xmlhttprequest"))return()=>{};var l=Ys("request",o.recordHeaders),c=Ys("response",o.recordHeaders),d=Nn(s.XMLHttpRequest.prototype,"open",(d=>function(h,p,f,m,_){void 0===f&&(f=!0);var y,E,M=this,P=new Request(p),L={},N={},F=M.setRequestHeader.bind(M);M.setRequestHeader=(n,s)=>(N[n]=s,F(n,s)),l&&(L.requestHeaders=N);var D=M.send.bind(M);M.send=n=>(Xs({type:"request",headers:N,url:p,recordBody:o.recordBody})&&(L.requestBody=Qs({body:n,options:o,url:p})),y=s.performance.now(),D(n));var y2=()=>{if(M.readyState===M.DONE){M.removeEventListener("readystatechange",y2),E=s.performance.now();var l={};M.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((n=>{var s=n.split(": "),o=s.shift(),c=s.join(": ");o&&(l[o]=c)})),c&&(L.responseHeaders=l),Xs({type:"response",headers:l,url:p,recordBody:o.recordBody})&&(L.responseBody=Qs({body:M.response,options:o,url:p})),Ks(s,"xmlhttprequest",P.url,y,E).then((s=>{var o=to({entry:s,method:h,status:null==M?void 0:M.status,networkRequest:L,start:y,end:E,url:p.toString(),initiatorType:"xmlhttprequest"});n({requests:o})})).catch((()=>{}))}};M.addEventListener("readystatechange",y2),d.call(M,h,p.toString(),f,m,_)}));return()=>{d()}}(s2,s,l),l2=function(n,s,o){if(!o.initiatorTypes.includes("fetch"))return()=>{};var l=Ys("request",o.recordHeaders),c=Ys("response",o.recordHeaders),d=Nn(s,"fetch",(d=>{return h=t((function*(h,p){var f,m,_,y=new Request(h,p),E={};try{var M={};y.headers.forEach(((n,s)=>{M[s]=n})),l&&(E.requestHeaders=M),Xs({type:"request",headers:M,url:h,recordBody:o.recordBody})&&(E.requestBody=yield function(n){return no.apply(this,arguments)}({r:y,options:o,url:h})),m=s.performance.now(),f=yield d(y),_=s.performance.now();var P={};return f.headers.forEach(((n,s)=>{P[s]=n})),c&&(E.responseHeaders=P),Xs({type:"response",headers:P,url:h,recordBody:o.recordBody})&&(E.responseBody=yield function(n){return so.apply(this,arguments)}({r:f,options:o,url:h})),f}finally{Ks(s,"fetch",y.url,m,_).then((s=>{var o,l=to({entry:s,method:y.method,status:null==(o=f)?void 0:o.status,networkRequest:E,start:m,end:_,url:y.url,initiatorType:"fetch"});n({requests:l})})).catch((()=>{}))}})),function(n,s){return h.apply(this,arguments)};var h}));return()=>{d()}}(s2,s,l)),Lu=()=>{c(),a2(),l2()}}var uo=n=>({name:"rrweb/network@1",observer:lo,options:n});Hl.__PosthogExtensions__=Hl.__PosthogExtensions__||{},Hl.__PosthogExtensions__.rrwebPlugins={getRecordConsolePlugin:Hr,getRecordNetworkPlugin:uo},Hl.__PosthogExtensions__.rrweb={record:qt,version:"v2"},Hl.rrweb={record:qt,version:"v2"},Hl.rrwebConsoleRecord={getRecordConsolePlugin:Hr},Hl.getRecordNetworkPlugin=uo;var Nu,Du,$u,Hu,qu,Vu,Yu,Zu,Ju={},ed=[],nd=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,id=Array.isArray;function Co(n,s){for(var o in s)n[o]=s[o];return n}function Io(n){var s=n.parentNode;s&&s.removeChild(n)}function ko(n,s,o){var l,c,d,h={};for(d in s)"key"==d?l=s[d]:"ref"==d?c=s[d]:h[d]=s[d];if(arguments.length>2&&(h.children=arguments.length>3?Nu.call(arguments,2):o),"function"==typeof n&&null!=n.defaultProps)for(d in n.defaultProps)void 0===h[d]&&(h[d]=n.defaultProps[d]);return Eo(n,h,l,c,null)}function Eo(n,s,o,l,c){var d={type:n,props:s,key:o,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==c?++$u:c,__i:-1,__u:0};return null==c&&null!=Du.vnode&&Du.vnode(d),d}function xo(n){return n.children}function To(n,s){this.props=n,this.context=s}function Mo(n,s){if(null==s)return n.__?Mo(n.__,n.__i+1):null;for(var o;s<n.__k.length;s++)if(null!=(o=n.__k[s])&&null!=o.__e)return o.__e;return"function"==typeof n.type?Mo(n):null}function Ro(n){var s,o;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,s=0;s<n.__k.length;s++)if(null!=(o=n.__k[s])&&null!=o.__e){n.__e=n.__c.base=o.__e;break}return Ro(n)}}function Ao(n){(!n.__d&&(n.__d=!0)&&Hu.push(n)&&!No.__r++||qu!==Du.debounceRendering)&&((qu=Du.debounceRendering)||Vu)(No)}function No(){var n,s,o,l,c,d,h,p,f;for(Hu.sort(Yu);n=Hu.shift();)n.__d&&(s=Hu.length,l=void 0,d=(c=(o=n).__v).__e,p=[],f=[],(h=o.__P)&&((l=Co({},c)).__v=c.__v+1,Du.vnode&&Du.vnode(l),Bo(h,l,c,o.__n,void 0!==h.ownerSVGElement,32&c.__u?[d]:null,p,null==d?Mo(c):d,!!(32&c.__u),f),l.__.__k[l.__i]=l,Vo(p,l,f),l.__e!=d&&Ro(l)),Hu.length>s&&Hu.sort(Yu));No.__r=0}function Po(n,s,o,l,c,d,h,p,f,m,_){var y,E,M,P,L,N=l&&l.__k||ed,F=s.length;for(o.__d=f,function(n,s,o){var l,c,d,h,p,f=s.length,m=o.length,_=m,y=0;for(n.__k=[],l=0;l<f;l++)null!=(c=n.__k[l]=null==(c=s[l])||"boolean"==typeof c||"function"==typeof c?null:"string"==typeof c||"number"==typeof c||"bigint"==typeof c||c.constructor==String?Eo(null,c,null,null,c):id(c)?Eo(xo,{children:c},null,null,null):void 0===c.constructor&&c.__b>0?Eo(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c)?(c.__=n,c.__b=n.__b+1,p=Lo(c,o,h=l+y,_),c.__i=p,d=null,-1!==p&&(_--,(d=o[p])&&(d.__u|=131072)),null==d||null===d.__v?(-1==p&&y--,"function"!=typeof c.type&&(c.__u|=65536)):p!==h&&(p===h+1?y++:p>h?_>f-h?y+=p-h:y--:y=p<h&&p==h-1?p-h:0,p!==l+y&&(c.__u|=65536))):(d=o[l])&&null==d.key&&d.__e&&(d.__e==n.__d&&(n.__d=Mo(d)),Wo(d,d,!1),o[l]=null,_--);if(_)for(l=0;l<m;l++)null!=(d=o[l])&&!(131072&d.__u)&&(d.__e==n.__d&&(n.__d=Mo(d)),Wo(d,d))}(o,s,N),f=o.__d,y=0;y<F;y++)null!=(M=o.__k[y])&&"boolean"!=typeof M&&"function"!=typeof M&&(E=-1===M.__i?Ju:N[M.__i]||Ju,M.__i=y,Bo(n,M,E,c,d,h,p,f,m,_),P=M.__e,M.ref&&E.ref!=M.ref&&(E.ref&&$o(E.ref,null,M),_.push(M.ref,M.__c||P,M)),null==L&&null!=P&&(L=P),65536&M.__u||E.__k===M.__k?f=Fo(M,f,n):"function"==typeof M.type&&void 0!==M.__d?f=M.__d:P&&(f=P.nextSibling),M.__d=void 0,M.__u&=-196609);o.__d=f,o.__e=L}function Fo(n,s,o){var l,c;if("function"==typeof n.type){for(l=n.__k,c=0;l&&c<l.length;c++)l[c]&&(l[c].__=n,s=Fo(l[c],s,o));return s}return n.__e!=s&&(o.insertBefore(n.__e,s||null),s=n.__e),s&&s.nextSibling}function Lo(n,s,o,l){var c=n.key,d=n.type,h=o-1,p=o+1,f=s[o];if(null===f||f&&c==f.key&&d===f.type)return o;if(l>(null==f||131072&f.__u?0:1))for(;h>=0||p<s.length;){if(h>=0){if((f=s[h])&&!(131072&f.__u)&&c==f.key&&d===f.type)return h;h--}if(p<s.length){if((f=s[p])&&!(131072&f.__u)&&c==f.key&&d===f.type)return p;p++}}return-1}function Oo(n,s,o){"-"===s[0]?n.setProperty(s,null==o?"":o):n[s]=null==o?"":"number"!=typeof o||nd.test(s)?o:o+"px"}function Do(n,s,o,l,c){var d;e:if("style"===s)if("string"==typeof o)n.style.cssText=o;else{if("string"==typeof l&&(n.style.cssText=l=""),l)for(s in l)o&&s in o||Oo(n.style,s,"");if(o)for(s in o)l&&o[s]===l[s]||Oo(n.style,s,o[s])}else if("o"===s[0]&&"n"===s[1])d=s!==(s=s.replace(/(PointerCapture)$|Capture$/,"$1")),s=s.toLowerCase()in n?s.toLowerCase().slice(2):s.slice(2),n.l||(n.l={}),n.l[s+d]=o,o?l?o.u=l.u:(o.u=Date.now(),n.addEventListener(s,d?qo:Ho,d)):n.removeEventListener(s,d?qo:Ho,d);else{if(c)s=s.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==s&&"height"!==s&&"href"!==s&&"list"!==s&&"form"!==s&&"tabIndex"!==s&&"download"!==s&&"rowSpan"!==s&&"colSpan"!==s&&"role"!==s&&s in n)try{n[s]=null==o?"":o;break e}catch(h){}"function"==typeof o||(null==o||!1===o&&"-"!==s[4]?n.removeAttribute(s):n.setAttribute(s,o))}}function Ho(n){var s=this.l[n.type+!1];if(n.t){if(n.t<=s.u)return}else n.t=Date.now();return s(Du.event?Du.event(n):n)}function qo(n){return this.l[n.type+!0](Du.event?Du.event(n):n)}function Bo(n,s,o,l,c,d,h,p,f,m){var _,y,E,M,P,L,N,F,D,B,$,U,H,z,q,V=s.type;if(void 0!==s.constructor)return null;128&o.__u&&(f=!!(32&o.__u),d=[p=s.__e=o.__e]),(_=Du.__b)&&_(s);e:if("function"==typeof V)try{if(F=s.props,D=(_=V.contextType)&&l[_.__c],B=_?D?D.props.value:_.__:l,o.__c?N=(y=s.__c=o.__c).__=y.__E:("prototype"in V&&V.prototype.render?s.__c=y=new V(F,B):(s.__c=y=new To(F,B),y.constructor=V,y.render=Uo),D&&D.sub(y),y.props=F,y.state||(y.state={}),y.context=B,y.__n=l,E=y.__d=!0,y.__h=[],y._sb=[]),null==y.__s&&(y.__s=y.state),null!=V.getDerivedStateFromProps&&(y.__s==y.state&&(y.__s=Co({},y.__s)),Co(y.__s,V.getDerivedStateFromProps(F,y.__s))),M=y.props,P=y.state,y.__v=s,E)null==V.getDerivedStateFromProps&&null!=y.componentWillMount&&y.componentWillMount(),null!=y.componentDidMount&&y.__h.push(y.componentDidMount);else{if(null==V.getDerivedStateFromProps&&F!==M&&null!=y.componentWillReceiveProps&&y.componentWillReceiveProps(F,B),!y.__e&&(null!=y.shouldComponentUpdate&&!1===y.shouldComponentUpdate(F,y.__s,B)||s.__v===o.__v)){for(s.__v!==o.__v&&(y.props=F,y.state=y.__s,y.__d=!1),s.__e=o.__e,s.__k=o.__k,s.__k.forEach((function(n){n&&(n.__=s)})),$=0;$<y._sb.length;$++)y.__h.push(y._sb[$]);y._sb=[],y.__h.length&&h.push(y);break e}null!=y.componentWillUpdate&&y.componentWillUpdate(F,y.__s,B),null!=y.componentDidUpdate&&y.__h.push((function(){y.componentDidUpdate(M,P,L)}))}if(y.context=B,y.props=F,y.__P=n,y.__e=!1,U=Du.__r,H=0,"prototype"in V&&V.prototype.render){for(y.state=y.__s,y.__d=!1,U&&U(s),_=y.render(y.props,y.state,y.context),z=0;z<y._sb.length;z++)y.__h.push(y._sb[z]);y._sb=[]}else do{y.__d=!1,U&&U(s),_=y.render(y.props,y.state,y.context),y.state=y.__s}while(y.__d&&++H<25);y.state=y.__s,null!=y.getChildContext&&(l=Co(Co({},l),y.getChildContext())),E||null==y.getSnapshotBeforeUpdate||(L=y.getSnapshotBeforeUpdate(M,P)),Po(n,id(q=null!=_&&_.type===xo&&null==_.key?_.props.children:_)?q:[q],s,o,l,c,d,h,p,f,m),y.base=s.__e,s.__u&=-161,y.__h.length&&h.push(y),N&&(y.__E=y.__=null)}catch(Z){s.__v=null,f||null!=d?(s.__e=p,s.__u|=f?160:32,d[d.indexOf(p)]=null):(s.__e=o.__e,s.__k=o.__k),Du.__e(Z,s,o)}else null==d&&s.__v===o.__v?(s.__k=o.__k,s.__e=o.__e):s.__e=function(n,s,o,l,c,d,h,p,f){var m,_,y,E,M,P,L,N=o.props,F=s.props,D=s.type;if("svg"===D&&(c=!0),null!=d)for(m=0;m<d.length;m++)if((M=d[m])&&"setAttribute"in M==!!D&&(D?M.localName===D:3===M.nodeType)){n=M,d[m]=null;break}if(null==n){if(null===D)return document.createTextNode(F);n=c?document.createElementNS("http://www.w3.org/2000/svg",D):document.createElement(D,F.is&&F),d=null,p=!1}if(null===D)N===F||p&&n.data===F||(n.data=F);else{if(d=d&&Nu.call(n.childNodes),N=o.props||Ju,!p&&null!=d)for(N={},m=0;m<n.attributes.length;m++)N[(M=n.attributes[m]).name]=M.value;for(m in N)M=N[m],"children"==m||("dangerouslySetInnerHTML"==m?y=M:"key"===m||m in F||Do(n,m,null,M,c));for(m in F)M=F[m],"children"==m?E=M:"dangerouslySetInnerHTML"==m?_=M:"value"==m?P=M:"checked"==m?L=M:"key"===m||p&&"function"!=typeof M||N[m]===M||Do(n,m,M,N[m],c);if(_)p||y&&(_.__html===y.__html||_.__html===n.innerHTML)||(n.innerHTML=_.__html),s.__k=[];else if(y&&(n.innerHTML=""),Po(n,id(E)?E:[E],s,o,l,c&&"foreignObject"!==D,d,h,d?d[0]:o.__k&&Mo(o,0),p,f),null!=d)for(m=d.length;m--;)null!=d[m]&&Io(d[m]);p||(m="value",void 0!==P&&(P!==n[m]||"progress"===D&&!P||"option"===D&&P!==N[m])&&Do(n,m,P,N[m],!1),m="checked",void 0!==L&&L!==n[m]&&Do(n,m,L,N[m],!1))}return n}(o.__e,s,o,l,c,d,h,f,m);(_=Du.diffed)&&_(s)}function Vo(n,s,o){s.__d=void 0;for(var l=0;l<o.length;l++)$o(o[l],o[++l],o[++l]);Du.__c&&Du.__c(s,n),n.some((function(s){try{n=s.__h,s.__h=[],n.some((function(n){n.call(s)}))}catch(o){Du.__e(o,s.__v)}}))}function $o(n,s,o){try{"function"==typeof n?n(s):n.current=s}catch(l){Du.__e(l,o)}}function Wo(n,s,o){var l,c;if(Du.unmount&&Du.unmount(n),(l=n.ref)&&(l.current&&l.current!==n.__e||$o(l,null,s)),null!=(l=n.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(d){Du.__e(d,s)}l.base=l.__P=null,n.__c=void 0}if(l=n.__k)for(c=0;c<l.length;c++)l[c]&&Wo(l[c],s,o||"function"!=typeof n.type);o||null==n.__e||Io(n.__e),n.__=n.__e=n.__d=void 0}function Uo(n,s,o){return this.constructor(n,o)}function Zo(n,s,o){var l,c,d;Du.__&&Du.__(n,s),l=s.__k,c=[],d=[],Bo(s,n=s.__k=ko(xo,null,[n]),l||Ju,Ju,void 0!==s.ownerSVGElement,l?null:s.firstChild?Nu.call(s.childNodes):null,c,l?l.__e:s.firstChild,!1,d),Vo(c,n,d)}Nu=ed.slice,Du={__e:function(n,s,o,l){for(var c,d,h;s=s.__;)if((c=s.__c)&&!c.__)try{if((d=c.constructor)&&null!=d.getDerivedStateFromError&&(c.setState(d.getDerivedStateFromError(n)),h=c.__d),null!=c.componentDidCatch&&(c.componentDidCatch(n,l||{}),h=c.__d),h)return c.__E=c}catch(p){n=p}throw n}},$u=0,To.prototype.setState=function(n,s){var o;o=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Co({},this.state),"function"==typeof n&&(n=n(Co({},o),this.props)),n&&Co(o,n),null!=n&&this.__v&&(s&&this._sb.push(s),Ao(this))},To.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Ao(this))},To.prototype.render=xo,Hu=[],Vu="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Yu=function(n,s){return n.__v.__b-s.__v.__b},No.__r=0,Zu=0;var od,ld,cd,ud,fd=0,kd=[],Od=[],Ld=Du.__b,Nd=Du.__r,Fd=Du.diffed,Dd=Du.__c,Bd=Du.unmount;function sa(n,s){Du.__h&&Du.__h(ld,n,fd||s),fd=0;var o=ld.__H||(ld.__H={__:[],__h:[]});return n>=o.__.length&&o.__.push({__V:Od}),o.__[n]}function oa(n){return fd=1,function(n,s){var o=sa(od++,2);if(o.t=n,!o.__c&&(o.__=[_a(void 0,s),function(n){var s=o.__N?o.__N[0]:o.__[0],l=o.t(s,n);s!==l&&(o.__N=[l,o.__[1]],o.__c.setState({}))}],o.__c=ld,!ld.u)){var n2=function(n,s,c){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter((function(n){return n.__c}));if(d.every((function(n){return!n.__N})))return!l||l.call(this,n,s,c);var h=!1;return d.forEach((function(n){if(n.__N){var s=n.__[0];n.__=n.__N,n.__N=void 0,s!==n.__[0]&&(h=!0)}})),!(!h&&o.__c.props===n)&&(!l||l.call(this,n,s,c))};ld.u=!0;var l=ld.shouldComponentUpdate,c=ld.componentWillUpdate;ld.componentWillUpdate=function(n,s,o){if(this.__e){var d=l;l=void 0,n2(n,s,o),l=d}c&&c.call(this,n,s,o)},ld.shouldComponentUpdate=n2}return o.__N||o.__}(_a,n)}function aa(n,s){var o=sa(od++,3);!Du.__s&&ga(o.__H,s)&&(o.__=n,o.i=s,ld.__H.__h.push(o))}function la(n){return fd=5,ua((function(){return{current:n}}),[])}function ua(n,s){var o=sa(od++,7);return ga(o.__H,s)?(o.__V=n(),o.i=s,o.__h=n,o.__V):o.__}function ca(n){var s=ld.context[n.__c],o=sa(od++,9);return o.c=n,s?(null==o.__&&(o.__=!0,s.sub(ld)),s.props.value):n.__}function da(){for(var n;n=kd.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(va),n.__H.__h.forEach(fa),n.__H.__h=[]}catch(Tf){n.__H.__h=[],Du.__e(Tf,n.__v)}}Du.__b=function(n){ld=null,Ld&&Ld(n)},Du.__r=function(n){Nd&&Nd(n),od=0;var s=(ld=n.__c).__H;s&&(cd===ld?(s.__h=[],ld.__h=[],s.__.forEach((function(n){n.__N&&(n.__=n.__N),n.__V=Od,n.__N=n.i=void 0}))):(s.__h.forEach(va),s.__h.forEach(fa),s.__h=[],od=0)),cd=ld},Du.diffed=function(n){Fd&&Fd(n);var s=n.__c;s&&s.__H&&(s.__H.__h.length&&(1!==kd.push(s)&&ud===Du.requestAnimationFrame||((ud=Du.requestAnimationFrame)||pa)(da)),s.__H.__.forEach((function(n){n.i&&(n.__H=n.i),n.__V!==Od&&(n.__=n.__V),n.i=void 0,n.__V=Od}))),cd=ld=null},Du.__c=function(n,s){s.some((function(n){try{n.__h.forEach(va),n.__h=n.__h.filter((function(n){return!n.__||fa(n)}))}catch(Af){s.some((function(n){n.__h&&(n.__h=[])})),s=[],Du.__e(Af,n.__v)}})),Dd&&Dd(n,s)},Du.unmount=function(n){Bd&&Bd(n);var s,o=n.__c;o&&o.__H&&(o.__H.__.forEach((function(n){try{va(n)}catch(o){s=o}})),o.__H=void 0,s&&Du.__e(s,o.__v))};var $d="function"==typeof requestAnimationFrame;function pa(n){var s,r2=function(){clearTimeout(o),$d&&cancelAnimationFrame(s),setTimeout(n)},o=setTimeout(r2,100);$d&&(s=requestAnimationFrame(r2))}function va(n){var s=ld,o=n.__c;"function"==typeof o&&(n.__c=void 0,o()),ld=s}function fa(n){var s=ld;n.__c=n.__(),ld=s}function ga(n,s){return!n||n.length!==s.length||s.some((function(s,o){return s!==n[o]}))}function _a(n,s){return"function"==typeof s?s(n):s}var Ud=function(n){return n.Button="button",n.Tab="tab",n.Selector="selector",n}({}),jd=function(n){return n.TopLeft="top_left",n.TopRight="top_right",n.TopCenter="top_center",n.MiddleLeft="middle_left",n.MiddleRight="middle_right",n.MiddleCenter="middle_center",n.Left="left",n.Center="center",n.Right="right",n.NextToTrigger="next_to_trigger",n}({}),Wd=function(n){return n.Popover="popover",n.API="api",n.Widget="widget",n.ExternalSurvey="external_survey",n}({}),Vd=function(n){return n.Open="open",n.MultipleChoice="multiple_choice",n.SingleChoice="single_choice",n.Rating="rating",n.Link="link",n}({}),Yd=function(n){return n.NextQuestion="next_question",n.End="end",n.ResponseBased="response_based",n.SpecificQuestion="specific_question",n}({}),Jd=function(n){return n.Once="once",n.Recurring="recurring",n.Always="always",n}({}),Xd=function(n){return n.SHOWN="survey shown",n.DISMISSED="survey dismissed",n.SENT="survey sent",n}({}),Kd=function(n){return n.SURVEY_ID="$survey_id",n.SURVEY_NAME="$survey_name",n.SURVEY_RESPONSE="$survey_response",n.SURVEY_ITERATION="$survey_iteration",n.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",n.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",n.SURVEY_SUBMISSION_ID="$survey_submission_id",n.SURVEY_QUESTIONS="$survey_questions",n.SURVEY_COMPLETED="$survey_completed",n}({}),Qd=function(n){return n.Popover="popover",n.Inline="inline",n}({}),eh=Wl("[Surveys]");function Ta(n){return!(!n.start_date||n.end_date)}function Ma(n){var s;return!(null==(s=n.conditions)||null==(s=s.events)||null==(s=s.values)||!s.length)}function Ra(n){var s;return!(null==(s=n.conditions)||null==(s=s.actions)||null==(s=s.values)||!s.length)}var sh="seenSurvey_",oh="inProgressSurvey_",Pa=(n,s)=>{var o="$survey_"+s+"/"+n.id;return n.current_iteration&&n.current_iteration>0&&(o="$survey_"+s+"/"+n.id+"/"+n.current_iteration),o},Fa=n=>{var s=""+sh+n.id;return n.current_iteration&&n.current_iteration>0&&(s=""+sh+n.id+"_"+n.current_iteration),s},La=n=>{localStorage.getItem(Fa(n))||localStorage.setItem(Fa(n),"true")},ah=[Wd.Popover,Wd.Widget,Wd.API],uh={ignoreConditions:!1,ignoreDelay:!1,displayType:Qd.Popover};Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)}),Number.isInteger||(Number.isInteger=function(n){return si(n)&&isFinite(n)&&Math.floor(n)===n});var hh="0123456789abcdef";class qa{constructor(n){if(this.bytes=n,16!==n.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(n,s,o,l){if(!Number.isInteger(n)||!Number.isInteger(s)||!Number.isInteger(o)||!Number.isInteger(l)||n<0||s<0||o<0||l<0||n>0xffffffffffff||s>4095||o>1073741823||l>4294967295)throw new RangeError("invalid field value");var c=new Uint8Array(16);return c[0]=n/Math.pow(2,40),c[1]=n/Math.pow(2,32),c[2]=n/Math.pow(2,24),c[3]=n/Math.pow(2,16),c[4]=n/Math.pow(2,8),c[5]=n,c[6]=112|s>>>8,c[7]=s,c[8]=128|o>>>24,c[9]=o>>>16,c[10]=o>>>8,c[11]=o,c[12]=l>>>24,c[13]=l>>>16,c[14]=l>>>8,c[15]=l,new qa(c)}toString(){for(var n="",s=0;s<this.bytes.length;s++)n=n+hh.charAt(this.bytes[s]>>>4)+hh.charAt(15&this.bytes[s]),3!==s&&5!==s&&7!==s&&9!==s||(n+="-");if(36!==n.length)throw new Error("Invalid UUIDv7 was generated");return n}clone(){return new qa(this.bytes.slice(0))}equals(n){return 0===this.compareTo(n)}compareTo(n){for(var s=0;s<16;s++){var o=this.bytes[s]-n.bytes[s];if(0!==o)return Math.sign(o)}return 0}}class Ba{constructor(){this._timestamp=0,this._counter=0,this._random=new Wa}generate(){var n=this.generateOrAbort();if(ei(n)){this._timestamp=0;var s=this.generateOrAbort();if(ei(s))throw new Error("Could not generate UUID after timestamp reset");return s}return n}generateOrAbort(){var n=Date.now();if(n>this._timestamp)this._timestamp=n,this._resetCounter();else{if(!(n+1e4>this._timestamp))return;this._counter++,this._counter>4398046511103&&(this._timestamp++,this._resetCounter())}return qa.fromFieldsV7(this._timestamp,Math.trunc(this._counter/Math.pow(2,30)),this._counter&Math.pow(2,30)-1,this._random.nextUint32())}_resetCounter(){this._counter=1024*this._random.nextUint32()+(1023&this._random.nextUint32())}}var fh,$a=n=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var s=0;s<n.length;s++)n[s]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return n};El&&!ei(El.crypto)&&crypto.getRandomValues&&($a=n=>crypto.getRandomValues(n));class Wa{constructor(){this._buffer=new Uint32Array(8),this._cursor=1/0}nextUint32(){return this._cursor>=this._buffer.length&&($a(this._buffer),this._cursor=0),this._buffer[this._cursor++]}}var Ua=()=>Za().toString(),Za=()=>(fh||(fh=new Ba)).generate(),yh="Mobile",bh="iOS",wh="Android",Sh="Tablet",Ch=wh+" "+Sh,kh="iPad",xh="Apple",Ih=xh+" Watch",Eh="Safari",Th="BlackBerry",Ah="Samsung",Mh=Ah+"Browser",Rh=Ah+" Internet",Ph="Chrome",Dh=Ph+" OS",Bh=Ph+" "+bh,$h="Internet Explorer",jh=$h+" "+yh,zh="Opera",Vh=zh+" Mini",Gh="Edge",Zh="Microsoft "+Gh,Jh="Firefox",Xh=Jh+" "+bh,Qh="Nintendo",ep="PlayStation",tp="Xbox",rp=wh+" "+yh,hp=yh+" "+Eh,pp="Windows",gp=pp+" Phone",vp="Nokia",bp="Ouya",wp="Generic",Sp=wp+" "+yh.toLowerCase(),Cp=wp+" "+Sh.toLowerCase(),kp="Konqueror",xp="(\\d+(\\.\\d+)?)",Ip=new RegExp("Version/"+xp),Tp=new RegExp(tp,"i"),Rp=new RegExp(ep+" \\w+","i"),Op=new RegExp(Qh+" \\w+","i"),Bp=new RegExp(Th+"|PlayBook|BB10","i"),$p={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Dl=function(n,s){return s=s||"",$r(n," OPR/")&&$r(n,"Mini")?Vh:$r(n," OPR/")?zh:Bp.test(n)?Th:$r(n,"IE"+yh)||$r(n,"WPDesktop")?jh:$r(n,Mh)?Rh:$r(n,Gh)||$r(n,"Edg/")?Zh:$r(n,"FBIOS")?"Facebook "+yh:$r(n,"UCWEB")||$r(n,"UCBrowser")?"UC Browser":$r(n,"CriOS")?Bh:$r(n,"CrMo")||$r(n,Ph)?Ph:$r(n,wh)&&$r(n,Eh)?rp:$r(n,"FxiOS")?Xh:$r(n.toLowerCase(),kp.toLowerCase())?kp:((n,s)=>{return s&&$r(s,xh)||$r(o=n,Eh)&&!$r(o,Ph)&&!$r(o,wh);var o})(n,s)?$r(n,yh)?hp:Eh:$r(n,Jh)?Jh:$r(n,"MSIE")||$r(n,"Trident/")?$h:$r(n,"Gecko")?Jh:""},Hp={[jh]:[new RegExp("rv:"+xp)],[Zh]:[new RegExp(Gh+"?\\/"+xp)],[Ph]:[new RegExp("("+Ph+"|CrMo)\\/"+xp)],[Bh]:[new RegExp("CriOS\\/"+xp)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+xp)],[Eh]:[Ip],[hp]:[Ip],[zh]:[new RegExp("(Opera|OPR)\\/"+xp)],[Jh]:[new RegExp(Jh+"\\/"+xp)],[Xh]:[new RegExp("FxiOS\\/"+xp)],[kp]:[new RegExp("Konqueror[:/]?"+xp,"i")],[Th]:[new RegExp(Th+" "+xp),Ip],[rp]:[new RegExp("android\\s"+xp,"i")],[Rh]:[new RegExp(Mh+"\\/"+xp)],[$h]:[new RegExp("(rv:|MSIE )"+xp)],Mozilla:[new RegExp("rv:"+xp)]},ql=function(n,s){var o=Dl(n,s),l=Hp[o];if(ei(l))return null;for(var c=0;c<l.length;c++){var d=l[c],h=n.match(d);if(h)return parseFloat(h[h.length-2])}return null},jp=[[new RegExp(tp+"; "+tp+" (.*?)[);]","i"),n=>[tp,n&&n[1]||""]],[new RegExp(Qh,"i"),[Qh,""]],[new RegExp(ep,"i"),[ep,""]],[Bp,[Th,""]],[new RegExp(pp,"i"),(n,s)=>{if(/Phone/.test(s)||/WPDesktop/.test(s))return[gp,""];if(new RegExp(yh).test(s)&&!/IEMobile\b/.test(s))return[pp+" "+yh,""];var o=/Windows NT ([0-9.]+)/i.exec(s);if(o&&o[1]){var l=o[1],c=$p[l]||"";return/arm/i.test(s)&&(c="RT"),[pp,c]}return[pp,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,n=>{if(n&&n[3]){var s=[n[3],n[4],n[5]||"0"];return[bh,s.join(".")]}return[bh,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,n=>{var s="";return n&&n.length>=3&&(s=ei(n[2])?n[3]:n[2]),["watchOS",s]}],[new RegExp("("+wh+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+wh+")","i"),n=>{if(n&&n[2]){var s=[n[2],n[3],n[4]||"0"];return[wh,s.join(".")]}return[wh,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,n=>{var s=["Mac OS X",""];if(n&&n[1]){var o=[n[1],n[2],n[3]||"0"];s[1]=o.join(".")}return s}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Dh,""]],[/Linux|debian/i,["Linux",""]]],Vl=function(n){return Op.test(n)?Qh:Rp.test(n)?ep:Tp.test(n)?tp:new RegExp(bp,"i").test(n)?bp:new RegExp("("+gp+"|WPDesktop)","i").test(n)?gp:/iPad/.test(n)?kh:/iPod/.test(n)?"iPod Touch":/iPhone/.test(n)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(n)?Ih:Bp.test(n)?Th:/(kobo)\s(ereader|touch)/i.test(n)?"Kobo":new RegExp(vp,"i").test(n)?vp:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(n)||/(kf[a-z]+)( bui|\)).+silk\//i.test(n)?"Kindle Fire":/(Android|ZTE)/i.test(n)?!new RegExp(yh).test(n)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(n)?/pixel[\daxl ]{1,6}/i.test(n)&&!/pixel c/i.test(n)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(n)||/lmy47v/i.test(n)&&!/QTAQZ3/i.test(n)?wh:Ch:wh:new RegExp("(pda|"+yh+")","i").test(n)?Sp:new RegExp(Sh,"i").test(n)&&!new RegExp(Sh+" pc","i").test(n)?Cp:""},$l=function(n){var s=Vl(n);return s===kh||s===Ch||"Kobo"===s||"Kindle Fire"===s||s===Cp?Sh:s===Qh||s===tp||s===ep||s===bp?"Console":s===Ih?"Wearable":s?yh:"Desktop"},Yp="$copy_autocapture",Xp=function(n){return n.GZipJS="gzip-js",n.Base64="base64",n}({}),Qp=Uint8Array,ef=Uint16Array,tf=Uint32Array,rf=new Qp([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nf=new Qp([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),sf=new Qp([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jl=function(n,s){for(var o=new ef(31),l=0;l<31;++l)o[l]=s+=1<<n[l-1];var c=new tf(o[30]);for(l=1;l<30;++l)for(var d=o[l];d<o[l+1];++d)c[d]=d-o[l]<<5|l;return[o,c]},of=Jl(rf,2),af=of[0],lf=of[1];af[28]=258,lf[258]=28;for(var cf=Jl(nf,0)[1],uf=new ef(32768),df=0;df<32768;++df){var hf=(43690&df)>>>1|(21845&df)<<1;hf=(61680&(hf=(52428&hf)>>>2|(13107&hf)<<2))>>>4|(3855&hf)<<4,uf[df]=((65280&hf)>>>8|(255&hf)<<8)>>>1}var ou=function(n,s,o){for(var l=n.length,c=0,d=new ef(s);c<l;++c)++d[n[c]-1];var h,p=new ef(s);for(c=0;c<s;++c)p[c]=p[c-1]+d[c-1]<<1;for(h=new ef(l),c=0;c<l;++c)h[c]=uf[p[n[c]-1]++]>>>15-n[c];return h},pf=new Qp(288);for(df=0;df<144;++df)pf[df]=8;for(df=144;df<256;++df)pf[df]=9;for(df=256;df<280;++df)pf[df]=7;for(df=280;df<288;++df)pf[df]=8;var ff=new Qp(32);for(df=0;df<32;++df)ff[df]=5;var gf=ou(pf,9),mf=ou(ff,5),du=function(n){return(n/8|0)+(7&n&&1)},hu=function(n,s,o){(null==o||o>n.length)&&(o=n.length);var l=new(n instanceof ef?ef:n instanceof tf?tf:Qp)(o-s);return l.set(n.subarray(s,o)),l},pu=function(n,s,o){o<<=7&s;var l=s/8|0;n[l]|=o,n[l+1]|=o>>>8},vu=function(n,s,o){o<<=7&s;var l=s/8|0;n[l]|=o,n[l+1]|=o>>>8,n[l+2]|=o>>>16},fu=function(n,s){for(var o=[],l=0;l<n.length;++l)n[l]&&o.push({s:l,f:n[l]});var c=o.length,d=o.slice();if(!c)return[new Qp(0),0];if(1==c){var h=new Qp(o[0].s+1);return h[o[0].s]=1,[h,1]}o.sort((function(n,s){return n.f-s.f})),o.push({s:-1,f:25001});var p=o[0],f=o[1],m=0,_=1,y=2;for(o[0]={s:-1,f:p.f+f.f,l:p,r:f};_!=c-1;)p=o[o[m].f<o[y].f?m++:y++],f=o[m!=_&&o[m].f<o[y].f?m++:y++],o[_++]={s:-1,f:p.f+f.f,l:p,r:f};var E=d[0].s;for(l=1;l<c;++l)d[l].s>E&&(E=d[l].s);var M=new ef(E+1),P=gu(o[_-1],M,0);if(P>s){l=0;var L=0,N=P-s,F=1<<N;for(d.sort((function(n,s){return M[s.s]-M[n.s]||n.f-s.f}));l<c;++l){var D=d[l].s;if(!(M[D]>s))break;L+=F-(1<<P-M[D]),M[D]=s}for(L>>>=N;L>0;){var B=d[l].s;M[B]<s?L-=1<<s-M[B]++-1:++l}for(;l>=0&&L;--l){var $=d[l].s;M[$]==s&&(--M[$],++L)}P=s}return[new Qp(M),P]},gu=function(n,s,o){return-1==n.s?Math.max(gu(n.l,s,o+1),gu(n.r,s,o+1)):s[n.s]=o},_u=function(n){for(var s=n.length;s&&!n[--s];);for(var o=new ef(++s),l=0,c=n[0],d=1,o2=function(n){o[l++]=n},h=1;h<=s;++h)if(n[h]==c&&h!=s)++d;else{if(!c&&d>2){for(;d>138;d-=138)o2(32754);d>2&&(o2(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(o2(c),--d;d>6;d-=6)o2(8304);d>2&&(o2(d-3<<5|8208),d=0)}for(;d--;)o2(c);d=1,c=n[h]}return[o.subarray(0,l),s]},mu=function(n,s){for(var o=0,l=0;l<s.length;++l)o+=n[l]*s[l];return o},yu=function(n,s,o){var l=o.length,c=du(s+2);n[c]=255&l,n[c+1]=l>>>8,n[c+2]=255^n[c],n[c+3]=255^n[c+1];for(var d=0;d<l;++d)n[c+d+4]=o[d];return 8*(c+4+l)},bu=function(n,s,o,l,c,d,h,p,f,m,_){pu(s,_++,o),++c[256];for(var y=fu(c,15),E=y[0],M=y[1],P=fu(d,15),L=P[0],N=P[1],F=_u(E),D=F[0],B=F[1],$=_u(L),U=$[0],H=$[1],z=new ef(19),q=0;q<D.length;++q)z[31&D[q]]++;for(q=0;q<U.length;++q)z[31&U[q]]++;for(var V=fu(z,7),Z=V[0],ee=V[1],ne=19;ne>4&&!Z[sf[ne-1]];--ne);var ie,se,oe,le,ce=m+5<<3,pe=mu(c,pf)+mu(d,ff)+h,fe=mu(c,E)+mu(d,L)+h+14+3*ne+mu(z,Z)+(2*z[16]+3*z[17]+7*z[18]);if(ce<=pe&&ce<=fe)return yu(s,_,n.subarray(f,f+m));if(pu(s,_,1+(fe<pe)),_+=2,fe<pe){ie=ou(E,M),se=E,oe=ou(L,N),le=L;var ge=ou(Z,ee);for(pu(s,_,B-257),pu(s,_+5,H-1),pu(s,_+10,ne-4),_+=14,q=0;q<ne;++q)pu(s,_+3*q,Z[sf[q]]);_+=3*ne;for(var be=[D,U],Oe=0;Oe<2;++Oe){var Ne=be[Oe];for(q=0;q<Ne.length;++q){var Fe=31&Ne[q];pu(s,_,ge[Fe]),_+=Z[Fe],Fe>15&&(pu(s,_,Ne[q]>>>5&127),_+=Ne[q]>>>12)}}}else ie=gf,se=pf,oe=mf,le=ff;for(q=0;q<p;++q)if(l[q]>255){Fe=l[q]>>>18&31,vu(s,_,ie[Fe+257]),_+=se[Fe+257],Fe>7&&(pu(s,_,l[q]>>>23&31),_+=rf[Fe]);var De=31&l[q];vu(s,_,oe[De]),_+=le[De],De>3&&(vu(s,_,l[q]>>>5&8191),_+=nf[De])}else vu(s,_,ie[l[q]]),_+=se[l[q]];return vu(s,_,ie[256]),_+se[256]},vf=new tf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_f=function(){for(var n=new tf(256),s=0;s<256;++s){for(var o=s,l=9;--l;)o=(1&o&&3988292384)^o>>>1;n[s]=o}return n}(),Iu=function(n,s,o){for(;o;++s)n[s]=o,o>>>=8};function ku(n,s){void 0===s&&(s={});var o=function(){var n=4294967295;return{p:function(s){for(var o=n,l=0;l<s.length;++l)o=_f[255&o^s[l]]^o>>>8;n=o},d:function(){return 4294967295^n}}}(),l=n.length;o.p(n);var c,d=function(n,s,o,l){return function(n,s,o,l,c){var d=n.length,h=new Qp(l+d+5*(1+Math.floor(d/7e3))+c),p=h.subarray(l,h.length-c),f=0;if(!s||d<8)for(var m=0;m<=d;m+=65535){var _=m+65535;_<d?f=yu(p,f,n.subarray(m,_)):(p[m]=!0,f=yu(p,f,n.subarray(m,d)))}else{for(var y=vf[s-1],E=y>>>13,M=8191&y,P=(1<<o)-1,L=new ef(32768),N=new ef(P+1),F=Math.ceil(o/3),D=2*F,b2=function(s){return(n[s]^n[s+1]<<F^n[s+2]<<D)&P},B=new tf(25e3),$=new ef(288),U=new ef(32),H=0,z=0,q=(m=0,0),V=0,Z=0;m<d;++m){var ee=b2(m),ne=32767&m,ie=N[ee];if(L[ne]=ie,N[ee]=ne,V<=m){var se=d-m;if((H>7e3||q>24576)&&se>423){f=bu(n,p,0,B,$,U,z,q,Z,m-Z,f),q=H=z=0,Z=m;for(var oe=0;oe<286;++oe)$[oe]=0;for(oe=0;oe<30;++oe)U[oe]=0}var le=2,ce=0,pe=M,fe=ne-ie&32767;if(se>2&&ee==b2(m-fe))for(var ge=Math.min(E,se)-1,be=Math.min(32767,m),Oe=Math.min(258,se);fe<=be&&--pe&&ne!=ie;){if(n[m+le]==n[m+le-fe]){for(var Ne=0;Ne<Oe&&n[m+Ne]==n[m+Ne-fe];++Ne);if(Ne>le){if(le=Ne,ce=fe,Ne>ge)break;var Fe=Math.min(fe,Ne-2),De=0;for(oe=0;oe<Fe;++oe){var Be=m-fe+oe+32768&32767,Ue=Be-L[Be]+32768&32767;Ue>De&&(De=Ue,ie=Be)}}}fe+=(ne=ie)-(ie=L[ne])+32768&32767}if(ce){B[q++]=268435456|lf[le]<<18|cf[ce];var He=31&lf[le],qe=31&cf[ce];z+=rf[He]+nf[qe],++$[257+He],++U[qe],V=m+le,++H}else B[q++]=n[m],++$[n[m]]}}f=bu(n,p,!0,B,$,U,z,q,Z,m-Z,f)}return hu(h,0,l+du(f)+c)}(n,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+s.mem,o,l)}(n,s,10+((c=s).filename&&c.filename.length+1||0),8),h=d.length;return function(n,s){var o=s.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=s.level<2?4:9==s.level?2:0,n[9]=3,0!=s.mtime&&Iu(n,4,Math.floor(new Date(s.mtime||Date.now())/1e3)),o){n[3]=8;for(var l=0;l<=o.length;++l)n[l+10]=o.charCodeAt(l)}}(d,s),Iu(d,h-8,o.d()),Iu(d,h-4,l),d}var yf=!!Fl||!!Nl,bf="text/plain",Mu=function(n,s,o){var l;void 0===o&&(o=!0);var[c,d]=n.split("?"),h=r({},s),p=null!==(l=null==d?void 0:d.split("&").map((n=>{var s,[l,c]=n.split("="),d=o&&null!==(s=h[l])&&void 0!==s?s:c;return delete h[l],l+"="+d})))&&void 0!==l?l:[],f=Tn(h);return f&&p.push(f),c+"?"+p.join("&")},Ru=(n,s)=>JSON.stringify(n,((n,s)=>"bigint"==typeof s?s.toString():s),s),Au=n=>{var s,{data:o,compression:l}=n;if(o){if(l===Xp.GZipJS){var c=ku(function(n){var s=n.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(n);for(var o=new Qp(n.length+(n.length>>>1)),l=0,s3=function(n){o[l++]=n},c=0;c<s;++c){if(l+5>o.length){var d=new Qp(l+8+(s-c<<1));d.set(o),o=d}var h=n.charCodeAt(c);h<128?s3(h):h<2048?(s3(192|h>>>6),s3(128|63&h)):h>55295&&h<57344?(s3(240|(h=65536+(1047552&h)|1023&n.charCodeAt(++c))>>>18),s3(128|h>>>12&63),s3(128|h>>>6&63),s3(128|63&h)):(s3(224|h>>>12),s3(128|h>>>6&63),s3(128|63&h))}return hu(o,0,l)}(Ru(o)),{mtime:0}),d=new Blob([c],{type:bf});return{contentType:bf,body:d,estimatedSize:d.size}}if(l===Xp.Base64){var h=function(n){var s,o,l,c,d,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p=0,f=0,m="",_=[];if(!n)return n;n=function(n){var s,o,l,c,d="";for(s=o=0,l=(n=(n+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,c=0;c<l;c++){var h=n.charCodeAt(c),p=null;h<128?o++:p=h>127&&h<2048?String.fromCharCode(h>>6|192,63&h|128):String.fromCharCode(h>>12|224,h>>6&63|128,63&h|128),ii(p)||(o>s&&(d+=n.substring(s,o)),d+=p,s=o=c+1)}return o>s&&(d+=n.substring(s,n.length)),d}(n);do{s=(d=n.charCodeAt(p++)<<16|n.charCodeAt(p++)<<8|n.charCodeAt(p++))>>18&63,o=d>>12&63,l=d>>6&63,c=63&d,_[f++]=h.charAt(s)+h.charAt(o)+h.charAt(l)+h.charAt(c)}while(p<n.length);switch(m=_.join(""),n.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}(Ru(o)),p=(s=h,"data="+encodeURIComponent("string"==typeof s?s:Ru(s)));return{contentType:"application/x-www-form-urlencoded",body:p,estimatedSize:new Blob([p]).size}}var f=Ru(o);return{contentType:"application/json",body:f,estimatedSize:new Blob([f]).size}}},wf=[];Nl&&wf.push({transport:"fetch",method:n=>{var s,o,{contentType:l,body:c,estimatedSize:d}=null!==(s=Au(n))&&void 0!==s?s:{},h=new Headers;fn(n.headers,(function(n,s){h.append(s,n)})),l&&h.append("Content-Type",l);var p=n.url,f=null;if(Bl){var m=new Bl;f={signal:m.signal,timeout:setTimeout((()=>m.abort()),n.timeout)}}Nl(p,r({method:(null==n?void 0:n.method)||"GET",headers:h,keepalive:"POST"===n.method&&(d||0)<52428.8,body:c,signal:null==(o=f)?void 0:o.signal},n.fetchOptions)).then((s=>s.text().then((o=>{var l={statusCode:s.status,text:o};if(200===s.status)try{l.json=JSON.parse(o)}catch(c){zl.error(c)}null==n.callback||n.callback(l)})))).catch((s=>{zl.error(s),null==n.callback||n.callback({statusCode:0,text:s})})).finally((()=>f?clearTimeout(f.timeout):null))}}),Fl&&wf.push({transport:"XHR",method:n=>{var s,o=new Fl;o.open(n.method||"GET",n.url,!0);var{contentType:l,body:c}=null!==(s=Au(n))&&void 0!==s?s:{};fn(n.headers,(function(n,s){o.setRequestHeader(s,n)})),l&&o.setRequestHeader("Content-Type",l),n.timeout&&(o.timeout=n.timeout),n.disableXHRCredentials||(o.withCredentials=!0),o.onreadystatechange=()=>{if(4===o.readyState){var s={statusCode:o.status,text:o.responseText};if(200===o.status)try{s.json=JSON.parse(o.responseText)}catch(l){}null==n.callback||n.callback(s)}},o.send(c)}}),null!=Ol&&Ol.sendBeacon&&wf.push({transport:"sendBeacon",method:n=>{var s=Mu(n.url,{beacon:"1"});try{var o,{contentType:l,body:c}=null!==(o=Au(n))&&void 0!==o?o:{},d="string"==typeof c?new Blob([c],{type:l}):c;Ol.sendBeacon(s,d)}catch(h){}}});var Pu=function(n,s){if(!function(n){try{new RegExp(n)}catch(s){return!1}return!0}(s))return!1;try{return new RegExp(s).test(n)}catch(o){return!1}};function Fu(n,s,o){return Ru({distinct_id:n,userPropertiesToSet:s,userPropertiesToSetOnce:o})}var Sf={exact:(n,s)=>s.some((s=>n.some((n=>s===n)))),is_not:(n,s)=>s.every((s=>n.every((n=>s!==n)))),regex:(n,s)=>s.some((s=>n.some((n=>Pu(s,n))))),not_regex:(n,s)=>s.every((s=>n.every((n=>!Pu(s,n))))),icontains:(n,s)=>s.map(Ou).some((s=>n.map(Ou).some((n=>s.includes(n))))),not_icontains:(n,s)=>s.map(Ou).every((s=>n.map(Ou).every((n=>!s.includes(n)))))},Ou=n=>n.toLowerCase(),Cf=Wl("[Stylesheet Loader]"),kf=El,xf=Pl;function Bu(n){return"$survey_response_"+n}var If="#020617",Ef={fontFamily:"inherit",backgroundColor:"#eeeded",submitButtonColor:"black",submitButtonTextColor:"white",ratingButtonColor:"white",ratingButtonActiveColor:"black",borderColor:"#c9c6c6",placeholder:"Start typing...",whiteLabel:!1,displayThankYouMessage:!0,thankYouMessageHeader:"Thank you for your feedback!",position:jd.Right,widgetType:Ud.Tab,widgetLabel:"Feedback",widgetColor:"black",zIndex:"2147483647",disabledButtonOpacity:"0.6",maxWidth:"300px",textSubtleColor:"#939393",boxPadding:"20px 24px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",borderRadius:"10px",shuffleQuestions:!1,surveyPopupDelaySeconds:void 0,outlineColor:"rgba(59, 130, 246, 0.8)",inputBackground:"white",inputTextColor:If,scrollbarThumbColor:"var(--ph-survey-border-color)",scrollbarTrackColor:"var(--ph-survey-background-color)"};function Wu(n){if("#"===n[0]){var s=n.replace(/^#/,"");return"rgb("+parseInt(s.slice(0,2),16)+","+parseInt(s.slice(2,4),16)+","+parseInt(s.slice(4,6),16)+")"}return"rgb(255, 255, 255)"}function Uu(n){var s;void 0===n&&(n=Ef.backgroundColor),"#"===n[0]&&(s=Wu(n)),n.startsWith("rgb")&&(s=n);var o={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}[n.toLowerCase()];if(o&&(s=Wu(o)),!s)return If;var l=s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(l){var c=parseInt(l[1]),d=parseInt(l[2]),h=parseInt(l[3]);return Math.sqrt(c*c*.299+d*d*.587+h*h*.114)>127.5?If:"white"}return If}var Tf,Af,zu=(n,s,o)=>{var l=cc(n),c=xf.querySelector("."+l);if(c&&c.shadowRoot)return{shadow:c.shadowRoot,isNewlyCreated:!1};var d,h,p,f,m,_,y=xf.createElement("div");d=y,h=n.type,p=n.appearance,f=r({},Ef,p),m=d.style,_=![jd.Center,jd.Left,jd.Right].includes(f.position)||h===Wd.Widget&&(null==p?void 0:p.widgetType)===Ud.Tab,m.setProperty("--ph-survey-font-family",function(n){if("inherit"===n)return"inherit";var s='BlinkMacSystemFont, "Inter", "Segoe UI", "Roboto", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"';return n?n+", "+s:"-apple-system, "+s}(f.fontFamily)),m.setProperty("--ph-survey-box-padding",f.boxPadding),m.setProperty("--ph-survey-max-width",f.maxWidth),m.setProperty("--ph-survey-z-index",f.zIndex),m.setProperty("--ph-survey-border-color",f.borderColor),_?(m.setProperty("--ph-survey-border-radius",f.borderRadius),m.setProperty("--ph-survey-border-bottom","1.5px solid var(--ph-survey-border-color)")):(m.setProperty("--ph-survey-border-bottom","none"),m.setProperty("--ph-survey-border-radius",f.borderRadius+" "+f.borderRadius+" 0 0")),m.setProperty("--ph-survey-background-color",f.backgroundColor),m.setProperty("--ph-survey-box-shadow",f.boxShadow),m.setProperty("--ph-survey-disabled-button-opacity",f.disabledButtonOpacity),m.setProperty("--ph-survey-submit-button-color",f.submitButtonColor),m.setProperty("--ph-survey-submit-button-text-color",(null==p?void 0:p.submitButtonTextColor)||Uu(f.submitButtonColor)),m.setProperty("--ph-survey-rating-bg-color",f.ratingButtonColor),m.setProperty("--ph-survey-rating-text-color",Uu(f.ratingButtonColor)),m.setProperty("--ph-survey-rating-active-bg-color",f.ratingButtonActiveColor),m.setProperty("--ph-survey-rating-active-text-color",Uu(f.ratingButtonActiveColor)),m.setProperty("--ph-survey-text-primary-color",Uu(f.backgroundColor)),m.setProperty("--ph-survey-text-subtle-color",f.textSubtleColor),m.setProperty("--ph-widget-color",f.widgetColor),m.setProperty("--ph-widget-text-color",Uu(f.widgetColor)),m.setProperty("--ph-widget-z-index",f.zIndex),"white"===f.backgroundColor&&m.setProperty("--ph-survey-input-background","#f8f8f8"),m.setProperty("--ph-survey-input-background",f.inputBackground),m.setProperty("--ph-survey-input-text-color",Uu(f.inputBackground)),m.setProperty("--ph-survey-scrollbar-thumb-color",f.scrollbarThumbColor),m.setProperty("--ph-survey-scrollbar-track-color",f.scrollbarTrackColor),m.setProperty("--ph-survey-outline-color",f.outlineColor),y.className=l;var E=y.attachShadow({mode:"open"}),M=function(n){var s,o,l,c=(s=n,(l=xf.createElement("style")).innerText=':host{--ph-survey-font-family:-apple-system,BlinkMacSystemFont,"Inter","Segoe UI","Roboto",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--ph-survey-box-padding:20px 24px;--ph-survey-max-width:300px;--ph-survey-z-index:2147483647;--ph-survey-border-color:#dcdcdc;--ph-survey-border-bottom:1.5px solid var(--ph-survey-border-color);--ph-survey-border-radius:10px;--ph-survey-background-color:#eeeded;--ph-survey-box-shadow:0 4px 12px rgba(0,0,0,.15);--ph-survey-submit-button-color:#000;--ph-survey-submit-button-text-color:#fff;--ph-survey-rating-bg-color:#fff;--ph-survey-rating-text-color:#020617;--ph-survey-rating-active-bg-color:#000;--ph-survey-rating-active-text-color:#fff;--ph-survey-text-primary-color:#020617;--ph-survey-text-subtle-color:#939393;--ph-widget-color:#e0a045;--ph-widget-text-color:#fff;--ph-survey-scrollbar-thumb-color:var(--ph-survey-border-color);--ph-survey-scrollbar-track-color:var(--ph-survey-background-color);--ph-survey-outline-color:rgba(59,130,246,.8);--ph-survey-input-background:#fff;--ph-survey-input-text-color:#020617;--ph-survey-disabled-button-opacity:0.6}.ph-survey{bottom:0;height:fit-content;margin:0;max-width:85%;min-width:300px;position:fixed;width:var(--ph-survey-max-width);z-index:var(--ph-survey-z-index)}.ph-survey h3,.ph-survey p{margin:0}.ph-survey *{box-sizing:border-box;color:var(--ph-survey-text-primary-color);font-family:var(--ph-survey-font-family)}.ph-survey .multiple-choice-options label,.ph-survey input[type=text],.ph-survey textarea{background:var(--ph-survey-input-background);border:1.5px solid var(--ph-survey-border-color);border-radius:4px;color:var(--ph-survey-input-text-color);padding:10px;transition:border-color .2s ease-out,box-shadow .2s ease-out,transform .15s ease-out}.ph-survey input[type=text],.ph-survey textarea{transition:border-color .2s ease-out,box-shadow .2s ease-out,transform .15s ease-out}.ph-survey input{margin:0}.ph-survey .form-submit:focus,.ph-survey .form-submit:focus-visible,.ph-survey input[type=checkbox]:focus,.ph-survey input[type=checkbox]:focus-visible,.ph-survey input[type=radio]:focus,.ph-survey input[type=radio]:focus-visible,.ph-survey input[type=text]:focus,.ph-survey input[type=text]:focus-visible,.ph-survey textarea:focus,.ph-survey textarea:focus-visible{border-color:var(--ph-survey-rating-active-bg-color);outline:1.5px solid var(--ph-survey-outline-color);outline-offset:2px}.ph-survey button:focus:not(:focus-visible),.ph-survey input[type=checkbox]:focus:not(:focus-visible),.ph-survey input[type=radio]:focus:not(:focus-visible),.ph-survey input[type=text]:focus:not(:focus-visible),.ph-survey textarea:focus:not(:focus-visible){outline:none}.ph-survey input[type=text]:hover:not(:focus),.ph-survey textarea:hover:not(:focus){border-color:var(--ph-survey-rating-active-bg-color)}@media (max-width:768px){.ph-survey input[type=text],.ph-survey textarea{font-size:1rem}}.ph-survey .form-cancel,.ph-survey .multiple-choice-options label,.ph-survey .rating-options-number,.ph-survey input[type=checkbox],.ph-survey input[type=radio]{border:1.5px solid var(--ph-survey-border-color)}.ph-survey .footer-branding,.ph-survey .form-cancel,.ph-survey .form-submit,.ph-survey .ratings-emoji,.ph-survey .ratings-number,.ph-survey input[type=checkbox],.ph-survey input[type=radio],.ph-survey label{transition:all .2s ease-out}@media (prefers-reduced-motion:no-preference){.ph-survey button:active,.ph-survey input[type=checkbox]:active,.ph-survey input[type=radio]:active,.ph-survey label:active{transition-duration:.1s}}.ph-survey-widget-tab{background:var(--ph-widget-color);border:none;border-radius:3px 3px 0 0;color:var(--ph-widget-text-color);cursor:pointer;padding:10px 12px;position:fixed;right:0;text-align:center;top:50%;transform:rotate(-90deg) translateY(-100%);transform-origin:right top;transition:padding-bottom .2s ease-out;z-index:var(--ph-survey-z-index)}.ph-survey-widget-tab:hover{padding-bottom:16px}@keyframes ph-survey-fade-in{0%{opacity:0}to{opacity:1}}.survey-box{gap:16px}.bottom-section,.survey-box{display:flex;flex-direction:column}.bottom-section{gap:8px}.thank-you-message-header~.bottom-section{padding-top:16px}.question-container,.thank-you-message{display:flex;flex-direction:column;gap:8px}.survey-question{font-size:14px;font-weight:500}.survey-question-description{font-size:13px;opacity:.8;padding-top:4px}.question-textarea-wrapper{display:flex;flex-direction:column}.survey-form{animation:ph-survey-fade-in .3s ease-out forwards}.survey-form,.thank-you-message{background:var(--ph-survey-background-color);border:1.5px solid var(--ph-survey-border-color);border-bottom:var(--ph-survey-border-bottom);border-radius:var(--ph-survey-border-radius);box-shadow:var(--ph-survey-box-shadow);margin:0;padding:var(--ph-survey-box-padding);position:relative;text-align:left;width:100%;z-index:var(--ph-survey-z-index)}.survey-form input[type=text],.survey-form textarea{min-width:100%}:is(.survey-form textarea):focus,:is(.survey-form textarea):focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.08)}:is(.survey-form textarea):focus:not(:focus-visible){box-shadow:none}.survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) .multiple-choice-options,.survey-box:has(.survey-question:empty):not(:has(.survey-question-description)) textarea{margin-top:0}.multiple-choice-options{border:none;display:flex;flex-direction:column;font-size:14px;gap:8px;margin:0;padding:1px 0}.multiple-choice-options .response-choice,.multiple-choice-options label{align-items:center;color:inherit;display:flex;gap:8px}.multiple-choice-options label{cursor:pointer;font-size:13px}:is(.multiple-choice-options label):hover:not(:has(input:checked)){border-color:var(--ph-survey-text-subtle-color);box-shadow:0 2px 8px rgba(0,0,0,.08)}:is(.multiple-choice-options label):has(input:checked){border-color:var(--ph-survey-rating-active-bg-color);box-shadow:0 1px 4px rgba(0,0,0,.05)}.choice-option-open:is(.multiple-choice-options label){flex-wrap:wrap}:is(.multiple-choice-options label) span{color:inherit}.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]{appearance:none;-webkit-appearance:none;-moz-appearance:none;background:var(--ph-survey-input-background);border-radius:3px;cursor:pointer;flex-shrink:0;height:1rem;position:relative;transition:all .2s cubic-bezier(.4,0,.2,1),transform .15s ease-out;width:1rem;z-index:1}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):focus{transform:scale(1.05)}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):hover{border-color:var(--ph-survey-rating-active-bg-color);transform:scale(1.05)}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):active{transform:scale(.95)}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):checked{background:var(--ph-survey-rating-active-bg-color);border-color:var(--ph-survey-rating-active-bg-color);transform:scale(1)}:is(.multiple-choice-options input[type=checkbox],.multiple-choice-options input[type=radio]):checked:hover{transform:scale(1.05)}.multiple-choice-options input[type=checkbox]:checked:after{animation:ph-survey-checkmark-reveal .2s ease-out .1s forwards;border:solid var(--ph-survey-rating-active-text-color);border-width:0 2px 2px 0;height:8px;left:4px;transform:rotate(45deg) scale(0);width:4px}.multiple-choice-options input[type=radio]:checked:after{animation:ph-survey-radio-reveal .15s ease-out .05s forwards;background:var(--ph-survey-rating-active-text-color);border-radius:50%;height:6px;left:5px;top:5px;transform:scale(0);width:6px}.multiple-choice-options input[type=checkbox]:checked:after,.multiple-choice-options input[type=radio]:checked:after{box-sizing:content-box;content:"";position:absolute}.multiple-choice-options input[type=radio]{border-radius:50%}.multiple-choice-options input[type=radio]:checked{border:none}:is(.multiple-choice-options input[type=checkbox]:checked,.multiple-choice-options input[type=radio]:checked)~*{font-weight:700}:is(:is(.multiple-choice-options .choice-option-open) input[type=text])::placeholder{color:var(--ph-survey-text-subtle-color);font-weight:400}.rating-options-emoji{display:flex;justify-content:space-between}.ratings-emoji{background-color:transparent;border:none;font-size:16px;opacity:.5;padding:0}.ratings-emoji:hover{cursor:pointer;opacity:1;transform:scale(1.15)}.ratings-emoji.rating-active{opacity:1}.ratings-emoji svg{fill:var(--ph-survey-text-primary-color);transition:fill .2s ease-out}.rating-options-number{border-radius:6px;display:grid;grid-auto-columns:1fr;grid-auto-flow:column;overflow:hidden}.rating-options-number .ratings-number{border:none;border-right:1px solid var(--ph-survey-border-color);color:var(--ph-survey-rating-text-color);cursor:pointer;font-weight:700;text-align:center}:is(.rating-options-number .ratings-number):last-of-type{border-right:0}.rating-active:is(.rating-options-number .ratings-number){background:var(--ph-survey-rating-active-bg-color);color:var(--ph-survey-rating-active-text-color)}.ratings-number{background-color:var(--ph-survey-rating-bg-color);border:none;padding:8px 0}.ratings-number .rating-active{background-color:var(--ph-survey-rating-active-bg-color)}.ratings-number:hover{cursor:pointer}.rating-text{display:flex;flex-direction:row;font-size:11px;justify-content:space-between;opacity:.7}.form-submit{background:var(--ph-survey-submit-button-color);border:none;border-radius:6px;box-shadow:0 2px 0 rgba(0,0,0,.045);color:var(--ph-survey-submit-button-text-color);cursor:pointer;font-weight:700;min-width:100%;padding:12px;text-align:center;user-select:none}.form-submit:not([disabled]):hover{box-shadow:0 4px 8px rgba(0,0,0,.1);transform:scale(1.02)}.form-submit:not([disabled]):active{box-shadow:0 1px 2px rgba(0,0,0,.05);transform:scale(.98)}.form-submit[disabled]{cursor:not-allowed;opacity:var(--ph-survey-disabled-button-opacity)}.form-cancel{background:#fff;border-radius:100%;cursor:pointer;line-height:0;padding:12px;position:absolute;right:0;top:0;transform:translate(50%,-50%)}.form-cancel:hover{opacity:.7;transform:translate(50%,-50%) scale(1.1)}.footer-branding{align-items:center;display:flex;font-size:11px;font-weight:500;gap:4px;justify-content:center;opacity:.6;text-decoration:none}.footer-branding:hover{opacity:1}.footer-branding a{text-decoration:none}.thank-you-message{text-align:center}.thank-you-message-header{margin:10px 0 0}.thank-you-message-body{font-size:14px;opacity:.8}.limit-height{max-height:256px;overflow-x:hidden;overflow-y:auto;scrollbar-color:var(--ph-survey-scrollbar-thumb-color) var(--ph-survey-scrollbar-track-color);scrollbar-width:thin}.limit-height::-webkit-scrollbar{width:8px}.limit-height::-webkit-scrollbar-track{background:var(--ph-survey-scrollbar-track-color);border-radius:4px}.limit-height::-webkit-scrollbar-thumb{background-color:var(--ph-survey-scrollbar-thumb-color);border:2px solid var(--ph-survey-scrollbar-track-color);border-radius:4px}:is(.limit-height::-webkit-scrollbar-thumb):hover{background-color:var(--ph-survey-text-subtle-color)}.sr-only{clip:rect(0,0,0,0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}@media (prefers-reduced-motion:reduce){.ph-survey *{animation-duration:.01ms!important;animation-iteration-count:1!important;scroll-behavior:auto!important;transition-duration:.01ms!important}}@keyframes ph-survey-checkmark-reveal{0%{opacity:0;transform:rotate(45deg) scale(0)}50%{opacity:1;transform:rotate(45deg) scale(1.2)}to{opacity:1;transform:rotate(45deg) scale(1)}}@keyframes ph-survey-radio-reveal{0%{opacity:0;transform:scale(0)}50%{opacity:1;transform:scale(1.3)}to{opacity:1;transform:scale(1)}}',null!=s&&null!=(o=s.config)&&o.prepare_external_dependency_stylesheet&&(l=s.config.prepare_external_dependency_stylesheet(l)),l||(Cf.error("prepare_external_dependency_stylesheet returned null"),null));return null==c||c.setAttribute("data-ph-survey-style","true"),c}(s);if(M){var P=E.querySelector("style");P&&E.removeChild(P),E.appendChild(M)}return xf.body.appendChild(y),{shadow:E,isNewlyCreated:!0}},ju=(n,s)=>{if(!s)return null;var o=n[Bu(s)];return hl(o)?[...o]:o},Gu=n=>{var{responses:s,survey:o,surveySubmissionId:l,posthog:c,isSurveyCompleted:d}=n;c?(La(o),c.capture(Xd.SENT,r({[Kd.SURVEY_NAME]:o.name,[Kd.SURVEY_ID]:o.id,[Kd.SURVEY_ITERATION]:o.current_iteration,[Kd.SURVEY_ITERATION_START_DATE]:o.current_iteration_start_date,[Kd.SURVEY_QUESTIONS]:o.questions.map((n=>({id:n.id,question:n.question,response:ju(s,n.id)}))),[Kd.SURVEY_SUBMISSION_ID]:l,[Kd.SURVEY_COMPLETED]:d,sessionRecordingUrl:null==c.get_session_replay_url?void 0:c.get_session_replay_url()},s,{$set:{[Pa(o,"responded")]:!0}})),d&&(kf.dispatchEvent(new CustomEvent("PHSurveySent",{detail:{surveyId:o.id}})),uc(o))):eh.error("[survey sent] event not captured, PostHog instance not found.")},Xu=n=>n.map((n=>({sort:Math.floor(10*Math.random()),value:n}))).sort(((n,s)=>n.sort-s.sort)).map((n=>n.value)),Ku=(n,s)=>n.length===s.length&&n.every(((n,o)=>n===s[o]))?s.reverse():s,Qu=n=>{var s,o,l,c;return!!(null!=(s=n.conditions)&&null!=(s=s.events)&&s.repeatedActivation&&(o=n,null!=(null==(l=o.conditions)||null==(l=l.events)||null==(l=l.values)?void 0:l.length)&&(null==(c=o.conditions)||null==(c=c.events)||null==(c=c.values)?void 0:c.length)>0))||n.schedule===Jd.Always||lc(n)},Mf=(Af={__c:Tf="__cC"+Zu++,__:{isPreviewMode:!1,previewPageIndex:0,onPopupSurveyDismissed:()=>{},isPopup:!0,onPreviewSubmit:()=>{},surveySubmissionId:""},Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,o;return this.getChildContext||(s=[],(o={})[Tf]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&s.some((function(n){n.__e=!0,Ao(n)}))},this.sub=function(n){s.push(n);var o=n.componentWillUnmount;n.componentWillUnmount=function(){s.splice(s.indexOf(n),1),o&&o.call(n)}}),n.children}}).Provider.__=Af.Consumer.contextType=Af,tc=()=>ca(Mf),rc=n=>{var{component:s,children:o,renderAsHtml:l,style:c}=n;return function(n,s,o){var l,c,d,h,p=Co({},n.props);for(d in n.type&&n.type.defaultProps&&(h=n.type.defaultProps),s)"key"==d?l=s[d]:"ref"==d?c=s[d]:p[d]=void 0===s[d]&&void 0!==h?h[d]:s[d];return arguments.length>2&&(p.children=arguments.length>3?Nu.call(arguments,2):o),Eo(n.type,p,l||n.key,c||n.ref,null)}(s,l?{dangerouslySetInnerHTML:{__html:o},style:c}:{children:o,style:c})};function ic(n){return null!=n?n:"icontains"}function nc(n){var s,o,l;if(null==(s=n.conditions)||!s.url)return!0;var c=null==kf||null==(o=kf.location)?void 0:o.href;if(!c)return!1;var d=[n.conditions.url],h=ic(null==(l=n.conditions)?void 0:l.urlMatchType);return Sf[h](d,[c])}var sc=n=>{var s=""+oh+n.id;return n.current_iteration&&n.current_iteration>0&&(s=""+oh+n.id+"_"+n.current_iteration),s},oc=(n,s)=>{try{localStorage.setItem(sc(n),JSON.stringify(s))}catch(o){eh.error("Error setting in-progress survey state in localStorage",o)}},ac=n=>{try{var s=localStorage.getItem(sc(n));if(s)return JSON.parse(s)}catch(o){eh.error("Error getting in-progress survey state from localStorage",o)}return null},lc=n=>{var s=ac(n);return!ni(null==s?void 0:s.surveySubmissionId)},uc=n=>{try{localStorage.removeItem(sc(n))}catch(s){eh.error("Error clearing in-progress survey state from localStorage",s)}};function cc(n,s){void 0===s&&(s=!1);var o="PostHogSurvey-"+n.id;return s?"."+o:o}var Rf=0;function hc(n,s,o,l,c,d){var h,p,f={};for(p in s)"ref"==p?h=s[p]:f[p]=s[p];var m={type:n,props:f,key:o,ref:h,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Rf,__i:-1,__u:0,__source:c,__self:d};if("function"==typeof n&&(h=n.defaultProps))for(p in h)void 0===f[p]&&(f[p]=h[p]);return Du.vnode&&Du.vnode(m),m}var Of=hc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:hc("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146 272q66 0 121.5-35.5T682-393h-52q-23 40-63 61.5T480.5-310q-46.5 0-87-21T331-393h-53q26 61 81 96.5T480-261Zm0 181q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Pf=hc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:hc("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm20 194h253v-49H354v49ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Lf=hc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:hc("path",{d:"M626-533q22.5 0 38.25-15.75T680-587q0-22.5-15.75-38.25T626-641q-22.5 0-38.25 15.75T572-587q0 22.5 15.75 38.25T626-533Zm-292 0q22.5 0 38.25-15.75T388-587q0-22.5-15.75-38.25T334-641q-22.5 0-38.25 15.75T280-587q0 22.5 15.75 38.25T334-533Zm146.174 116Q413-417 358.5-379.5T278-280h53q22-42 62.173-65t87.5-23Q528-368 567.5-344.5T630-280h52q-25-63-79.826-100-54.826-37-122-37ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Nf=hc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:hc("path",{d:"M480-417q-67 0-121.5 37.5T278-280h404q-25-63-80-100t-122-37Zm-183-72 50-45 45 45 31-36-45-45 45-45-31-36-45 45-50-45-31 36 45 45-45 45 31 36Zm272 0 44-45 51 45 31-36-45-45 45-45-31-36-51 45-44-45-31 36 44 45-44 45 31 36ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142 0 241-99t99-241q0-142-99-241t-241-99q-142 0-241 99t-99 241q0 142 99 241t241 99Z"})}),Ff=hc("svg",{className:"emoji-svg",xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:hc("path",{d:"M479.504-261Q537-261 585.5-287q48.5-26 78.5-72.4 6-11.6-.75-22.6-6.75-11-20.25-11H316.918Q303-393 296.5-382t-.5 22.6q30 46.4 78.5 72.4 48.5 26 105.004 26ZM347-578l27 27q7.636 8 17.818 8Q402-543 410-551q8-8 8-18t-8-18l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.636-8 17.818Q276-559 284-551q8 8 18 8t18-8l27-27Zm267 0 27 27q7.714 8 18 8t18-8q8-7.636 8-17.818Q685-579 677-587l-42-42q-8.8-9-20.9-9-12.1 0-21.1 9l-42 42q-8 7.714-8 18t8 18q7.636 8 17.818 8Q579-543 587-551l27-27ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 340q142.375 0 241.188-98.812Q820-337.625 820-480t-98.812-241.188Q622.375-820 480-820t-241.188 98.812Q140-622.375 140-480t98.812 241.188Q337.625-140 480-140Z"})}),Df=hc("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-survey-title",children:[hc("title",{id:"close-survey-title",children:"Close survey"}),hc("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.164752 0.164752C0.384422 -0.0549175 0.740578 -0.0549175 0.960248 0.164752L6 5.20451L11.0398 0.164752C11.2594 -0.0549175 11.6156 -0.0549175 11.8352 0.164752C12.0549 0.384422 12.0549 0.740578 11.8352 0.960248L6.79549 6L11.8352 11.0398C12.0549 11.2594 12.0549 11.6156 11.8352 11.8352C11.6156 12.0549 11.2594 12.0549 11.0398 11.8352L6 6.79549L0.960248 11.8352C0.740578 12.0549 0.384422 12.0549 0.164752 11.8352C-0.0549175 11.6156 -0.0549175 11.2594 0.164752 11.0398L5.20451 6L0.164752 0.960248C-0.0549175 0.740578 -0.0549175 0.384422 0.164752 0.164752Z",fill:"black"})]}),Bf=hc("svg",{width:"77",height:"14",viewBox:"0 0 77 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[hc("g",{"clip-path":"url(#clip0_2415_6911)",children:[hc("mask",{id:"mask0_2415_6911",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"77",height:"14",children:hc("path",{d:"M0.5 0H76.5V14H0.5V0Z",fill:"white"})}),hc("g",{mask:"url(#mask0_2415_6911)",children:[hc("path",{d:"M5.77226 8.02931C5.59388 8.37329 5.08474 8.37329 4.90634 8.02931L4.4797 7.20672C4.41155 7.07535 4.41155 6.9207 4.4797 6.78933L4.90634 5.96669C5.08474 5.62276 5.59388 5.62276 5.77226 5.96669L6.19893 6.78933C6.26709 6.9207 6.26709 7.07535 6.19893 7.20672L5.77226 8.02931ZM5.77226 12.6946C5.59388 13.0386 5.08474 13.0386 4.90634 12.6946L4.4797 11.872C4.41155 11.7406 4.41155 11.586 4.4797 11.4546L4.90634 10.632C5.08474 10.288 5.59388 10.288 5.77226 10.632L6.19893 11.4546C6.26709 11.586 6.26709 11.7406 6.19893 11.872L5.77226 12.6946Z",fill:"#1D4AFF"}),hc("path",{d:"M0.5 10.9238C0.5 10.508 1.02142 10.2998 1.32637 10.5938L3.54508 12.7327C3.85003 13.0267 3.63405 13.5294 3.20279 13.5294H0.984076C0.716728 13.5294 0.5 13.3205 0.5 13.0627V10.9238ZM0.5 8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.19753 13.3927C5.28831 13.4802 5.41144 13.5294 5.53982 13.5294H8.0421C8.47337 13.5294 8.68936 13.0267 8.3844 12.7327L1.32637 5.92856C1.02142 5.63456 0.5 5.84278 0.5 6.25854V8.67083ZM0.5 4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L10.0368 13.3927C10.1276 13.4802 10.2508 13.5294 10.3791 13.5294H12.8814C13.3127 13.5294 13.5287 13.0267 13.2237 12.7327L1.32637 1.26329C1.02142 0.969312 0.5 1.17752 0.5 1.59327V4.00556ZM5.33931 4.00556C5.33931 4.12932 5.39033 4.24802 5.4811 4.33554L14.1916 12.7327C14.4965 13.0267 15.0179 12.8185 15.0179 12.4028V9.99047C15.0179 9.86671 14.9669 9.74799 14.8762 9.66049L6.16568 1.26329C5.86071 0.969307 5.33931 1.17752 5.33931 1.59327V4.00556ZM11.005 1.26329C10.7 0.969307 10.1786 1.17752 10.1786 1.59327V4.00556C10.1786 4.12932 10.2296 4.24802 10.3204 4.33554L14.1916 8.06748C14.4965 8.36148 15.0179 8.15325 15.0179 7.7375V5.3252C15.0179 5.20144 14.9669 5.08272 14.8762 4.99522L11.005 1.26329Z",fill:"#F9BD2B"}),hc("path",{d:"M21.0852 10.981L16.5288 6.58843C16.2238 6.29443 15.7024 6.50266 15.7024 6.91841V13.0627C15.7024 13.3205 15.9191 13.5294 16.1865 13.5294H23.2446C23.5119 13.5294 23.7287 13.3205 23.7287 13.0627V12.5032C23.7287 12.2455 23.511 12.0396 23.2459 12.0063C22.4323 11.9042 21.6713 11.546 21.0852 10.981ZM18.0252 12.0365C17.5978 12.0365 17.251 11.7021 17.251 11.2901C17.251 10.878 17.5978 10.5436 18.0252 10.5436C18.4527 10.5436 18.7996 10.878 18.7996 11.2901C18.7996 11.7021 18.4527 12.0365 18.0252 12.0365Z",fill:"currentColor"}),hc("path",{d:"M0.5 13.0627C0.5 13.3205 0.716728 13.5294 0.984076 13.5294H3.20279C3.63405 13.5294 3.85003 13.0267 3.54508 12.7327L1.32637 10.5938C1.02142 10.2998 0.5 10.508 0.5 10.9238V13.0627ZM5.33931 5.13191L1.32637 1.26329C1.02142 0.969306 0.5 1.17752 0.5 1.59327V4.00556C0.5 4.12932 0.551001 4.24802 0.641783 4.33554L5.33931 8.86412V5.13191ZM1.32637 5.92855C1.02142 5.63455 0.5 5.84278 0.5 6.25853V8.67083C0.5 8.79459 0.551001 8.91331 0.641783 9.00081L5.33931 13.5294V9.79717L1.32637 5.92855Z",fill:"#1D4AFF"}),hc("path",{d:"M10.1787 5.3252C10.1787 5.20144 10.1277 5.08272 10.0369 4.99522L6.16572 1.26329C5.8608 0.969306 5.33936 1.17752 5.33936 1.59327V4.00556C5.33936 4.12932 5.39037 4.24802 5.48114 4.33554L10.1787 8.86412V5.3252ZM5.33936 13.5294H8.04214C8.47341 13.5294 8.6894 13.0267 8.38443 12.7327L5.33936 9.79717V13.5294ZM5.33936 5.13191V8.67083C5.33936 8.79459 5.39037 8.91331 5.48114 9.00081L10.1787 13.5294V9.99047C10.1787 9.86671 10.1277 9.74803 10.0369 9.66049L5.33936 5.13191Z",fill:"#F54E00"}),hc("path",{d:"M29.375 11.6667H31.3636V8.48772H33.0249C34.8499 8.48772 36.0204 7.4443 36.0204 5.83052C36.0204 4.21681 34.8499 3.17334 33.0249 3.17334H29.375V11.6667ZM31.3636 6.84972V4.81136H32.8236C33.5787 4.81136 34.0318 5.19958 34.0318 5.83052C34.0318 6.4615 33.5787 6.84972 32.8236 6.84972H31.3636ZM39.618 11.7637C41.5563 11.7637 42.9659 10.429 42.9659 8.60905C42.9659 6.78905 41.5563 5.45438 39.618 5.45438C37.6546 5.45438 36.2701 6.78905 36.2701 8.60905C36.2701 10.429 37.6546 11.7637 39.618 11.7637ZM38.1077 8.60905C38.1077 7.63838 38.7118 6.97105 39.618 6.97105C40.5116 6.97105 41.1157 7.63838 41.1157 8.60905C41.1157 9.57972 40.5116 10.2471 39.618 10.2471C38.7118 10.2471 38.1077 9.57972 38.1077 8.60905ZM46.1482 11.7637C47.6333 11.7637 48.6402 10.8658 48.6402 9.81025C48.6402 7.33505 45.2294 8.13585 45.2294 7.16518C45.2294 6.8983 45.5189 6.72843 45.9342 6.72843C46.3622 6.72843 46.8782 6.98318 47.0418 7.54132L48.527 6.94678C48.2375 6.06105 47.1677 5.45438 45.8713 5.45438C44.4743 5.45438 43.6058 6.25518 43.6058 7.21372C43.6058 9.53118 46.9663 8.88812 46.9663 9.84665C46.9663 10.1864 46.6391 10.417 46.1482 10.417C45.4434 10.417 44.9525 9.94376 44.8015 9.3735L43.3164 9.93158C43.6436 10.8537 44.6001 11.7637 46.1482 11.7637ZM53.4241 11.606L53.2982 10.0651C53.0843 10.1743 52.8074 10.2106 52.5808 10.2106C52.1278 10.2106 51.8257 9.89523 51.8257 9.34918V7.03172H53.3612V5.55145H51.8257V3.78001H49.9755V5.55145H48.9687V7.03172H49.9755V9.57972C49.9755 11.06 51.0202 11.7637 52.3921 11.7637C52.7696 11.7637 53.122 11.7031 53.4241 11.606ZM59.8749 3.17334V6.47358H56.376V3.17334H54.3874V11.6667H56.376V8.11158H59.8749V11.6667H61.8761V3.17334H59.8749ZM66.2899 11.7637C68.2281 11.7637 69.6378 10.429 69.6378 8.60905C69.6378 6.78905 68.2281 5.45438 66.2899 5.45438C64.3265 5.45438 62.942 6.78905 62.942 8.60905C62.942 10.429 64.3265 11.7637 66.2899 11.7637ZM64.7796 8.60905C64.7796 7.63838 65.3837 6.97105 66.2899 6.97105C67.1835 6.97105 67.7876 7.63838 67.7876 8.60905C67.7876 9.57972 67.1835 10.2471 66.2899 10.2471C65.3837 10.2471 64.7796 9.57972 64.7796 8.60905ZM73.2088 11.4725C73.901 11.4725 74.5177 11.242 74.845 10.8416V11.424C74.845 12.1034 74.2786 12.5767 73.4102 12.5767C72.7935 12.5767 72.2523 12.2854 72.1642 11.788L70.4776 12.0428C70.7042 13.1955 71.925 13.972 73.4102 13.972C75.361 13.972 76.6574 12.8679 76.6574 11.2298V5.55145H74.8324V6.07318C74.4926 5.69705 73.9136 5.45438 73.171 5.45438C71.409 5.45438 70.3014 6.61918 70.3014 8.46345C70.3014 10.3077 71.409 11.4725 73.2088 11.4725ZM72.1012 8.46345C72.1012 7.55345 72.655 6.97105 73.5109 6.97105C74.3793 6.97105 74.9331 7.55345 74.9331 8.46345C74.9331 9.37345 74.3793 9.95585 73.5109 9.95585C72.655 9.95585 72.1012 9.37345 72.1012 8.46345Z",fill:"currentColor"})]})]}),hc("defs",{children:hc("clipPath",{id:"clip0_2415_6911",children:hc("rect",{width:"76",height:"14",fill:"white",transform:"translate(0.5)"})})})]});function bc(){return hc("a",{href:"https://posthog.com/surveys",target:"_blank",rel:"noopener",className:"footer-branding",children:["Survey by ",Bf]})}function Sc(n){var{text:s,submitDisabled:o,appearance:l,onSubmit:c,link:d,onPreviewSubmit:h,skipSubmitButton:p}=n,{isPreviewMode:f}=ca(Mf);return hc("div",{className:"bottom-section",children:[!p&&hc("button",{className:"form-submit",disabled:o,"aria-label":"Submit survey",type:"button",onClick:()=>{d&&(null==El||El.open(d)),f?null==h||h():c()},children:s}),!l.whiteLabel&&hc(bc,{})]})}function wc(n){var{question:s,forceDisableHtml:o,htmlFor:l}=n;return hc("div",{class:"question-header",children:[hc(s.type===Vd.Open?"label":"h3",{className:"survey-question",htmlFor:l,children:s.question}),s.description&&rc({component:ko("p",{className:"survey-question-description"}),children:s.description,renderAsHtml:!o&&"text"!==s.descriptionContentType})]})}function Cc(n){var{onClick:s}=n,{isPreviewMode:o}=ca(Mf);return hc("button",{className:"form-cancel",onClick:s,disabled:o,"aria-label":"Close survey",type:"button",children:Df})}hc("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:hc("path",{d:"M5.30769 10.6923L4.77736 11.2226C4.91801 11.3633 5.10878 11.4423 5.30769 11.4423C5.5066 11.4423 5.69737 11.3633 5.83802 11.2226L5.30769 10.6923ZM15.5303 1.53033C15.8232 1.23744 15.8232 0.762563 15.5303 0.46967C15.2374 0.176777 14.7626 0.176777 14.4697 0.46967L15.5303 1.53033ZM1.53033 5.85429C1.23744 5.56139 0.762563 5.56139 0.46967 5.85429C0.176777 6.14718 0.176777 6.62205 0.46967 6.91495L1.53033 5.85429ZM5.83802 11.2226L15.5303 1.53033L14.4697 0.46967L4.77736 10.162L5.83802 11.2226ZM0.46967 6.91495L4.77736 11.2226L5.83802 10.162L1.53033 5.85429L0.46967 6.91495Z",fill:"currentColor"})});var $f=El;function kc(n){var{header:s,description:o,contentType:l,forceDisableHtml:c,appearance:d,onClose:h}=n,{isPopup:p}=ca(Mf);return aa((()=>{var e3=n=>{"Enter"!==n.key&&"Escape"!==n.key||(n.preventDefault(),h())};return En($f,"keydown",e3),()=>{$f.removeEventListener("keydown",e3)}}),[h]),hc("div",{className:"thank-you-message",role:"status",tabIndex:0,"aria-atomic":"true",children:[p&&hc(Cc,{onClick:()=>h()}),hc("h3",{className:"thank-you-message-header",children:s}),o&&rc({component:ko("p",{className:"thank-you-message-body"}),children:o,renderAsHtml:!c&&"text"!==l}),p&&hc(Sc,{text:d.thankYouMessageCloseButtonText||"Close",submitDisabled:!1,appearance:d,onSubmit:()=>h()})]})}var Ec=n=>hl(n)&&n.every((n=>ti(n)));function xc(n){var{question:s,forceDisableHtml:o,appearance:l,onSubmit:c,onPreviewSubmit:d,displayQuestionIndex:h,initialValue:p}=n,{isPreviewMode:f}=tc(),m=la(null),[_,y]=oa((()=>ti(p)?p:""));aa((()=>{setTimeout((()=>{var n;f||null==(n=m.current)||n.focus()}),100)}),[f]);var E="surveyQuestion"+h;return hc(xo,{children:[hc("div",{className:"question-container",children:[hc(wc,{question:s,forceDisableHtml:o,htmlFor:E}),hc("textarea",{ref:m,id:E,rows:4,placeholder:null==l?void 0:l.placeholder,onInput:n=>{y(n.currentTarget.value),n.stopPropagation()},onKeyDown:n=>{n.stopPropagation()},value:_})]}),hc(Sc,{text:s.buttonText||"Submit",submitDisabled:!_&&!s.optional,appearance:l,onSubmit:()=>c(_),onPreviewSubmit:()=>d(_)})]})}function Tc(n){var{question:s,forceDisableHtml:o,appearance:l,onSubmit:c,onPreviewSubmit:d}=n;return hc(xo,{children:[hc("div",{className:"question-container",children:hc(wc,{question:s,forceDisableHtml:o})}),hc(Sc,{text:s.buttonText||"Submit",submitDisabled:!1,link:s.link,appearance:l,onSubmit:()=>c("link clicked"),onPreviewSubmit:()=>d("link clicked")})]})}function Mc(n){var{question:s,forceDisableHtml:o,displayQuestionIndex:l,appearance:c,onSubmit:d,onPreviewSubmit:h,initialValue:p}=n,f=s.scale,m=10===s.scale?0:1,[_,y]=oa((()=>si(p)?p:hl(p)&&p.length>0&&si(parseInt(p[0]))?parseInt(p[0]):ti(p)&&si(parseInt(p))?parseInt(p):null)),{isPreviewMode:E}=tc(),p2=n=>E?h(n):d(n);return hc(xo,{children:[hc("div",{className:"question-container",children:[hc(wc,{question:s,forceDisableHtml:o}),hc("div",{className:"rating-section",children:[hc("div",{className:"rating-options",children:["emoji"===s.display&&hc("div",{className:"rating-options-emoji",children:(3===s.scale?Uf:Hf).map(((n,o)=>hc("button",{"aria-label":"Rate "+(o+1),className:"ratings-emoji question-"+l+"-rating-"+o+" "+(o+1===_?"rating-active":""),value:o+1,type:"button",onClick:()=>{var n=o+1;y(n),s.skipSubmitButton&&p2(n)},children:n},o)))}),"number"===s.display&&hc("div",{className:"rating-options-number",style:{gridTemplateColumns:"repeat("+(f-m+1)+", minmax(0, 1fr))"},children:Dc(s.scale).map(((n,o)=>hc(Rc,{displayQuestionIndex:l,active:_===n,appearance:c,num:n,setActiveNumber:n=>{y(n),s.skipSubmitButton&&p2(n)}},o)))})]}),hc("div",{className:"rating-text",children:[hc("div",{children:s.lowerBoundLabel}),hc("div",{children:s.upperBoundLabel})]})]})]}),hc(Sc,{text:s.buttonText||(null==c?void 0:c.submitButtonText)||"Submit",submitDisabled:ii(_)&&!s.optional,appearance:c,onSubmit:()=>d(_),onPreviewSubmit:()=>h(_),skipSubmitButton:s.skipSubmitButton})]})}function Rc(n){var{num:s,active:o,displayQuestionIndex:l,setActiveNumber:c}=n;return hc("button",{"aria-label":"Rate "+s,className:"ratings-number question-"+l+"-rating-"+s+" "+(o?"rating-active":""),type:"button",onClick:()=>{c(s)},children:s})}function Ac(n){var{question:s,forceDisableHtml:o,displayQuestionIndex:l,appearance:c,onSubmit:d,onPreviewSubmit:h,initialValue:p}=n,f=la(null),m=ua((()=>(n=>{if(!n.shuffleOptions)return n.choices;var s=n.choices,o="";n.hasOpenChoice&&(o=s.pop());var l=Ku(s,Xu(s));return n.hasOpenChoice&&(n.choices.push(o),l.push(o)),l})(s)),[s]),[_,y]=oa((()=>{return n=p,o=s.type,ti(n)||Ec(n)?n:o===Vd.SingleChoice?null:[];var n,o})),[E,M]=oa((()=>((n,s)=>{if(ti(n)&&!s.includes(n))return{isSelected:!0,inputValue:n};if(Ec(n)){var o=n.find((n=>!s.includes(n)));if(o)return{isSelected:!0,inputValue:o}}return{isSelected:!1,inputValue:""}})(p,m))),{isPreviewMode:P}=tc(),L=s.type===Vd.SingleChoice,N=s.type===Vd.MultipleChoice,F=s.skipSubmitButton&&L&&!s.hasOpenChoice,y2=(n,s)=>{if(s){var o=!E.isSelected;return M((n=>r({},n,{isSelected:o,inputValue:o?n.inputValue:""}))),L&&y(""),void(o&&setTimeout((()=>{var n;return null==(n=f.current)?void 0:n.focus()}),75))}if(L)return y(n),M((n=>r({},n,{isSelected:!1,inputValue:""}))),void(F&&(d(n),P&&h(n)));N&&hl(_)&&(_.includes(n)?y(_.filter((s=>s!==n))):y([..._,n]))},b2=n=>{n.stopPropagation();var s=n.currentTarget.value;M((n=>r({},n,{inputValue:s}))),L&&y(s)},S2=n=>{n.stopPropagation(),"Enter"!==n.key||w2()||(n.preventDefault(),C2()),"Escape"===n.key&&(n.preventDefault(),M((n=>r({},n,{isSelected:!1,inputValue:""}))),L&&y(null))},w2=()=>!(s.optional||!ii(_)&&(!hl(_)||E.isSelected||0!==_.length)&&(!E.isSelected||""!==E.inputValue.trim())),C2=()=>{E.isSelected&&N?hl(_)&&(P?h([..._,E.inputValue]):d([..._,E.inputValue])):P?h(_):d(_)};return hc(xo,{children:[hc("div",{className:"question-container",children:[hc(wc,{question:s,forceDisableHtml:o}),hc("fieldset",{className:"multiple-choice-options limit-height",children:[hc("legend",{className:"sr-only",children:N?" Select all that apply":" Select one"}),m.map(((n,o)=>{var c=!!s.hasOpenChoice&&o===s.choices.length-1,d="surveyQuestion"+l+"Choice"+o,h=d+"Open",p=c?E.isSelected:L?_===n:hl(_)&&_.includes(n);return hc("label",{className:c?"choice-option-open":"",children:[hc("div",{className:"response-choice",children:[hc("input",{type:L?"radio":"checkbox",name:d,checked:p,onChange:()=>y2(n,c),id:d,"aria-controls":h}),hc("span",{children:c?n+":":n})]}),c&&hc("input",{type:"text",ref:f,id:h,name:"question"+l+"Open",value:E.inputValue,onKeyDown:S2,onInput:b2,onClick:s=>{E.isSelected||y2(n,!0),s.stopPropagation()},"aria-label":n+" - please specify"})]},o)}))]})]}),hc(Sc,{text:s.buttonText||"Submit",submitDisabled:w2(),appearance:c,onSubmit:C2,onPreviewSubmit:C2,skipSubmitButton:F})]})}var Uf=[Lf,Pf,Of],Hf=[Nf,Lf,Pf,Of,Ff],jf=[1,2,3,4,5],zf=[1,2,3,4,5,6,7],qf=[0,1,2,3,4,5,6,7,8,9,10];function Dc(n){switch(n){case 5:default:return jf;case 7:return zf;case 10:return qf}}var Wf=El,Vf=Pl,Gf="ph:show_survey_widget",Yf="PHWidgetSurveyClickListener";class zc{constructor(n){var s=this;this._surveyTimeouts=new Map,this._widgetSelectorListeners=new Map,this._prefillHandledSurveys=new Set,this.handlePopoverSurvey=n=>{var s;this._clearSurveyTimeout(n.id),this._addSurveyToFocus(n);var o=(null==(s=n.appearance)?void 0:s.surveyPopupDelaySeconds)||0,{shadow:l}=zu(n,this._posthog);if(o<=0)return Zo(hc(Xc,{posthog:this._posthog,survey:n,removeSurveyFromFocus:this._removeSurveyFromFocus}),l);var c=setTimeout((()=>{if(!nc(n))return this._removeSurveyFromFocus(n);Zo(hc(Xc,{posthog:this._posthog,survey:r({},n,{appearance:r({},n.appearance,{surveyPopupDelaySeconds:0})}),removeSurveyFromFocus:this._removeSurveyFromFocus}),l)}),1e3*o);this._surveyTimeouts.set(n.id,c)},this._handleWidget=n=>{var{shadow:s,isNewlyCreated:o}=zu(n,this._posthog);o&&Zo(hc(Jc,{posthog:this._posthog,survey:n},n.id),s)},this._removeWidgetSelectorListener=n=>{this._removeSurveyFromDom(n);var s=this._widgetSelectorListeners.get(n.id);s&&(s.element.removeEventListener("click",s.listener),s.element.removeAttribute(Yf),this._widgetSelectorListeners.delete(n.id),eh.info("Removed click listener for survey "+n.id))},this._manageWidgetSelectorListener=(n,s)=>{var o=Vf.querySelector(s),l=this._widgetSelectorListeners.get(n.id);if(o){if(this._handleWidget(n),l){if(o===l.element)return;eh.info("Selector element changed for survey "+n.id+". Re-attaching listener."),this._removeWidgetSelectorListener(n)}if(!o.hasAttribute(Yf)){var n2=s=>{var o,l;s.stopPropagation();var c=(null==(o=n.appearance)?void 0:o.position)===jd.NextToTrigger?function(n,s){try{var o=n.getBoundingClientRect(),l=Wf.innerHeight,c=Wf.innerWidth,d=o.left+o.width/2-s/2;d+s>c-20&&(d=c-s-20),d<20&&(d=20);var h=l-o.bottom,p=o.top,f=h<250&&p>h;return{position:"fixed",top:f?"auto":o.bottom+12+"px",left:d+"px",right:"auto",bottom:f?l-o.top+12+"px":"auto",zIndex:Ef.zIndex}}catch(m){return eh.warn("Failed to calculate trigger position:",m),null}}(s.currentTarget,parseInt((null==(l=n.appearance)?void 0:l.maxWidth)||Ef.maxWidth)):{};Wf.dispatchEvent(new CustomEvent(Gf,{detail:{surveyId:n.id,position:c}}))};En(o,"click",n2),o.setAttribute(Yf,"true"),this._widgetSelectorListeners.set(n.id,{element:o,listener:n2,survey:n}),eh.info("Attached click listener for feedback button survey "+n.id)}}else l&&this._removeWidgetSelectorListener(n)},this.renderPopover=n=>{var{shadow:s}=zu(n,this._posthog);Zo(hc(Xc,{posthog:this._posthog,survey:n,removeSurveyFromFocus:this._removeSurveyFromFocus}),s)},this.renderSurvey=(n,s)=>{var o;null!=(o=this._posthog.config)&&null!=(o=o.surveys)&&o.prefillFromUrl&&this._handleUrlPrefill(n),Zo(hc(Xc,{posthog:this._posthog,survey:n,removeSurveyFromFocus:this._removeSurveyFromFocus,isPopup:!1}),s)},this.getActiveMatchingSurveys=function(n,o){var l;void 0===o&&(o=!1),null==(l=s._posthog)||l.surveys.getSurveys((o=>{var l=o.filter((n=>s.checkSurveyEligibility(n).eligible&&s._isSurveyConditionMatched(n)&&s._hasActionOrEventTriggeredSurvey(n)&&s._checkFlags(n)));n(l)}),o)},this.callSurveysAndEvaluateDisplayLogic=function(n){void 0===n&&(n=!1),s.getActiveMatchingSurveys((n=>{var o=n.filter((n=>n.type===Wd.Popover||n.type===Wd.Widget)),l=s._sortSurveysByAppearanceDelay(o),c=new Set;l.forEach((n=>{if(n.type===Wd.Widget){var o,l,d,h;if((null==(o=n.appearance)?void 0:o.widgetType)===Ud.Tab)return void s._handleWidget(n);(null==(l=n.appearance)?void 0:l.widgetType)===Ud.Selector&&null!=(d=n.appearance)&&d.widgetSelector&&(c.add(n.id),s._manageWidgetSelectorListener(n,null==(h=n.appearance)?void 0:h.widgetSelector))}ii(s._surveyInFocus)&&n.type===Wd.Popover&&s.handlePopoverSurvey(n)})),s._widgetSelectorListeners.forEach((n=>{var{survey:o}=n;c.has(o.id)||s._removeWidgetSelectorListener(o)}))}),n)},this._addSurveyToFocus=n=>{ii(this._surveyInFocus)||eh.error("Survey "+this._surveyInFocus+" already in focus. Cannot add survey "+n.id+"."),this._surveyInFocus=n.id},this._removeSurveyFromFocus=n=>{this._surveyInFocus!==n.id&&eh.error("Survey "+n.id+" is not in focus. Cannot remove survey "+n.id+"."),this._clearSurveyTimeout(n.id),this._clearAutoSubmitTimeout(),this._surveyInFocus=null,this._removeSurveyFromDom(n)},this._posthog=n,this._surveyInFocus=null}_clearSurveyTimeout(n){var s=this._surveyTimeouts.get(n);s&&(clearTimeout(s),this._surveyTimeouts.delete(n))}_sortSurveysByAppearanceDelay(n){return n.sort(((n,s)=>{var o,l,c=lc(n),d=lc(s);if(c&&!d)return-1;if(!c&&d)return 1;var h=n.schedule===Jd.Always,p=s.schedule===Jd.Always;return h&&!p?1:!h&&p?-1:((null==(o=n.appearance)?void 0:o.surveyPopupDelaySeconds)||0)-((null==(l=s.appearance)?void 0:l.surveyPopupDelaySeconds)||0)}))}_handleUrlPrefill(n){if(!this._prefillHandledSurveys.has(n.id))try{var s,{params:o,autoSubmit:l}=function(n){var s={},o=!1,l=n.replace(/^\?/,"");if(!l)return{params:s,autoSubmit:o};var c=l.split("&");for(var d of c){var[h,p]=d.split("=");if(h&&!ei(p)){var f=decodeURIComponent(h),m=decodeURIComponent(p);if("auto_submit"!==f||"true"!==m){var _=f.match(/^q(\d+)$/);if(_){var y=parseInt(_[1],10);s[y]||(s[y]=[]),s[y].push(m)}}else o=!0}}return{params:s,autoSubmit:o}}(Wf.location.search);if(0===Object.keys(o).length)return;eh.info("[Survey Prefill] Detected URL prefill parameters");var c=(f=o,m={},(p=n).questions.forEach(((n,s)=>{if(f[s]&&n.id){var o=f[s],l=Bu(n.id);try{switch(n.type){case Vd.SingleChoice:if(!n.choices||0===n.choices.length)return void zl.warn("[Survey Prefill] Question "+s+" has no choices");var c=parseInt(o[0],10);if(isNaN(c)||c<0||c>=n.choices.length)return void zl.warn("[Survey Prefill] Invalid choice index for q"+s+": "+o[0]);m[l]=n.choices[c];break;case Vd.MultipleChoice:if(!n.choices||0===n.choices.length)return void zl.warn("[Survey Prefill] Question "+s+" has no choices");var d=o.map((n=>parseInt(n,10))).filter((s=>!isNaN(s)&&s>=0&&s<n.choices.length));if(0===d.length)return void zl.warn("[Survey Prefill] No valid choices for q"+s);var h=[...new Set(d.map((s=>n.choices[s])))];h.length<d.length&&zl.warn("[Survey Prefill] Removed duplicate choices for q"+s),m[l]=h;break;case Vd.Rating:var p=parseInt(o[0],10),_=n.scale||10;if(isNaN(p)||p<0||p>_)return void zl.warn("[Survey Prefill] Invalid rating for q"+s+": "+o[0]+" (scale: 0-"+_+")");m[l]=p;break;default:zl.info("[Survey Prefill] Question type "+n.type+" does not support prefill")}}catch(y){zl.error("[Survey Prefill] Error converting q"+s+":",y)}}})),m);if(0===Object.keys(c).length)return void eh.warn("[Survey Prefill] No valid responses after conversion");var d=Ua();oc(n,{surveySubmissionId:d,responses:c,lastQuestionIndex:0}),eh.info("[Survey Prefill] Stored prefilled responses in localStorage");var h=l&&(null==(s=this._posthog.config.surveys)?void 0:s.autoSubmitIfComplete)&&function(n,s){return n.questions.every((n=>{if(n.optional)return!0;if(n.type===Vd.Link||n.type===Vd.Open)return!0;if(!n.id)return!1;var o=Bu(n.id);return s.hasOwnProperty(o)}))}(n,c);h&&this._scheduleAutoSubmit(n,c,d),this._prefillHandledSurveys.add(n.id)}catch(p){eh.error("[Survey Prefill] Error handling URL prefill:",p)}var p,f,m}_scheduleAutoSubmit(n,s,o){var l,c,d=null!==(l=null==(c=this._posthog.config.surveys)?void 0:c.autoSubmitDelay)&&void 0!==l?l:800;eh.info("[Survey Prefill] Auto-submit scheduled"),this._autoSubmitTimeout=setTimeout((()=>{eh.info("[Survey Prefill] Auto-submitting survey"),Gu({responses:s,survey:n,surveySubmissionId:o,posthog:this._posthog,isSurveyCompleted:!0})}),d)}_isSurveyFeatureFlagEnabled(n,s){if(void 0===s&&(s=void 0),!n)return!0;var o=!!this._posthog.featureFlags.isFeatureEnabled(n,{send_event:!n.startsWith("survey-targeting-")}),l=!0;return s&&(l=this._posthog.featureFlags.getFeatureFlag(n,{send_event:!1})===s||"any"===s),o&&l}_isSurveyConditionMatched(n){return!n.conditions||nc(n)&&function(n){var s,o,l;if(null==(s=n.conditions)||!s.deviceTypes||0===(null==(o=n.conditions)?void 0:o.deviceTypes.length))return!0;if(!Ul)return!1;var c=$l(Ul);return Sf[ic(null==(l=n.conditions)?void 0:l.deviceTypesMatchType)](n.conditions.deviceTypes,[c])}(n)&&function(n){var s;return null==(s=n.conditions)||!s.selector||!(null==xf||!xf.querySelector(n.conditions.selector))}(n)}_internalFlagCheckSatisfied(n){return Qu(n)||this._isSurveyFeatureFlagEnabled(n.internal_targeting_flag_key)||lc(n)}checkSurveyEligibility(n){var s,o,l={eligible:!0,reason:void 0};if(!Ta(n))return l.eligible=!1,l.reason="Survey is not running. It was completed on "+n.end_date,l;if(!ah.includes(n.type))return l.eligible=!1,l.reason="Surveys of type "+n.type+" are never eligible to be shown in the app",l;var c,d=null==(s=n.conditions)?void 0:s.linkedFlagVariant;return this._isSurveyFeatureFlagEnabled(n.linked_flag_key,d)?this._isSurveyFeatureFlagEnabled(n.targeting_flag_key)?this._internalFlagCheckSatisfied(n)?(n=>{var s=localStorage.getItem("lastSeenSurveyDate");if(!n||!s)return!0;var o=new Date,l=Math.abs(o.getTime()-new Date(s).getTime());return Math.ceil(l/864e5)>n})(null==(o=n.conditions)?void 0:o.seenSurveyWaitPeriodInDays)?(c=n,localStorage.getItem(Fa(c))&&!Qu(c)?(l.eligible=!1,l.reason="Survey has already been seen and it can't be activated again",l):l):(l.eligible=!1,l.reason="Survey wait period has not passed",l):(l.eligible=!1,l.reason="Survey internal targeting flag is not enabled and survey cannot activate repeatedly and survey is not in progress",l):(l.eligible=!1,l.reason="Survey targeting feature flag is not enabled",l):(l.eligible=!1,l.reason=d?"Survey linked feature flag is not enabled for variant "+d:"Survey linked feature flag is not enabled",l)}_hasActionOrEventTriggeredSurvey(n){var s;if(!Ma(n)&&!Ra(n))return!0;var o=null==(s=this._posthog.surveys._surveyEventReceiver)?void 0:s.getSurveys();return!(null==o||!o.includes(n.id))}_checkFlags(n){var s;return null==(s=n.feature_flag_keys)||!s.length||n.feature_flag_keys.every((n=>{var{key:s,value:o}=n;return!s||!o||this._isSurveyFeatureFlagEnabled(o)}))}_removeSurveyFromDom(n){try{var s=Vf.querySelector(cc(n,!0));null!=s&&s.shadowRoot&&Zo(null,s.shadowRoot),null==s||s.remove()}catch(o){eh.warn("Failed to remove survey "+n.id+" from DOM:",o)}}_clearAutoSubmitTimeout(){this._autoSubmitTimeout&&(clearTimeout(this._autoSubmitTimeout),this._autoSubmitTimeout=void 0)}getTestAPI(){return{addSurveyToFocus:this._addSurveyToFocus,removeSurveyFromFocus:this._removeSurveyFromFocus,surveyInFocus:this._surveyInFocus,surveyTimeouts:this._surveyTimeouts,handleWidget:this._handleWidget,handlePopoverSurvey:this.handlePopoverSurvey,manageWidgetSelectorListener:this._manageWidgetSelectorListener,sortSurveysByAppearanceDelay:this._sortSurveysByAppearanceDelay,checkFlags:this._checkFlags.bind(this),isSurveyFeatureFlagEnabled:this._isSurveyFeatureFlagEnabled.bind(this)}}}function jc(n,s){if(Vf&&Wf){var o,l=new zc(n);if(n.config.disable_surveys_automatic_display)return eh.info("Surveys automatic display is disabled. Skipping call surveys and evaluate display logic."),l;if(!1===s)return eh.info("There are no surveys to load or Surveys is disabled in the project settings."),l;l.callSurveysAndEvaluateDisplayLogic(!0);var n2=()=>{ei(o)&&(o=setInterval((()=>{l.callSurveysAndEvaluateDisplayLogic(!1)}),1e3))};return n2(),En(Vf,"visibilitychange",(()=>{Vf.hidden?ei(o)||(clearInterval(o),o=void 0):(l.callSurveysAndEvaluateDisplayLogic(!1),n2())})),l}}function Gc(n){var{survey:s,removeSurveyFromFocus:o=()=>{},setSurveyVisible:l,isPreviewMode:c=!1}=n;aa((()=>{var n;if(!c&&null!=(n=s.conditions)&&n.url){var s2=()=>{var n,c=s.type===Wd.Widget,d=nc(s),h=(null==(n=s.appearance)?void 0:n.widgetType)===Ud.Tab&&c;if(!d)return eh.info("Hiding survey "+s.id+" because URL does not match"),l(!1),o(s);h&&(eh.info("Showing survey "+s.id+" because it is a feedback button tab and URL matches"),l(!0))};En(Wf,"popstate",s2),En(Wf,"hashchange",s2);var d=Wf.history.pushState,h=Wf.history.replaceState;return Wf.history.pushState=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];d.apply(this,s),s2()},Wf.history.replaceState=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];h.apply(this,s),s2()},()=>{Wf.removeEventListener("popstate",s2),Wf.removeEventListener("hashchange",s2),Wf.history.pushState=d,Wf.history.replaceState=h}}}),[c,s,o,l])}function Yc(n,s,o){if(void 0===s&&(s=jd.Right),n===Wd.ExternalSurvey)return{};switch(s){case jd.TopLeft:return{top:"0",left:"0",transform:"translate(30px, 30px)"};case jd.TopRight:return{top:"0",right:"0",transform:"translate(-30px, 30px)"};case jd.TopCenter:return{top:"0",left:"50%",transform:"translate(-50%, 30px)"};case jd.MiddleLeft:return{top:"50%",left:"0",transform:"translate(30px, -50%)"};case jd.MiddleRight:return{top:"50%",right:"0",transform:"translate(-30px, -50%)"};case jd.MiddleCenter:return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};case jd.Left:return{left:"30px"};case jd.Center:return{left:"50%",transform:"translateX(-50%)"};default:case jd.Right:return{right:n===Wd.Widget&&o===Ud.Tab?"60px":"30px"}}}function Xc(n){var s,o,l,c,d,h,{survey:p,forceDisableHtml:f,posthog:m,style:_={},previewPageIndex:y,removeSurveyFromFocus:E=()=>{},isPopup:M=!0,onPreviewSubmit:P=()=>{},onPopupSurveyDismissed:L=()=>{},onCloseConfirmationMessage:N=()=>{}}=n,F=la(null),D=Number.isInteger(y),B=null!=(s=p.appearance)&&s.surveyPopupDelaySeconds?1e3*p.appearance.surveyPopupDelaySeconds:0,{isPopupVisible:$,isSurveySent:U,hidePopupWithViewTransition:H}=function(n,s,o,l,c,d){var[h,p]=oa(l||0===o||n.type===Wd.ExternalSurvey),[f,m]=oa(!1),c3=()=>{var t4=()=>{n.type===Wd.Popover&&c(n),p(!1)};Vf.startViewTransition?Vf.startViewTransition((()=>{var n;null==d||null==(n=d.current)||n.remove()})).finished.then((()=>{setTimeout((()=>{t4()}),100)})):t4()},d3=s=>{s.detail.surveyId===n.id&&c3()};return aa((()=>{if(s){if(!l){var n4=s=>{var o,l;if(s.detail.surveyId===n.id){if(null==(o=n.appearance)||!o.displayThankYouMessage)return c3();m(!0),null!=(l=n.appearance)&&l.autoDisappear&&setTimeout((()=>{c3()}),5e3)}},s4=()=>{nc(n)&&(p(!0),Wf.dispatchEvent(new Event("PHSurveyShown")),s.capture(Xd.SHOWN,{[Kd.SURVEY_NAME]:n.name,[Kd.SURVEY_ID]:n.id,[Kd.SURVEY_ITERATION]:n.current_iteration,[Kd.SURVEY_ITERATION_START_DATE]:n.current_iteration_start_date,sessionRecordingUrl:null==s.get_session_replay_url?void 0:s.get_session_replay_url()}),localStorage.setItem("lastSeenSurveyDate",(new Date).toISOString()))};if(En(Wf,"PHSurveyClosed",d3),En(Wf,"PHSurveySent",n4),o>0){var c=setTimeout(s4,o);return()=>{clearTimeout(c),Wf.removeEventListener("PHSurveyClosed",d3),Wf.removeEventListener("PHSurveySent",n4)}}return s4(),()=>{Wf.removeEventListener("PHSurveyClosed",d3),Wf.removeEventListener("PHSurveySent",n4)}}}else eh.error("usePopupVisibility hook called without a PostHog instance.")}),[]),Gc({survey:n,removeSurveyFromFocus:c,setSurveyVisible:p,isPreviewMode:l}),{isPopupVisible:h,isSurveySent:f,setIsPopupVisible:p,hidePopupWithViewTransition:c3}}(p,m,B,D,E,F),z=U||y===p.questions.length,q=ua((()=>{var n=ac(p);return{isPreviewMode:D,previewPageIndex:y,onPopupSurveyDismissed:()=>{((n,s,o)=>{if(s){if(!o){var l=ac(n);s.capture(Xd.DISMISSED,r({[Kd.SURVEY_NAME]:n.name,[Kd.SURVEY_ID]:n.id,[Kd.SURVEY_ITERATION]:n.current_iteration,[Kd.SURVEY_ITERATION_START_DATE]:n.current_iteration_start_date,[Kd.SURVEY_PARTIALLY_COMPLETED]:Object.values((null==l?void 0:l.responses)||{}).filter((n=>!ni(n))).length>0,sessionRecordingUrl:null==s.get_session_replay_url?void 0:s.get_session_replay_url()},null==l?void 0:l.responses,{[Kd.SURVEY_SUBMISSION_ID]:null==l?void 0:l.surveySubmissionId,[Kd.SURVEY_QUESTIONS]:n.questions.map((n=>({id:n.id,question:n.question,response:ju((null==l?void 0:l.responses)||{},n.id)}))),$set:{[Pa(n,"dismissed")]:!0}})),uc(n),La(n),kf.dispatchEvent(new CustomEvent("PHSurveyClosed",{detail:{surveyId:n.id}}))}}else eh.error("[survey dismissed] event not captured, PostHog instance not found.")})(p,m,D),L()},isPopup:M||!1,surveySubmissionId:(null==n?void 0:n.surveySubmissionId)||Ua(),onPreviewSubmit:P,posthog:m}}),[D,y,M,m,p,L,P]);return $?hc(Mf.Provider,{value:q,children:hc("div",{className:"ph-survey",style:r({},Yc(p.type,null==(o=p.appearance)?void 0:o.position,null==(l=p.appearance)?void 0:l.widgetType),_),ref:F,children:z?hc(kc,{header:(null==(c=p.appearance)?void 0:c.thankYouMessageHeader)||"Thank you!",description:(null==(d=p.appearance)?void 0:d.thankYouMessageDescription)||"",forceDisableHtml:!!f,contentType:null==(h=p.appearance)?void 0:h.thankYouMessageDescriptionContentType,appearance:p.appearance||Ef,onClose:()=>{H(),N()}}):hc(Kc,{survey:p,forceDisableHtml:!!f,posthog:m})})}):null}function Kc(n){var{survey:s,forceDisableHtml:o,posthog:l}=n,[c,d]=oa((()=>{var n=ac(s);return null!=n&&n.responses&&eh.info("Survey is already in progress, filling in initial responses"),(null==n?void 0:n.responses)||{}})),{previewPageIndex:h,onPopupSurveyDismissed:p,isPopup:f,onPreviewSubmit:m,surveySubmissionId:_,isPreviewMode:y}=ca(Mf),[E,M]=oa((()=>{var n=ac(s);return h||(null==n?void 0:n.lastQuestionIndex)||0})),P=ua((()=>(n=>n.appearance&&n.appearance.shuffleQuestions&&!n.enable_partial_responses?Ku(n.questions,Xu(n.questions)):n.questions)(s)),[s]);aa((()=>{y&&!ei(h)&&M(h)}),[h,y]);var L=P.at(E);return L?hc("form",{className:"survey-form",name:"surveyForm",children:[f&&hc(Cc,{onClick:()=>{p()}}),hc("div",{className:"survey-box",children:Qc({question:L,forceDisableHtml:o,displayQuestionIndex:E,appearance:s.appearance||Ef,onSubmit:n=>(n=>{var{res:o,displayQuestionIndex:h,questionId:p}=n;if(l)if(p){var f=Bu(p),m=r({},c,{[f]:o});d(m);var y=function(n,s,o){var l,c=n.questions[s],d=s+1;if(null==(l=c.branching)||!l.type)return s===n.questions.length-1?Yd.End:d;if(c.branching.type===Yd.End)return Yd.End;if(c.branching.type===Yd.SpecificQuestion){if(Number.isInteger(c.branching.index))return c.branching.index}else if(c.branching.type===Yd.ResponseBased){if(c.type===Vd.SingleChoice){var h,p=c.choices.indexOf(""+o);if(-1===p&&c.hasOpenChoice&&(p=c.choices.length-1),null!=(h=c.branching)&&null!=(h=h.responseValues)&&h.hasOwnProperty(p)){var f=c.branching.responseValues[p];return Number.isInteger(f)?f:f===Yd.End?Yd.End:d}}else if(c.type===Vd.Rating){var m;if("number"!=typeof o||!Number.isInteger(o))throw new Error("The response type must be an integer");var _=function(n,s){if(3===s){if(n<1||n>3)throw new Error("The response must be in range 1-3");return 1===n?"negative":2===n?"neutral":"positive"}if(5===s){if(n<1||n>5)throw new Error("The response must be in range 1-5");return n<=2?"negative":3===n?"neutral":"positive"}if(7===s){if(n<1||n>7)throw new Error("The response must be in range 1-7");return n<=3?"negative":4===n?"neutral":"positive"}if(10===s){if(n<0||n>10)throw new Error("The response must be in range 0-10");return n<=6?"detractors":n<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(o,c.scale);if(null!=(m=c.branching)&&null!=(m=m.responseValues)&&m.hasOwnProperty(_)){var y=c.branching.responseValues[_];return Number.isInteger(y)?y:y===Yd.End?Yd.End:d}}return d}return eh.warn("Falling back to next question index due to unexpected branching type"),d}(s,h,o),E=y===Yd.End;E||(M(y),oc(s,{surveySubmissionId:_,responses:m,lastQuestionIndex:y})),(s.enable_partial_responses||E)&&Gu({responses:m,survey:s,surveySubmissionId:_,isSurveyCompleted:E,posthog:l})}else eh.error("onNextButtonClick called without a questionId.");else eh.error("onNextButtonClick called without a PostHog instance.")})({res:n,displayQuestionIndex:E,questionId:L.id}),onPreviewSubmit:m,initialValue:L.id?c[Bu(L.id)]:void 0})})]}):null}function Jc(n){var s,o,l,c,d,{survey:h,forceDisableHtml:p,posthog:f,readOnly:m}=n,[_,y]=oa(!0),[E,M]=oa(!1),[P,L]=oa({}),g2=()=>{M(!E)};if(aa((()=>{var n;if(f){if(!m){"tab"===(null==(n=h.appearance)?void 0:n.widgetType)&&L({top:"50%",bottom:"auto"});var t3=n=>{var s,o=n;(null==(s=o.detail)?void 0:s.surveyId)===h.id&&(eh.info("Received show event for feedback button survey "+h.id),L(o.detail.position||{}),g2())};return En(Wf,Gf,t3),()=>{Wf.removeEventListener(Gf,t3)}}}else eh.error("FeedbackWidget called without a PostHog instance.")}),[f,m,h.id,null==(s=h.appearance)?void 0:s.widgetType,null==(o=h.appearance)?void 0:o.widgetSelector,null==(l=h.appearance)?void 0:l.borderColor]),Gc({survey:h,setSurveyVisible:y}),!_)return null;var _2=()=>{h.schedule!==Jd.Always&&y(!1),setTimeout((()=>{M(!1)}),200)};return hc(xo,{children:["tab"===(null==(c=h.appearance)?void 0:c.widgetType)&&hc("button",{className:"ph-survey-widget-tab",onClick:g2,disabled:m,children:(null==(d=h.appearance)?void 0:d.widgetLabel)||""}),E&&hc(Xc,{posthog:f,survey:h,forceDisableHtml:p,style:P,onPopupSurveyDismissed:_2,onCloseConfirmationMessage:_2})]})}var Qc=n=>{var{question:s,forceDisableHtml:o,displayQuestionIndex:l,appearance:c,onSubmit:d,onPreviewSubmit:h,initialValue:p}=n,f={forceDisableHtml:o,appearance:c,onPreviewSubmit:n=>{h(n)},onSubmit:n=>{d(n)},initialValue:p,displayQuestionIndex:l};switch(s.type){case Vd.Open:return ko(xc,r({},f,{question:s,key:s.id}));case Vd.Link:return ko(Tc,r({},f,{question:s,key:s.id}));case Vd.Rating:return ko(Mc,r({},f,{question:s,key:s.id}));case Vd.SingleChoice:case Vd.MultipleChoice:return ko(Ac,r({},f,{question:s,key:s.id}));default:return eh.error("Unsupported question type: "+s.type),null}};Hl.__PosthogExtensions__=Hl.__PosthogExtensions__||{},Hl.__PosthogExtensions__.generateSurveys=jc,Hl.extendPostHogWithSurveys=jc;var Zf=Wl("[Error tracking]");function td(){return new Li([new Oi,new zi,new Hi,new Di,new Ui,new Wi,new Bi,new Zi],[Ti,Ai])}class rd{constructor(n){var s,o;this._suppressionRules=[],this._errorPropertiesBuilder=td(),this._instance=n,this._suppressionRules=null!==(s=null==(o=this._instance.persistence)?void 0:o.get_property(pc))&&void 0!==s?s:[]}onRemoteConfig(n){var s,o,l,c=null!==(s=null==(o=n.errorTracking)?void 0:o.suppressionRules)&&void 0!==s?s:[],d=null==(l=n.errorTracking)?void 0:l.captureExtensionExceptions;this._suppressionRules=c,this._instance.persistence&&this._instance.persistence.register({[pc]:this._suppressionRules,[fc]:d})}get _captureExtensionExceptions(){var n,s=!!this._instance.get_property(fc),o=this._instance.config.error_tracking.captureExtensionExceptions;return null!==(n=null!=o?o:s)&&void 0!==n&&n}buildProperties(n,s){return this._errorPropertiesBuilder.buildFromUnknown(n,{syntheticException:null==s?void 0:s.syntheticException,mechanism:{handled:null==s?void 0:s.handled}})}sendExceptionEvent(n){var s=n.$exception_list;if(this._isExceptionList(s)){if(this._matchesSuppressionRule(s))return void Zf.info("Skipping exception capture because a suppression rule matched");if(!this._captureExtensionExceptions&&this._isExtensionException(s))return void Zf.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this._isPostHogException(s))return void Zf.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",n,{_noTruncate:!0,_batchKey:"exceptionEvent"})}_matchesSuppressionRule(n){if(0===n.length)return!1;var s=n.reduce(((n,s)=>{var{type:o,value:l}=s;return ti(o)&&o.length>0&&n.$exception_types.push(o),ti(l)&&l.length>0&&n.$exception_values.push(l),n}),{$exception_types:[],$exception_values:[]});return this._suppressionRules.some((n=>{var o=n.values.map((n=>{var o,l=Sf[n.operator],c=hl(n.value)?n.value:[n.value],d=null!==(o=s[n.key])&&void 0!==o?o:[];return c.length>0&&l(c,d)}));return"OR"===n.type?o.some(Boolean):o.every(Boolean)}))}_isExtensionException(n){var s=n.flatMap((n=>{var s,o;return null!==(s=null==(o=n.stacktrace)?void 0:o.frames)&&void 0!==s?s:[]}));return s.some((n=>n.filename&&n.filename.startsWith("chrome-extension://")))}_isPostHogException(n){if(n.length>0){var s,o,l,c,d=null!==(s=null==(o=n[0].stacktrace)?void 0:o.frames)&&void 0!==s?s:[],h=d[d.length-1];return null!==(l=null==h||null==(c=h.filename)?void 0:c.includes("posthog.com/static"))&&void 0!==l&&l}return!1}_isExceptionList(n){return!ni(n)&&hl(n)}}var Jf=Wl("[ExceptionAutocapture]"),Xf=td();function sd(n){var{event:s,error:o}=n;return Xf.buildFromUnknown(o||s,{mechanism:{handled:!1}})}var Kf={wrapOnError:n=>{var s=El;s||Jf.info("window not available, cannot wrap onerror");var o=s.onerror;return s.onerror=function(){for(var s,l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=sd({event:c[0],error:c[4]});return n(h),null!==(s=null==o?void 0:o(...c))&&void 0!==s&&s},s.onerror.__POSTHOG_INSTRUMENTED__=!0,()=>{var n;null==(n=s.onerror)||delete n.__POSTHOG_INSTRUMENTED__,s.onerror=o}},wrapUnhandledRejection:n=>{var s=El;s||Jf.info("window not available, cannot wrap onUnhandledRejection");var o=s.onunhandledrejection;return s.onunhandledrejection=function(l){var c,d=sd({event:l});return n(d),null!==(c=null==o?void 0:o.apply(s,[l]))&&void 0!==c&&c},s.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,()=>{var n;null==(n=s.onunhandledrejection)||delete n.__POSTHOG_INSTRUMENTED__,s.onunhandledrejection=o}},wrapConsoleError:n=>{var s=console;s||Jf.info("console not available, cannot wrap console.error");var o=s.error;return s.error=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l.join(" "),h=sd({error:l.find((n=>n instanceof Error)),event:d});return n(h),null==o?void 0:o(...l)},s.error.__POSTHOG_INSTRUMENTED__=!0,()=>{var n;null==(n=s.error)||delete n.__POSTHOG_INSTRUMENTED__,s.error=o}}};Hl.__PosthogExtensions__=Hl.__PosthogExtensions__||{},Hl.__PosthogExtensions__.errorWrappingFunctions=Kf,Hl.posthogErrorWrappingFunctions=Kf;var ad=(n,s,o,l)=>{var c;try{c=new URL(l.url).hostname}catch(p){return}if(!hl(n)||n.includes(c)){if(o){var{sessionId:d,windowId:h}=o.checkAndGetSessionAndWindowId(!0);l.headers.set("X-POSTHOG-SESSION-ID",d),l.headers.set("X-POSTHOG-WINDOW-ID",h)}s!==nu&&l.headers.set("X-POSTHOG-DISTINCT-ID",s)}};Hl.__PosthogExtensions__=Hl.__PosthogExtensions__||{};var Qf={_patchFetch:(n,s,o)=>Nn(El,"fetch",(l=>{return c=t((function*(c,d){var h=new Request(c,d);return ad(n,s,o,h),l(h)})),function(n,s){return c.apply(this,arguments)};var c})),_patchXHR:(n,s,o)=>Nn(El.XMLHttpRequest.prototype,"open",(l=>function(c,d,h,p,f){void 0===h&&(h=!0);var m=new Request(d);return ad(n,s,o,m),l.call(this,c,m.url,h,p,f)}))};Hl.__PosthogExtensions__.tracingHeadersPatchFns=Qf,Hl.postHogTracingHeadersPatchFns=Qf;var eg,tg,dd=function(){var n=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(n&&n.responseStart>0&&n.responseStart<performance.now())return n},hd=function(n){if("loading"===document.readyState)return"loading";var s=dd();if(s){if(n<s.domInteractive)return"loading";if(0===s.domContentLoadedEventStart||n<s.domContentLoadedEventStart)return"dom-interactive";if(0===s.domComplete||n<s.domComplete)return"dom-content-loaded"}return"complete"},pd=function(n){var s=n.nodeName;return 1===n.nodeType?s.toLowerCase():s.toUpperCase().replace(/^#/,"")},vd=function(n,s){var o="";try{for(;n&&9!==n.nodeType;){var l=n,c=l.id?"#"+l.id:pd(l)+(l.classList&&l.classList.value&&l.classList.value.trim()&&l.classList.value.trim().length?"."+l.classList.value.trim().replace(/\s+/g,"."):"");if(o.length+c.length>(s||100)-1)return o||c;if(o=o?c+">"+o:c,l.id)break;n=l.parentNode}}catch(d){}return o},rg=-1,gd=function(){return rg},_d=function(n){addEventListener("pageshow",(function(s){s.persisted&&(rg=s.timeStamp,n(s))}),!0)},md=function(){var n=dd();return n&&n.activationStart||0},yd=function(n,s){var o=dd(),l="navigate";return gd()>=0?l="back-forward-cache":o&&(document.prerendering||md()>0?l="prerender":document.wasDiscarded?l="restore":o.type&&(l=o.type.replace(/_/g,"-"))),{name:n,value:void 0===s?-1:s,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:l}},bd=function(n,s,o){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var l=new PerformanceObserver((function(n){Promise.resolve().then((function(){s(n.getEntries())}))}));return l.observe(Object.assign({type:n,buffered:!0},o||{})),l}}catch(c){}},Sd=function(n,s,o,l){var c,d;return function(h){var p,f;s.value>=0&&(h||l)&&((d=s.value-(c||0))||void 0===c)&&(c=s.value,s.delta=d,s.rating=(p=s.value)>(f=o)[1]?"poor":p>f[0]?"needs-improvement":"good",n(s))}},wd=function(n){requestAnimationFrame((function(){return requestAnimationFrame((function(){return n()}))}))},Cd=function(n){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&n()}))},Id=function(n){var s=!1;return function(){s||(n(),s=!0)}},ng=-1,Ed=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},xd=function(n){"hidden"===document.visibilityState&&ng>-1&&(ng="visibilitychange"===n.type?n.timeStamp:0,Md())},Td=function(){addEventListener("visibilitychange",xd,!0),addEventListener("prerenderingchange",xd,!0)},Md=function(){removeEventListener("visibilitychange",xd,!0),removeEventListener("prerenderingchange",xd,!0)},Rd=function(){return ng<0&&(ng=Ed(),Td(),_d((function(){setTimeout((function(){ng=Ed(),Td()}),0)}))),{get firstHiddenTime(){return ng}}},Ad=function(n){document.prerendering?addEventListener("prerenderingchange",(function(){return n()}),!0):n()},ig=[1800,3e3],Pd=function(n,s){s=s||{},Ad((function(){var o,l=Rd(),c=yd("FCP"),d=bd("paint",(function(n){n.forEach((function(n){"first-contentful-paint"===n.name&&(d.disconnect(),n.startTime<l.firstHiddenTime&&(c.value=Math.max(n.startTime-md(),0),c.entries.push(n),o(!0)))}))}));d&&(o=Sd(n,c,ig,s.reportAllChanges),_d((function(l){c=yd("FCP"),o=Sd(n,c,ig,s.reportAllChanges),wd((function(){c.value=performance.now()-l.timeStamp,o(!0)}))})))}))},sg=[.1,.25],og=0,ag=1/0,lg=0,Hd=function(n){n.forEach((function(n){n.interactionId&&(ag=Math.min(ag,n.interactionId),lg=Math.max(lg,n.interactionId),og=lg?(lg-ag)/7+1:0)}))},qd=function(){return eg?og:performance.interactionCount||0},cg=[],ug=new Map,dg=0,hg=[],Zd=function(n){if(hg.forEach((function(s){return s(n)})),n.interactionId||"first-input"===n.entryType){var s=cg[cg.length-1],o=ug.get(n.interactionId);if(o||cg.length<10||n.duration>s.latency){if(o)n.duration>o.latency?(o.entries=[n],o.latency=n.duration):n.duration===o.latency&&n.startTime===o.entries[0].startTime&&o.entries.push(n);else{var l={id:n.interactionId,latency:n.duration,entries:[n]};ug.set(l.id,l),cg.push(l)}cg.sort((function(n,s){return s.latency-n.latency})),cg.length>10&&cg.splice(10).forEach((function(n){return ug.delete(n.id)}))}}},zd=function(n){var s=self.requestIdleCallback||self.setTimeout,o=-1;return n=Id(n),"hidden"===document.visibilityState?n():(o=s(n),Cd(n)),o},pg=[200,500],Gd=function(n,s){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(s=s||{},Ad((function(){var o;"interactionCount"in performance||eg||(eg=bd("event",Hd,{type:"event",buffered:!0,durationThreshold:0}));var l,c=yd("INP"),s2=function(n){zd((function(){n.forEach(Zd);var s,o=(s=Math.min(cg.length-1,Math.floor((qd()-dg)/50)),cg[s]);o&&o.latency!==c.value&&(c.value=o.latency,c.entries=o.entries,l())}))},d=bd("event",s2,{durationThreshold:null!==(o=s.durationThreshold)&&void 0!==o?o:40});l=Sd(n,c,pg,s.reportAllChanges),d&&(d.observe({type:"first-input",buffered:!0}),Cd((function(){s2(d.takeRecords()),l(!0)})),_d((function(){dg=qd(),cg.length=0,ug.clear(),c=yd("INP"),l=Sd(n,c,pg,s.reportAllChanges)})))})))},fg=[],gg=[],mg=0,vg=new WeakMap,_g=new Map,yg=-1,th=function(n){fg=fg.concat(n),rh()},rh=function(){yg<0&&(yg=zd(ih))},ih=function(){_g.size>10&&_g.forEach((function(n,s){ug.has(s)||_g.delete(s)}));var n=cg.map((function(n){return vg.get(n.entries[0])})),s=gg.length-50;gg=gg.filter((function(o,l){return l>=s||n.includes(o)}));for(var o=new Set,l=0;l<gg.length;l++){var c=gg[l];nh(c.startTime,c.processingEnd).forEach((function(n){o.add(n)}))}var d=fg.length-1-50;fg=fg.filter((function(n,s){return n.startTime>mg&&s>d||o.has(n)})),yg=-1};hg.push((function(n){n.interactionId&&n.target&&!_g.has(n.interactionId)&&_g.set(n.interactionId,n.target)}),(function(n){var s,o=n.startTime+n.duration;mg=Math.max(mg,n.processingEnd);for(var l=gg.length-1;l>=0;l--){var c=gg[l];if(Math.abs(o-c.renderTime)<=8){(s=c).startTime=Math.min(n.startTime,s.startTime),s.processingStart=Math.min(n.processingStart,s.processingStart),s.processingEnd=Math.max(n.processingEnd,s.processingEnd),s.entries.push(n);break}}s||(s={startTime:n.startTime,processingStart:n.processingStart,processingEnd:n.processingEnd,renderTime:o,entries:[n]},gg.push(s)),(n.interactionId||"first-input"===n.entryType)&&vg.set(n,s),rh()}));var nh=function(n,s){for(var o,l=[],c=0;o=fg[c];c++)if(!(o.startTime+o.duration<n)){if(o.startTime>s)break;l.push(o)}return l},bg=[2500,4e3],wg={},Sg={onLCP:function(n,s){var o,l;o=function(s){var o=function(n){var s={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:n.value};if(n.entries.length){var o=dd();if(o){var l=o.activationStart||0,c=n.entries[n.entries.length-1],d=c.url&&performance.getEntriesByType("resource").filter((function(n){return n.name===c.url}))[0],h=Math.max(0,o.responseStart-l),p=Math.max(h,d?(d.requestStart||d.startTime)-l:0),f=Math.max(p,d?d.responseEnd-l:0),m=Math.max(f,c.startTime-l);s={element:vd(c.element),timeToFirstByte:h,resourceLoadDelay:p-h,resourceLoadDuration:f-p,elementRenderDelay:m-f,navigationEntry:o,lcpEntry:c},c.url&&(s.url=c.url),d&&(s.lcpResourceEntry=d)}}return Object.assign(n,{attribution:s})}(s);n(o)},l=(l=s)||{},Ad((function(){var n,s=Rd(),c=yd("LCP"),s2=function(o){l.reportAllChanges||(o=o.slice(-1)),o.forEach((function(o){o.startTime<s.firstHiddenTime&&(c.value=Math.max(o.startTime-md(),0),c.entries=[o],n())}))},d=bd("largest-contentful-paint",s2);if(d){n=Sd(o,c,bg,l.reportAllChanges);var h=Id((function(){wg[c.id]||(s2(d.takeRecords()),d.disconnect(),wg[c.id]=!0,n(!0))}));["keydown","click"].forEach((function(n){addEventListener(n,(function(){return zd(h)}),{once:!0,capture:!0})})),Cd(h),_d((function(s){c=yd("LCP"),n=Sd(o,c,bg,l.reportAllChanges),wd((function(){c.value=performance.now()-s.timeStamp,wg[c.id]=!0,n(!0)}))}))}}))},onCLS:function(n,s){var o,l;o=function(s){var o=function(n){var s,o={};if(n.entries.length){var l=n.entries.reduce((function(n,s){return n&&n.value>s.value?n:s}));if(l&&l.sources&&l.sources.length){var c=(s=l.sources).find((function(n){return n.node&&1===n.node.nodeType}))||s[0];c&&(o={largestShiftTarget:vd(c.node),largestShiftTime:l.startTime,largestShiftValue:l.value,largestShiftSource:c,largestShiftEntry:l,loadState:hd(l.startTime)})}}return Object.assign(n,{attribution:o})}(s);n(o)},l=(l=s)||{},Pd(Id((function(){var n,s=yd("CLS",0),c=0,d=[],o2=function(o){o.forEach((function(n){if(!n.hadRecentInput){var s=d[0],o=d[d.length-1];c&&n.startTime-o.startTime<1e3&&n.startTime-s.startTime<5e3?(c+=n.value,d.push(n)):(c=n.value,d=[n])}})),c>s.value&&(s.value=c,s.entries=d,n())},h=bd("layout-shift",o2);h&&(n=Sd(o,s,sg,l.reportAllChanges),Cd((function(){o2(h.takeRecords()),n(!0)})),_d((function(){c=0,s=yd("CLS",0),n=Sd(o,s,sg,l.reportAllChanges),wd((function(){return n()}))})),setTimeout(n,0))})))},onFCP:function(n,s){Pd((function(s){var o=function(n){var s={timeToFirstByte:0,firstByteToFCP:n.value,loadState:hd(gd())};if(n.entries.length){var o=dd(),l=n.entries[n.entries.length-1];if(o){var c=o.activationStart||0,d=Math.max(0,o.responseStart-c);s={timeToFirstByte:d,firstByteToFCP:n.value-d,loadState:hd(n.entries[0].startTime),navigationEntry:o,fcpEntry:l}}}return Object.assign(n,{attribution:s})}(s);n(o)}),s)},onINP:function(n,s){tg||(tg=bd("long-animation-frame",th)),Gd((function(s){var o,l,c,d,h,p,f,m,_,y,E,M,P=(l=(o=s).entries[0],c=vg.get(l),d=l.processingStart,h=c.processingEnd,p=c.entries.sort((function(n,s){return n.processingStart-s.processingStart})),f=nh(l.startTime,h),m=o.entries.find((function(n){return n.target})),_=m&&m.target||_g.get(l.interactionId),y=[l.startTime+l.duration,h].concat(f.map((function(n){return n.startTime+n.duration}))),E=Math.max.apply(Math,y),M={interactionTarget:vd(_),interactionTargetElement:_,interactionType:l.name.startsWith("key")?"keyboard":"pointer",interactionTime:l.startTime,nextPaintTime:E,processedEventEntries:p,longAnimationFrameEntries:f,inputDelay:d-l.startTime,processingDuration:h-d,presentationDelay:Math.max(E-h,0),loadState:hd(l.startTime)},Object.assign(o,{attribution:M}));n(P)}),s)}};Hl.__PosthogExtensions__=Hl.__PosthogExtensions__||{},Hl.__PosthogExtensions__.postHogWebVitalsCallbacks=Sg,Hl.postHogWebVitalsCallbacks=Sg;class lh{constructor(n){this.disabled=!1===n;var s=Jr(n)?n:{};this.thresholdPx=s.threshold_px||30,this.timeoutMs=s.timeout_ms||1e3,this.clickCount=s.click_count||3,this.clicks=[]}isRageClick(n,s,o){if(this.disabled)return!1;var l=this.clicks[this.clicks.length-1];if(l&&Math.abs(n-l.x)+Math.abs(s-l.y)<this.thresholdPx&&o-l.timestamp<this.timeoutMs){if(this.clicks.push({x:n,y:s,timestamp:o}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:n,y:s,timestamp:o}];return!1}}var Cg=Wl("[AutoCapture]");function ch(n,s){return s.length>n?s.slice(0,n)+"...":s}function dh(n){if(n.previousElementSibling)return n.previousElementSibling;var s=n;do{s=s.previousSibling}while(s&&!ps(s));return s}function ph(n,s){for(var o,l,{e:c,maskAllElementAttributes:d,maskAllText:h,elementAttributeIgnoreList:p,elementsChainAsString:f}=s,m=[n],_=n;_.parentNode&&!vs(_,"body");)gs(_.parentNode)?(m.push(_.parentNode.host),_=_.parentNode.host):(m.push(_.parentNode),_=_.parentNode);var y,E=[],M={},P=!1,L=!1;if(fn(m,(n=>{var s=Rs(n);"a"===n.tagName.toLowerCase()&&(P=n.getAttribute("href"),P=s&&P&&Hs(P)&&P),$r(ys(n),"ph-no-capture")&&(L=!0),E.push(function(n,s,o,l){var c=n.tagName.toLowerCase(),d={tag_name:c};su.indexOf(c)>-1&&!o&&("a"===c.toLowerCase()||"button"===c.toLowerCase()?d.$el_text=ch(1024,qs(n)):d.$el_text=ch(1024,Ss(n)));var h=ys(n);h.length>0&&(d.classes=h.filter((function(n){return""!==n}))),fn(n.attributes,(function(o){var c;if((!As(n)||-1!==["name","id","class","aria-label"].indexOf(o.name))&&(null==l||!l.includes(o.name))&&!s&&Hs(o.value)&&(c=o.name,!ti(c)||"_ngcontent"!==c.substring(0,10)&&"_nghost"!==c.substring(0,7))){var h=o.value;"class"===o.name&&(h=_s(h).join(" ")),d["attr__"+o.name]=ch(1024,h)}}));for(var p=1,f=1,m=n;m=dh(m);)p++,m.tagName===n.tagName&&f++;return d.nth_child=p,d.nth_of_type=f,d}(n,d,h,p));var o=function(n){if(!Rs(n))return{};var s={};return fn(n.attributes,(function(n){if(n.name&&0===n.name.indexOf("data-ph-capture-attribute")){var o=n.name.replace("data-ph-capture-attribute-",""),l=n.value;o&&l&&Hs(l)&&(s[o]=l)}})),s}(n);gn(M,o)})),L)return{props:{},explicitNoCapture:L};if(h||("a"===n.tagName.toLowerCase()||"button"===n.tagName.toLowerCase()?E[0].$el_text=qs(n):E[0].$el_text=Ss(n)),P){var N,F;E[0].attr__href=P;var D=null==(N=xn(P))?void 0:N.host,B=null==El||null==(F=El.location)?void 0:F.host;D&&B&&D!==B&&(y=P)}return{props:gn({$event_type:c.type,$ce_version:1},f?{}:{$elements:E},{$elements_chain:Vs(E)},null!=(o=E[0])&&o.$el_text?{$el_text:null==(l=E[0])?void 0:l.$el_text}:{},y&&"click"===c.type?{$external_click_url:y}:{},M)}}class vh{constructor(n){this._initialized=!1,this._isDisabledServerSide=null,this._elementsChainAsString=!1,this.instance=n,this.rageclicks=new lh(n.config.rageclick),this._elementSelectors=null}get _config(){var n,s,o=Jr(this.instance.config.autocapture)?this.instance.config.autocapture:{};return o.url_allowlist=null==(n=o.url_allowlist)?void 0:n.map((n=>new RegExp(n))),o.url_ignorelist=null==(s=o.url_ignorelist)?void 0:s.map((n=>new RegExp(n))),o}_addDomEventHandlers(){if(this.isBrowserSupported()){if(El&&Pl){var e2=n=>{n=n||(null==El?void 0:El.event);try{this._captureEvent(n)}catch(s){Cg.error("Failed to capture event",s)}};if(En(Pl,"submit",e2,{capture:!0}),En(Pl,"change",e2,{capture:!0}),En(Pl,"click",e2,{capture:!0}),this._config.capture_copied_text){var t2=n=>{n=n||(null==El?void 0:El.event),this._captureEvent(n,Yp)};En(Pl,"copy",t2,{capture:!0}),En(Pl,"cut",t2,{capture:!0})}}}else Cg.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}onRemoteConfig(n){n.elementsChainAsString&&(this._elementsChainAsString=n.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Ql]:!!n.autocapture_opt_out}),this._isDisabledServerSide=!!n.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(n){this._elementSelectors=n}getElementSelectors(n){var s,o=[];return null==(s=this._elementSelectors)||s.forEach((s=>{var l=null==Pl?void 0:Pl.querySelectorAll(s);null==l||l.forEach((l=>{n===l&&o.push(s)}))})),o}get isEnabled(){var n,s,o=null==(n=this.instance.persistence)?void 0:n.props[Ql],l=this._isDisabledServerSide;if(ii(l)&&!oi(o)&&!this.instance._shouldDisableFlags())return!1;var c=null!==(s=this._isDisabledServerSide)&&void 0!==s?s:!!o;return!!this.instance.config.autocapture&&!c}_captureEvent(n,s){if(void 0===s&&(s="$autocapture"),this.isEnabled){var o,l=ws(n);fs(l)&&(l=l.parentNode||null),"$autocapture"===s&&"click"===n.type&&n instanceof MouseEvent&&this.instance.config.rageclick&&null!=(o=this.rageclicks)&&o.isRageClick(n.clientX,n.clientY,(new Date).getTime())&&function(n,s){if(!El||xs(n))return!1;var o,l;if(!1===(o=oi(s)?!!s&&au:null!==(l=null==s?void 0:s.css_selector_ignorelist)&&void 0!==l?l:au))return!1;var{targetElementList:c}=Ts(n,!1);return!Is(c,o)}(l,this.instance.config.rageclick)&&this._captureEvent(n,"$rageclick");var c=s===Yp;if(l&&function(n,s,o,l,c){var d,h,p,f;if(void 0===o&&(o=void 0),!El||xs(n))return!1;if(null!=(d=o)&&d.url_allowlist&&!ms(o.url_allowlist))return!1;if(null!=(h=o)&&h.url_ignorelist&&ms(o.url_ignorelist))return!1;if(null!=(p=o)&&p.dom_event_allowlist){var m=o.dom_event_allowlist;if(m&&!m.some((n=>s.type===n)))return!1}var{parentIsUsefulElement:_,targetElementList:y}=Ts(n,l);if(!function(n,s){var o=null==s?void 0:s.element_allowlist;if(ei(o))return!0;var l,n3=function(n){if(o.some((s=>n.tagName.toLowerCase()===s)))return{v:!0}};for(var c of n)if(l=n3(c))return l.v;return!1}(y,o))return!1;if(!Is(y,null==(f=o)?void 0:f.css_selector_allowlist))return!1;var E=El.getComputedStyle(n);if(E&&"pointer"===E.getPropertyValue("cursor")&&"click"===s.type)return!0;var M=n.tagName.toLowerCase();switch(M){case"html":return!1;case"form":return(c||["submit"]).indexOf(s.type)>=0;case"input":case"select":case"textarea":return(c||["change","click"]).indexOf(s.type)>=0;default:return _?(c||["click"]).indexOf(s.type)>=0:(c||["click"]).indexOf(s.type)>=0&&(su.indexOf(M)>-1||"true"===n.getAttribute("contenteditable"))}}(l,n,this._config,c,c?["copy","cut"]:void 0)){var{props:d,explicitNoCapture:h}=ph(l,{e:n,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this._config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(h)return!1;var p=this.getElementSelectors(l);if(p&&p.length>0&&(d.$element_selectors=p),s===Yp){var f,m=bs(null==El||null==(f=El.getSelection())?void 0:f.toString()),_=n.type||"clipboard";if(!m)return!1;d.$selected_content=m,d.$copy_type=_}return this.instance.capture(s,d),!0}}}isBrowserSupported(){return Xr(null==Pl?void 0:Pl.querySelectorAll)}}var kg={};function gh(n){return function(n,s){var o=kg[n];if(o)return o;var l=s[n];if((n=>Xr(n)&&-1!==n.toString().indexOf("[native code]"))(l)&&!El.Zone)return kg[n]=l.bind(s);var c=s.document;if(c&&Xr(c.createElement))try{var d=c.createElement("iframe");d.hidden=!0,c.head.appendChild(d);var h=d.contentWindow;h&&h[n]&&(l=h[n]),c.head.removeChild(d)}catch(p){zl.warn("Could not create sandbox iframe for "+n+" check, bailing to assignableWindow."+n+": ",p)}return l&&Xr(l)?kg[n]=l.bind(s):l}("MutationObserver",n)}function _h(n,s){return si(n)&&n>=s}class mh{_asRequiredConfig(n){var s,o,l,c,d=this._defaultConfig((null==n?void 0:n.__onCapture)||this._captureDeadClick.bind(this));return{element_attribute_ignorelist:null!==(s=null==n?void 0:n.element_attribute_ignorelist)&&void 0!==s?s:d.element_attribute_ignorelist,scroll_threshold_ms:null!==(o=null==n?void 0:n.scroll_threshold_ms)&&void 0!==o?o:d.scroll_threshold_ms,selection_change_threshold_ms:null!==(l=null==n?void 0:n.selection_change_threshold_ms)&&void 0!==l?l:d.selection_change_threshold_ms,mutation_threshold_ms:null!==(c=null==n?void 0:n.mutation_threshold_ms)&&void 0!==c?c:d.mutation_threshold_ms,__onCapture:d.__onCapture}}constructor(n,s){this._clicks=[],this._defaultConfig=n=>({element_attribute_ignorelist:[],scroll_threshold_ms:100,selection_change_threshold_ms:100,mutation_threshold_ms:2500,__onCapture:n}),this._onClick=n=>{var s,o,l=(o=ws(s=n))?{node:o,originalEvent:s,timestamp:Date.now()}:null;ii(l)||this._ignoreClick(l)||this._clicks.push(l),this._clicks.length&&ei(this._checkClickTimer)&&(this._checkClickTimer=Hl.setTimeout((()=>{this._checkClicks()}),1e3))},this._onScroll=()=>{var n=Date.now();n%50==0&&this._clicks.forEach((s=>{ei(s.scrollDelayMs)&&(s.scrollDelayMs=n-s.timestamp)}))},this._onSelectionChange=()=>{this._lastSelectionChanged=Date.now()},this.instance=n,this._config=this._asRequiredConfig(s),this._onCapture=this._config.__onCapture}start(n){this._startClickObserver(),this._startScrollObserver(),this._startSelectionChangedObserver(),this._startMutationObserver(n)}_startMutationObserver(n){if(!this._mutationObserver){var s=gh(Hl);this._mutationObserver=new s((n=>{this._onMutation(n)})),this._mutationObserver.observe(n,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}}stop(){var n;null==(n=this._mutationObserver)||n.disconnect(),this._mutationObserver=void 0,Hl.removeEventListener("click",this._onClick),Hl.removeEventListener("scroll",this._onScroll,{capture:!0}),Hl.removeEventListener("selectionchange",this._onSelectionChange)}_onMutation(n){this._lastMutation=Date.now()}_startClickObserver(){En(Hl,"click",this._onClick)}_startScrollObserver(){En(Hl,"scroll",this._onScroll,{capture:!0})}_startSelectionChangedObserver(){En(Hl,"selectionchange",this._onSelectionChange)}_ignoreClick(n){return!n||(!!hs(n.node)||(!!this._clicks.some((s=>s.node===n.node&&Math.abs(s.timestamp-n.timestamp)<1e3))||!(!vs(n.node,"html")&&ps(n.node)&&!su.includes(n.node.tagName.toLowerCase()))))}_checkClicks(){if(this._clicks.length){clearTimeout(this._checkClickTimer),this._checkClickTimer=void 0;var n=this._clicks;for(var s of(this._clicks=[],n)){var o;s.mutationDelayMs=null!==(o=s.mutationDelayMs)&&void 0!==o?o:this._lastMutation&&s.timestamp<=this._lastMutation?this._lastMutation-s.timestamp:void 0,s.absoluteDelayMs=Date.now()-s.timestamp,s.selectionChangedDelayMs=this._lastSelectionChanged&&s.timestamp<=this._lastSelectionChanged?this._lastSelectionChanged-s.timestamp:void 0;var l=_h(s.scrollDelayMs,this._config.scroll_threshold_ms),c=_h(s.selectionChangedDelayMs,this._config.selection_change_threshold_ms),d=_h(s.mutationDelayMs,this._config.mutation_threshold_ms),h=_h(s.absoluteDelayMs,1.1*this._config.mutation_threshold_ms),p=si(s.scrollDelayMs)&&s.scrollDelayMs<this._config.scroll_threshold_ms,f=si(s.mutationDelayMs)&&s.mutationDelayMs<this._config.mutation_threshold_ms,m=si(s.selectionChangedDelayMs)&&s.selectionChangedDelayMs<this._config.selection_change_threshold_ms;p||f||m||(l||d||h||c?this._onCapture(s,{$dead_click_last_mutation_timestamp:this._lastMutation,$dead_click_event_timestamp:s.timestamp,$dead_click_scroll_timeout:l,$dead_click_mutation_timeout:d,$dead_click_absolute_timeout:h,$dead_click_selection_changed_timeout:c}):s.absoluteDelayMs<this._config.mutation_threshold_ms&&this._clicks.push(s))}this._clicks.length&&ei(this._checkClickTimer)&&(this._checkClickTimer=Hl.setTimeout((()=>{this._checkClicks()}),1e3))}}_captureDeadClick(n,s){this.instance.capture("$dead_click",r({},s,ph(n.node,{e:n.originalEvent,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this._config.element_attribute_ignorelist,elementsChainAsString:!1}).props,{$dead_click_scroll_delay_ms:n.scrollDelayMs,$dead_click_mutation_delay_ms:n.mutationDelayMs,$dead_click_absolute_delay_ms:n.absoluteDelayMs,$dead_click_selection_changed_delay_ms:n.selectionChangedDelayMs}),{timestamp:new Date(n.timestamp)})}}Hl.__PosthogExtensions__=Hl.__PosthogExtensions__||{},Hl.__PosthogExtensions__.initDeadClicksAutocapture=(n,s)=>new mh(n,s);var xg="",Ig=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var Eg={_is_supported:()=>!!Pl,_error:function(n){zl.error("cookieStore error: "+n)},_get:function(n){if(Pl){try{for(var s=n+"=",o=Pl.cookie.split(";").filter((n=>n.length)),l=0;l<o.length;l++){for(var c=o[l];" "==c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(s))return decodeURIComponent(c.substring(s.length,c.length))}}catch(d){}return null}},_parse:function(n){var s;try{s=JSON.parse(Eg._get(n))||{}}catch(o){}return s},_set:function(n,s,o,l,c){if(Pl)try{var d="",h="",p=function(n,s){if(s){var o=function(n,s){if(void 0===s&&(s=Pl),xg)return xg;if(!s)return"";if(["localhost","127.0.0.1"].includes(n))return"";for(var o=n.split("."),l=Math.min(o.length,8),c="dmn_chk_"+Ua();!xg&&l--;){var d=o.slice(l).join("."),h=c+"=1;domain=."+d+";path=/";s.cookie=h+";max-age=3",s.cookie.includes(c)&&(s.cookie=h+";max-age=0",xg=d)}return xg}(n);if(!o){var l=(c=n.match(Ig))?c[0]:"";l!==o&&zl.info("Warning: cookie subdomain discovery mismatch",l,o),o=l}return o?"; domain=."+o:""}var c;return""}(Pl.location.hostname,l);if(o){var f=new Date;f.setTime(f.getTime()+24*o*60*60*1e3),d="; expires="+f.toUTCString()}c&&(h="; secure");var m=n+"="+encodeURIComponent(JSON.stringify(s))+d+"; SameSite=Lax; path=/"+p+h;return m.length>3686.4&&zl.warn("cookieStore warning: large cookie, len="+m.length),Pl.cookie=m,m}catch(_){return}},_remove:function(n,s){if(null!=Pl&&Pl.cookie)try{Eg._set(n,"",-1,s)}catch(o){return}}},Tg=null,Ag={_is_supported:function(){if(!ii(Tg))return Tg;var n=!0;if(ei(El))n=!1;else try{var s="__mplssupport__";Ag._set(s,"xyz"),'"xyz"'!==Ag._get(s)&&(n=!1),Ag._remove(s)}catch(o){n=!1}return n||zl.error("localStorage unsupported; falling back to cookie store"),Tg=n,n},_error:function(n){zl.error("localStorage error: "+n)},_get:function(n){try{return null==El?void 0:El.localStorage.getItem(n)}catch(s){Ag._error(s)}return null},_parse:function(n){try{return JSON.parse(Ag._get(n))||{}}catch(s){}return null},_set:function(n,s){try{null==El||El.localStorage.setItem(n,JSON.stringify(s))}catch(o){Ag._error(o)}},_remove:function(n){try{null==El||El.localStorage.removeItem(n)}catch(s){Ag._error(s)}}},Mg=["distinct_id",yc,Ic,tu,eu],Rg=r({},Ag,{_parse:function(n){try{var s={};try{s=Eg._parse(n)||{}}catch(l){}var o=gn(s,JSON.parse(Ag._get(n)||"{}"));return Ag._set(n,o),o}catch(l){}return null},_set:function(n,s,o,l,c,d){try{Ag._set(n,s,void 0,void 0,d);var h={};Mg.forEach((n=>{s[n]&&(h[n]=s[n])})),Object.keys(h).length&&Eg._set(n,h,o,l,c,d)}catch(p){Ag._error(p)}},_remove:function(n,s){try{null==El||El.localStorage.removeItem(n),Eg._remove(n,s)}catch(o){Ag._error(o)}}}),Og={},Pg={_is_supported:function(){return!0},_error:function(n){zl.error("memoryStorage error: "+n)},_get:function(n){return Og[n]||null},_parse:function(n){return Og[n]||null},_set:function(n,s){Og[n]=s},_remove:function(n){delete Og[n]}},Lg=null,Ng={_is_supported:function(){if(!ii(Lg))return Lg;if(Lg=!0,ei(El))Lg=!1;else try{var n="__support__";Ng._set(n,"xyz"),'"xyz"'!==Ng._get(n)&&(Lg=!1),Ng._remove(n)}catch(s){Lg=!1}return Lg},_error:function(n){zl.error("sessionStorage error: ",n)},_get:function(n){try{return null==El?void 0:El.sessionStorage.getItem(n)}catch(s){Ng._error(s)}return null},_parse:function(n){try{return JSON.parse(Ng._get(n))||null}catch(s){}return null},_set:function(n,s){try{null==El||El.sessionStorage.setItem(n,JSON.stringify(s))}catch(o){Ng._error(o)}},_remove:function(n){try{null==El||El.sessionStorage.removeItem(n)}catch(s){Ng._error(s)}}},Fg=function(n){return n[n.PENDING=-1]="PENDING",n[n.DENIED=0]="DENIED",n[n.GRANTED=1]="GRANTED",n}({});class Nh{constructor(n){this._instance=n}get _config(){return this._instance.config}get consent(){return this._getDnt()?Fg.DENIED:this._storedConsent}isOptedOut(){return"always"===this._config.cookieless_mode||this.consent===Fg.DENIED||this.consent===Fg.PENDING&&(this._config.opt_out_capturing_by_default||"on_reject"===this._config.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===Fg.DENIED}optInOut(n){this._storage._set(this._storageKey,n?1:0,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie)}reset(){this._storage._remove(this._storageKey,this._config.cross_subdomain_cookie)}get _storageKey(){var{token:n,opt_out_capturing_cookie_prefix:s,consent_persistence_name:o}=this._instance.config;return o||(s?s+n:"__ph_opt_in_out_"+n)}get _storedConsent(){var n=this._storage._get(this._storageKey);return pi(n)?Fg.GRANTED:$r(fl,n)?Fg.DENIED:Fg.PENDING}get _storage(){if(!this._persistentStore){var n=this._config.opt_out_capturing_persistence_type;this._persistentStore="localStorage"===n?Ag:Eg;var s="localStorage"===n?Eg:Ag;s._get(this._storageKey)&&(this._persistentStore._get(this._storageKey)||this.optInOut(pi(s._get(this._storageKey))),s._remove(this._storageKey,this._config.cross_subdomain_cookie))}return this._persistentStore}_getDnt(){return!!this._config.respect_dnt&&!!kn([null==Ol?void 0:Ol.doNotTrack,null==Ol?void 0:Ol.msDoNotTrack,Hl.doNotTrack],(n=>pi(n)))}}var Dg=Wl("[Dead Clicks]"),Fh=()=>!0,Lh=n=>{var s,o=!(null==(s=n.instance.persistence)||!s.get_property(mc)),l=n.instance.config.capture_dead_clicks;return oi(l)?l:o};class Oh{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(n,s,o){this.instance=n,this.isEnabled=s,this.onCapture=o,this.startIfEnabled()}onRemoteConfig(n){this.instance.persistence&&this.instance.persistence.register({[mc]:null==n?void 0:n.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this._loadScript((()=>{this._start()}))}_loadScript(n){var s,o;null!=(s=Hl.__PosthogExtensions__)&&s.initDeadClicksAutocapture&&n(),null==(o=Hl.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this.instance,"dead-clicks-autocapture",(s=>{s?Dg.error("failed to load script",s):n()}))}_start(){var n;if(Pl){if(!this._lazyLoadedDeadClicksAutocapture&&null!=(n=Hl.__PosthogExtensions__)&&n.initDeadClicksAutocapture){var s=Jr(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};s.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=Hl.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,s),this._lazyLoadedDeadClicksAutocapture.start(Pl),Dg.info("starting...")}}else Dg.error("`document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,Dg.info("stopping..."))}}var Bg=Wl("[ExceptionAutocapture]");class Hh{constructor(n){var s,o,l;this._startCapturing=()=>{var n;if(El&&this.isEnabled&&null!=(n=Hl.__PosthogExtensions__)&&n.errorWrappingFunctions){var s=Hl.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,o=Hl.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Hl.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this._unwrapOnError&&this._config.capture_unhandled_errors&&(this._unwrapOnError=s(this.captureException.bind(this))),!this._unwrapUnhandledRejection&&this._config.capture_unhandled_rejections&&(this._unwrapUnhandledRejection=o(this.captureException.bind(this))),!this._unwrapConsoleError&&this._config.capture_console_errors&&(this._unwrapConsoleError=l(this.captureException.bind(this)))}catch(c){Bg.error("failed to start",c),this._stopCapturing()}}},this._instance=n,this._remoteEnabled=!(null==(s=this._instance.persistence)||!s.props[dc]),this._config=this._requiredConfig(),this._rateLimiter=new gi({refillRate:null!==(o=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)&&void 0!==o?o:1,bucketSize:null!==(l=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)&&void 0!==l?l:10,refillInterval:1e4,_logger:Bg}),this.startIfEnabled()}_requiredConfig(){var n=this._instance.config.capture_exceptions,s={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Jr(n)?s=r({},s,n):(ei(n)?this._remoteEnabled:n)&&(s=r({},s,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),s}get isEnabled(){return this._config.capture_console_errors||this._config.capture_unhandled_errors||this._config.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Bg.info("enabled"),this._loadScript(this._startCapturing))}_loadScript(n){var s,o;null!=(s=Hl.__PosthogExtensions__)&&s.errorWrappingFunctions&&n(),null==(o=Hl.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this._instance,"exception-autocapture",(s=>{if(s)return Bg.error("failed to load script",s);n()}))}_stopCapturing(){var n,s,o;null==(n=this._unwrapOnError)||n.call(this),this._unwrapOnError=void 0,null==(s=this._unwrapUnhandledRejection)||s.call(this),this._unwrapUnhandledRejection=void 0,null==(o=this._unwrapConsoleError)||o.call(this),this._unwrapConsoleError=void 0}onRemoteConfig(n){var s=n.autocaptureExceptions;this._remoteEnabled=!!s||!1,this._config=this._requiredConfig(),this._instance.persistence&&this._instance.persistence.register({[dc]:this._remoteEnabled}),this.startIfEnabled()}captureException(n){var s,o,l=null!==(s=null==n||null==(o=n.$exception_list)||null==(o=o[0])?void 0:o.type)&&void 0!==s?s:"Exception";this._rateLimiter.consumeRateLimit(l)?Bg.info("Skipping exception capture because of client rate limiting.",{exception:l}):this._instance.exceptions.sendExceptionEvent(n)}}class qh{constructor(n){var s;this._instance=n,this._lastPathname=(null==El||null==(s=El.location)?void 0:s.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(zl.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this._popstateListener&&this._popstateListener(),this._popstateListener=void 0,zl.info("History API monitoring stopped")}monitorHistoryChanges(){var n,s;if(El&&El.history){var o=this;null!=(n=El.history.pushState)&&n.__posthog_wrapped__||Nn(El.history,"pushState",(n=>function(s,l,c){n.call(this,s,l,c),o._capturePageview("pushState")})),null!=(s=El.history.replaceState)&&s.__posthog_wrapped__||Nn(El.history,"replaceState",(n=>function(s,l,c){n.call(this,s,l,c),o._capturePageview("replaceState")})),this._setupPopstateListener()}}_capturePageview(n){try{var s,o=null==El||null==(s=El.location)?void 0:s.pathname;if(!o)return;o!==this._lastPathname&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:n}),this._lastPathname=o}catch(l){zl.error("Error capturing "+n+" pageview",l)}}_setupPopstateListener(){if(!this._popstateListener){var e2=()=>{this._capturePageview("popstate")};En(El,"popstate",e2),this._popstateListener=()=>{El&&El.removeEventListener("popstate",e2)}}}}var $g=Wl("[SegmentIntegration]");var Ug="posthog-js";function Wh(n,s){var{organization:o,projectId:l,prefix:c,severityAllowList:d=["error"],sendExceptionsToPostHog:h=!0}=void 0===s?{}:s;return s=>{var p,f,m,_,y;if("*"!==d&&!d.includes(s.level)||!n.__loaded)return s;s.tags||(s.tags={});var E=n.requestRouter.endpointFor("ui","/project/"+n.config.token+"/person/"+n.get_distinct_id());s.tags["PostHog Person URL"]=E,n.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=n.get_session_replay_url({withTimestamp:!0}));var M=(null==(p=s.exception)?void 0:p.values)||[],P=M.map((n=>r({},n,{stacktrace:n.stacktrace?r({},n.stacktrace,{type:"raw",frames:(n.stacktrace.frames||[]).map((n=>r({},n,{platform:"web:javascript"})))}):void 0}))),L={$exception_message:(null==(f=M[0])?void 0:f.value)||s.message,$exception_type:null==(m=M[0])?void 0:m.type,$exception_level:s.level,$exception_list:P,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:(null==(_=M[0])?void 0:_.value)||s.message,$sentry_exception_type:null==(y=M[0])?void 0:y.type,$sentry_tags:s.tags};return o&&l&&(L.$sentry_url=(c||"https://sentry.io/organizations/")+o+"/issues/?project="+l+"&query="+s.event_id),h&&n.exceptions.sendExceptionEvent(L),s}}class Uh{constructor(n,s,o,l,c,d){this.name=Ug,this.setupOnce=function(h){h(Wh(n,{organization:s,projectId:o,prefix:l,severityAllowList:c,sendExceptionsToPostHog:null==d||d}))}}}var Hg=null!=El&&El.location?An(El.location.hash,"__posthog")||An(location.hash,"state"):null,jg="_postHogToolbarParams",zg=Wl("[Toolbar]"),qg=function(n){return n[n.UNINITIALIZED=0]="UNINITIALIZED",n[n.LOADING=1]="LOADING",n[n.LOADED=2]="LOADED",n}(qg||{});class Yh{constructor(n){this.instance=n}_setToolbarState(n){Hl.ph_toolbar_state=n}_getToolbarState(){var n;return null!==(n=Hl.ph_toolbar_state)&&void 0!==n?n:qg.UNINITIALIZED}maybeLoadToolbar(n,s,o){if(void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===o&&(o=void 0),!El||!Pl)return!1;n=null!=n?n:El.location,o=null!=o?o:El.history;try{if(!s){try{El.localStorage.setItem("test","test"),El.localStorage.removeItem("test")}catch(h){return!1}s=null==El?void 0:El.localStorage}var l,c=Hg||An(n.hash,"__posthog")||An(n.hash,"state"),d=c?yn((()=>JSON.parse(atob(decodeURIComponent(c)))))||yn((()=>JSON.parse(decodeURIComponent(c)))):null;return d&&"ph_authorize"===d.action?((l=d).source="url",l&&Object.keys(l).length>0&&(d.desiredHash?n.hash=d.desiredHash:o?o.replaceState(o.state,"",n.pathname+n.search):n.hash="")):((l=JSON.parse(s.getItem(jg)||"{}")).source="localstorage",delete l.userIntent),!(!l.token||this.instance.config.token!==l.token||(this.loadToolbar(l),0))}catch(h){return!1}}_callLoadToolbar(n){var s=Hl.ph_load_toolbar||Hl.ph_load_editor;!ni(s)&&Xr(s)?s(n,this.instance):zg.warn("No toolbar load function found")}loadToolbar(n){var s=!(null==Pl||!Pl.getElementById(ru));if(!El||s)return!1;var o="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,l=r({token:this.instance.config.token},n,{apiURL:this.instance.requestRouter.endpointFor("ui")},o?{instrument:!1}:{});if(El.localStorage.setItem(jg,JSON.stringify(r({},l,{source:void 0}))),this._getToolbarState()===qg.LOADED)this._callLoadToolbar(l);else if(this._getToolbarState()===qg.UNINITIALIZED){var c;this._setToolbarState(qg.LOADING),null==(c=Hl.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this.instance,"toolbar",(n=>{if(n)return zg.error("[Toolbar] Failed to load",n),void this._setToolbarState(qg.UNINITIALIZED);this._setToolbarState(qg.LOADED),this._callLoadToolbar(l)})),En(El,"turbolinks:load",(()=>{this._setToolbarState(qg.UNINITIALIZED),this.loadToolbar(l)}))}return!0}_loadEditor(n){return this.loadToolbar(n)}maybeLoadEditor(n,s,o){return void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===o&&(o=void 0),this.maybeLoadToolbar(n,s,o)}}var Wg=Wl("[TracingHeaders]");class Kh{constructor(n){this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0,this._startCapturing=()=>{var n,s;ei(this._restoreXHRPatch)&&(null==(n=Hl.__PosthogExtensions__)||null==(n=n.tracingHeadersPatchFns)||n._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),ei(this._restoreFetchPatch)&&(null==(s=Hl.__PosthogExtensions__)||null==(s=s.tracingHeadersPatchFns)||s._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=n}_loadScript(n){var s,o;null!=(s=Hl.__PosthogExtensions__)&&s.tracingHeadersPatchFns&&n(),null==(o=Hl.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this._instance,"tracing-headers",(s=>{if(s)return Wg.error("failed to load script",s);n()}))}startIfEnabledOrStop(){var n,s;this._instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null==(n=this._restoreXHRPatch)||n.call(this),null==(s=this._restoreFetchPatch)||s.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}var Vg="https?://(.*)",Gg=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Yg=_n(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Gg),Zg="<masked>",Jg=["li_fat_id"];function ip(n,s,o){if(!Pl)return{};var l,c=s?_n([],Gg,o||[]):[],d=np(Rn(Pl.URL,c,Zg),n),h=(l={},fn(Jg,(function(n){var s=Eg._get(n);l[n]=s||null})),l);return gn(h,d)}function np(n,s){var o=Yg.concat(s||[]),l={};return fn(o,(function(s){var o=Mn(n,s);l[s]=o||null})),l}function sp(n){var s,o=(s=n)?0===s.search(Vg+"google.([^/?]*)")?"google":0===s.search(Vg+"bing.com")?"bing":0===s.search(Vg+"yahoo.com")?"yahoo":0===s.search(Vg+"duckduckgo.com")?"duckduckgo":null:null,l="yahoo"!=o?"q":"p",c={};if(!ii(o)){c.$search_engine=o;var d=Pl?Mn(Pl.referrer,l):"";d.length&&(c.ph_keyword=d)}return c}function op(){return navigator.language||navigator.userLanguage}function ap(){return(null==Pl?void 0:Pl.referrer)||"$direct"}function lp(n,s){var o=n?_n([],Gg,s||[]):[],l=null==Ll?void 0:Ll.href.substring(0,1e3);return{r:ap().substring(0,1e3),u:l?Rn(l,o,Zg):void 0}}function up(n){var s,{r:o,u:l}=n,c={$referrer:o,$referring_domain:null==o?void 0:"$direct"==o?"$direct":null==(s=xn(o))?void 0:s.host};if(l){c.$current_url=l;var d=xn(l);c.$host=null==d?void 0:d.host,c.$pathname=null==d?void 0:d.pathname;var h=np(l);gn(c,h)}if(o){var p=sp(o);gn(c,p)}return c}function cp(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(es){return}}function dp(){try{return(new Date).getTimezoneOffset()}catch(es){return}}var Xg=Wl("[Web Vitals]"),Kg=9e5;class fp{constructor(n){var s;this._enabledServerSide=!1,this._initialized=!1,this._buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0},this._flushToCapture=()=>{clearTimeout(this._delayedFlushTimer),0!==this._buffer.metrics.length&&(this._instance.capture("$web_vitals",this._buffer.metrics.reduce(((n,s)=>r({},n,{["$web_vitals_"+s.name+"_event"]:r({},s),["$web_vitals_"+s.name+"_value"]:s.value})),{})),this._buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this._addToBuffer=n=>{var s,o=null==(s=this._instance.sessionManager)?void 0:s.checkAndGetSessionAndWindowId(!0);if(ei(o))Xg.error("Could not read session ID. Dropping metrics!");else{this._buffer=this._buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var l=this._currentURL();ei(l)||(ni(null==n?void 0:n.name)||ni(null==n?void 0:n.value)?Xg.error("Invalid metric received",n):this._maxAllowedValue&&n.value>=this._maxAllowedValue?Xg.error("Ignoring metric with value >= "+this._maxAllowedValue,n):(this._buffer.url!==l&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),ei(this._buffer.url)&&(this._buffer.url=l),this._buffer.firstMetricTimestamp=ei(this._buffer.firstMetricTimestamp)?Date.now():this._buffer.firstMetricTimestamp,n.attribution&&n.attribution.interactionTargetElement&&(n.attribution.interactionTargetElement=void 0),this._buffer.metrics.push(r({},n,{$current_url:l,$session_id:o.sessionId,$window_id:o.windowId,timestamp:Date.now()})),this._buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}},this._startCapturing=()=>{var n,s,o,l,c=Hl.__PosthogExtensions__;ei(c)||ei(c.postHogWebVitalsCallbacks)||({onLCP:n,onCLS:s,onFCP:o,onINP:l}=c.postHogWebVitalsCallbacks),n&&s&&o&&l?(this.allowedMetrics.indexOf("LCP")>-1&&n(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&s(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&o(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&l(this._addToBuffer.bind(this)),this._initialized=!0):Xg.error("web vitals callbacks not loaded - not starting")},this._instance=n,this._enabledServerSide=!(null==(s=this._instance.persistence)||!s.props[gc]),this.startIfEnabled()}get allowedMetrics(){var n,s,o=Jr(this._instance.config.capture_performance)?null==(n=this._instance.config.capture_performance)?void 0:n.web_vitals_allowed_metrics:void 0;return ei(o)?(null==(s=this._instance.persistence)?void 0:s.props[vc])||["CLS","FCP","INP","LCP"]:o}get flushToCaptureTimeoutMs(){return(Jr(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var n=Jr(this._instance.config.capture_performance)&&si(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:Kg;return 0<n&&n<=6e4?Kg:n}get isEnabled(){var n=null==Ll?void 0:Ll.protocol;if("http:"!==n&&"https:"!==n)return Xg.info("Web Vitals are disabled on non-http/https protocols"),!1;var s=Jr(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:oi(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return oi(s)?s:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(Xg.info("enabled, starting..."),this._loadScript(this._startCapturing))}onRemoteConfig(n){var s=Jr(n.capturePerformance)&&!!n.capturePerformance.web_vitals,o=Jr(n.capturePerformance)?n.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[gc]:s}),this._instance.persistence.register({[vc]:o})),this._enabledServerSide=s,this.startIfEnabled()}_loadScript(n){var s,o;null!=(s=Hl.__PosthogExtensions__)&&s.postHogWebVitalsCallbacks&&n(),null==(o=Hl.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this._instance,"web-vitals",(s=>{s?Xg.error("failed to load script",s):n()}))}_currentURL(){var n=El?El.location.href:void 0;if(n){var s=this._instance.config.mask_personal_data_properties,o=this._instance.config.custom_personal_data_properties,l=s?_n([],Gg,o||[]):[];return Rn(n,l,Zg)}Xg.error("Could not determine current URL")}}var Qg=Wl("[Heatmaps]");function _p(n){return Jr(n)&&"clientX"in n&&"clientY"in n&&si(n.clientX)&&si(n.clientY)}class mp{constructor(n){var s;this._enabledServerSide=!1,this._initialized=!1,this._flushInterval=null,this.instance=n,this._enabledServerSide=!(null==(s=this.instance.persistence)||!s.props[ec]),this.rageclicks=new lh(n.config.rageclick)}get flushIntervalMilliseconds(){var n=5e3;return Jr(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(n=this.instance.config.capture_heatmaps.flush_interval_milliseconds),n}get isEnabled(){return ei(this.instance.config.capture_heatmaps)?ei(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;Qg.info("starting..."),this._setupListeners(),this._onVisibilityChange()}else{var n;clearInterval(null!==(n=this._flushInterval)&&void 0!==n?n:void 0),this._removeListeners(),this.getAndClearBuffer()}}onRemoteConfig(n){var s=!!n.heatmaps;this.instance.persistence&&this.instance.persistence.register({[ec]:s}),this._enabledServerSide=s,this.startIfEnabled()}getAndClearBuffer(){var n=this._buffer;return this._buffer=void 0,n}_onDeadClick(n){this._onClick(n.originalEvent,"deadclick")}_onVisibilityChange(){this._flushInterval&&clearInterval(this._flushInterval),this._flushInterval=function(n){return"visible"===(null==n?void 0:n.visibilityState)}(Pl)?setInterval(this._flush.bind(this),this.flushIntervalMilliseconds):null}_setupListeners(){El&&Pl&&(this._flushHandler=this._flush.bind(this),En(El,"beforeunload",this._flushHandler),this._onClickHandler=n=>this._onClick(n||(null==El?void 0:El.event)),En(Pl,"click",this._onClickHandler,{capture:!0}),this._onMouseMoveHandler=n=>this._onMouseMove(n||(null==El?void 0:El.event)),En(Pl,"mousemove",this._onMouseMoveHandler,{capture:!0}),this._deadClicksCapture=new Oh(this.instance,Fh,this._onDeadClick.bind(this)),this._deadClicksCapture.startIfEnabled(),this._onVisibilityChange_handler=this._onVisibilityChange.bind(this),En(Pl,"visibilitychange",this._onVisibilityChange_handler),this._initialized=!0)}_removeListeners(){var n;El&&Pl&&(this._flushHandler&&El.removeEventListener("beforeunload",this._flushHandler),this._onClickHandler&&Pl.removeEventListener("click",this._onClickHandler,{capture:!0}),this._onMouseMoveHandler&&Pl.removeEventListener("mousemove",this._onMouseMoveHandler,{capture:!0}),this._onVisibilityChange_handler&&Pl.removeEventListener("visibilitychange",this._onVisibilityChange_handler),clearTimeout(this._mouseMoveTimeout),null==(n=this._deadClicksCapture)||n.stop(),this._initialized=!1)}_getProperties(n,s){var o=this.instance.scrollManager.scrollY(),l=this.instance.scrollManager.scrollX(),c=this.instance.scrollManager.scrollElement(),d=function(n,s,o){for(var l=n;l&&ps(l)&&!vs(l,"body");){if(l===o)return!1;if($r(s,null==El?void 0:El.getComputedStyle(l).position))return!0;l=ks(l)}return!1}(ws(n),["fixed","sticky"],c);return{x:n.clientX+(d?0:l),y:n.clientY+(d?0:o),target_fixed:d,type:s}}_onClick(n,s){var o;if(void 0===s&&(s="click"),!hs(n.target)&&_p(n)){var l=this._getProperties(n,s);null!=(o=this.rageclicks)&&o.isRageClick(n.clientX,n.clientY,(new Date).getTime())&&this._capture(r({},l,{type:"rageclick"})),this._capture(l)}}_onMouseMove(n){!hs(n.target)&&_p(n)&&(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((()=>{this._capture(this._getProperties(n,"mousemove"))}),500))}_capture(n){if(El){var s=El.location.href,o=this.instance.config.mask_personal_data_properties,l=this.instance.config.custom_personal_data_properties,c=o?_n([],Gg,l||[]):[],d=Rn(s,c,Zg);this._buffer=this._buffer||{},this._buffer[d]||(this._buffer[d]=[]),this._buffer[d].push(n)}}_flush(){this._buffer&&!Qr(this._buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class yp{constructor(n){this._instance=n}doPageView(n,s){var o,l=this._previousPageViewProperties(n,s);return this._currentPageview={pathname:null!==(o=null==El?void 0:El.location.pathname)&&void 0!==o?o:"",pageViewId:s,timestamp:n},this._instance.scrollManager.resetContext(),l}doPageLeave(n){var s;return this._previousPageViewProperties(n,null==(s=this._currentPageview)?void 0:s.pageViewId)}doEvent(){var n;return{$pageview_id:null==(n=this._currentPageview)?void 0:n.pageViewId}}_previousPageViewProperties(n,s){var o=this._currentPageview;if(!o)return{$pageview_id:s};var l={$pageview_id:s,$prev_pageview_id:o.pageViewId},c=this._instance.scrollManager.getContext();if(c&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:d,lastScrollY:h,maxScrollY:p,maxContentHeight:f,lastContentY:m,maxContentY:_}=c;if(!(ei(d)||ei(h)||ei(p)||ei(f)||ei(m)||ei(_))){d=Math.ceil(d),h=Math.ceil(h),p=Math.ceil(p),f=Math.ceil(f),m=Math.ceil(m),_=Math.ceil(_);var y=d<=1?1:fi(h/d,0,1,zl),E=d<=1?1:fi(p/d,0,1,zl),M=f<=1?1:fi(m/f,0,1,zl),P=f<=1?1:fi(_/f,0,1,zl);l=gn(l,{$prev_pageview_last_scroll:h,$prev_pageview_last_scroll_percentage:y,$prev_pageview_max_scroll:p,$prev_pageview_max_scroll_percentage:E,$prev_pageview_last_content:m,$prev_pageview_last_content_percentage:M,$prev_pageview_max_content:_,$prev_pageview_max_content_percentage:P})}}return o.pathname&&(l.$prev_pageview_pathname=o.pathname),o.timestamp&&(l.$prev_pageview_duration=(n.getTime()-o.timestamp.getTime())/1e3),l}}var em=Wl("[FeatureFlags]"),tm="$active_feature_flags",rm="$override_feature_flags",nm="$feature_flag_payloads",im="$override_feature_flag_payloads",sm="$feature_flag_request_id",Ep=n=>{var s={};for(var[o,l]of mn(n||{}))l&&(s[o]=l);return s},om=function(n){return n.FeatureFlags="feature_flags",n.Recordings="recordings",n}({});class Mp{constructor(n){this._override_warning=!1,this._hasLoadedFlags=!1,this._requestInFlight=!1,this._reloadingDisabled=!1,this._additionalReloadRequested=!1,this._flagsCalled=!1,this._flagsLoadedFromRemote=!1,this._instance=n,this.featureFlagEventHandlers=[]}_getValidEvaluationEnvironments(){var n=this._instance.config.evaluation_environments;return null!=n&&n.length?n.filter((n=>{var s=n&&"string"==typeof n&&n.trim().length>0;return s||em.error("Invalid evaluation environment found:",n,"Expected non-empty string"),s})):[]}_shouldIncludeEvaluationEnvironments(){return this._getValidEvaluationEnvironments().length>0}flags(){if(this._instance.config.__preview_remote_config)this._flagsCalled=!0;else{var n=!this._reloadDebouncer&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this._callFlagsEndpoint({disableFlags:n})}}get hasLoadedFlags(){return this._hasLoadedFlags}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var n=this._instance.get_property(Lc),s=this._instance.get_property(rm),o=this._instance.get_property(im);if(!o&&!s)return n||{};var l=gn({},n||{}),c=[...new Set([...Object.keys(o||{}),...Object.keys(s||{})])];for(var d of c){var h,p,f=l[d],m=null==s?void 0:s[d],_=ei(m)?null!==(h=null==f?void 0:f.enabled)&&void 0!==h&&h:!!m,y=ei(m)?f.variant:"string"==typeof m?m:void 0,E=null==o?void 0:o[d],M=r({},f,{enabled:_,variant:_?null!=y?y:null==f?void 0:f.variant:void 0});_!==(null==f?void 0:f.enabled)&&(M.original_enabled=null==f?void 0:f.enabled),y!==(null==f?void 0:f.variant)&&(M.original_variant=null==f?void 0:f.variant),E&&(M.metadata=r({},null==f?void 0:f.metadata,{payload:E,original_payload:null==f||null==(p=f.metadata)?void 0:p.payload})),l[d]=M}return this._override_warning||(em.warn(" Overriding feature flag details!",{flagDetails:n,overriddenPayloads:o,finalDetails:l}),this._override_warning=!0),l}getFlagVariants(){var n=this._instance.get_property(Oc),s=this._instance.get_property(rm);if(!s)return n||{};for(var o=gn({},n),l=Object.keys(s),c=0;c<l.length;c++)o[l[c]]=s[l[c]];return this._override_warning||(em.warn(" Overriding feature flags!",{enabledFlags:n,overriddenFlags:s,finalFlags:o}),this._override_warning=!0),o}getFlagPayloads(){var n=this._instance.get_property(nm),s=this._instance.get_property(im);if(!s)return n||{};for(var o=gn({},n||{}),l=Object.keys(s),c=0;c<l.length;c++)o[l[c]]=s[l[c]];return this._override_warning||(em.warn(" Overriding feature flag payloads!",{flagPayloads:n,overriddenPayloads:s,finalPayloads:o}),this._override_warning=!0),o}reloadFeatureFlags(){this._reloadingDisabled||this._instance.config.advanced_disable_feature_flags||this._reloadDebouncer||(this._reloadDebouncer=setTimeout((()=>{this._callFlagsEndpoint()}),5))}_clearDebouncer(){clearTimeout(this._reloadDebouncer),this._reloadDebouncer=void 0}ensureFlagsLoaded(){this._hasLoadedFlags||this._requestInFlight||this._reloadDebouncer||this.reloadFeatureFlags()}setAnonymousDistinctId(n){this.$anon_distinct_id=n}setReloadingPaused(n){this._reloadingDisabled=n}_callFlagsEndpoint(n){var s;if(this._clearDebouncer(),!this._instance._shouldDisableFlags())if(this._requestInFlight)this._additionalReloadRequested=!0;else{var o={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:r({},(null==(s=this._instance.persistence)?void 0:s.get_initial_props())||{},this._instance.get_property(Nc)||{}),group_properties:this._instance.get_property(Fc)};(null!=n&&n.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(o.disable_flags=!0),this._shouldIncludeEvaluationEnvironments()&&(o.evaluation_environments=this._getValidEvaluationEnvironments());var l=this._instance.config.__preview_remote_config,c=l?"/flags/?v=2":"/flags/?v=2&config=true",d=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",h=this._instance.requestRouter.endpointFor("flags",c+d);l&&(o.timezone=cp()),this._requestInFlight=!0,this._instance._send_request({method:"POST",url:h,data:o,compression:this._instance.config.disable_compression?void 0:Xp.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:n=>{var s,l,c=!0;if(200===n.statusCode&&(this._additionalReloadRequested||(this.$anon_distinct_id=void 0),c=!1),this._requestInFlight=!1,this._flagsCalled||(this._flagsCalled=!0,this._instance._onRemoteConfig(null!==(l=n.json)&&void 0!==l?l:{})),!o.disable_flags||this._additionalReloadRequested)if(this._flagsLoadedFromRemote=!c,n.json&&null!=(s=n.json.quotaLimited)&&s.includes(om.FeatureFlags))em.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var d;o.disable_flags||this.receivedFeatureFlags(null!==(d=n.json)&&void 0!==d?d:{},c),this._additionalReloadRequested&&(this._additionalReloadRequested=!1,this._callFlagsEndpoint())}}})}}getFeatureFlag(n,s){if(void 0===s&&(s={}),this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var o=this.getFlagVariants()[n],l=""+o,c=this._instance.get_property(sm)||void 0,d=this._instance.get_property(Uc)||{};if((s.send_event||!("send_event"in s))&&(!(n in d)||!d[n].includes(l))){var h,p,f,m,_,y,E,M,P;hl(d[n])?d[n].push(l):d[n]=[l],null==(h=this._instance.persistence)||h.register({[Uc]:d});var L=this.getFeatureFlagDetails(n),N={$feature_flag:n,$feature_flag_response:o,$feature_flag_payload:this.getFeatureFlagPayload(n)||null,$feature_flag_request_id:c,$feature_flag_bootstrapped_response:(null==(p=this._instance.config.bootstrap)||null==(p=p.featureFlags)?void 0:p[n])||null,$feature_flag_bootstrapped_payload:(null==(f=this._instance.config.bootstrap)||null==(f=f.featureFlagPayloads)?void 0:f[n])||null,$used_bootstrap_value:!this._flagsLoadedFromRemote};ei(null==L||null==(m=L.metadata)?void 0:m.version)||(N.$feature_flag_version=L.metadata.version);var F,D=null!==(_=null==L||null==(y=L.reason)?void 0:y.description)&&void 0!==_?_:null==L||null==(E=L.reason)?void 0:E.code;D&&(N.$feature_flag_reason=D),null!=L&&null!=(M=L.metadata)&&M.id&&(N.$feature_flag_id=L.metadata.id),ei(null==L?void 0:L.original_variant)&&ei(null==L?void 0:L.original_enabled)||(N.$feature_flag_original_response=ei(L.original_variant)?L.original_enabled:L.original_variant),null!=L&&null!=(P=L.metadata)&&P.original_payload&&(N.$feature_flag_original_payload=null==L||null==(F=L.metadata)?void 0:F.original_payload),this._instance.capture("$feature_flag_called",N)}return o}em.warn('getFeatureFlag for key "'+n+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(n){return this.getFlagsWithDetails()[n]}getFeatureFlagPayload(n){return this.getFlagPayloads()[n]}getRemoteConfigPayload(n,s){var o=this._instance.config.token,l={distinct_id:this._instance.get_distinct_id(),token:o};this._shouldIncludeEvaluationEnvironments()&&(l.evaluation_environments=this._getValidEvaluationEnvironments()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:l,compression:this._instance.config.disable_compression?void 0:Xp.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:o=>{var l,c=null==(l=o.json)?void 0:l.featureFlagPayloads;s((null==c?void 0:c[n])||void 0)}})}isFeatureEnabled(n,s){if(void 0===s&&(s={}),this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var o=this.getFeatureFlag(n,s);return ei(o)?void 0:!!o}em.warn('isFeatureEnabled for key "'+n+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(n){this.featureFlagEventHandlers.push(n)}removeFeatureFlagsHandler(n){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((s=>s!==n))}receivedFeatureFlags(n,s){if(this._instance.persistence){this._hasLoadedFlags=!0;var o=this.getFlagVariants(),l=this.getFlagPayloads(),c=this.getFlagsWithDetails();!function(n,s,o,l,c){void 0===o&&(o={}),void 0===l&&(l={}),void 0===c&&(c={});var d=(n=>{var s=n.flags;return s?(n.featureFlags=Object.fromEntries(Object.keys(s).map((n=>{var o;return[n,null!==(o=s[n].variant)&&void 0!==o?o:s[n].enabled]}))),n.featureFlagPayloads=Object.fromEntries(Object.keys(s).filter((n=>s[n].enabled)).filter((n=>{var o;return null==(o=s[n].metadata)?void 0:o.payload})).map((n=>{var o;return[n,null==(o=s[n].metadata)?void 0:o.payload]})))):em.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),n})(n),h=d.flags,p=d.featureFlags,f=d.featureFlagPayloads;if(p){var m=n.requestId;if(hl(p)){em.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var _={};if(p)for(var y=0;y<p.length;y++)_[p[y]]=!0;s&&s.register({[tm]:p,[Oc]:_})}else{var E=p,M=f,P=h;n.errorsWhileComputingFlags&&(E=r({},o,E),M=r({},l,M),P=r({},c,P)),s&&s.register(r({[tm]:Object.keys(Ep(E)),[Oc]:E||{},[nm]:M||{},[Lc]:P||{}},m?{[sm]:m}:{}))}}}(n,this._instance.persistence,o,l,c),this._fireFeatureFlagsCallbacks(s)}}override(n,s){void 0===s&&(s=!1),em.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:n,suppressWarning:s})}overrideFeatureFlags(n){if(!this._instance.__loaded||!this._instance.persistence)return em.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===n)return this._instance.persistence.unregister(rm),this._instance.persistence.unregister(im),void this._fireFeatureFlagsCallbacks();if(n&&"object"==typeof n&&("flags"in n||"payloads"in n)){var s,o=n;if(this._override_warning=Boolean(null!==(s=o.suppressWarning)&&void 0!==s&&s),"flags"in o)if(!1===o.flags)this._instance.persistence.unregister(rm);else if(o.flags)if(hl(o.flags)){for(var l={},c=0;c<o.flags.length;c++)l[o.flags[c]]=!0;this._instance.persistence.register({[rm]:l})}else this._instance.persistence.register({[rm]:o.flags});return"payloads"in o&&(!1===o.payloads?this._instance.persistence.unregister(im):o.payloads&&this._instance.persistence.register({[im]:o.payloads})),void this._fireFeatureFlagsCallbacks()}this._fireFeatureFlagsCallbacks()}onFeatureFlags(n){if(this.addFeatureFlagsHandler(n),this._hasLoadedFlags){var{flags:s,flagVariants:o}=this._prepareFeatureFlagsForCallbacks();n(s,o)}return()=>this.removeFeatureFlagsHandler(n)}updateEarlyAccessFeatureEnrollment(n,s,o){var l,c=(this._instance.get_property(Pc)||[]).find((s=>s.flagKey===n)),d={["$feature_enrollment/"+n]:s},h={$feature_flag:n,$feature_enrollment:s,$set:d};c&&(h.$early_access_feature_name=c.name),o&&(h.$feature_enrollment_stage=o),this._instance.capture("$feature_enrollment_update",h),this.setPersonPropertiesForFlags(d,!1);var p=r({},this.getFlagVariants(),{[n]:s});null==(l=this._instance.persistence)||l.register({[tm]:Object.keys(Ep(p)),[Oc]:p}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(n,s,o){void 0===s&&(s=!1);var l=this._instance.get_property(Pc),c=o?"&"+o.map((n=>"stage="+n)).join("&"):"";if(l&&!s)return n(l);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+c),method:"GET",callback:s=>{var o,l;if(s.json){var c=s.json.earlyAccessFeatures;return null==(o=this._instance.persistence)||o.unregister(Pc),null==(l=this._instance.persistence)||l.register({[Pc]:c}),n(c)}}})}_prepareFeatureFlagsForCallbacks(){var n=this.getFlags(),s=this.getFlagVariants();return{flags:n.filter((n=>s[n])),flagVariants:Object.keys(s).filter((n=>s[n])).reduce(((n,o)=>(n[o]=s[o],n)),{})}}_fireFeatureFlagsCallbacks(n){var{flags:s,flagVariants:o}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach((l=>l(s,o,{errorsLoading:n})))}setPersonPropertiesForFlags(n,s){void 0===s&&(s=!0);var o=this._instance.get_property(Nc)||{};this._instance.register({[Nc]:r({},o,n)}),s&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Nc)}setGroupPropertiesForFlags(n,s){void 0===s&&(s=!0);var o=this._instance.get_property(Fc)||{};0!==Object.keys(o).length&&Object.keys(o).forEach((s=>{o[s]=r({},o[s],n[s]),delete n[s]})),this._instance.register({[Fc]:r({},o,n)}),s&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(n){if(n){var s=this._instance.get_property(Fc)||{};this._instance.register({[Fc]:r({},s,{[n]:{}})})}else this._instance.unregister(Fc)}reset(){this._hasLoadedFlags=!1,this._requestInFlight=!1,this._reloadingDisabled=!1,this._additionalReloadRequested=!1,this._flagsCalled=!1,this._flagsLoadedFromRemote=!1,this.$anon_distinct_id=void 0,this._clearDebouncer(),this._override_warning=!1}}var am=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Ap{constructor(n,s){var o,l;this._config=n,this.props={},this._campaign_params_saved=!1,this._name=(l="",(o=n).token&&(l=o.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),o.persistence_name?"ph_"+o.persistence_name:"ph_"+l+"_posthog"),this._storage=this._buildStorage(n),this.load(),n.debug&&zl.info("Persistence loaded",n.persistence,r({},this.props)),this.update_config(n,n,s),this.save()}isDisabled(){return!!this._disabled}_buildStorage(n){-1===am.indexOf(n.persistence.toLowerCase())&&(zl.critical("Unknown persistence type "+n.persistence+"; falling back to localStorage+cookie"),n.persistence="localStorage+cookie");var s=n.persistence.toLowerCase();return"localstorage"===s&&Ag._is_supported()?Ag:"localstorage+cookie"===s&&Rg._is_supported()?Rg:"sessionstorage"===s&&Ng._is_supported()?Ng:"memory"===s?Pg:"cookie"===s?Eg:Rg._is_supported()?Rg:Eg}properties(){var n={};return fn(this.props,(function(s,o){if(o===Oc&&Jr(s))for(var l=Object.keys(s),c=0;c<l.length;c++)n["$feature/"+l[c]]=s[l[c]];else h=o,p=!1,(ii(d=iu)?p:Rl&&d.indexOf===Rl?-1!=d.indexOf(h):(fn(d,(function(n){if(p||(p=n===h))return Gl})),p))||(n[o]=s);var d,h,p})),n}load(){if(!this._disabled){var n=this._storage._parse(this._name);n&&(this.props=gn({},n))}}save(){this._disabled||this._storage._set(this._name,this.props,this._expire_days,this._cross_subdomain,this._secure,this._config.debug)}remove(){this._storage._remove(this._name,!1),this._storage._remove(this._name,!0)}clear(){this.remove(),this.props={}}register_once(n,s,o){if(Jr(n)){ei(s)&&(s="None"),this._expire_days=ei(o)?this._default_expiry:o;var l=!1;if(fn(n,((n,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==s||(this.props[o]=n,l=!0)})),l)return this.save(),!0}return!1}register(n,s){if(Jr(n)){this._expire_days=ei(s)?this._default_expiry:s;var o=!1;if(fn(n,((s,l)=>{n.hasOwnProperty(l)&&this.props[l]!==s&&(this.props[l]=s,o=!0)})),o)return this.save(),!0}return!1}unregister(n){n in this.props&&(delete this.props[n],this.save())}update_campaign_params(){if(!this._campaign_params_saved){var n=ip(this._config.custom_campaign_params,this._config.mask_personal_data_properties,this._config.custom_personal_data_properties);Qr(Sn(n))||this.register(n),this._campaign_params_saved=!0}}update_search_keyword(){var n;this.register((n=null==Pl?void 0:Pl.referrer)?sp(n):{})}update_referrer_info(){var n;this.register_once({$referrer:ap(),$referring_domain:null!=Pl&&Pl.referrer&&(null==(n=xn(Pl.referrer))?void 0:n.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Vc]||this.props[Zc]||this.register_once({[eu]:lp(this._config.mask_personal_data_properties,this._config.custom_personal_data_properties)},void 0)}get_initial_props(){var n={};fn([Zc,Vc],(s=>{var o=this.props[s];o&&fn(o,(function(s,o){n["$initial_"+Ur(o)]=s}))}));var s,o,l=this.props[eu];if(l){var c=(s=up(l),o={},fn(s,(function(n,s){o["$initial_"+Ur(s)]=n})),o);gn(n,c)}return n}safe_merge(n){return fn(this.props,(function(s,o){o in n||(n[o]=s)})),n}update_config(n,s,o){if(this._default_expiry=this._expire_days=n.cookie_expiration,this.set_disabled(n.disable_persistence||!!o),this.set_cross_subdomain(n.cross_subdomain_cookie),this.set_secure(n.secure_cookie),n.persistence!==s.persistence){var l=this._buildStorage(n),c=this.props;this.clear(),this._storage=l,this.props=c,this.save()}}set_disabled(n){this._disabled=n,this._disabled?this.remove():this.save()}set_cross_subdomain(n){n!==this._cross_subdomain&&(this._cross_subdomain=n,this.remove(),this.save())}set_secure(n){n!==this._secure&&(this._secure=n,this.remove(),this.save())}set_event_timer(n,s){var o=this.props[Kl]||{};o[n]=s,this.props[Kl]=o,this.save()}remove_event_timer(n){var s=(this.props[Kl]||{})[n];return ei(s)||(delete this.props[Kl][n],this.save()),s}get_property(n){return this.props[n]}set_property(n,s){this.props[n]=s,this.save()}}class Np{constructor(){this._events={},this._events={}}on(n,s){return this._events[n]||(this._events[n]=[]),this._events[n].push(s),()=>{this._events[n]=this._events[n].filter((n=>n!==s))}}emit(n,s){for(var o of this._events[n]||[])o(s);for(var l of this._events["*"]||[])l(n,s)}}class Pp{constructor(n){this._debugEventEmitter=new Np,this._checkStep=(n,s)=>this._checkStepEvent(n,s)&&this._checkStepUrl(n,s)&&this._checkStepElement(n,s),this._checkStepEvent=(n,s)=>null==s||!s.event||(null==n?void 0:n.event)===(null==s?void 0:s.event),this._instance=n,this._actionEvents=new Set,this._actionRegistry=new Set}init(){var n,s;ei(null==(n=this._instance)?void 0:n._addCaptureHook)||(null==(s=this._instance)||s._addCaptureHook(((n,s)=>{this.on(n,s)})))}register(n){var s,o;if(!ei(null==(s=this._instance)?void 0:s._addCaptureHook)&&(n.forEach((n=>{var s,o;null==(s=this._actionRegistry)||s.add(n),null==(o=n.steps)||o.forEach((n=>{var s;null==(s=this._actionEvents)||s.add((null==n?void 0:n.event)||"")}))})),null!=(o=this._instance)&&o.autocapture)){var l,c=new Set;n.forEach((n=>{var s;null==(s=n.steps)||s.forEach((n=>{null!=n&&n.selector&&c.add(null==n?void 0:n.selector)}))})),null==(l=this._instance)||l.autocapture.setElementSelectors(c)}}on(n,s){var o;null!=s&&0!=n.length&&(this._actionEvents.has(n)||this._actionEvents.has(null==s?void 0:s.event))&&this._actionRegistry&&(null==(o=this._actionRegistry)?void 0:o.size)>0&&this._actionRegistry.forEach((n=>{this._checkAction(s,n)&&this._debugEventEmitter.emit("actionCaptured",n.name)}))}_addActionHook(n){this.onAction("actionCaptured",(s=>n(s)))}_checkAction(n,s){if(null==(null==s?void 0:s.steps))return!1;for(var o of s.steps)if(this._checkStep(n,o))return!0;return!1}onAction(n,s){return this._debugEventEmitter.on(n,s)}_checkStepUrl(n,s){if(null!=s&&s.url){var o,l=null==n||null==(o=n.properties)?void 0:o.$current_url;if(!l||"string"!=typeof l)return!1;if(!Pp._matchString(l,null==s?void 0:s.url,(null==s?void 0:s.url_matching)||"contains"))return!1}return!0}static _matchString(n,s,o){switch(o){case"regex":return!!El&&Pu(n,s);case"exact":return s===n;case"contains":var l=Pp._escapeStringRegexp(s).replace(/_/g,".").replace(/%/g,".*");return Pu(n,l);default:return!1}}static _escapeStringRegexp(n){return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}_checkStepElement(n,s){if((null!=s&&s.href||null!=s&&s.tag_name||null!=s&&s.text)&&!this._getElementsList(n).some((n=>!(null!=s&&s.href&&!Pp._matchString(n.href||"",null==s?void 0:s.href,(null==s?void 0:s.href_matching)||"exact")||null!=s&&s.tag_name&&n.tag_name!==(null==s?void 0:s.tag_name)||null!=s&&s.text&&!Pp._matchString(n.text||"",null==s?void 0:s.text,(null==s?void 0:s.text_matching)||"exact")&&!Pp._matchString(n.$el_text||"",null==s?void 0:s.text,(null==s?void 0:s.text_matching)||"exact")))))return!1;if(null!=s&&s.selector){var o,l=null==n||null==(o=n.properties)?void 0:o.$element_selectors;if(!l)return!1;if(!l.includes(null==s?void 0:s.selector))return!1}return!0}_getElementsList(n){return null==(null==n?void 0:n.properties.$elements)?[]:null==n?void 0:n.properties.$elements}}class Fp{constructor(n){this._instance=n,this._eventToSurveys=new Map,this._actionToSurveys=new Map}register(n){var s;ei(null==(s=this._instance)?void 0:s._addCaptureHook)||(this._setupEventBasedSurveys(n),this._setupActionBasedSurveys(n))}_setupActionBasedSurveys(n){var s=n.filter((n=>{var s,o;return(null==(s=n.conditions)?void 0:s.actions)&&(null==(o=n.conditions)||null==(o=o.actions)||null==(o=o.values)?void 0:o.length)>0}));0!==s.length&&(null==this._actionMatcher&&(this._actionMatcher=new Pp(this._instance),this._actionMatcher.init(),this._actionMatcher._addActionHook((n=>{this.onAction(n)}))),s.forEach((n=>{var s,o,l,c,d;n.conditions&&null!=(s=n.conditions)&&s.actions&&null!=(o=n.conditions)&&null!=(o=o.actions)&&o.values&&(null==(l=n.conditions)||null==(l=l.actions)||null==(l=l.values)?void 0:l.length)>0&&(null==(c=this._actionMatcher)||c.register(n.conditions.actions.values),null==(d=n.conditions)||null==(d=d.actions)||null==(d=d.values)||d.forEach((s=>{if(s&&s.name){var o=this._actionToSurveys.get(s.name);o&&o.push(n.id),this._actionToSurveys.set(s.name,o||[n.id])}})))})))}_setupEventBasedSurveys(n){var s;0!==n.filter((n=>{var s,o;return(null==(s=n.conditions)?void 0:s.events)&&(null==(o=n.conditions)||null==(o=o.events)||null==(o=o.values)?void 0:o.length)>0})).length&&(null==(s=this._instance)||s._addCaptureHook(((n,s)=>{this.onEvent(n,s)})),n.forEach((n=>{var s;null==(s=n.conditions)||null==(s=s.events)||null==(s=s.values)||s.forEach((s=>{if(s&&s.name){var o=this._eventToSurveys.get(s.name);o&&o.push(n.id),this._eventToSurveys.set(s.name,o||[n.id])}}))})))}onEvent(n,s){var o,l,c=(null==(o=this._instance)||null==(o=o.persistence)?void 0:o.props[$c])||[];if(Xd.SHOWN===n&&s&&c.length>0){var d;eh.info("survey event matched, removing survey from activated surveys",{event:n,eventPayload:s,existingActivatedSurveys:c});var h=null==s||null==(d=s.properties)?void 0:d.$survey_id;if(h){var p=c.indexOf(h);p>=0&&(c.splice(p,1),this._updateActivatedSurveys(c))}}else if(this._eventToSurveys.has(n)){eh.info("survey event name matched",{event:n,eventPayload:s,surveys:this._eventToSurveys.get(n)});var f=[];null==(l=this._instance)||l.getSurveys((s=>{f=s.filter((s=>{var o;return null==(o=this._eventToSurveys.get(n))?void 0:o.includes(s.id)}))}));var m=f.filter((o=>{var l,c=null==(l=o.conditions)||null==(l=l.events)||null==(l=l.values)?void 0:l.find((s=>s.name===n));return!!c&&(!c.propertyFilters||Object.entries(c.propertyFilters).every((n=>{var o,[l,c]=n,d=null==s||null==(o=s.properties)?void 0:o[l];if(ei(d)||ii(d))return!1;var h=[String(d)],p=Sf[c.operator];return p?p(c.values,h):(eh.warn("Unknown property comparison operator: "+c.operator),!1)})))}));this._updateActivatedSurveys(c.concat(m.map((n=>n.id))||[]))}}onAction(n){var s,o=(null==(s=this._instance)||null==(s=s.persistence)?void 0:s.props[$c])||[];this._actionToSurveys.has(n)&&this._updateActivatedSurveys(o.concat(this._actionToSurveys.get(n)||[]))}_updateActivatedSurveys(n){var s;eh.info("updating activated surveys",{activatedSurveys:n}),null==(s=this._instance)||null==(s=s.persistence)||s.register({[$c]:[...new Set(n)]})}getSurveys(){var n;return(null==(n=this._instance)||null==(n=n.persistence)?void 0:n.props[$c])||[]}getEventToSurveys(){return this._eventToSurveys}_getActionMatcher(){return this._actionMatcher}}class Lp{constructor(n){this._isSurveysEnabled=void 0,this._surveyManager=null,this._isFetchingSurveys=!1,this._isInitializingSurveys=!1,this._surveyCallbacks=[],this._instance=n,this._surveyEventReceiver=null}onRemoteConfig(n){if(!this._instance.config.disable_surveys){var s=n.surveys;if(ni(s))return eh.warn("Flags not loaded yet. Not loading surveys.");var o=hl(s);this._isSurveysEnabled=o?s.length>0:s,eh.info("flags response received, isSurveysEnabled: "+this._isSurveysEnabled),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var n=[],s=0;s<localStorage.length;s++){var o=localStorage.key(s);(null!=o&&o.startsWith(sh)||null!=o&&o.startsWith(oh))&&n.push(o)}n.forEach((n=>localStorage.removeItem(n)))}loadIfEnabled(){if(!this._surveyManager)if(this._isInitializingSurveys)eh.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)eh.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())eh.info("Not loading surveys in cookieless mode without consent.");else{var n=null==Hl?void 0:Hl.__PosthogExtensions__;if(n){if(!ei(this._isSurveysEnabled)||this._instance.config.advanced_enable_surveys){var s=this._isSurveysEnabled||this._instance.config.advanced_enable_surveys;this._isInitializingSurveys=!0;try{var o=n.generateSurveys;if(o)return void this._completeSurveyInitialization(o,s);var l=n.loadExternalDependency;if(!l)return void this._handleSurveyLoadError("PostHog loadExternalDependency extension not found.");l(this._instance,"surveys",(o=>{o||!n.generateSurveys?this._handleSurveyLoadError("Could not load surveys script",o):this._completeSurveyInitialization(n.generateSurveys,s)}))}catch(c){throw this._handleSurveyLoadError("Error initializing surveys",c),c}finally{this._isInitializingSurveys=!1}}}else eh.error("PostHog Extensions not found.")}}_completeSurveyInitialization(n,s){this._surveyManager=n(this._instance,s),this._surveyEventReceiver=new Fp(this._instance),eh.info("Surveys loaded successfully"),this._notifySurveyCallbacks({isLoaded:!0})}_handleSurveyLoadError(n,s){eh.error(n,s),this._notifySurveyCallbacks({isLoaded:!1,error:n})}onSurveysLoaded(n){return this._surveyCallbacks.push(n),this._surveyManager&&this._notifySurveyCallbacks({isLoaded:!0}),()=>{this._surveyCallbacks=this._surveyCallbacks.filter((s=>s!==n))}}getSurveys(n,s){if(void 0===s&&(s=!1),this._instance.config.disable_surveys)return eh.info("Disabled. Not loading surveys."),n([]);var o=this._instance.get_property(Bc);if(o&&!s)return n(o,{isLoaded:!0});if(this._isFetchingSurveys)return n([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this._isFetchingSurveys=!0,this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:s=>{var o;this._isFetchingSurveys=!1;var l=s.statusCode;if(200!==l||!s.json){var c="Surveys API could not be loaded, status: "+l;return eh.error(c),n([],{isLoaded:!1,error:c})}var d,h=s.json.surveys||[],p=h.filter((n=>Ta(n)&&(Ma(n)||Ra(n))));return p.length>0&&(null==(d=this._surveyEventReceiver)||d.register(p)),null==(o=this._instance.persistence)||o.register({[Bc]:h}),n(h,{isLoaded:!0})}})}catch(l){throw this._isFetchingSurveys=!1,l}}_notifySurveyCallbacks(n){for(var s of this._surveyCallbacks)try{if(!n.isLoaded)return s([],n);this.getSurveys(s)}catch(o){eh.error("Error in survey callback",o)}}getActiveMatchingSurveys(n,s){if(void 0===s&&(s=!1),!ni(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(n,s);eh.warn("init was not called")}_getSurveyById(n){var s=null;return this.getSurveys((o=>{var l;s=null!==(l=o.find((s=>s.id===n)))&&void 0!==l?l:null})),s}_checkSurveyEligibility(n){if(ni(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var s="string"==typeof n?this._getSurveyById(n):n;return s?this._surveyManager.checkSurveyEligibility(s):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(n){if(ni(this._surveyManager))return eh.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var s=this._checkSurveyEligibility(n);return{visible:s.eligible,disabledReason:s.reason}}canRenderSurveyAsync(n,s){return ni(this._surveyManager)?(eh.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((o=>{this.getSurveys((s=>{var l,c=null!==(l=s.find((s=>s.id===n)))&&void 0!==l?l:null;if(c){var d=this._checkSurveyEligibility(c);o({visible:d.eligible,disabledReason:d.reason})}else o({visible:!1,disabledReason:"Survey not found"})}),s)}))}renderSurvey(n,s){var o;if(ni(this._surveyManager))eh.warn("init was not called");else{var l="string"==typeof n?this._getSurveyById(n):n;if(null!=l&&l.id)if(ah.includes(l.type)){var c=null==Pl?void 0:Pl.querySelector(s);if(c)return null!=(o=l.appearance)&&o.surveyPopupDelaySeconds?(eh.info("Rendering survey "+l.id+" with delay of "+l.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout((()=>{var n,s;eh.info("Rendering survey "+l.id+" with delay of "+(null==(n=l.appearance)?void 0:n.surveyPopupDelaySeconds)+" seconds"),null==(s=this._surveyManager)||s.renderSurvey(l,c),eh.info("Survey "+l.id+" rendered")}),1e3*l.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(l,c);eh.warn("Survey element not found")}else eh.warn("Surveys of type "+l.type+" cannot be rendered in the app");else eh.warn("Survey not found")}}displaySurvey(n,s){var o;if(ni(this._surveyManager))eh.warn("init was not called");else{var l=this._getSurveyById(n);if(l){var c=l;if(null!=(o=l.appearance)&&o.surveyPopupDelaySeconds&&s.ignoreDelay&&(c=r({},l,{appearance:r({},l.appearance,{surveyPopupDelaySeconds:0})})),!1===s.ignoreConditions){var d=this.canRenderSurvey(l);if(!d.visible)return void eh.warn("Survey is not eligible to be displayed: ",d.disabledReason)}s.displayType!==Qd.Inline?this._surveyManager.handlePopoverSurvey(c):this.renderSurvey(c,s.selector)}else eh.warn("Survey not found")}}}var lm=Wl("[RateLimiter]");class Dp{constructor(n){var s,o;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=n=>{var s=n.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach((n=>{lm.info((n||"events")+" is quota limited."),this.serverLimits[n]=(new Date).getTime()+6e4}))}catch(o){return void lm.warn('could not rate limit - continuing. Error: "'+(null==o?void 0:o.message)+'"',{text:s})}},this.instance=n,this.captureEventsPerSecond=(null==(s=n.config.rate_limiting)?void 0:s.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(o=n.config.rate_limiting)?void 0:o.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(n){var s,o,l;void 0===n&&(n=!1);var c=(new Date).getTime(),d=null!==(s=null==(o=this.instance.persistence)?void 0:o.get_property(Wc))&&void 0!==s?s:{tokens:this.captureEventsBurstLimit,last:c};d.tokens+=(c-d.last)/1e3*this.captureEventsPerSecond,d.last=c,d.tokens>this.captureEventsBurstLimit&&(d.tokens=this.captureEventsBurstLimit);var h=d.tokens<1;return h||n||(d.tokens=Math.max(0,d.tokens-1)),!h||this.lastEventRateLimited||n||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=h,null==(l=this.instance.persistence)||l.set_property(Wc,d),{isRateLimited:h,remainingTokens:d.tokens}}isServerRateLimited(n){var s=this.serverLimits[n||"events"]||!1;return!1!==s&&(new Date).getTime()<s}}var cm=Wl("[RemoteConfig]");class qp{constructor(n){this._instance=n}get remoteConfig(){var n;return null==(n=Hl._POSTHOG_REMOTE_CONFIG)||null==(n=n[this._instance.config.token])?void 0:n.config}_loadRemoteConfigJs(n){var s,o;null!=(s=Hl.__PosthogExtensions__)&&s.loadExternalDependency?null==(o=Hl.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this._instance,"remote-config",(()=>n(this.remoteConfig))):(cm.error("PostHog Extensions not found. Cannot load remote config."),n())}_loadRemoteConfigJSON(n){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:s=>{n(s.json)}})}load(){try{if(this.remoteConfig)return cm.info("Using preloaded remote config",this.remoteConfig),void this._onRemoteConfig(this.remoteConfig);if(this._instance._shouldDisableFlags())return void cm.warn("Remote config is disabled. Falling back to local config.");this._loadRemoteConfigJs((n=>{if(!n)return cm.info("No config found after loading remote JS config. Falling back to JSON."),void this._loadRemoteConfigJSON((n=>{this._onRemoteConfig(n)}));this._onRemoteConfig(n)}))}catch(es){cm.error("Error loading remote config",es)}}_onRemoteConfig(n){n?this._instance.config.__preview_remote_config?(this._instance._onRemoteConfig(n),!1!==n.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):cm.info("__preview_remote_config is disabled. Logging config instead",n):cm.error("Failed to fetch remote config from PostHog.")}}var um=3e3;class Vp{constructor(n,s){this._isPaused=!0,this._queue=[],this._flushTimeoutMs=fi((null==s?void 0:s.flush_interval_ms)||um,250,5e3,zl.createLogger("flush interval"),um),this._sendRequest=n}enqueue(n){this._queue.push(n),this._flushTimeout||this._setFlushTimeout()}unload(){this._clearFlushTimeout();var n=this._queue.length>0?this._formatQueue():{},s=Object.values(n);[...s.filter((n=>0===n.url.indexOf("/e"))),...s.filter((n=>0!==n.url.indexOf("/e")))].map((n=>{this._sendRequest(r({},n,{transport:"sendBeacon"}))}))}enable(){this._isPaused=!1,this._setFlushTimeout()}_setFlushTimeout(){var n=this;this._isPaused||(this._flushTimeout=setTimeout((()=>{if(this._clearFlushTimeout(),this._queue.length>0){var s=this._formatQueue(),r2=function(){var l=s[o],c=(new Date).getTime();l.data&&hl(l.data)&&fn(l.data,(n=>{n.offset=Math.abs(n.timestamp-c),delete n.timestamp})),n._sendRequest(l)};for(var o in s)r2()}}),this._flushTimeoutMs))}_clearFlushTimeout(){clearTimeout(this._flushTimeout),this._flushTimeout=void 0}_formatQueue(){var n={};return fn(this._queue,(s=>{var o,l=s,c=(l?l.batchKey:null)||l.url;ei(n[c])&&(n[c]=r({},l,{data:[]})),null==(o=n[c].data)||o.push(l.data)})),this._queue=[],n}}var dm=["retriesPerformedSoFar"];class Wp{constructor(n){this._isPolling=!1,this._pollIntervalMs=3e3,this._queue=[],this._instance=n,this._queue=[],this._areWeOnline=!0,!ei(El)&&"onLine"in El.navigator&&(this._areWeOnline=El.navigator.onLine,this._onlineListener=()=>{this._areWeOnline=!0,this._flush()},this._offlineListener=()=>{this._areWeOnline=!1},En(El,"online",this._onlineListener),En(El,"offline",this._offlineListener))}get length(){return this._queue.length}retriableRequest(n){var{retriesPerformedSoFar:s}=n,o=i(n,dm);si(s)&&s>0&&(o.url=Mu(o.url,{retry_count:s})),this._instance._send_request(r({},o,{callback:n=>{200!==n.statusCode&&(n.statusCode<400||n.statusCode>=500)&&(null!=s?s:0)<10?this._enqueue(r({retriesPerformedSoFar:s},o)):null==o.callback||o.callback(n)}}))}_enqueue(n){var s=n.retriesPerformedSoFar||0;n.retriesPerformedSoFar=s+1;var o,l,c,d,h,p=(o=s,l=3e3*Math.pow(2,o),c=l/2,d=Math.min(18e5,l),h=(Math.random()-.5)*(d-c),Math.ceil(d+h)),f=Date.now()+p;this._queue.push({retryAt:f,requestOptions:n});var m="Enqueued failed request for retry in "+p;navigator.onLine||(m+=" (Browser is offline)"),zl.warn(m),this._isPolling||(this._isPolling=!0,this._poll())}_poll(){if(this._poller&&clearTimeout(this._poller),0===this._queue.length)return this._isPolling=!1,void(this._poller=void 0);this._poller=setTimeout((()=>{this._areWeOnline&&this._queue.length>0&&this._flush(),this._poll()}),this._pollIntervalMs)}_flush(){var n=Date.now(),s=[],o=this._queue.filter((o=>o.retryAt<n||(s.push(o),!1)));if(this._queue=s,o.length>0)for(var{requestOptions:l}of o)this.retriableRequest(l)}unload(){for(var{requestOptions:n}of(this._poller&&(clearTimeout(this._poller),this._poller=void 0),this._isPolling=!1,ei(El)||(this._onlineListener&&(El.removeEventListener("online",this._onlineListener),this._onlineListener=void 0),this._offlineListener&&(El.removeEventListener("offline",this._offlineListener),this._offlineListener=void 0)),this._queue))try{this._instance._send_request(r({},n,{transport:"sendBeacon"}))}catch(s){zl.error(s)}this._queue=[]}}class Up{constructor(n){this._updateScrollData=()=>{var n,s,o,l;this._context||(this._context={});var c=this.scrollElement(),d=this.scrollY(),h=c?Math.max(0,c.scrollHeight-c.clientHeight):0,p=d+((null==c?void 0:c.clientHeight)||0),f=(null==c?void 0:c.scrollHeight)||0;this._context.lastScrollY=Math.ceil(d),this._context.maxScrollY=Math.max(d,null!==(n=this._context.maxScrollY)&&void 0!==n?n:0),this._context.maxScrollHeight=Math.max(h,null!==(s=this._context.maxScrollHeight)&&void 0!==s?s:0),this._context.lastContentY=p,this._context.maxContentY=Math.max(p,null!==(o=this._context.maxContentY)&&void 0!==o?o:0),this._context.maxContentHeight=Math.max(f,null!==(l=this._context.maxContentHeight)&&void 0!==l?l:0)},this._instance=n}getContext(){return this._context}resetContext(){var n=this._context;return setTimeout(this._updateScrollData,0),n}startMeasuringScrollPosition(){En(El,"scroll",this._updateScrollData,{capture:!0}),En(El,"scrollend",this._updateScrollData,{capture:!0}),En(El,"resize",this._updateScrollData)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==El?void 0:El.document.documentElement;var n=hl(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var s of n){var o=null==El?void 0:El.document.querySelector(s);if(o)return o}}scrollY(){if(this._instance.config.scroll_root_selector){var n=this.scrollElement();return n&&n.scrollTop||0}return El&&(El.scrollY||El.pageYOffset||El.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var n=this.scrollElement();return n&&n.scrollLeft||0}return El&&(El.scrollX||El.pageXOffset||El.document.documentElement.scrollLeft)||0}}var Zp=n=>lp(null==n?void 0:n.config.mask_personal_data_properties,null==n?void 0:n.config.custom_personal_data_properties);class zp{constructor(n,s,o,l){this._onSessionIdCallback=n=>{var s=this._getStored();if(!s||s.sessionId!==n){var o={sessionId:n,props:this._sessionSourceParamGenerator(this._instance)};this._persistence.register({[qc]:o})}},this._instance=n,this._sessionIdManager=s,this._persistence=o,this._sessionSourceParamGenerator=l||Zp,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStored(){return this._persistence.props[qc]}getSetOnceProps(){var n,s=null==(n=this._getStored())?void 0:n.props;return s?"r"in s?up(s):{$referring_domain:s.referringDomain,$pathname:s.initialPathName,utm_source:s.utm_source,utm_campaign:s.utm_campaign,utm_medium:s.utm_medium,utm_content:s.utm_content,utm_term:s.utm_term}:{}}getSessionProps(){var n={};return fn(Sn(this.getSetOnceProps()),((s,o)=>{"$current_url"===o&&(o="url"),n["$session_entry_"+Ur(o)]=s})),n}}var hm=Wl("[SessionId]");class Gp{on(n,s){return this._eventEmitter.on(n,s)}constructor(n,s,o){var l;if(this._sessionIdChangedHandlers=[],this._beforeUnloadListener=void 0,this._eventEmitter=new Np,this._sessionHasBeenIdleTooLong=(n,s)=>Math.abs(n-s)>this.sessionTimeoutMs,!n.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if("always"===n.config.cookieless_mode)throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this._config=n.config,this._persistence=n.persistence,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=s||Ua,this._windowIdGenerator=o||Ua;var c=this._config.persistence_name||this._config.token,d=this._config.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*fi(d,60,36e3,hm.createLogger("session_idle_timeout_seconds"),1800),n.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this._resetIdleTimer(),this._window_id_storage_key="ph_"+c+"_window_id",this._primary_window_exists_storage_key="ph_"+c+"_primary_window_exists",this._canUseSessionStorage()){var h=Ng._parse(this._window_id_storage_key),p=Ng._parse(this._primary_window_exists_storage_key);h&&!p?this._windowId=h:Ng._remove(this._window_id_storage_key),Ng._set(this._primary_window_exists_storage_key,!0)}if(null!=(l=this._config.bootstrap)&&l.sessionID)try{var f=(()=>{var n=this._config.bootstrap.sessionID.replace(/-/g,"");if(32!==n.length)throw new Error("Not a valid UUID");if("7"!==n[12])throw new Error("Not a UUIDv7");return parseInt(n.substring(0,12),16)})();this._setSessionId(this._config.bootstrap.sessionID,(new Date).getTime(),f)}catch(m){hm.error("Invalid sessionID in bootstrap",m)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(n){return ei(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(n),this._sessionId&&n(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter((s=>s!==n))}}_canUseSessionStorage(){return"memory"!==this._config.persistence&&!this._persistence._disabled&&Ng._is_supported()}_setWindowId(n){n!==this._windowId&&(this._windowId=n,this._canUseSessionStorage()&&Ng._set(this._window_id_storage_key,n))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?Ng._parse(this._window_id_storage_key):null}_setSessionId(n,s,o){n===this._sessionId&&s===this._sessionActivityTimestamp&&o===this._sessionStartTimestamp||(this._sessionStartTimestamp=o,this._sessionActivityTimestamp=s,this._sessionId=n,this._persistence.register({[yc]:[s,n,o]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var n=this._persistence.props[yc];return hl(n)&&2===n.length&&n.push(n[0]),n||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}destroy(){clearTimeout(this._enforceIdleTimeout),this._enforceIdleTimeout=void 0,this._beforeUnloadListener&&El&&(El.removeEventListener("beforeunload",this._beforeUnloadListener,{capture:!1}),this._beforeUnloadListener=void 0),this._sessionIdChangedHandlers=[]}_listenToReloadWindow(){this._beforeUnloadListener=()=>{this._canUseSessionStorage()&&Ng._remove(this._primary_window_exists_storage_key)},En(El,"beforeunload",this._beforeUnloadListener,{capture:!1})}checkAndGetSessionAndWindowId(n,s){if(void 0===n&&(n=!1),void 0===s&&(s=null),"always"===this._config.cookieless_mode)throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var o=s||(new Date).getTime(),[l,c,d]=this._getSessionId(),h=this._getWindowId(),p=si(d)&&d>0&&Math.abs(o-d)>864e5,f=!1,m=!c,_=!m&&!n&&this._sessionHasBeenIdleTooLong(o,l);m||_||p?(c=this._sessionIdGenerator(),h=this._windowIdGenerator(),hm.info("new session ID generated",{sessionId:c,windowId:h,changeReason:{noSessionId:m,activityTimeout:_,sessionPastMaximumLength:p}}),d=o,f=!0):h||(h=this._windowIdGenerator(),f=!0);var y=0===l||!n||p?o:l,E=0===d?(new Date).getTime():d;return this._setWindowId(h),this._setSessionId(c,y,E),n||this._resetIdleTimer(),f&&this._sessionIdChangedHandlers.forEach((n=>n(c,h,f?{noSessionId:m,activityTimeout:_,sessionPastMaximumLength:p}:void 0))),{sessionId:c,windowId:h,sessionStartTimestamp:E,changeReason:f?{noSessionId:m,activityTimeout:_,sessionPastMaximumLength:p}:void 0,lastActivityTimestamp:l}}_resetIdleTimer(){clearTimeout(this._enforceIdleTimeout),this._enforceIdleTimeout=setTimeout((()=>{var[n]=this._getSessionId();if(this._sessionHasBeenIdleTooLong((new Date).getTime(),n)){var s=this._sessionId;this.resetSessionId(),this._eventEmitter.emit("forcedIdleReset",{idleSessionId:s})}}),1.1*this.sessionTimeoutMs)}}var pm=["$set_once","$set"],fm=Wl("[SiteApps]");class Kp{constructor(n){this._instance=n,this._bufferedInvocations=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}_eventCollector(n,s){if(s){var o=this.globalsForEvent(s);this._bufferedInvocations.push(o),this._bufferedInvocations.length>1e3&&(this._bufferedInvocations=this._bufferedInvocations.slice(10))}}get siteAppLoaders(){var n;return null==(n=Hl._POSTHOG_REMOTE_CONFIG)||null==(n=n[this._instance.config.token])?void 0:n.siteApps}init(){if(this.isEnabled){var n=this._instance._addCaptureHook(this._eventCollector.bind(this));this._stopBuffering=()=>{n(),this._bufferedInvocations=[],this._stopBuffering=void 0}}}globalsForEvent(n){var s,o,l,c,d,h,p;if(!n)throw new Error("Event payload is required");var f={},m=this._instance.get_property("$groups")||[],_=this._instance.get_property("$stored_group_properties")||{};for(var[y,E]of Object.entries(_))f[y]={id:m[y],type:y,properties:E};var{$set_once:M,$set:P}=n;return{event:r({},i(n,pm),{properties:r({},n.properties,P?{$set:r({},null!==(s=null==(o=n.properties)?void 0:o.$set)&&void 0!==s?s:{},P)}:{},M?{$set_once:r({},null!==(l=null==(c=n.properties)?void 0:c.$set_once)&&void 0!==l?l:{},M)}:{}),elements_chain:null!==(d=null==(h=n.properties)?void 0:h.$elements_chain)&&void 0!==d?d:"",distinct_id:null==(p=n.properties)?void 0:p.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:f}}setupSiteApp(n){var s=this.apps[n.id],r2=()=>{var o;!s.errored&&this._bufferedInvocations.length&&(fm.info("Processing "+this._bufferedInvocations.length+" events for site app with id "+n.id),this._bufferedInvocations.forEach((n=>null==s.processEvent?void 0:s.processEvent(n))),s.processedBuffer=!0),Object.values(this.apps).every((n=>n.processedBuffer||n.errored))&&(null==(o=this._stopBuffering)||o.call(this))},o=!1,n2=l=>{s.errored=!l,s.loaded=!0,fm.info("Site app with id "+n.id+" "+(l?"loaded":"errored")),o&&r2()};try{var{processEvent:l}=n.init({posthog:this._instance,callback:n=>{n2(n)}});l&&(s.processEvent=l),o=!0}catch(c){fm.error("Error while initializing PostHog app with config id "+n.id,c),n2(!1)}if(o&&s.loaded)try{r2()}catch(d){fm.error("Error while processing buffered events PostHog app with config id "+n.id,d),s.errored=!0}}_setupSiteApps(){var n=this.siteAppLoaders||[];for(var s of n)this.apps[s.id]={id:s.id,loaded:!1,errored:!1,processedBuffer:!1};for(var o of n)this.setupSiteApp(o)}_onCapturedEvent(n){if(0!==Object.keys(this.apps).length){var s=this.globalsForEvent(n);for(var o of Object.values(this.apps))try{null==o.processEvent||o.processEvent(s)}catch(l){fm.error("Error while processing event "+n.event+" for site app "+o.id,l)}}}onRemoteConfig(n){var s,o,l,c=this;if(null!=(s=this.siteAppLoaders)&&s.length)return this.isEnabled?(this._setupSiteApps(),void this._instance.on("eventCaptured",(n=>this._onCapturedEvent(n)))):void fm.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(o=this._stopBuffering)||o.call(this),null!=(l=n.siteApps)&&l.length)if(this.isEnabled){var s2=function(n){var s;Hl["__$$ph_site_app_"+n]=c._instance,null==(s=Hl.__PosthogExtensions__)||null==s.loadSiteApp||s.loadSiteApp(c._instance,h,(s=>{if(s)return fm.error("Error while initializing PostHog app with config id "+n,s)}))};for(var{id:d,url:h}of n.siteApps)s2(d)}else fm.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var Jp=function(n,s){if(!n)return!1;var o=n.userAgent;if(o&&Br(o,s))return!0;try{var l=null==n?void 0:n.userAgentData;if(null!=l&&l.brands&&l.brands.some((n=>Br(null==n?void 0:n.brand,s))))return!0}catch(c){}return!!n.webdriver},gm=function(n){return n.US="us",n.EU="eu",n.CUSTOM="custom",n}({}),mm="i.posthog.com";class tv{constructor(n){this._regionCache={},this.instance=n}get apiHost(){var n=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===n?"https://us.i.posthog.com":n}get flagsApiHost(){var n=this.instance.config.flags_api_host;return n?n.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var n,s=null==(n=this.instance.config.ui_host)?void 0:n.replace(/\/$/,"");return s||(s=this.apiHost.replace("."+mm,".posthog.com")),"https://app.posthog.com"===s?"https://us.posthog.com":s}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=gm.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=gm.EU:this._regionCache[this.apiHost]=gm.CUSTOM),this._regionCache[this.apiHost]}endpointFor(n,s){if(void 0===s&&(s=""),s&&(s="/"===s[0]?s:"/"+s),"ui"===n)return this.uiHost+s;if("flags"===n)return this.flagsApiHost+s;if(this.region===gm.CUSTOM)return this.apiHost+s;var o=mm+s;switch(n){case"assets":return"https://"+this.region+"-assets."+o;case"api":return"https://"+this.region+"."+o}}}var vm={icontains:(n,s)=>!!El&&s.href.toLowerCase().indexOf(n.toLowerCase())>-1,not_icontains:(n,s)=>!!El&&-1===s.href.toLowerCase().indexOf(n.toLowerCase()),regex:(n,s)=>!!El&&Pu(s.href,n),not_regex:(n,s)=>!!El&&!Pu(s.href,n),exact:(n,s)=>s.href===n,is_not:(n,s)=>s.href!==n};class iv{constructor(n){var s=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(n){void 0===n&&(n=!1),s.getWebExperiments((n=>{iv._logInfo("retrieved web experiments from the server"),s._flagToExperiments=new Map,n.forEach((n=>{if(n.feature_flag_key){var o;s._flagToExperiments&&(iv._logInfo("setting flag key ",n.feature_flag_key," to web experiment ",n),null==(o=s._flagToExperiments)||o.set(n.feature_flag_key,n));var l=s._instance.getFeatureFlag(n.feature_flag_key);ti(l)&&n.variants[l]&&s._applyTransforms(n.name,l,n.variants[l].transforms)}else if(n.variants)for(var c in n.variants){var d=n.variants[c];iv._matchesTestVariant(d)&&s._applyTransforms(n.name,c,d.transforms)}}))}),n)},this._instance=n,this._instance.onFeatureFlags((n=>{this.onFeatureFlags(n)}))}onFeatureFlags(n){if(this._is_bot())iv._logInfo("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(ni(this._flagToExperiments))return this._flagToExperiments=new Map,this.loadIfEnabled(),void this.previewWebExperiment();iv._logInfo("applying feature flags",n),n.forEach((n=>{var s;if(this._flagToExperiments&&null!=(s=this._flagToExperiments)&&s.has(n)){var o,l=this._instance.getFeatureFlag(n),c=null==(o=this._flagToExperiments)?void 0:o.get(n);l&&null!=c&&c.variants[l]&&this._applyTransforms(c.name,l,c.variants[l].transforms)}}))}}previewWebExperiment(){var n=iv.getWindowLocation();if(null!=n&&n.search){var s=Mn(null==n?void 0:n.search,"__experiment_id"),o=Mn(null==n?void 0:n.search,"__experiment_variant");s&&o&&(iv._logInfo("previewing web experiments "+s+" && "+o),this.getWebExperiments((n=>{this._showPreviewWebExperiment(parseInt(s),o,n)}),!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(n,s,o){if(this._instance.config.disable_web_experiments&&!o)return n([]);var l=this._instance.get_property("$web_experiments");if(l&&!s)return n(l);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(200!==s.statusCode||!s.json)return n([]);var o=s.json.experiments||[];return n(o)}})}_showPreviewWebExperiment(n,s,o){var l=o.filter((s=>s.id===n));l&&l.length>0&&(iv._logInfo("Previewing web experiment ["+l[0].name+"] with variant ["+s+"]"),this._applyTransforms(l[0].name,s,l[0].variants[s].transforms))}static _matchesTestVariant(n){return!ni(n.conditions)&&iv._matchUrlConditions(n)&&iv._matchUTMConditions(n)}static _matchUrlConditions(n){var s;if(ni(n.conditions)||ni(null==(s=n.conditions)?void 0:s.url))return!0;var o,l,c,d=iv.getWindowLocation();return!!d&&(null==(o=n.conditions)||!o.url||vm[null!==(l=null==(c=n.conditions)?void 0:c.urlMatchType)&&void 0!==l?l:"icontains"](n.conditions.url,d))}static getWindowLocation(){return null==El?void 0:El.location}static _matchUTMConditions(n){var s;if(ni(n.conditions)||ni(null==(s=n.conditions)?void 0:s.utm))return!0;var o=ip();if(o.utm_source){var l,c,d,h,p,f,m,_,y=null==(l=n.conditions)||null==(l=l.utm)||!l.utm_campaign||(null==(c=n.conditions)||null==(c=c.utm)?void 0:c.utm_campaign)==o.utm_campaign,E=null==(d=n.conditions)||null==(d=d.utm)||!d.utm_source||(null==(h=n.conditions)||null==(h=h.utm)?void 0:h.utm_source)==o.utm_source,M=null==(p=n.conditions)||null==(p=p.utm)||!p.utm_medium||(null==(f=n.conditions)||null==(f=f.utm)?void 0:f.utm_medium)==o.utm_medium,P=null==(m=n.conditions)||null==(m=m.utm)||!m.utm_term||(null==(_=n.conditions)||null==(_=_.utm)?void 0:_.utm_term)==o.utm_term;return y&&M&&P&&E}return!1}static _logInfo(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];zl.info("[WebExperiments] "+n,o)}_applyTransforms(n,s,o){this._is_bot()?iv._logInfo("Refusing to render web experiment since the viewer is a likely bot"):"control"!==s?o.forEach((o=>{if(o.selector){var l;iv._logInfo("applying transform of variant "+s+" for experiment "+n+" ",o);var c=null==(l=document)?void 0:l.querySelectorAll(o.selector);null==c||c.forEach((n=>{var s=n;o.html&&(s.innerHTML=o.html),o.css&&s.setAttribute("style",o.css)}))}})):iv._logInfo("Control variants leave the page unmodified.")}_is_bot(){return Ol&&this._instance?Jp(Ol,this._instance.config.custom_blocked_useragents):void 0}}var _m=Wl("[PostHog ExternalIntegrations]"),ym={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class ov{constructor(n){this._instance=n}_loadScript(n,s){var o;null==(o=Hl.__PosthogExtensions__)||null==o.loadExternalDependency||o.loadExternalDependency(this._instance,n,(n=>{if(n)return _m.error("failed to load script",n);s()}))}startIfEnabledOrStop(){var n=this,t2=function(s){var l,c,d;!o||null!=(l=Hl.__PosthogExtensions__)&&null!=(l=l.integrations)&&l[s]||n._loadScript(ym[s],(()=>{var o;null==(o=Hl.__PosthogExtensions__)||null==(o=o.integrations)||null==(o=o[s])||o.start(n._instance)})),!o&&null!=(c=Hl.__PosthogExtensions__)&&null!=(c=c.integrations)&&c[s]&&(null==(d=Hl.__PosthogExtensions__)||null==(d=d.integrations)||null==(d=d[s])||d.stop())};for(var[s,o]of Object.entries(null!==(l=this._instance.config.integrations)&&void 0!==l?l:{})){var l;t2(s)}}}var bm="[SessionRecording]",wm=Wl(bm);class uv{get started(){var n;return!(null==(n=this._lazyLoadedSessionRecording)||!n.isStarted)}get status(){return this._lazyLoadedSessionRecording?this._lazyLoadedSessionRecording.status:this._receivedFlags&&!this._isRecordingEnabled?"disabled":"lazy_loading"}constructor(n){if(this._forceAllowLocalhostNetworkCapture=!1,this._receivedFlags=!1,this._persistFlagsOnSessionListener=void 0,this._instance=n,!this._instance.sessionManager)throw wm.error("started without valid sessionManager"),new Error(bm+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw new Error(bm+' cannot be used with cookieless_mode="always"')}get _isRecordingEnabled(){var n,s=!(null==(n=this._instance.get_property(_c))||!n.enabled),o=!this._instance.config.disable_session_recording,l=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return El&&s&&o&&!l}startIfEnabledOrStop(n){var s;if(!this._isRecordingEnabled||null==(s=this._lazyLoadedSessionRecording)||!s.isStarted){var o=!ei(Object.assign)&&!ei(Array.from);this._isRecordingEnabled&&o?(this._lazyLoadAndStart(n),wm.info("starting")):this.stopRecording()}}_lazyLoadAndStart(n){var s,o,l;this._isRecordingEnabled&&(null!=Hl&&null!=(s=Hl.__PosthogExtensions__)&&null!=(s=s.rrweb)&&s.record&&null!=(o=Hl.__PosthogExtensions__)&&o.initSessionRecording?this._onScriptLoaded(n):null==(l=Hl.__PosthogExtensions__)||null==l.loadExternalDependency||l.loadExternalDependency(this._instance,this._scriptName,(s=>{if(s)return wm.error("could not load recorder",s);this._onScriptLoaded(n)})))}stopRecording(){var n,s;null==(n=this._persistFlagsOnSessionListener)||n.call(this),this._persistFlagsOnSessionListener=void 0,null==(s=this._lazyLoadedSessionRecording)||s.stop()}_resetSampling(){var n;null==(n=this._instance.persistence)||n.unregister(Ic)}_persistRemoteConfig(n){if(this._instance.persistence){var s,o,l=this._instance.persistence,s2=()=>{var s=!1===n.sessionRecording?void 0:n.sessionRecording,o=null==s?void 0:s.sampleRate,c=ni(o)?null:parseFloat(o);ni(c)&&this._resetSampling();var d=null==s?void 0:s.minimumDurationMilliseconds;l.register({[_c]:r({enabled:!!s},s,{networkPayloadCapture:r({capturePerformance:n.capturePerformance},null==s?void 0:s.networkPayloadCapture),canvasRecording:{enabled:null==s?void 0:s.recordCanvas,fps:null==s?void 0:s.canvasFps,quality:null==s?void 0:s.canvasQuality},sampleRate:c,minimumDurationMilliseconds:ei(d)?null:d,endpoint:null==s?void 0:s.endpoint,triggerMatchType:null==s?void 0:s.triggerMatchType,masking:null==s?void 0:s.masking,urlTriggers:null==s?void 0:s.urlTriggers})})};s2(),null==(s=this._persistFlagsOnSessionListener)||s.call(this),this._persistFlagsOnSessionListener=null==(o=this._instance.sessionManager)?void 0:o.onSessionId(s2)}}onRemoteConfig(n){"sessionRecording"in n?!1!==n.sessionRecording?(this._persistRemoteConfig(n),this._receivedFlags=!0,this.startIfEnabledOrStop()):this._receivedFlags=!0:wm.info("skipping remote config with no sessionRecording",n)}log(n,s){var o;void 0===s&&(s="log"),null!=(o=this._lazyLoadedSessionRecording)&&o.log?this._lazyLoadedSessionRecording.log(n,s):wm.warn("log called before recorder was ready")}get _scriptName(){var n,s,o=null==(n=this._instance)||null==(n=n.persistence)?void 0:n.get_property(_c);return(null==o||null==(s=o.scriptConfig)?void 0:s.script)||"lazy-recorder"}_onScriptLoaded(n){var s,o;if(null==(s=Hl.__PosthogExtensions__)||!s.initSessionRecording)throw Error("Called on script loaded before session recording is available");this._lazyLoadedSessionRecording||(this._lazyLoadedSessionRecording=null==(o=Hl.__PosthogExtensions__)?void 0:o.initSessionRecording(this._instance),this._lazyLoadedSessionRecording._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this._lazyLoadedSessionRecording.start(n)}onRRwebEmit(n){var s;null==(s=this._lazyLoadedSessionRecording)||null==s.onRRwebEmit||s.onRRwebEmit(n)}overrideLinkedFlag(){var n,s;this._lazyLoadedSessionRecording||null==(s=this._instance.persistence)||s.register({$replay_override_linked_flag:!0}),null==(n=this._lazyLoadedSessionRecording)||n.overrideLinkedFlag()}overrideSampling(){var n,s;this._lazyLoadedSessionRecording||null==(s=this._instance.persistence)||s.register({$replay_override_sampling:!0}),null==(n=this._lazyLoadedSessionRecording)||n.overrideSampling()}overrideTrigger(n){var s,o;this._lazyLoadedSessionRecording||null==(o=this._instance.persistence)||o.register({["url"===n?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),null==(s=this._lazyLoadedSessionRecording)||s.overrideTrigger(n)}get sdkDebugProperties(){var n;return(null==(n=this._lazyLoadedSessionRecording)?void 0:n.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(n,s){var o;return!(null==(o=this._lazyLoadedSessionRecording)||!o.tryAddCustomEvent(n,s))}}var Sm={},dv=()=>{},Cm="posthog",km=!yf&&-1===(null==Ul?void 0:Ul.indexOf("MSIE"))&&-1===(null==Ul?void 0:Ul.indexOf("Mozilla")),vv=n=>{var s;return{api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:In(null==Pl?void 0:Pl.location),persistence:"localStorage+cookie",persistence_name:"",loaded:dv,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!(n&&n>="2025-05-24")||"history_change",capture_pageleave:"if_capture_pageview",defaults:null!=n?n:"unset",__preview_deferred_init_extensions:!1,debug:Ll&&ti(null==Ll?void 0:Ll.search)&&-1!==Ll.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==El||null==(s=El.location)?void 0:s.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:n&&n>="2025-11-30"?{strictMinimumDuration:!0}:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var s="Bad HTTP status: "+n.statusCode+" "+n.text;zl.error(s)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:um},error_tracking:{},_onCapture:dv,__preview_eager_load_replay:!1}},fv=n=>{var s={};ei(n.process_person)||(s.person_profiles=n.process_person),ei(n.xhr_headers)||(s.request_headers=n.xhr_headers),ei(n.cookie_name)||(s.persistence_name=n.cookie_name),ei(n.disable_cookie)||(s.disable_persistence=n.disable_cookie),ei(n.store_google)||(s.save_campaign_params=n.store_google),ei(n.verbose)||(s.debug=n.verbose);var o=gn({},s,n);return hl(n.property_blacklist)&&(ei(n.property_denylist)?o.property_denylist=n.property_blacklist:hl(n.property_denylist)?o.property_denylist=[...n.property_blacklist,...n.property_denylist]:zl.error("Invalid value for property_denylist config: "+n.property_denylist)),o};class gv{constructor(){this.__forceAllowLocalhost=!1}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(n){zl.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=n}}class _v{get decideEndpointWasHit(){var n,s;return null!==(n=null==(s=this.featureFlags)?void 0:s.hasLoadedFlags)&&void 0!==n&&n}get flagsEndpointWasHit(){var n,s;return null!==(n=null==(s=this.featureFlags)?void 0:s.hasLoadedFlags)&&void 0!==n&&n}constructor(){this.webPerformance=new gv,this._personProcessingSetOncePropertiesSent=!1,this.version=jl.LIB_VERSION,this._internalEventEmitter=new Np,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=vv(),this.SentryIntegration=Uh,this.sentryIntegration=n=>function(n,s){var o=Wh(n,s);return{name:Ug,processEvent:n=>o(n)}}(this,n),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._visibilityStateListener=null,this._initialPersonProfilesConfig=null,this._cachedPersonProperties=null,this.featureFlags=new Mp(this),this.toolbar=new Yh(this),this.scrollManager=new Up(this),this.pageViewManager=new yp(this),this.surveys=new Lp(this),this.experiments=new iv(this),this.exceptions=new rd(this),this.rateLimiter=new Dp(this),this.requestRouter=new tv(this),this.consent=new Nh(this),this.externalIntegrations=new ov(this),this.people={set:(n,s,o)=>{var l=ti(n)?{[n]:s}:n;this.setPersonProperties(l),null==o||o({})},set_once:(n,s,o)=>{var l=ti(n)?{[n]:s}:n;this.setPersonProperties(void 0,l),null==o||o({})}},this.on("eventCaptured",(n=>zl.info('send "'+(null==n?void 0:n.event)+'"',n)))}init(n,s,o){if(o&&o!==Cm){var l,c=null!==(l=Sm[o])&&void 0!==l?l:new _v;return c._init(n,s,o),Sm[o]=c,Sm[Cm][o]=c,c}return this._init(n,s,o)}_init(n,s,o){var l;if(void 0===s&&(s={}),ei(n)||ri(n))return zl.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},s.debug=this._checkLocalStorageForDebug(s.debug),this._originalUserConfig=s,this._triggered_notifs=[],s.person_profiles&&(this._initialPersonProfilesConfig=s.person_profiles),this.set_config(gn({},vv(s.defaults),fv(s),{name:o,token:n})),this.config.on_xhr_error&&zl.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:Xp.GZipJS;var c=this._is_persistence_disabled();this.persistence=new Ap(this.config,c),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new Ap(r({},this.config,{persistence:"sessionStorage"}),c);var d=r({},this.persistence.props),h=r({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this._requestQueue=new Vp((n=>this._send_retriable_request(n)),this.config.request_queue_config),this._retryQueue=new Wp(this),this.__request_queue=[];var p="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(p||(this.sessionManager=new Gp(this),this.sessionPropsManager=new zp(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(zl.info("Deferring extension initialization to improve startup performance"),setTimeout((()=>{this._initExtensions(p)}),0)):(zl.info("Initializing extensions synchronously"),this._initExtensions(p)),jl.DEBUG=jl.DEBUG||this.config.debug,jl.DEBUG&&zl.info("Starting in debug mode",{this:this,config:s,thisC:r({},this.config),p:d,s:h}),void 0!==(null==(l=s.bootstrap)?void 0:l.distinctID)){var f,m,_=this.config.get_device_id(Ua()),y=null!=(f=s.bootstrap)&&f.isIdentifiedID?_:s.bootstrap.distinctID;this.persistence.set_property(Hc,null!=(m=s.bootstrap)&&m.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:y})}if(this._hasBootstrappedFeatureFlags()){var E,M,P=Object.keys((null==(E=s.bootstrap)?void 0:E.featureFlags)||{}).filter((n=>{var o;return!(null==(o=s.bootstrap)||null==(o=o.featureFlags)||!o[n])})).reduce(((n,o)=>{var l;return n[o]=(null==(l=s.bootstrap)||null==(l=l.featureFlags)?void 0:l[o])||!1,n}),{}),L=Object.keys((null==(M=s.bootstrap)?void 0:M.featureFlagPayloads)||{}).filter((n=>P[n])).reduce(((n,o)=>{var l,c;return null!=(l=s.bootstrap)&&null!=(l=l.featureFlagPayloads)&&l[o]&&(n[o]=null==(c=s.bootstrap)||null==(c=c.featureFlagPayloads)?void 0:c[o]),n}),{});this.featureFlags.receivedFeatureFlags({featureFlags:P,featureFlagPayloads:L})}if(p)this.register_once({distinct_id:nu,$device_id:null},"");else if(!this.get_distinct_id()){var N=this.config.get_device_id(Ua());this.register_once({distinct_id:N,$device_id:N},""),this.persistence.set_property(Hc,"anonymous")}return En(El,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),s.segment?function(n,s){var o=n.config.segment;if(!o)return s();!function(n,s){var o=n.config.segment;if(!o)return s();var i2=o=>{var i3=()=>o.anonymousId()||Ua();n.config.get_device_id=i3,o.id()&&(n.register({distinct_id:o.id(),$device_id:i3()}),n.persistence.set_property(Hc,"identified")),s()},l=o.user();"then"in l&&Xr(l.then)?l.then((n=>i2(n))):i2(l)}(n,(()=>{o.register((n=>{Promise&&Promise.resolve||$g.warn("This browser does not have Promise support, and can not use the segment integration");var t3=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===n.get_distinct_id()||($g.info("No userId set, resetting PostHog"),n.reset()),s.event.userId&&s.event.userId!==n.get_distinct_id()&&($g.info("UserId set, identifying with PostHog"),n.identify(s.event.userId));var l=n.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},l,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:n=>t3(n,n.event.event),page:n=>t3(n,"$pageview"),identify:n=>t3(n,"$identify"),screen:n=>t3(n,"$screen")}})(n)).then((()=>{s()}))}))}(this,(()=>this._loaded())):this._loaded(),Xr(this.config._onCapture)&&this.config._onCapture!==dv&&(zl.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(n=>this.config._onCapture(n.event,n)))),this.config.ip&&zl.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}_initExtensions(n){var s=performance.now();this.historyAutocapture=new qh(this),this.historyAutocapture.startIfEnabled();var o=[];o.push((()=>{new Kh(this).startIfEnabledOrStop()})),o.push((()=>{var n;this.siteApps=new Kp(this),null==(n=this.siteApps)||n.init()})),n||o.push((()=>{this.sessionRecording=new uv(this),this.sessionRecording.startIfEnabledOrStop()})),this.config.disable_scroll_properties||o.push((()=>{this.scrollManager.startMeasuringScrollPosition()})),o.push((()=>{this.autocapture=new vh(this),this.autocapture.startIfEnabled()})),o.push((()=>{this.surveys.loadIfEnabled()})),o.push((()=>{this.heatmaps=new mp(this),this.heatmaps.startIfEnabled()})),o.push((()=>{this.webVitalsAutocapture=new fp(this)})),o.push((()=>{this.exceptionObserver=new Hh(this),this.exceptionObserver.startIfEnabled()})),o.push((()=>{this.deadClicksAutocapture=new Oh(this,Lh),this.deadClicksAutocapture.startIfEnabled()})),o.push((()=>{if(this._pendingRemoteConfig){var n=this._pendingRemoteConfig;this._pendingRemoteConfig=void 0,this._onRemoteConfig(n)}})),this._processInitTaskQueue(o,s)}_processInitTaskQueue(n,s){for(;n.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-s>=30&&n.length>0)return void setTimeout((()=>{this._processInitTaskQueue(n,s)}),0);var o=n.shift();if(o)try{o()}catch(c){zl.error("Error initializing extension:",c)}}var l=Math.round(performance.now()-s);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:l}),this.config.__preview_deferred_init_extensions&&zl.info("PostHog extensions initialized ("+l+"ms)")}_onRemoteConfig(n){var s,o,l,c,d,h,p,f;if(!Pl||!Pl.body)return zl.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this._onRemoteConfig(n)}),500);this.config.__preview_deferred_init_extensions&&(this._pendingRemoteConfig=n),this.compression=void 0,n.supportedCompression&&!this.config.disable_compression&&(this.compression=$r(n.supportedCompression,Xp.GZipJS)?Xp.GZipJS:$r(n.supportedCompression,Xp.Base64)?Xp.Base64:void 0),null!=(s=n.analytics)&&s.endpoint&&(this.analyticsDefaultEndpoint=n.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:"identified_only"}),null==(o=this.siteApps)||o.onRemoteConfig(n),null==(l=this.sessionRecording)||l.onRemoteConfig(n),null==(c=this.autocapture)||c.onRemoteConfig(n),null==(d=this.heatmaps)||d.onRemoteConfig(n),this.surveys.onRemoteConfig(n),null==(h=this.webVitalsAutocapture)||h.onRemoteConfig(n),null==(p=this.exceptionObserver)||p.onRemoteConfig(n),this.exceptions.onRemoteConfig(n),null==(f=this.deadClicksAutocapture)||f.onRemoteConfig(n)}_loaded(){try{this.config.loaded(this)}catch(es){zl.critical("`loaded` function failed",es)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this._captureInitialPageview()}),1),new qp(this).load(),this.featureFlags.flags()}_start_queue_if_opted_in(){var n;this.is_capturing()&&this.config.request_batching&&(null==(n=this._requestQueue)||n.enable())}_dom_loaded(){this.is_capturing()&&vn(this.__request_queue,(n=>this._send_retriable_request(n))),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var n,s;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null==(n=this._requestQueue)||n.unload(),null==(s=this._retryQueue)||s.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(n){this.__loaded&&(km?this.__request_queue.push(n):this.rateLimiter.isServerRateLimited(n.batchKey)||(n.transport=n.transport||this.config.api_transport,n.url=Mu(n.url,{ip:this.config.ip?1:0}),n.headers=r({},this.config.request_headers),n.compression="best-available"===n.compression?this.compression:n.compression,n.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(n.disableTransport=["sendBeacon"]),n.fetchOptions=n.fetchOptions||this.config.fetch_options,(n=>{var s,o,l,c=r({},n);c.timeout=c.timeout||6e4,c.url=Mu(c.url,{_:(new Date).getTime().toString(),ver:jl.LIB_VERSION,compression:c.compression});var d=null!==(s=c.transport)&&void 0!==s?s:"fetch",h=wf.filter((n=>!c.disableTransport||!n.transport||!c.disableTransport.includes(n.transport))),p=null!==(o=null==(l=kn(h,(n=>n.transport===d)))?void 0:l.method)&&void 0!==o?o:h[0].method;if(!p)throw new Error("No available transport method");p(c)})(r({},n,{callback:s=>{var o,l;this.rateLimiter.checkForLimiting(s),s.statusCode>=400&&(null==(o=(l=this.config).on_request_error)||o.call(l,s)),null==n.callback||n.callback(s)}}))))}_send_retriable_request(n){this._retryQueue?this._retryQueue.retriableRequest(n):this._send_request(n)}_execute_array(n){var s,o=[],l=[],c=[];vn(n,(n=>{n&&(s=n[0],hl(s)?c.push(n):Xr(n)?n.call(this):hl(n)&&"alias"===s?o.push(n):hl(n)&&-1!==s.indexOf("capture")&&Xr(this[s])?c.push(n):l.push(n))}));var s2=function(n,s){vn(n,(function(n){if(hl(n[0])){var o=s;fn(n,(function(n){o=o[n[0]].apply(o,n.slice(1))}))}else this[n[0]].apply(this,n.slice(1))}),s)};s2(o,this),s2(l,this),s2(c,this)}_hasBootstrappedFeatureFlags(){var n,s;return(null==(n=this.config.bootstrap)?void 0:n.featureFlags)&&Object.keys(null==(s=this.config.bootstrap)?void 0:s.featureFlags).length>0||!1}push(n){this._execute_array([n])}capture(n,s,o){var l;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(this.is_capturing())if(!ei(n)&&ti(n)){var c=!this.config.opt_out_useragent_filter&&this._is_bot();if(!c||this.config.__preview_capture_bot_pageviews){var d=null!=o&&o.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==d||!d.isRateLimited){null!=s&&s.$current_url&&!ti(null==s?void 0:s.$current_url)&&(zl.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==s||delete s.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var h=new Date,p=(null==o?void 0:o.timestamp)||h,f=Ua(),m={uuid:f,event:n,properties:this.calculateEventProperties(n,s||{},p,f)};"$pageview"===n&&this.config.__preview_capture_bot_pageviews&&c&&(m.event="$bot_pageview",m.properties.$browser_type="bot"),d&&(m.properties.$lib_rate_limit_remaining_tokens=d.remainingTokens),(null==o?void 0:o.$set)&&(m.$set=null==o?void 0:o.$set);var _=this._calculate_set_once_properties(null==o?void 0:o.$set_once);if(_&&(m.$set_once=_),(m=function(n,s){return o=n,l=n=>ti(n)&&!ii(s)?n.slice(0,s):n,c=new Set,function e3(n,s){return n!==Object(n)?l?l(n):n:c.has(n)?void 0:(c.add(n),hl(n)?(o=[],vn(n,(n=>{o.push(e3(n))}))):(o={},fn(n,((n,s)=>{c.has(n)||(o[s]=e3(n,s))}))),o);var o}(o);var o,l,c}(m,null!=o&&o._noTruncate?null:this.config.properties_string_max_length)).timestamp=p,ei(null==o?void 0:o.timestamp)||(m.properties.$event_time_override_provided=!0,m.properties.$event_time_override_system_time=h),n===Xd.DISMISSED||n===Xd.SENT){var y=null==s?void 0:s[Kd.SURVEY_ID],E=null==s?void 0:s[Kd.SURVEY_ITERATION];La({id:y,current_iteration:E}),m.$set=r({},m.$set,{[Pa({id:y,current_iteration:E},n===Xd.SENT?"responded":"dismissed")]:!0})}var M=r({},m.properties.$set,m.$set);if(Qr(M)||this.setPersonPropertiesForFlags(M),!ni(this.config.before_send)){var P=this._runBeforeSend(m);if(!P)return;m=P}this._internalEventEmitter.emit("eventCaptured",m);var L={method:"POST",url:null!==(l=null==o?void 0:o._url)&&void 0!==l?l:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:m,compression:"best-available",batchKey:null==o?void 0:o._batchKey};return!this.config.request_batching||o&&(null==o||!o._batchKey)||null!=o&&o.send_instantly?this._send_retriable_request(L):this._requestQueue.enqueue(L),m}zl.critical("This capture call is ignored due to client rate limiting.")}}else zl.error("No event name provided to posthog.capture")}else zl.uninitializedWarning("posthog.capture")}_addCaptureHook(n){return this.on("eventCaptured",(s=>n(s.event,s)))}calculateEventProperties(n,s,o,l,c){if(o=o||new Date,!this.persistence||!this.sessionPersistence)return s;var d=c?void 0:this.persistence.remove_event_timer(n),h=r({},s);if(h.token=this.config.token,h.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(h.$cookieless_mode=!0),"$snapshot"===n){var p=r({},this.persistence.properties(),this.sessionPersistence.properties());return h.distinct_id=p.distinct_id,(!ti(h.distinct_id)&&!si(h.distinct_id)||ri(h.distinct_id))&&zl.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),h}var f,m=function(n,s){if(!Ul)return{};var o,l=n?_n([],Gg,s||[]):[],[c,d]=function(n){for(var s=0;s<jp.length;s++){var[o,l]=jp[s],c=o.exec(n),d=c&&(Xr(l)?l(c,n):l);if(d)return d}return["",""]}(Ul);return gn(Sn({$os:c,$os_version:d,$browser:Dl(Ul,navigator.vendor),$device:Vl(Ul),$device_type:$l(Ul),$timezone:cp(),$timezone_offset:dp()}),{$current_url:Rn(null==Ll?void 0:Ll.href,l,Zg),$host:null==Ll?void 0:Ll.host,$pathname:null==Ll?void 0:Ll.pathname,$raw_user_agent:Ul.length>1e3?Ul.substring(0,997)+"...":Ul,$browser_version:ql(Ul,navigator.vendor),$browser_language:op(),$browser_language_prefix:(o=op(),"string"==typeof o?o.split("-")[0]:void 0),$screen_height:null==El?void 0:El.screen.height,$screen_width:null==El?void 0:El.screen.width,$viewport_height:null==El?void 0:El.innerHeight,$viewport_width:null==El?void 0:El.innerWidth,$lib:"web",$lib_version:jl.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:_,windowId:y}=this.sessionManager.checkAndGetSessionAndWindowId(c,o.getTime());h.$session_id=_,h.$window_id=y}this.sessionPropsManager&&gn(h,this.sessionPropsManager.getSessionProps());try{var E;this.sessionRecording&&gn(h,this.sessionRecording.sdkDebugProperties),h.$sdk_debug_retry_queue_size=null==(E=this._retryQueue)?void 0:E.length}catch(N){h.$sdk_debug_error_capturing_properties=String(N)}if(this.requestRouter.region===gm.CUSTOM&&(h.$lib_custom_api_host=this.config.api_host),f="$pageview"!==n||c?"$pageleave"!==n||c?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(o):this.pageViewManager.doPageView(o,l),h=gn(h,f),"$pageview"===n&&Pl&&(h.title=Pl.title),!ei(d)){var M=o.getTime()-d;h.$duration=parseFloat((M/1e3).toFixed(3))}Ul&&this.config.opt_out_useragent_filter&&(h.$browser_type=this._is_bot()?"bot":"browser"),(h=gn({},m,this.persistence.properties(),this.sessionPersistence.properties(),h)).$is_identified=this._isIdentified(),hl(this.config.property_denylist)?fn(this.config.property_denylist,(function(n){delete h[n]})):zl.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var P=this.config.sanitize_properties;P&&(zl.error("sanitize_properties is deprecated. Use before_send instead"),h=P(h,n));var L=this._hasPersonProcessing();return h.$process_person_profile=L,L&&!c&&this._requirePersonProcessing("_calculate_event_properties"),h}_calculate_set_once_properties(n){var s;if(!this.persistence||!this._hasPersonProcessing())return n;if(this._personProcessingSetOncePropertiesSent)return n;var o=this.persistence.get_initial_props(),l=null==(s=this.sessionPropsManager)?void 0:s.getSetOnceProps(),c=gn({},o,l||{},n||{}),d=this.config.sanitize_properties;return d&&(zl.error("sanitize_properties is deprecated. Use before_send instead"),c=d(c,"$set_once")),this._personProcessingSetOncePropertiesSent=!0,Qr(c)?void 0:c}register(n,s){var o;null==(o=this.persistence)||o.register(n,s)}register_once(n,s,o){var l;null==(l=this.persistence)||l.register_once(n,s,o)}register_for_session(n){var s;null==(s=this.sessionPersistence)||s.register(n)}unregister(n){var s;null==(s=this.persistence)||s.unregister(n)}unregister_for_session(n){var s;null==(s=this.sessionPersistence)||s.unregister(n)}_register_single(n,s){this.register({[n]:s})}getFeatureFlag(n,s){return this.featureFlags.getFeatureFlag(n,s)}getFeatureFlagPayload(n){var s=this.featureFlags.getFeatureFlagPayload(n);try{return JSON.parse(s)}catch(o){return s}}isFeatureEnabled(n,s){return this.featureFlags.isFeatureEnabled(n,s)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(n,s,o){this.featureFlags.updateEarlyAccessFeatureEnrollment(n,s,o)}getEarlyAccessFeatures(n,s,o){return void 0===s&&(s=!1),this.featureFlags.getEarlyAccessFeatures(n,s,o)}on(n,s){return this._internalEventEmitter.on(n,s)}onFeatureFlags(n){return this.featureFlags.onFeatureFlags(n)}onSurveysLoaded(n){return this.surveys.onSurveysLoaded(n)}onSessionId(n){var s,o;return null!==(s=null==(o=this.sessionManager)?void 0:o.onSessionId(n))&&void 0!==s?s:()=>{}}getSurveys(n,s){void 0===s&&(s=!1),this.surveys.getSurveys(n,s)}getActiveMatchingSurveys(n,s){void 0===s&&(s=!1),this.surveys.getActiveMatchingSurveys(n,s)}renderSurvey(n,s){this.surveys.renderSurvey(n,s)}displaySurvey(n,s){void 0===s&&(s=uh),this.surveys.displaySurvey(n,s)}canRenderSurvey(n){return this.surveys.canRenderSurvey(n)}canRenderSurveyAsync(n,s){return void 0===s&&(s=!1),this.surveys.canRenderSurveyAsync(n,s)}identify(n,s,o){if(!this.__loaded||!this.persistence)return zl.uninitializedWarning("posthog.identify");if(si(n)&&(n=n.toString(),zl.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),n)if(["distinct_id","distinctid"].includes(n.toLowerCase()))zl.critical('The string "'+n+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(n!==nu){if(this._requirePersonProcessing("posthog.identify")){var l=this.get_distinct_id();if(this.register({$user_id:n}),!this.get_property("$device_id")){var c=l;this.register_once({$had_persisted_distinct_id:!0,$device_id:c},"")}n!==l&&n!==this.get_property(Xl)&&(this.unregister(Xl),this.register({distinct_id:n}));var d="anonymous"===(this.persistence.get_property(Hc)||"anonymous");n!==l&&d?(this.persistence.set_property(Hc,"identified"),this.setPersonPropertiesForFlags(r({},o||{},s||{}),!1),this.capture("$identify",{distinct_id:n,$anon_distinct_id:l},{$set:s||{},$set_once:o||{}}),this._cachedPersonProperties=Fu(n,s,o),this.featureFlags.setAnonymousDistinctId(l)):(s||o)&&this.setPersonProperties(s,o),n!==l&&(this.reloadFeatureFlags(),this.unregister(Uc))}}else zl.critical('The string "'+nu+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else zl.error("Unique user id has not been set in posthog.identify")}setPersonProperties(n,s){if((n||s)&&this._requirePersonProcessing("posthog.setPersonProperties")){var o=Fu(this.get_distinct_id(),n,s);this._cachedPersonProperties!==o?(this.setPersonPropertiesForFlags(r({},s||{},n||{})),this.capture("$set",{$set:n||{},$set_once:s||{}}),this._cachedPersonProperties=o):zl.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(n,s,o){if(n&&s){if(this._requirePersonProcessing("posthog.group")){var l=this.getGroups();l[n]!==s&&this.resetGroupPropertiesForFlags(n),this.register({$groups:r({},l,{[n]:s})}),o&&(this.capture("$groupidentify",{$group_type:n,$group_key:s,$group_set:o}),this.setGroupPropertiesForFlags({[n]:o})),l[n]===s||o||this.reloadFeatureFlags()}}else zl.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(n,s){void 0===s&&(s=!0),this.featureFlags.setPersonPropertiesForFlags(n,s)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(n,s){void 0===s&&(s=!0),this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(n,s)}resetGroupPropertiesForFlags(n){this.featureFlags.resetGroupPropertiesForFlags(n)}reset(n){var s,o,l,c;if(zl.info("reset"),!this.__loaded)return zl.uninitializedWarning("posthog.reset");var d=this.get_property("$device_id");if(this.consent.reset(),null==(s=this.persistence)||s.clear(),null==(o=this.sessionPersistence)||o.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(l=this.persistence)||l.set_property(Hc,"anonymous"),null==(c=this.sessionManager)||c.resetSessionId(),this._cachedPersonProperties=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:nu,$device_id:null},"");else{var h=this.config.get_device_id(Ua());this.register_once({distinct_id:h,$device_id:n?h:d},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var n,s;return null!==(n=null==(s=this.sessionManager)?void 0:s.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==n?n:""}get_session_replay_url(n){if(!this.sessionManager)return"";var{sessionId:s,sessionStartTimestamp:o}=this.sessionManager.checkAndGetSessionAndWindowId(!0),l=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+s);if(null!=n&&n.withTimestamp&&o){var c,d=null!==(c=n.timestampLookBack)&&void 0!==c?c:10;if(!o)return l;l+="?t="+Math.max(Math.floor(((new Date).getTime()-o)/1e3)-d,0)}return l}alias(n,s){return n===this.get_property(Zl)?(zl.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(ei(s)&&(s=this.get_distinct_id()),n!==s?(this._register_single(Xl,n),this.capture("$create_alias",{alias:n,distinct_id:s})):(zl.warn("alias matches current distinct_id - skipping api call."),this.identify(n),-1)):void 0}set_config(n){var s=r({},this.config);if(Jr(n)){var o,l,c,d,h;gn(this.config,fv(n));var p=this._is_persistence_disabled();null==(o=this.persistence)||o.update_config(this.config,s,p),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new Ap(r({},this.config,{persistence:"sessionStorage"}),p);var f=this._checkLocalStorageForDebug(this.config.debug);oi(f)&&(this.config.debug=f),oi(this.config.debug)&&(this.config.debug?(jl.DEBUG=!0,Ag._is_supported()&&Ag._set("ph_debug","true"),zl.info("set_config",{config:n,oldConfig:s,newConfig:r({},this.config)})):(jl.DEBUG=!1,Ag._is_supported()&&Ag._remove("ph_debug"))),null==(l=this.sessionRecording)||l.startIfEnabledOrStop(),null==(c=this.autocapture)||c.startIfEnabled(),null==(d=this.heatmaps)||d.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence(),null==(h=this.externalIntegrations)||h.startIfEnabledOrStop()}}startSessionRecording(n){var s,o,l,c,d,h=!0===n,p={sampling:h||!(null==n||!n.sampling),linked_flag:h||!(null==n||!n.linked_flag),url_trigger:h||!(null==n||!n.url_trigger),event_trigger:h||!(null==n||!n.event_trigger)};Object.values(p).some(Boolean)&&(null==(s=this.sessionManager)||s.checkAndGetSessionAndWindowId(),p.sampling&&(null==(o=this.sessionRecording)||o.overrideSampling()),p.linked_flag&&(null==(l=this.sessionRecording)||l.overrideLinkedFlag()),p.url_trigger&&(null==(c=this.sessionRecording)||c.overrideTrigger("url")),p.event_trigger&&(null==(d=this.sessionRecording)||d.overrideTrigger("event")));this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var n;return!(null==(n=this.sessionRecording)||!n.started)}captureException(n,s){var o=new Error("PostHog syntheticException"),l=this.exceptions.buildProperties(n,{handled:!0,syntheticException:o});return this.exceptions.sendExceptionEvent(r({},l,s))}loadToolbar(n){return this.toolbar.loadToolbar(n)}get_property(n){var s;return null==(s=this.persistence)?void 0:s.props[n]}getSessionProperty(n){var s;return null==(s=this.sessionPersistence)?void 0:s.props[n]}toString(){var n,s=null!==(n=this.config.name)&&void 0!==n?n:Cm;return s!==Cm&&(s=Cm+"."+s),s}_isIdentified(){var n,s;return"identified"===(null==(n=this.persistence)?void 0:n.get_property(Hc))||"identified"===(null==(s=this.sessionPersistence)?void 0:s.get_property(Hc))}_hasPersonProcessing(){var n,s;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&Qr(this.getGroups())&&(null==(n=this.persistence)||null==(n=n.props)||!n[Xl])&&(null==(s=this.persistence)||null==(s=s.props)||!s[tu]))}_shouldCapturePageleave(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(n){return"never"===this.config.person_profiles?(zl.error(n+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(tu,!0),!0)}_is_persistence_disabled(){if("always"===this.config.cookieless_mode)return!0;var n=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||n&&!!s}_sync_opt_out_with_persistence(){var n,s,o,l,c=this._is_persistence_disabled();return(null==(n=this.persistence)?void 0:n._disabled)!==c&&(null==(o=this.persistence)||o.set_disabled(c)),(null==(s=this.sessionPersistence)?void 0:s._disabled)!==c&&(null==(l=this.sessionPersistence)||l.set_disabled(c)),c}opt_in_capturing(n){var s,o;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),null==(s=this.sessionManager)||s.destroy(),this.sessionManager=new Gp(this),this.persistence&&(this.sessionPropsManager=new zp(this,this.sessionManager,this.persistence)),this.sessionRecording=new uv(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),this._start_queue_if_opted_in(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),(ei(null==n?void 0:n.captureEventName)||null!=n&&n.captureEventName)&&this.capture(null!==(o=null==n?void 0:n.captureEventName)&&void 0!==o?o:"$opt_in",null==n?void 0:n.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()):zl.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var n,s;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this._sync_opt_out_with_persistence(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:nu,$device_id:null}),null==(n=this.sessionManager)||n.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(s=this.sessionRecording)||s.stopRecording(),this.sessionRecording=void 0,this._captureInitialPageview())):zl.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var n=this.consent.consent;return n===Fg.GRANTED?"granted":n===Fg.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return Ol?Jp(Ol,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){Pl&&("visible"===Pl.visibilityState?this._initialPageviewCaptured||(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:Pl.title},{send_instantly:!0}),this._visibilityStateListener&&(Pl.removeEventListener("visibilitychange",this._visibilityStateListener),this._visibilityStateListener=null)):this._visibilityStateListener||(this._visibilityStateListener=this._captureInitialPageview.bind(this),En(Pl,"visibilitychange",this._visibilityStateListener)))}debug(n){!1===n?(null==El||El.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(null==El||El.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}_shouldDisableFlags(){var n,s,o,l,c,d,h=this._originalUserConfig||{};return"advanced_disable_flags"in h?!!h.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(zl.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(o="advanced_disable_decide",l=zl,c=(s="advanced_disable_flags")in(n=h)&&!ei(n[s]),d=o in n&&!ei(n[o]),c?n[s]:!!d&&(l&&l.warn("Config field '"+o+"' is deprecated. Please use '"+s+"' instead. The old field will be removed in a future major version."),n[o]))}_runBeforeSend(n){if(ni(this.config.before_send))return n;var s=hl(this.config.before_send)?this.config.before_send:[this.config.before_send],o=n;for(var l of s){if(o=l(o),ni(o)){var c="Event '"+n.event+"' was rejected in beforeSend function";return li(n.event)?zl.warn(c+". This can cause unexpected behavior."):zl.info(c),null}o.properties&&!Qr(o.properties)||zl.warn("Event '"+n.event+"' has no properties after beforeSend function, this is likely an error.")}return o}getPageViewId(){var n;return null==(n=this.pageViewManager._currentPageview)?void 0:n.pageViewId}captureTraceFeedback(n,s){this.capture("$ai_feedback",{$ai_trace_id:String(n),$ai_feedback_text:s})}captureTraceMetric(n,s,o){this.capture("$ai_metric",{$ai_trace_id:String(n),$ai_metric_name:s,$ai_metric_value:String(o)})}_checkLocalStorageForDebug(n){var s=oi(n)&&!n,o=Ag._is_supported()&&"true"===Ag._get("ph_debug");return!s&&(!!o||n)}}!function(n,s){for(var o=0;o<s.length;o++)n.prototype[s[o]]=bn(n.prototype[s[o]])}(_v,["identify"]);var xm,Im=(xm=Sm[Cm]=new _v,function(){function e2(){e2.done||(e2.done=!0,km=!1,fn(Sm,(function(n){n._dom_loaded()})))}null!=Pl&&Pl.addEventListener?"complete"===Pl.readyState?e2():En(Pl,"DOMContentLoaded",e2,{capture:!1}):El&&zl.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),xm);!function(){function t2(n,s,o,l,c,d,h){try{var p=n[d](h),f=p.value}catch(m){return void o(m)}p.done?s(f):Promise.resolve(f).then(l,c)}function e2(n){return function(){var s=this,o=arguments;return new Promise((function(l,c){var d=n.apply(s,o);function a22(n){t2(d,l,c,a22,h22,"next",n)}function h22(n){t2(d,l,c,a22,h22,"throw",n)}a22(void 0)}))}}function r2(){return r2=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var l in o)({}).hasOwnProperty.call(o,l)&&(n[l]=o[l])}return n},r2.apply(null,arguments)}function i2(n,s){if(null==n)return{};var o={};for(var l in n)if({}.hasOwnProperty.call(n,l)){if(-1!==s.indexOf(l))continue;o[l]=n[l]}return o}var n,s,o=["inputs"],l=["inputId"],c=["inputs"],d=["inputId"],h=["type"],p=Object.defineProperty,c2=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?p(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d},f=Object.defineProperty,d2=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?f(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d},m=((s=m||{})[s.Document=0]="Document",s[s.DocumentType=1]="DocumentType",s[s.Element=2]="Element",s[s.Text=3]="Text",s[s.CDATA=4]="CDATA",s[s.Comment=5]="Comment",s),_={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},y={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},E={};function w2(n){if(E[n])return E[n];var s,o,l,c,d=(s=n,((c=null==(l=null==(o=null==globalThis?void 0:globalThis.Zone)?void 0:o.__symbol__)?void 0:l.call(o,s))&&globalThis[c]?globalThis[c]:void 0)||globalThis[n]),h=d.prototype,p=n in _?_[n]:void 0,f=Boolean(p&&p.every((n=>{var s,o;return Boolean(null==(o=null==(s=Object.getOwnPropertyDescriptor(h,n))?void 0:s.get)?void 0:o.toString().includes("[native code]"))}))),m=n in y?y[n]:void 0,M=Boolean(m&&m.every((n=>{var s;return"function"==typeof h[n]&&(null==(s=h[n])?void 0:s.toString().includes("[native code]"))})));if(f&&M)return E[n]=d.prototype,d.prototype;try{var P=document.createElement("iframe");document.body.appendChild(P);var L=P.contentWindow;if(!L)return d.prototype;var N=L[n].prototype;return document.body.removeChild(P),N?E[n]=N:h}catch(s){return h}}var M={};function b2(n,s,o){var l,c=n+"."+String(o);if(M[c])return M[c].call(s);var d=w2(n),h=null==(l=Object.getOwnPropertyDescriptor(d,o))?void 0:l.get;return h?(M[c]=h,h.call(s)):s[o]}var C2_childNodes=function(n){return b2("Node",n,"childNodes")},C2_parentNode=function(n){return b2("Node",n,"parentNode")},C2_parentElement=function(n){return b2("Node",n,"parentElement")},C2_textContent=function(n){return b2("Node",n,"textContent")},C2_host=function(n){return n&&"host"in n?b2("ShadowRoot",n,"host"):null},C2_shadowRoot=function(n){return n&&"shadowRoot"in n?b2("Element",n,"shadowRoot"):null};function I2(n){return n.nodeType===n.ELEMENT_NODE}function M2(n){var s=n&&"host"in n&&"mode"in n&&C2_host(n)||null;return Boolean(s&&"shadowRoot"in s&&C2_shadowRoot(s)===n)}function R2(n){return"[object ShadowRoot]"===Object.prototype.toString.call(n)}function x2(n){try{var s=n.rules||n.cssRules;if(!s)return null;var o=n.href;return!o&&n.ownerNode&&(o=n.ownerNode.baseURI),(l=Array.from(s,(n=>_2(n,o))).join("")).includes(" background-clip: text;")&&!l.includes(" -webkit-background-clip: text;")&&(l=l.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),l}catch(c){return null}var l}function _2(n,s){var o;if("styleSheet"in n){var l;try{l=x2(n.styleSheet)||function(n){var{cssText:s}=n;if(s.split('"').length<3)return s;var o=["@import","url("+JSON.stringify(n.href)+")"];return""===n.layerName?o.push("layer"):n.layerName&&o.push("layer("+n.layerName+")"),n.supportsText&&o.push("supports("+n.supportsText+")"),n.media.length&&o.push(n.media.mediaText),o.join(" ")+";"}(n)}catch(h){l=n.cssText}try{if(l&&(null==(o=n.styleSheet)?void 0:o.href))return U2(l,n.styleSheet.href)}catch(p){}return l}var c,d=n.cssText;return function(n){return"selectorText"in n}(n)&&n.selectorText.includes(":")&&(c=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,d=d.replace(c,"$1\\$2")),s?U2(d,s):d}class O2{constructor(){d2(this,"idNodeMap",new Map),d2(this,"nodeMetaMap",new WeakMap)}getId(n){var s;if(!n)return-1;var o=null==(s=this.getMeta(n))?void 0:s.id;return null!=o?o:-1}getNode(n){return this.idNodeMap.get(n)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(n){return this.nodeMetaMap.get(n)||null}removeNodeFromMap(n){var s=this.getId(n);this.idNodeMap.delete(s),n.childNodes&&n.childNodes.forEach((n=>this.removeNodeFromMap(n)))}has(n){return this.idNodeMap.has(n)}hasNode(n){return this.nodeMetaMap.has(n)}add(n,s){var o=s.id;this.idNodeMap.set(o,n),this.nodeMetaMap.set(n,s)}replace(n,s){var o=this.getNode(n);if(o){var l=this.nodeMetaMap.get(o);l&&this.nodeMetaMap.set(s,l)}this.idNodeMap.set(n,s)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function T2(n){var{element:s,maskInputOptions:o,tagName:l,type:c,value:d,maskInputFn:h}=n,p=d||"",f=c&&E2(c);return(o[l.toLowerCase()]||f&&o[f])&&(p=h?h(p,s):"*".repeat(p.length)),p}function E2(n){return n.toLowerCase()}var P="__rrweb_original__";function B2(n){var s=n.type;return n.hasAttribute("data-rr-is-password")?"password":s?E2(s):null}function L2(n,s){var o,l;try{l=new URL(n,null!=s?s:window.location.href)}catch(d){return null}var c=l.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(o=null==c?void 0:c[1])&&void 0!==o?o:null}var L=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,N=/^(?:[a-z+]+:)?\/\//i,F=/^www\..*/i,D=/^(data:)([^,]*),(.*)/i;function U2(n,s){return(n||"").replace(L,((n,o,l,c,d,h)=>{var p,f=l||d||h,m=o||c||"";if(!f)return n;if(N.test(f)||F.test(f))return"url("+m+f+m+")";if(D.test(f))return"url("+m+f+m+")";if("/"===f[0])return"url("+m+(((p=s).indexOf("//")>-1?p.split("/").slice(0,3).join("/"):p.split("/")[0]).split("?")[0]+f)+m+")";var _=s.split("/"),y=f.split("/");for(var E of(_.pop(),y))"."!==E&&(".."===E?_.pop():_.push(E));return"url("+m+_.join("/")+m+")"}))}var B,$,U=1,H=new RegExp("[^a-z0-9-_:]");function H2(){return U++}var z=/^[^ \t\n\r\u000c]+/,q=/^[, \t\n\r\u000c]+/,V=new WeakMap;function X2(n,s){return s&&""!==s.trim()?Z2(n,s):s}function K2(n){return Boolean("svg"===n.tagName||n.ownerSVGElement)}function Z2(n,s){var o=V.get(n);if(o||(o=n.createElement("a"),V.set(n,o)),s){if(s.startsWith("blob:")||s.startsWith("data:"))return s}else s="";return o.setAttribute("href",s),o.href}function Q2(n,s,o,l){return l?"src"===o||"href"===o&&("use"!==s||"#"!==l[0])||"xlink:href"===o&&"#"!==l[0]?X2(n,l):"background"!==o||"table"!==s&&"td"!==s&&"th"!==s?"srcset"===o?function(n,s){if(""===s.trim())return s;var o=0;function i3(n){var l,c=n.exec(s.substring(o));return c?(l=c[0],o+=l.length,l):""}for(var l=[];i3(q),!(o>=s.length);){var c=i3(z);if(","===c.slice(-1))c=X2(n,c.substring(0,c.length-1)),l.push(c);else{var d="";c=X2(n,c);for(var h=!1;;){var p=s.charAt(o);if(""===p){l.push((c+d).trim());break}if(h)")"===p&&(h=!1);else{if(","===p){o+=1,l.push((c+d).trim());break}"("===p&&(h=!0)}d+=p,o+=1}}}return l.join(", ")}(n,l):"style"===o?U2(l,Z2(n)):"object"===s&&"data"===o?X2(n,l):l:X2(n,l):l}function tt2(n,s,o){return("video"===n||"audio"===n)&&"autoplay"===s}function et2(n,s,o){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return!!o&&et2(C2_parentNode(n),s,o);for(var l=n.classList.length;l--;){var c=n.classList[l];if(s.test(c))return!0}return!!o&&et2(C2_parentNode(n),s,o)}function rt2(n,s,o,l){var c;if(I2(n)){if(!C2_childNodes(c=n).length)return!1}else{if(null===C2_parentElement(n))return!1;c=C2_parentElement(n)}try{if("string"==typeof s){if(l){if(c.closest("."+s))return!0}else if(c.classList.contains(s))return!0}else if(et2(c,s,l))return!0;if(o)if(l){if(c.closest(o))return!0}else if(c.matches(o))return!0}catch(d){}return!1}function nt2(n,s){return Array.from(n.styleSheets).find((n=>n.href===s))}function st2(n){return null==n?"":n.toLowerCase()}function ot2(n,s){var{doc:o,mirror:l,blockClass:c,blockSelector:d,maskTextClass:h,maskTextSelector:p,skipChild:f=!1,inlineStylesheet:_=!0,maskInputOptions:y={},maskTextFn:E,maskInputFn:M,slimDOMOptions:L,dataURLOptions:N={},inlineImages:F=!1,recordCanvas:D=!1,onSerialize:U,onIframeLoad:z,iframeLoadTimeout:q=5e3,onStylesheetLoad:V,stylesheetLoadTimeout:Z=5e3,keepIframeSrcFn:ee=()=>!1,newlyAddedElement:ne=!1}=s,{needsMask:ie}=s,{preserveWhiteSpace:se=!0}=s;ie||(ie=rt2(n,h,p,void 0===ie));var oe,le=function(n,s){var{doc:o,mirror:l,blockClass:c,blockSelector:d,needsMask:h,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:_,maskInputFn:y,dataURLOptions:E={},inlineImages:M,recordCanvas:L,keepIframeSrcFn:N,newlyAddedElement:F=!1}=s,D=function(n,s){if(s.hasNode(n)){var o=s.getId(n);return 1===o?void 0:o}}(o,l);switch(n.nodeType){case n.DOCUMENT_NODE:return"CSS1Compat"!==n.compatMode?{type:m.Document,childNodes:[],compatMode:n.compatMode}:{type:m.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:m.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:D};case n.ELEMENT_NODE:return function(n,s){for(var o,{doc:l,blockClass:c,blockSelector:d,inlineStylesheet:h,maskInputOptions:p={},maskInputFn:f,dataURLOptions:_={},inlineImages:y,recordCanvas:E,keepIframeSrcFn:M,newlyAddedElement:L=!1,rootId:N}=s,F=function(n,s,o){try{if("string"==typeof s){if(n.classList.contains(s))return!0}else for(var l=n.classList.length;l--;){var c=n.classList[l];if(s.test(c))return!0}if(o)return n.matches(o)}catch(d){}return!1}(n,c,d),D=function(n){if(n instanceof HTMLFormElement)return"form";var s=E2(n.tagName);return H.test(s)?"div":s}(n),U={},z=n.attributes.length,q=0;q<z;q++){var V=n.attributes[q];tt2(D,V.name,V.value)||(U[V.name]=Q2(l,D,E2(V.name),V.value))}if("link"===D&&h){var Z=n.href;if(Z){var ee=nt2(l,Z);!ee&&Z.includes(".css")&&(ee=nt2(l,window.location.origin+"/"+Z.replace(window.location.href,"")));var ne=null;ee&&(ne=x2(ee)),ne&&(delete U.rel,delete U.href,U._cssText=ne)}}if("style"===D&&n.sheet&&!(n.innerText||C2_textContent(n)||"").trim().length){var ie=x2(n.sheet);ie&&(U._cssText=ie)}if("input"===D||"textarea"===D||"select"===D){var se=n.value,oe=n.checked;"radio"!==U.type&&"checkbox"!==U.type&&"submit"!==U.type&&"button"!==U.type&&se?U.value=T2({element:n,type:B2(n),tagName:D,value:se,maskInputOptions:p,maskInputFn:f}):oe&&(U.checked=oe)}if("option"===D&&(n.selected&&!p.select?U.selected=!0:delete U.selected),"dialog"===D&&n.open)try{U.rr_open_mode=n.matches("dialog:modal")?"modal":"non-modal"}catch(Fe){U.rr_open_mode="modal",U.ph_rr_could_not_detect_modal=!0}if("canvas"===D&&E)if("2d"===n.__context)(function(n){var s=n.getContext("2d");if(!s)return!0;for(var o=0;o<n.width;o+=50)for(var l=0;l<n.height;l+=50){var c=s.getImageData,d=P in c?c[P]:c;if(new Uint32Array(d.call(s,o,l,Math.min(50,n.width-o),Math.min(50,n.height-l)).data.buffer).some((n=>0!==n)))return!1}return!0})(n)||(U.rr_dataURL=n.toDataURL(_.type,_.quality));else if(!("__context"in n)){var le=n.toDataURL(_.type,_.quality),ce=l.createElement("canvas");ce.width=n.width,ce.height=n.height,le!==ce.toDataURL(_.type,_.quality)&&(U.rr_dataURL=le)}if("img"===D&&y){B||(B=l.createElement("canvas"),$=B.getContext("2d"));var pe=n,fe=pe.currentSrc||pe.getAttribute("src")||"<unknown-src>",ge=pe.crossOrigin,U22=()=>{pe.removeEventListener("load",U22);try{B.width=pe.naturalWidth,B.height=pe.naturalHeight,$.drawImage(pe,0,0),U.rr_dataURL=B.toDataURL(_.type,_.quality)}catch(Fe){if("anonymous"!==pe.crossOrigin)return pe.crossOrigin="anonymous",void(pe.complete&&0!==pe.naturalWidth?U22():pe.addEventListener("load",U22));console.warn("Cannot inline img src="+fe+"! Error: "+Fe)}"anonymous"===pe.crossOrigin&&(ge?U.crossOrigin=ge:pe.removeAttribute("crossorigin"))};pe.complete&&0!==pe.naturalWidth?U22():pe.addEventListener("load",U22)}if("audio"===D||"video"===D){var be=U;be.rr_mediaState=n.paused?"paused":"played",be.rr_mediaCurrentTime=n.currentTime,be.rr_mediaPlaybackRate=n.playbackRate,be.rr_mediaMuted=n.muted,be.rr_mediaLoop=n.loop,be.rr_mediaVolume=n.volume}if(L||(n.scrollLeft&&(U.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(U.rr_scrollTop=n.scrollTop)),F){var{width:Oe,height:Ne}=n.getBoundingClientRect();U={class:U.class,rr_width:Oe+"px",rr_height:Ne+"px"}}"iframe"!==D||M(U.src)||(n.contentDocument||(U.rr_src=U.src),delete U.src);try{customElements.get(D)&&(o=!0)}catch(Fe){}return{type:m.Element,tagName:D,attributes:U,childNodes:[],isSVG:K2(n)||void 0,needBlock:F,rootId:N,isCustom:o}}(n,{doc:o,blockClass:c,blockSelector:d,inlineStylesheet:p,maskInputOptions:f,maskInputFn:y,dataURLOptions:E,inlineImages:M,recordCanvas:L,keepIframeSrcFn:N,newlyAddedElement:F,rootId:D});case n.TEXT_NODE:return function(n,s){var o,{needsMask:l,maskTextFn:c,rootId:d}=s,h=C2_parentNode(n),p=h&&h.tagName,f=C2_textContent(n),_="STYLE"===p||void 0,y="SCRIPT"===p||void 0;if(_&&f){try{n.nextSibling||n.previousSibling||(null==(o=h.sheet)?void 0:o.cssRules)&&(f=x2(h.sheet))}catch(E){console.warn("Cannot get CSS styles from text's parentNode. Error: "+E,n)}f=U2(f,Z2(s.doc))}return y&&(f="SCRIPT_PLACEHOLDER"),!_&&!y&&f&&l&&(f=c?c(f,C2_parentElement(n)):f.replace(/[\S]/g,"*")),{type:m.Text,textContent:f||"",isStyle:_,rootId:d}}(n,{doc:o,needsMask:h,maskTextFn:_,rootId:D});case n.CDATA_SECTION_NODE:return{type:m.CDATA,textContent:"",rootId:D};case n.COMMENT_NODE:return{type:m.Comment,textContent:C2_textContent(n)||"",rootId:D};default:return!1}}(n,{doc:o,mirror:l,blockClass:c,blockSelector:d,needsMask:ie,inlineStylesheet:_,maskInputOptions:y,maskTextFn:E,maskInputFn:M,dataURLOptions:N,inlineImages:F,recordCanvas:D,keepIframeSrcFn:ee,newlyAddedElement:ne});if(!le)return console.warn(n,"not serialized"),null;oe=l.hasNode(n)?l.getId(n):!function(n,s){if(s.comment&&n.type===m.Comment)return!0;if(n.type===m.Element){if(s.script&&("script"===n.tagName||"link"===n.tagName&&("preload"===n.attributes.rel&&"script"===n.attributes.as||"modulepreload"===n.attributes.rel)||"link"===n.tagName&&"prefetch"===n.attributes.rel&&"string"==typeof n.attributes.href&&"js"===L2(n.attributes.href)))return!0;if(s.headFavicon&&("link"===n.tagName&&"shortcut icon"===n.attributes.rel||"meta"===n.tagName&&(st2(n.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===st2(n.attributes.name)||"icon"===st2(n.attributes.rel)||"apple-touch-icon"===st2(n.attributes.rel)||"shortcut icon"===st2(n.attributes.rel))))return!0;if("meta"===n.tagName){if(s.headMetaDescKeywords&&st2(n.attributes.name).match(/^description|keywords$/))return!0;if(s.headMetaSocial&&(st2(n.attributes.property).match(/^(og|twitter|fb):/)||st2(n.attributes.name).match(/^(og|twitter):/)||"pinterest"===st2(n.attributes.name)))return!0;if(s.headMetaRobots&&("robots"===st2(n.attributes.name)||"googlebot"===st2(n.attributes.name)||"bingbot"===st2(n.attributes.name)))return!0;if(s.headMetaHttpEquiv&&void 0!==n.attributes["http-equiv"])return!0;if(s.headMetaAuthorship&&("author"===st2(n.attributes.name)||"generator"===st2(n.attributes.name)||"framework"===st2(n.attributes.name)||"publisher"===st2(n.attributes.name)||"progid"===st2(n.attributes.name)||st2(n.attributes.property).match(/^article:/)||st2(n.attributes.property).match(/^product:/)))return!0;if(s.headMetaVerification&&("google-site-verification"===st2(n.attributes.name)||"yandex-verification"===st2(n.attributes.name)||"csrf-token"===st2(n.attributes.name)||"p:domain_verify"===st2(n.attributes.name)||"verify-v1"===st2(n.attributes.name)||"verification"===st2(n.attributes.name)||"shopify-checkout-api-token"===st2(n.attributes.name)))return!0}}return!1}(le,L)&&(se||le.type!==m.Text||le.isStyle||le.textContent.replace(/^\s+|\s+$/gm,"").length)?H2():-2;var ce=Object.assign(le,{id:oe});if(l.add(n,ce),-2===oe)return null;U&&U(n);var pe=!f;if(ce.type===m.Element){pe=pe&&!ce.needBlock,delete ce.needBlock;var fe=C2_shadowRoot(n);fe&&R2(fe)&&(ce.isShadowHost=!0)}if((ce.type===m.Document||ce.type===m.Element)&&pe){L.headWhitespace&&ce.type===m.Element&&"head"===ce.tagName&&(se=!1);var ge={doc:o,mirror:l,blockClass:c,blockSelector:d,needsMask:ie,maskTextClass:h,maskTextSelector:p,skipChild:f,inlineStylesheet:_,maskInputOptions:y,maskTextFn:E,maskInputFn:M,slimDOMOptions:L,dataURLOptions:N,inlineImages:F,recordCanvas:D,preserveWhiteSpace:se,onSerialize:U,onIframeLoad:z,iframeLoadTimeout:q,onStylesheetLoad:V,stylesheetLoadTimeout:Z,keepIframeSrcFn:ee};if(ce.type===m.Element&&"textarea"===ce.tagName&&void 0!==ce.attributes.value);else for(var be of Array.from(C2_childNodes(n))){var Oe=ot2(be,ge);Oe&&ce.childNodes.push(Oe)}var Ne=null;if(I2(n)&&(Ne=C2_shadowRoot(n)))for(var Fe of Array.from(C2_childNodes(Ne))){var De=ot2(Fe,ge);De&&(R2(Ne)&&(De.isShadow=!0),ce.childNodes.push(De))}}var Be=C2_parentNode(n);return Be&&M2(Be)&&R2(Be)&&(ce.isShadow=!0),ce.type===m.Element&&"iframe"===ce.tagName&&function(n,s,o){var l=n.contentWindow;if(l){var c,d=!1;try{c=l.document.readyState}catch(f){return}if("complete"===c){var h="about:blank";if(l.location.href!==h||n.src===h||""===n.src)return setTimeout(s,0),n.addEventListener("load",s);n.addEventListener("load",s)}else{var p=setTimeout((()=>{d||(s(),d=!0)}),o);n.addEventListener("load",(()=>{clearTimeout(p),d=!0,s()}))}}}(n,(()=>{var s=n.contentDocument;if(s&&z){var o=ot2(s,{doc:s,mirror:l,blockClass:c,blockSelector:d,needsMask:ie,maskTextClass:h,maskTextSelector:p,skipChild:!1,inlineStylesheet:_,maskInputOptions:y,maskTextFn:E,maskInputFn:M,slimDOMOptions:L,dataURLOptions:N,inlineImages:F,recordCanvas:D,preserveWhiteSpace:se,onSerialize:U,onIframeLoad:z,iframeLoadTimeout:q,onStylesheetLoad:V,stylesheetLoadTimeout:Z,keepIframeSrcFn:ee});o&&z(n,o)}}),q),ce.type===m.Element&&"link"===ce.tagName&&"string"==typeof ce.attributes.rel&&("stylesheet"===ce.attributes.rel||"preload"===ce.attributes.rel&&"string"==typeof ce.attributes.href&&"css"===L2(ce.attributes.href))&&function(n,s,o){var l,c=!1;try{l=n.sheet}catch(h){return}if(!l){var d=setTimeout((()=>{c||(s(),c=!0)}),o);n.addEventListener("load",(()=>{clearTimeout(d),c=!0,s()}))}}(n,(()=>{if(V){var s=ot2(n,{doc:o,mirror:l,blockClass:c,blockSelector:d,needsMask:ie,maskTextClass:h,maskTextSelector:p,skipChild:!1,inlineStylesheet:_,maskInputOptions:y,maskTextFn:E,maskInputFn:M,slimDOMOptions:L,dataURLOptions:N,inlineImages:F,recordCanvas:D,preserveWhiteSpace:se,onSerialize:U,onIframeLoad:z,iframeLoadTimeout:q,onStylesheetLoad:V,stylesheetLoadTimeout:Z,keepIframeSrcFn:ee});s&&V(n,s)}}),Z),ce}var Z,ee={exports:{}};var ne,ie,se,oe,le,ce,pe=function(n){if(n.__esModule)return n;var s=n.default;if("function"==typeof s){var o=function t3(){return this instanceof t3?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};o.prototype=s.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(n).forEach((function(s){var l=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(o,s,l.get?l:{enumerable:!0,get:function(){return n[s]}})})),o}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));function yt2(){if(ie)return ne;ie=1;var n=function(){if(Z)return ee.exports;Z=1;var n=String,e22=function(){return{isColorSupported:!1,reset:n,bold:n,dim:n,italic:n,underline:n,inverse:n,hidden:n,strikethrough:n,black:n,red:n,green:n,yellow:n,blue:n,magenta:n,cyan:n,white:n,gray:n,bgBlack:n,bgRed:n,bgGreen:n,bgYellow:n,bgBlue:n,bgMagenta:n,bgCyan:n,bgWhite:n,blackBright:n,redBright:n,greenBright:n,yellowBright:n,blueBright:n,magentaBright:n,cyanBright:n,whiteBright:n,bgBlackBright:n,bgRedBright:n,bgGreenBright:n,bgYellowBright:n,bgBlueBright:n,bgMagentaBright:n,bgCyanBright:n,bgWhiteBright:n}};return ee.exports=e22(),ee.exports.createColors=e22,ee.exports}(),s=pe;class r22 extends Error{constructor(n,s,o,l,c,d){super(n),this.name="CssSyntaxError",this.reason=n,c&&(this.file=c),l&&(this.source=l),d&&(this.plugin=d),void 0!==s&&void 0!==o&&("number"==typeof s?(this.line=s,this.column=o):(this.line=s.line,this.column=s.column,this.endLine=o.line,this.endColumn=o.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,r22)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(o){if(!this.source)return"";var l=this.source;null==o&&(o=n.isColorSupported);var n22=n=>n,s22=n=>n,o22=n=>n;if(o){var{bold:c,gray:d,red:h}=n.createColors(!0);s22=n=>c(h(n)),n22=n=>d(n),s&&(o22=n=>s(n))}var p=l.split(/\r?\n/),f=Math.max(this.line-3,0),m=Math.min(this.line+2,p.length),_=String(m).length;return p.slice(f,m).map(((n,s)=>{var o=f+1+s,l=" "+(" "+o).slice(-_)+" | ";if(o===this.line){if(n.length>160){var c=Math.max(0,this.column-20),d=Math.max(this.column+20,this.endColumn+20),h=n.slice(c,d),p=n22(l.replace(/\d/g," "))+n.slice(0,Math.min(this.column-1,19)).replace(/[^\t]/g," ");return s22(">")+n22(l)+o22(h)+"\n "+p+s22("^")}var m=n22(l.replace(/\d/g," "))+n.slice(0,this.column-1).replace(/[^\t]/g," ");return s22(">")+n22(l)+o22(n)+"\n "+m+s22("^")}return" "+n22(l)+o22(n)})).join("\n")}toString(){var n=this.showSourceCode();return n&&(n="\n\n"+n+"\n"),this.name+": "+this.message+n}}return ne=r22,r22.default=r22,ne}function bt2(){if(oe)return se;oe=1;var n={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class e22{constructor(n){this.builder=n}atrule(n,s){var o="@"+n.name,l=n.params?this.rawValue(n,"params"):"";if(void 0!==n.raws.afterName?o+=n.raws.afterName:l&&(o+=" "),n.nodes)this.block(n,o+l);else{var c=(n.raws.between||"")+(s?";":"");this.builder(o+l+c,n)}}beforeAfter(n,s){var o;o="decl"===n.type?this.raw(n,null,"beforeDecl"):"comment"===n.type?this.raw(n,null,"beforeComment"):"before"===s?this.raw(n,null,"beforeRule"):this.raw(n,null,"beforeClose");for(var l=n.parent,c=0;l&&"root"!==l.type;)c+=1,l=l.parent;if(o.includes("\n")){var d=this.raw(n,null,"indent");if(d.length)for(var h=0;h<c;h++)o+=d}return o}block(n,s){var o,l=this.raw(n,"between","beforeOpen");this.builder(s+l+"{",n,"start"),n.nodes&&n.nodes.length?(this.body(n),o=this.raw(n,"after")):o=this.raw(n,"after","emptyBody"),o&&this.builder(o),this.builder("}",n,"end")}body(n){for(var s=n.nodes.length-1;s>0&&"comment"===n.nodes[s].type;)s-=1;for(var o=this.raw(n,"semicolon"),l=0;l<n.nodes.length;l++){var c=n.nodes[l],d=this.raw(c,"before");d&&this.builder(d),this.stringify(c,s!==l||o)}}comment(n){var s=this.raw(n,"left","commentLeft"),o=this.raw(n,"right","commentRight");this.builder("/*"+s+n.text+o+"*/",n)}decl(n,s){var o=this.raw(n,"between","colon"),l=n.prop+o+this.rawValue(n,"value");n.important&&(l+=n.raws.important||" !important"),s&&(l+=";"),this.builder(l,n)}document(n){this.body(n)}raw(s,o,l){var c;if(l||(l=o),o&&void 0!==(c=s.raws[o]))return c;var d=s.parent;if("before"===l){if(!d||"root"===d.type&&d.first===s)return"";if(d&&"document"===d.type)return""}if(!d)return n[l];var h=s.root();if(h.rawCache||(h.rawCache={}),void 0!==h.rawCache[l])return h.rawCache[l];if("before"===l||"after"===l)return this.beforeAfter(s,l);var p,f="raw"+((p=l)[0].toUpperCase()+p.slice(1));return this[f]?c=this[f](h,s):h.walk((n=>{if(void 0!==(c=n.raws[o]))return!1})),void 0===c&&(c=n[l]),h.rawCache[l]=c,c}rawBeforeClose(n){var s;return n.walk((n=>{if(n.nodes&&n.nodes.length>0&&void 0!==n.raws.after)return(s=n.raws.after).includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),s&&(s=s.replace(/\S/g,"")),s}rawBeforeComment(n,s){var o;return n.walkComments((n=>{if(void 0!==n.raws.before)return(o=n.raws.before).includes("\n")&&(o=o.replace(/[^\n]+$/,"")),!1})),void 0===o?o=this.raw(s,null,"beforeDecl"):o&&(o=o.replace(/\S/g,"")),o}rawBeforeDecl(n,s){var o;return n.walkDecls((n=>{if(void 0!==n.raws.before)return(o=n.raws.before).includes("\n")&&(o=o.replace(/[^\n]+$/,"")),!1})),void 0===o?o=this.raw(s,null,"beforeRule"):o&&(o=o.replace(/\S/g,"")),o}rawBeforeOpen(n){var s;return n.walk((n=>{if("decl"!==n.type&&void 0!==(s=n.raws.between))return!1})),s}rawBeforeRule(n){var s;return n.walk((o=>{if(o.nodes&&(o.parent!==n||n.first!==o)&&void 0!==o.raws.before)return(s=o.raws.before).includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),s&&(s=s.replace(/\S/g,"")),s}rawColon(n){var s;return n.walkDecls((n=>{if(void 0!==n.raws.between)return s=n.raws.between.replace(/[^\s:]/g,""),!1})),s}rawEmptyBody(n){var s;return n.walk((n=>{if(n.nodes&&0===n.nodes.length&&void 0!==(s=n.raws.after))return!1})),s}rawIndent(n){return n.raws.indent?n.raws.indent:(n.walk((o=>{var l=o.parent;if(l&&l!==n&&l.parent&&l.parent===n&&void 0!==o.raws.before){var c=o.raws.before.split("\n");return s=(s=c[c.length-1]).replace(/\S/g,""),!1}})),s);var s}rawSemicolon(n){var s;return n.walk((n=>{if(n.nodes&&n.nodes.length&&"decl"===n.last.type&&void 0!==(s=n.raws.semicolon))return!1})),s}rawValue(n,s){var o=n[s],l=n.raws[s];return l&&l.value===o?l.raw:o}root(n){this.body(n),n.raws.after&&this.builder(n.raws.after)}rule(n){this.block(n,this.rawValue(n,"selector")),n.raws.ownSemicolon&&this.builder(n.raws.ownSemicolon,n,"end")}stringify(n,s){if(!this[n.type])throw new Error("Unknown AST node type "+n.type+". Maybe you need to change PostCSS stringifier.");this[n.type](n,s)}}return se=e22,e22.default=e22,se}function St2(){if(ce)return le;ce=1;var n=bt2();function e22(s,o){new n(o).stringify(s)}return le=e22,e22.default=e22,le}var fe,ge,be,Oe,Ne,Fe,De,Be,Ue,He,qe,Ve,Je,tt,nt,it,ft,gt,vt,_t,kt,xt,It,Et,Tt,Mt,Ot,Lt,Ft,Dt,Bt,Ht,jt,Wt,Vt,Gt,Yt,Zt,Kt,Qt,er,tr,rr,sr,or,ar,ur,dr,pr,fr,gr,vr={};function ke2(){return fe||(fe=1,vr.isClean=Symbol("isClean"),vr.my=Symbol("my")),vr}function Ce2(){if(be)return ge;be=1;var n=yt2(),s=bt2(),o=St2(),{isClean:l,my:c}=ke2();function s22(n,s){var o=new n.constructor;for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)&&"proxyCache"!==l){var c=n[l],d=typeof c;"parent"===l&&"object"===d?s&&(o[l]=s):"source"===l?o[l]=c:Array.isArray(c)?o[l]=c.map((n=>s22(n,o))):("object"===d&&null!==c&&(c=s22(c)),o[l]=c)}return o}function o22(n,s){if(s&&void 0!==s.offset)return s.offset;for(var o=1,l=1,c=0,d=0;d<n.length;d++){if(l===s.line&&o===s.column){c=d;break}"\n"===n[d]?(o=1,l+=1):o+=1}return c}class a22{constructor(n){for(var s in void 0===n&&(n={}),this.raws={},this[l]=!1,this[c]=!0,n)if("nodes"===s)for(var o of(this.nodes=[],n[s]))"function"==typeof o.clone?this.append(o.clone()):this.append(o);else this[s]=n[s]}addToError(n){if(n.postcssNode=this,n.stack&&this.source&&/\n\s{4}at /.test(n.stack)){var s=this.source;n.stack=n.stack.replace(/\n\s{4}at /,"$&"+s.input.from+":"+s.start.line+":"+s.start.column+"$&")}return n}after(n){return this.parent.insertAfter(this,n),this}assign(n){for(var s in void 0===n&&(n={}),n)this[s]=n[s];return this}before(n){return this.parent.insertBefore(this,n),this}cleanRaws(n){delete this.raws.before,delete this.raws.after,n||delete this.raws.between}clone(n){void 0===n&&(n={});var s=s22(this);for(var o in n)s[o]=n[o];return s}cloneAfter(n){void 0===n&&(n={});var s=this.clone(n);return this.parent.insertAfter(this,s),s}cloneBefore(n){void 0===n&&(n={});var s=this.clone(n);return this.parent.insertBefore(this,s),s}error(s,o){if(void 0===o&&(o={}),this.source){var{end:l,start:c}=this.rangeBy(o);return this.source.input.error(s,{column:c.column,line:c.line},{column:l.column,line:l.line},o)}return new n(s)}getProxyProcessor(){return{get:(n,s)=>"proxyOf"===s?n:"root"===s?()=>n.root().toProxy():n[s],set:(n,s,o)=>(n[s]===o||(n[s]=o,"prop"!==s&&"value"!==s&&"name"!==s&&"params"!==s&&"important"!==s&&"text"!==s||n.markDirty()),!0)}}markClean(){this[l]=!0}markDirty(){if(this[l]){this[l]=!1;for(var n=this;n=n.parent;)n[l]=!1}}next(){if(this.parent){var n=this.parent.index(this);return this.parent.nodes[n+1]}}positionBy(n){var s=this.source.start;if(n.index)s=this.positionInside(n.index);else if(n.word){var o="document"in this.source.input?this.source.input.document:this.source.input.css,l=o.slice(o22(o,this.source.start),o22(o,this.source.end)).indexOf(n.word);-1!==l&&(s=this.positionInside(l))}return s}positionInside(n){for(var s=this.source.start.column,o=this.source.start.line,l=("document"in this.source.input?this.source.input.document:this.source.input.css),c=o22(l,this.source.start),d=c+n,h=c;h<d;h++)"\n"===l[h]?(s=1,o+=1):s+=1;return{column:s,line:o}}prev(){if(this.parent){var n=this.parent.index(this);return this.parent.nodes[n-1]}}rangeBy(n){var s={column:this.source.start.column,line:this.source.start.line},o=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:s.column+1,line:s.line};if(n.word){var l="document"in this.source.input?this.source.input.document:this.source.input.css,c=l.slice(o22(l,this.source.start),o22(l,this.source.end)).indexOf(n.word);-1!==c&&(s=this.positionInside(c),o=this.positionInside(c+n.word.length))}else n.start?s={column:n.start.column,line:n.start.line}:n.index&&(s=this.positionInside(n.index)),n.end?o={column:n.end.column,line:n.end.line}:"number"==typeof n.endIndex?o=this.positionInside(n.endIndex):n.index&&(o=this.positionInside(n.index+1));return(o.line<s.line||o.line===s.line&&o.column<=s.column)&&(o={column:s.column+1,line:s.line}),{end:o,start:s}}raw(n,o){return(new s).raw(this,n,o)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(){if(this.parent){for(var n=this,s=!1,o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];for(var d of l)d===this?s=!0:s?(this.parent.insertAfter(n,d),n=d):this.parent.insertBefore(n,d);s||this.remove()}return this}root(){for(var n=this;n.parent&&"document"!==n.parent.type;)n=n.parent;return n}toJSON(n,s){var o={},l=null==s;s=s||new Map;var c=0;for(var d in this)if(Object.prototype.hasOwnProperty.call(this,d)&&"parent"!==d&&"proxyCache"!==d){var h=this[d];if(Array.isArray(h))o[d]=h.map((n=>"object"==typeof n&&n.toJSON?n.toJSON(null,s):n));else if("object"==typeof h&&h.toJSON)o[d]=h.toJSON(null,s);else if("source"===d){var p=s.get(h.input);null==p&&(p=c,s.set(h.input,c),c++),o[d]={end:h.end,inputId:p,start:h.start}}else o[d]=h}return l&&(o.inputs=[...s.keys()].map((n=>n.toJSON()))),o}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(n){void 0===n&&(n=o),n.stringify&&(n=n.stringify);var s="";return n(this,(n=>{s+=n})),s}warn(n,s,o){var l={node:this};for(var c in o)l[c]=o[c];return n.warn(s,l)}get proxyOf(){return this}}return ge=a22,a22.default=a22,ge}function Ie2(){if(Ne)return Oe;Ne=1;var n=Ce2();class e22 extends n{constructor(n){super(n),this.type="comment"}}return Oe=e22,e22.default=e22,Oe}function Me2(){if(De)return Fe;De=1;var n=Ce2();class e22 extends n{constructor(n){n&&void 0!==n.value&&"string"!=typeof n.value&&(n=r2({},n,{value:String(n.value)})),super(n),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}return Fe=e22,e22.default=e22,Fe}function Re2(){if(Ue)return Be;Ue=1;var n,s,o,l,c=Ie2(),d=Me2(),h=Ce2(),{isClean:p,my:f}=ke2();function u22(n){return n.map((n=>(n.nodes&&(n.nodes=u22(n.nodes)),delete n.source,n)))}function l22(n){if(n[p]=!1,n.proxyOf.nodes)for(var s of n.proxyOf.nodes)l22(s)}class c22 extends h{append(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];for(var l of s){var c=this.normalize(l,this.last);for(var d of c)this.proxyOf.nodes.push(d)}return this.markDirty(),this}cleanRaws(n){if(super.cleanRaws(n),this.nodes)for(var s of this.nodes)s.cleanRaws(n)}each(n){if(this.proxyOf.nodes){for(var s,o,l=this.getIterator();this.indexes[l]<this.proxyOf.nodes.length&&(s=this.indexes[l],!1!==(o=n(this.proxyOf.nodes[s],s)));)this.indexes[l]+=1;return delete this.indexes[l],o}}every(n){return this.nodes.every(n)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var n=this.lastEach;return this.indexes[n]=0,n}getProxyProcessor(){return{get:(n,s)=>"proxyOf"===s?n:n[s]?"each"===s||"string"==typeof s&&s.startsWith("walk")?function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return n[s](...l.map((n=>"function"==typeof n?(s,o)=>n(s.toProxy(),o):n)))}:"every"===s||"some"===s?o=>n[s]((function(n){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];return o(n.toProxy(),...l)})):"root"===s?()=>n.root().toProxy():"nodes"===s?n.nodes.map((n=>n.toProxy())):"first"===s||"last"===s?n[s].toProxy():n[s]:n[s],set:(n,s,o)=>(n[s]===o||(n[s]=o,"name"!==s&&"params"!==s&&"selector"!==s||n.markDirty()),!0)}}index(n){return"number"==typeof n?n:(n.proxyOf&&(n=n.proxyOf),this.proxyOf.nodes.indexOf(n))}insertAfter(n,s){var o,l=this.index(n),c=this.normalize(s,this.proxyOf.nodes[l]).reverse();for(var d of(l=this.index(n),c))this.proxyOf.nodes.splice(l+1,0,d);for(var h in this.indexes)l<(o=this.indexes[h])&&(this.indexes[h]=o+c.length);return this.markDirty(),this}insertBefore(n,s){var o,l=this.index(n),c=0===l&&"prepend",d=this.normalize(s,this.proxyOf.nodes[l],c).reverse();for(var h of(l=this.index(n),d))this.proxyOf.nodes.splice(l,0,h);for(var p in this.indexes)l<=(o=this.indexes[p])&&(this.indexes[p]=o+d.length);return this.markDirty(),this}normalize(o,h){if("string"==typeof o)o=u22(s(o).nodes);else if(void 0===o)o=[];else if(Array.isArray(o))for(var m of o=o.slice(0))m.parent&&m.parent.removeChild(m,"ignore");else if("root"===o.type&&"document"!==this.type)for(var _ of o=o.nodes.slice(0))_.parent&&_.parent.removeChild(_,"ignore");else if(o.type)o=[o];else if(o.prop){if(void 0===o.value)throw new Error("Value field is missed in node creation");"string"!=typeof o.value&&(o.value=String(o.value)),o=[new d(o)]}else if(o.selector||o.selectors)o=[new l(o)];else if(o.name)o=[new n(o)];else{if(!o.text)throw new Error("Unknown node type in node creation");o=[new c(o)]}return o.map((n=>(n[f]||c22.rebuild(n),(n=n.proxyOf).parent&&n.parent.removeChild(n),n[p]&&l22(n),n.raws||(n.raws={}),void 0===n.raws.before&&h&&void 0!==h.raws.before&&(n.raws.before=h.raws.before.replace(/\S/g,"")),n.parent=this.proxyOf,n)))}prepend(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];for(var l of s=s.reverse()){var c=this.normalize(l,this.first,"prepend").reverse();for(var d of c)this.proxyOf.nodes.unshift(d);for(var h in this.indexes)this.indexes[h]=this.indexes[h]+c.length}return this.markDirty(),this}push(n){return n.parent=this,this.proxyOf.nodes.push(n),this}removeAll(){for(var n of this.proxyOf.nodes)n.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(n){var s;for(var o in n=this.index(n),this.proxyOf.nodes[n].parent=void 0,this.proxyOf.nodes.splice(n,1),this.indexes)(s=this.indexes[o])>=n&&(this.indexes[o]=s-1);return this.markDirty(),this}replaceValues(n,s,o){return o||(o=s,s={}),this.walkDecls((l=>{s.props&&!s.props.includes(l.prop)||s.fast&&!l.value.includes(s.fast)||(l.value=l.value.replace(n,o))})),this.markDirty(),this}some(n){return this.nodes.some(n)}walk(n){return this.each(((s,o)=>{var l;try{l=n(s,o)}catch(c){throw s.addToError(c)}return!1!==l&&s.walk&&(l=s.walk(n)),l}))}walkAtRules(n,s){return s?n instanceof RegExp?this.walk(((o,l)=>{if("atrule"===o.type&&n.test(o.name))return s(o,l)})):this.walk(((o,l)=>{if("atrule"===o.type&&o.name===n)return s(o,l)})):(s=n,this.walk(((n,o)=>{if("atrule"===n.type)return s(n,o)})))}walkComments(n){return this.walk(((s,o)=>{if("comment"===s.type)return n(s,o)}))}walkDecls(n,s){return s?n instanceof RegExp?this.walk(((o,l)=>{if("decl"===o.type&&n.test(o.prop))return s(o,l)})):this.walk(((o,l)=>{if("decl"===o.type&&o.prop===n)return s(o,l)})):(s=n,this.walk(((n,o)=>{if("decl"===n.type)return s(n,o)})))}walkRules(n,s){return s?n instanceof RegExp?this.walk(((o,l)=>{if("rule"===o.type&&n.test(o.selector))return s(o,l)})):this.walk(((o,l)=>{if("rule"===o.type&&o.selector===n)return s(o,l)})):(s=n,this.walk(((n,o)=>{if("rule"===n.type)return s(n,o)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}return c22.registerParse=n=>{s=n},c22.registerRule=n=>{l=n},c22.registerAtRule=s=>{n=s},c22.registerRoot=n=>{o=n},Be=c22,c22.default=c22,c22.rebuild=s=>{"atrule"===s.type?Object.setPrototypeOf(s,n.prototype):"rule"===s.type?Object.setPrototypeOf(s,l.prototype):"decl"===s.type?Object.setPrototypeOf(s,d.prototype):"comment"===s.type?Object.setPrototypeOf(s,c.prototype):"root"===s.type&&Object.setPrototypeOf(s,o.prototype),s[f]=!0,s.nodes&&s.nodes.forEach((n=>{c22.rebuild(n)}))},Be}function xe2(){if(qe)return He;qe=1;var n=Re2();class e22 extends n{constructor(n){super(n),this.type="atrule"}append(){return this.proxyOf.nodes||(this.nodes=[]),super.append(...arguments)}prepend(){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...arguments)}}return He=e22,e22.default=e22,n.registerAtRule(e22),He}function _e2(){if(Je)return Ve;Je=1;var n,s,o=Re2();class n22 extends o{constructor(n){super(r2({type:"document"},n)),this.nodes||(this.nodes=[])}toResult(o){return void 0===o&&(o={}),new n(new s,this,o).stringify()}}return n22.registerLazyResult=s=>{n=s},n22.registerProcessor=n=>{s=n},Ve=n22,n22.default=n22,Ve}function Te2(){if(ft)return it;ft=1;var{existsSync:n,readFileSync:s}=pe,{dirname:o,join:l}=pe,{SourceMapConsumer:c,SourceMapGenerator:d}=pe;class o22{constructor(n,s){if(!1!==s.map){this.loadAnnotation(n),this.inline=this.startWith(this.annotation,"data:");var l=s.map?s.map.prev:void 0,c=this.loadMap(s.from,l);!this.mapFile&&s.from&&(this.mapFile=s.from),this.mapFile&&(this.root=o(this.mapFile)),c&&(this.text=c)}}consumer(){return this.consumerCache||(this.consumerCache=new c(this.text)),this.consumerCache}decodeInline(n){var s=n.match(/^data:application\/json;charset=utf-?8,/)||n.match(/^data:application\/json,/);if(s)return decodeURIComponent(n.substr(s[0].length));var o,l=n.match(/^data:application\/json;charset=utf-?8;base64,/)||n.match(/^data:application\/json;base64,/);if(l)return o=n.substr(l[0].length),Buffer?Buffer.from(o,"base64").toString():window.atob(o);var c=n.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+c)}getAnnotationURL(n){return n.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(n){return"object"==typeof n&&("string"==typeof n.mappings||"string"==typeof n._mappings||Array.isArray(n.sections))}loadAnnotation(n){var s=n.match(/\/\*\s*# sourceMappingURL=/g);if(s){var o=n.lastIndexOf(s.pop()),l=n.indexOf("*/",o);o>-1&&l>-1&&(this.annotation=this.getAnnotationURL(n.substring(o,l)))}}loadFile(l){if(this.root=o(l),n(l))return this.mapFile=l,s(l,"utf-8").toString().trim()}loadMap(n,s){if(!1===s)return!1;if(s){if("string"==typeof s)return s;if("function"!=typeof s){if(s instanceof c)return d.fromSourceMap(s).toString();if(s instanceof d)return s.toString();if(this.isMap(s))return JSON.stringify(s);throw new Error("Unsupported previous source map format: "+s.toString())}var h=s(n);if(h){var p=this.loadFile(h);if(!p)throw new Error("Unable to load previous source map: "+h.toString());return p}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var f=this.annotation;return n&&(f=l(o(n),f)),this.loadFile(f)}}}startWith(n,s){return!!n&&n.substr(0,s.length)===s}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return it=o22,o22.default=o22,it}function Ee2(){if(vt)return gt;vt=1;var{nanoid:n}=nt?tt:(nt=1,tt={nanoid:function(n){void 0===n&&(n=21);for(var s="",o=0|n;o--;)s+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return s},customAlphabet:function(n,s){return void 0===s&&(s=21),function(o){void 0===o&&(o=s);for(var l="",c=0|o;c--;)l+=n[Math.random()*n.length|0];return l}}}),{isAbsolute:s,resolve:o}=pe,{SourceMapConsumer:l,SourceMapGenerator:c}=pe,{fileURLToPath:d,pathToFileURL:h}=pe,p=yt2(),f=Te2(),m=pe,_=Symbol("fromOffsetCache"),y=Boolean(l&&c),E=Boolean(o&&s);class v22{constructor(l,c){if(void 0===c&&(c={}),null==l||"object"==typeof l&&!l.toString)throw new Error("PostCSS received "+l+" instead of CSS string");if(this.css=l.toString(),"\ufeff"===this.css[0]||"\ufffe"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,c.document&&(this.document=c.document.toString()),c.from&&(!E||/^\w+:\/\//.test(c.from)||s(c.from)?this.file=c.from:this.file=o(c.from)),E&&y){var d=new f(this.css,c);if(d.text){this.map=d;var h=d.consumer().file;!this.file&&h&&(this.file=this.mapResolve(h))}}this.file||(this.id="<input css "+n(6)+">"),this.map&&(this.map.file=this.from)}error(n,s,o,l){var c,d,f;if(void 0===l&&(l={}),s&&"object"==typeof s){var m=s,_=o;if("number"==typeof m.offset){var y=this.fromOffset(m.offset);s=y.line,o=y.col}else s=m.line,o=m.column;if("number"==typeof _.offset){var E=this.fromOffset(_.offset);d=E.line,c=E.col}else d=_.line,c=_.column}else if(!o){var M=this.fromOffset(s);s=M.line,o=M.col}var P=this.origin(s,o,d,c);return(f=P?new p(n,void 0===P.endLine?P.line:{column:P.column,line:P.line},void 0===P.endLine?P.column:{column:P.endColumn,line:P.endLine},P.source,P.file,l.plugin):new p(n,void 0===d?s:{column:o,line:s},void 0===d?o:{column:c,line:d},this.css,this.file,l.plugin)).input={column:o,endColumn:c,endLine:d,line:s,source:this.css},this.file&&(h&&(f.input.url=h(this.file).toString()),f.input.file=this.file),f}fromOffset(n){var s;if(this[_])s=this[_];else{var o=this.css.split("\n");s=new Array(o.length);for(var l=0,c=0,d=o.length;c<d;c++)s[c]=l,l+=o[c].length+1;this[_]=s}var h=0;if(n>=s[s.length-1])h=s.length-1;else for(var p,f=s.length-2;h<f;)if(n<s[p=h+(f-h>>1)])f=p-1;else{if(!(n>=s[p+1])){h=p;break}h=p+1}return{col:n-s[h]+1,line:h+1}}mapResolve(n){return/^\w+:\/\//.test(n)?n:o(this.map.consumer().sourceRoot||this.map.root||".",n)}origin(n,o,l,c){if(!this.map)return!1;var p,f,m=this.map.consumer(),_=m.originalPositionFor({column:o,line:n});if(!_.source)return!1;"number"==typeof l&&(p=m.originalPositionFor({column:c,line:l})),f=s(_.source)?h(_.source):new URL(_.source,this.map.consumer().sourceRoot||h(this.map.mapFile));var y={column:_.column,endColumn:p&&p.column,endLine:p&&p.line,line:_.line,url:f.toString()};if("file:"===f.protocol){if(!d)throw new Error("file: protocol is not available in this PostCSS build");y.file=d(f)}var E=m.sourceContentFor(_.source);return E&&(y.source=E),y}toJSON(){var n={};for(var s of["hasBOM","css","file","id"])null!=this[s]&&(n[s]=this[s]);return this.map&&(n.map=r2({},this.map),n.map.consumerCache&&(n.map.consumerCache=void 0)),n}get from(){return this.file||this.id}}return gt=v22,v22.default=v22,m&&m.registerInput&&m.registerInput(v22),gt}function Ae2(){if(kt)return _t;kt=1;var n,s,o=Re2();class i22 extends o{constructor(n){super(n),this.type="root",this.nodes||(this.nodes=[])}normalize(n,s,o){var l=super.normalize(n);if(s)if("prepend"===o)this.nodes.length>1?s.raws.before=this.nodes[1].raws.before:delete s.raws.before;else if(this.first!==s)for(var c of l)c.raws.before=s.raws.before;return l}removeChild(n,s){var o=this.index(n);return!s&&0===o&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[o].raws.before),super.removeChild(n)}toResult(o){return void 0===o&&(o={}),new n(new s,this,o).stringify()}}return i22.registerLazyResult=s=>{n=s},i22.registerProcessor=n=>{s=n},_t=i22,i22.default=i22,o.registerRoot(i22),_t}function Be2(){if(It)return xt;It=1;var n={comma:s=>n.split(s,[","],!0),space:s=>n.split(s,[" ","\n","\t"]),split(n,s,o){var l=[],c="",d=!1,h=0,p=!1,f="",m=!1;for(var _ of n)m?m=!1:"\\"===_?m=!0:p?_===f&&(p=!1):'"'===_||"'"===_?(p=!0,f=_):"("===_?h+=1:")"===_?h>0&&(h-=1):0===h&&s.includes(_)&&(d=!0),d?(""!==c&&l.push(c.trim()),c="",d=!1):c+=_;return(o||""!==c)&&l.push(c.trim()),l}};return xt=n,n.default=n,xt}function Le2(){if(Tt)return Et;Tt=1;var n=Re2(),s=Be2();class r22 extends n{constructor(n){super(n),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return s.comma(this.selector)}set selectors(n){var s=this.selector?this.selector.match(/,\s*/):null,o=s?s[0]:","+this.raw("between","beforeOpen");this.selector=n.join(o)}}return Et=r22,r22.default=r22,n.registerRule(r22),Et}function Fe2(){if(Ft)return Lt;Ft=1;var{dirname:n,relative:s,resolve:o,sep:l}=pe,{SourceMapConsumer:c,SourceMapGenerator:d}=pe,{pathToFileURL:h}=pe,p=Ee2(),f=Boolean(c&&d),m=Boolean(n&&o&&s&&l);return Lt=class{constructor(n,s,o,l){this.stringify=n,this.mapOpts=o.map||{},this.root=s,this.opts=o,this.css=l,this.originalCSS=l,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){var n;n=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var s="\n";this.css.includes("\r\n")&&(s="\r\n"),this.css+=s+"/*# sourceMappingURL="+n+" */"}applyPrevMaps(){for(var s of this.previous()){var o=this.toUrl(this.path(s.file)),l=s.root||n(s.file),d=void 0;!1===this.mapOpts.sourcesContent?(d=new c(s.text)).sourcesContent&&(d.sourcesContent=null):d=s.consumer(),this.map.applySourceMap(d,o,this.toUrl(this.path(l)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root)for(var n,s=this.root.nodes.length-1;s>=0;s--)"comment"===(n=this.root.nodes[s]).type&&n.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(s);else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),m&&f&&this.isMap())return this.generateMap();var n="";return this.stringify(this.root,(s=>{n+=s})),[n]}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){var n=this.previous()[0].consumer();n.file=this.outputFile(),this.map=d.fromSourceMap(n,{ignoreInvalidMapping:!0})}else this.map=new d({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new d({file:this.outputFile(),ignoreInvalidMapping:!0});var n,s,o=1,l=1,c="<no source>",h={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((d,p,f)=>{if(this.css+=d,p&&"end"!==f&&(h.generated.line=o,h.generated.column=l-1,p.source&&p.source.start?(h.source=this.sourcePath(p),h.original.line=p.source.start.line,h.original.column=p.source.start.column-1,this.map.addMapping(h)):(h.source=c,h.original.line=1,h.original.column=0,this.map.addMapping(h))),(s=d.match(/\n/g))?(o+=s.length,n=d.lastIndexOf("\n"),l=d.length-n):l+=d.length,p&&"start"!==f){var m=p.parent||{raws:{}};("decl"===p.type||"atrule"===p.type&&!p.nodes)&&p===m.last&&!m.raws.semicolon||(p.source&&p.source.end?(h.source=this.sourcePath(p),h.original.line=p.source.end.line,h.original.column=p.source.end.column-1,h.generated.line=o,h.generated.column=l-2,this.map.addMapping(h)):(h.source=c,h.original.line=1,h.original.column=0,h.generated.line=o,h.generated.column=l-1,this.map.addMapping(h)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((n=>n.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var n=this.mapOpts.annotation;return(void 0===n||!0===n)&&(!this.previous().length||this.previous().some((n=>n.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((n=>n.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(l){if(this.mapOpts.absolute)return l;if(60===l.charCodeAt(0))return l;if(/^\w+:\/\//.test(l))return l;var c=this.memoizedPaths.get(l);if(c)return c;var d=this.opts.to?n(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(d=n(o(d,this.mapOpts.annotation)));var h=s(d,l);return this.memoizedPaths.set(l,h),h}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((n=>{if(n.source&&n.source.input.map){var s=n.source.input.map;this.previousMaps.includes(s)||this.previousMaps.push(s)}}));else{var n=new p(this.originalCSS,this.opts);n.map&&this.previousMaps.push(n.map)}return this.previousMaps}setSourcesContent(){var n={};if(this.root)this.root.walk((s=>{if(s.source){var o=s.source.input.from;if(o&&!n[o]){n[o]=!0;var l=this.usesFileUrls?this.toFileUrl(o):this.toUrl(this.path(o));this.map.setSourceContent(l,s.source.input.css)}}}));else if(this.css){var s=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(s,this.css)}}sourcePath(n){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(n.source.input.from):this.toUrl(this.path(n.source.input.from))}toBase64(n){return Buffer?Buffer.from(n).toString("base64"):window.btoa(unescape(encodeURIComponent(n)))}toFileUrl(n){var s=this.memoizedFileURLs.get(n);if(s)return s;if(h){var o=h(n).toString();return this.memoizedFileURLs.set(n,o),o}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(n){var s=this.memoizedURLs.get(n);if(s)return s;"\\"===l&&(n=n.replace(/\\/g,"/"));var o=encodeURI(n).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(n,o),o}}}function Ne2(){if(Bt)return Dt;Bt=1;var n="'".charCodeAt(0),s='"'.charCodeAt(0),o="\\".charCodeAt(0),l="/".charCodeAt(0),c="\n".charCodeAt(0),d=" ".charCodeAt(0),h="\f".charCodeAt(0),p="\t".charCodeAt(0),f="\r".charCodeAt(0),m="[".charCodeAt(0),_="]".charCodeAt(0),y="(".charCodeAt(0),E=")".charCodeAt(0),M="{".charCodeAt(0),P="}".charCodeAt(0),L=";".charCodeAt(0),N="*".charCodeAt(0),F=":".charCodeAt(0),D="@".charCodeAt(0),B=/[\t\n\f\r "#'()/;[\\\]{}]/g,$=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,U=/.[\r\n"'(/\\]/,H=/[\da-f]/i;return Dt=function(z,q){void 0===q&&(q={});var V,Z,ee,ne,ie,se,oe,le,ce,pe,fe=z.css.valueOf(),ge=q.ignoreErrors,be=fe.length,Oe=0,Ne=[],Fe=[];function W22(n){throw z.error("Unclosed "+n,Oe)}return{back:function(n){Fe.push(n)},endOfFile:function(){return 0===Fe.length&&Oe>=be},nextToken:function(z){if(Fe.length)return Fe.pop();if(!(Oe>=be)){var q=!!z&&z.ignoreUnclosed;switch(V=fe.charCodeAt(Oe)){case c:case d:case p:case f:case h:ne=Oe;do{ne+=1,V=fe.charCodeAt(ne)}while(V===d||V===c||V===p||V===f||V===h);se=["space",fe.slice(Oe,ne)],Oe=ne-1;break;case m:case _:case M:case P:case F:case L:case E:var De=String.fromCharCode(V);se=[De,De,Oe];break;case y:if(pe=Ne.length?Ne.pop()[1]:"",ce=fe.charCodeAt(Oe+1),"url"===pe&&ce!==n&&ce!==s&&ce!==d&&ce!==c&&ce!==p&&ce!==h&&ce!==f){ne=Oe;do{if(oe=!1,-1===(ne=fe.indexOf(")",ne+1))){if(ge||q){ne=Oe;break}W22("bracket")}for(le=ne;fe.charCodeAt(le-1)===o;)le-=1,oe=!oe}while(oe);se=["brackets",fe.slice(Oe,ne+1),Oe,ne],Oe=ne}else ne=fe.indexOf(")",Oe+1),Z=fe.slice(Oe,ne+1),-1===ne||U.test(Z)?se=["(","(",Oe]:(se=["brackets",Z,Oe,ne],Oe=ne);break;case n:case s:ie=V===n?"'":'"',ne=Oe;do{if(oe=!1,-1===(ne=fe.indexOf(ie,ne+1))){if(ge||q){ne=Oe+1;break}W22("string")}for(le=ne;fe.charCodeAt(le-1)===o;)le-=1,oe=!oe}while(oe);se=["string",fe.slice(Oe,ne+1),Oe,ne],Oe=ne;break;case D:B.lastIndex=Oe+1,B.test(fe),ne=0===B.lastIndex?fe.length-1:B.lastIndex-2,se=["at-word",fe.slice(Oe,ne+1),Oe,ne],Oe=ne;break;case o:for(ne=Oe,ee=!0;fe.charCodeAt(ne+1)===o;)ne+=1,ee=!ee;if(V=fe.charCodeAt(ne+1),ee&&V!==l&&V!==d&&V!==c&&V!==p&&V!==f&&V!==h&&(ne+=1,H.test(fe.charAt(ne)))){for(;H.test(fe.charAt(ne+1));)ne+=1;fe.charCodeAt(ne+1)===d&&(ne+=1)}se=["word",fe.slice(Oe,ne+1),Oe,ne],Oe=ne;break;default:V===l&&fe.charCodeAt(Oe+1)===N?(0===(ne=fe.indexOf("*/",Oe+2)+1)&&(ge||q?ne=fe.length:W22("comment")),se=["comment",fe.slice(Oe,ne+1),Oe,ne],Oe=ne):($.lastIndex=Oe+1,$.test(fe),ne=0===$.lastIndex?fe.length-1:$.lastIndex-2,se=["word",fe.slice(Oe,ne+1),Oe,ne],Ne.push(se),Oe=ne)}return Oe++,se}},position:function(){return Oe}}}}function je2(){if(jt)return Ht;jt=1;var n=xe2(),s=Ie2(),o=Me2(),l=Ae2(),c=Le2(),d=Ne2(),h={empty:!0,space:!0};return Ht=class{constructor(n){this.input=n,this.root=new l,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:n,start:{column:1,line:1,offset:0}}}atrule(s){var o,l,c,d=new n;d.name=s[1].slice(1),""===d.name&&this.unnamedAtrule(d,s),this.init(d,s[2]);for(var h=!1,p=!1,f=[],m=[];!this.tokenizer.endOfFile();){if("("===(o=(s=this.tokenizer.nextToken())[0])||"["===o?m.push("("===o?")":"]"):"{"===o&&m.length>0?m.push("}"):o===m[m.length-1]&&m.pop(),0===m.length){if(";"===o){d.source.end=this.getPosition(s[2]),d.source.end.offset++,this.semicolon=!0;break}if("{"===o){p=!0;break}if("}"===o){if(f.length>0){for(l=f[c=f.length-1];l&&"space"===l[0];)l=f[--c];l&&(d.source.end=this.getPosition(l[3]||l[2]),d.source.end.offset++)}this.end(s);break}f.push(s)}else f.push(s);if(this.tokenizer.endOfFile()){h=!0;break}}d.raws.between=this.spacesAndCommentsFromEnd(f),f.length?(d.raws.afterName=this.spacesAndCommentsFromStart(f),this.raw(d,"params",f),h&&(s=f[f.length-1],d.source.end=this.getPosition(s[3]||s[2]),d.source.end.offset++,this.spaces=d.raws.between,d.raws.between="")):(d.raws.afterName="",d.params=""),p&&(d.nodes=[],this.current=d)}checkMissedSemicolon(n){var s=this.colon(n);if(!1!==s){for(var o,l=0,c=s-1;c>=0&&("space"===(o=n[c])[0]||2!==(l+=1));c--);throw this.input.error("Missed semicolon","word"===o[0]?o[3]+1:o[2])}}colon(n){var s,o,l,c=0;for(var[d,h]of n.entries()){if("("===(l=(o=h)[0])&&(c+=1),")"===l&&(c-=1),0===c&&":"===l){if(s){if("word"===s[0]&&"progid"===s[1])continue;return d}this.doubleColon(o)}s=o}return!1}comment(n){var o=new s;this.init(o,n[2]),o.source.end=this.getPosition(n[3]||n[2]),o.source.end.offset++;var l=n[1].slice(2,-2);if(/^\s*$/.test(l))o.text="",o.raws.left=l,o.raws.right="";else{var c=l.match(/^(\s*)([^]*\S)(\s*)$/);o.text=c[2],o.raws.left=c[1],o.raws.right=c[3]}}createTokenizer(){this.tokenizer=d(this.input)}decl(n,s){var l=new o;this.init(l,n[0][2]);var c,d=n[n.length-1];for(";"===d[0]&&(this.semicolon=!0,n.pop()),l.source.end=this.getPosition(d[3]||d[2]||function(n){for(var s=n.length-1;s>=0;s--){var o=n[s],l=o[3]||o[2];if(l)return l}}(n)),l.source.end.offset++;"word"!==n[0][0];)1===n.length&&this.unknownWord(n),l.raws.before+=n.shift()[1];for(l.source.start=this.getPosition(n[0][2]),l.prop="";n.length;){var h=n[0][0];if(":"===h||"space"===h||"comment"===h)break;l.prop+=n.shift()[1]}for(l.raws.between="";n.length;){if(":"===(c=n.shift())[0]){l.raws.between+=c[1];break}"word"===c[0]&&/\w/.test(c[1])&&this.unknownWord([c]),l.raws.between+=c[1]}"_"!==l.prop[0]&&"*"!==l.prop[0]||(l.raws.before+=l.prop[0],l.prop=l.prop.slice(1));for(var p,f=[];n.length&&("space"===(p=n[0][0])||"comment"===p);)f.push(n.shift());this.precheckMissedSemicolon(n);for(var m=n.length-1;m>=0;m--){if("!important"===(c=n[m])[1].toLowerCase()){l.important=!0;var _=this.stringFrom(n,m);" !important"!==(_=this.spacesFromEnd(n)+_)&&(l.raws.important=_);break}if("important"===c[1].toLowerCase()){for(var y=n.slice(0),E="",M=m;M>0;M--){var P=y[M][0];if(E.trim().startsWith("!")&&"space"!==P)break;E=y.pop()[1]+E}E.trim().startsWith("!")&&(l.important=!0,l.raws.important=E,n=y)}if("space"!==c[0]&&"comment"!==c[0])break}n.some((n=>"space"!==n[0]&&"comment"!==n[0]))&&(l.raws.between+=f.map((n=>n[1])).join(""),f=[]),this.raw(l,"value",f.concat(n),s),l.value.includes(":")&&!s&&this.checkMissedSemicolon(n)}doubleColon(n){throw this.input.error("Double colon",{offset:n[2]},{offset:n[2]+n[1].length})}emptyRule(n){var s=new c;this.init(s,n[2]),s.selector="",s.raws.between="",this.current=s}end(n){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(n[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(n)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(n){if(this.spaces+=n[1],this.current.nodes){var s=this.current.nodes[this.current.nodes.length-1];s&&"rule"===s.type&&!s.raws.ownSemicolon&&(s.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(n){var s=this.input.fromOffset(n);return{column:s.col,line:s.line,offset:n}}init(n,s){this.current.push(n),n.source={input:this.input,start:this.getPosition(s)},n.raws.before=this.spaces,this.spaces="","comment"!==n.type&&(this.semicolon=!1)}other(n){for(var s=!1,o=null,l=!1,c=null,d=[],h=n[1].startsWith("--"),p=[],f=n;f;){if(o=f[0],p.push(f),"("===o||"["===o)c||(c=f),d.push("("===o?")":"]");else if(h&&l&&"{"===o)c||(c=f),d.push("}");else if(0===d.length){if(";"===o){if(l)return void this.decl(p,h);break}if("{"===o)return void this.rule(p);if("}"===o){this.tokenizer.back(p.pop()),s=!0;break}":"===o&&(l=!0)}else o===d[d.length-1]&&(d.pop(),0===d.length&&(c=null));f=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(s=!0),d.length>0&&this.unclosedBracket(c),s&&l){if(!h)for(;p.length&&("space"===(f=p[p.length-1][0])||"comment"===f);)this.tokenizer.back(p.pop());this.decl(p,h)}else this.unknownWord(p)}parse(){for(var n;!this.tokenizer.endOfFile();)switch((n=this.tokenizer.nextToken())[0]){case"space":this.spaces+=n[1];break;case";":this.freeSemicolon(n);break;case"}":this.end(n);break;case"comment":this.comment(n);break;case"at-word":this.atrule(n);break;case"{":this.emptyRule(n);break;default:this.other(n)}this.endFile()}precheckMissedSemicolon(){}raw(n,s,o,l){for(var c,d,p,f,m=o.length,_="",y=!0,E=0;E<m;E+=1)"space"!==(d=(c=o[E])[0])||E!==m-1||l?"comment"===d?(f=o[E-1]?o[E-1][0]:"empty",p=o[E+1]?o[E+1][0]:"empty",h[f]||h[p]||","===_.slice(-1)?y=!1:_+=c[1]):_+=c[1]:y=!1;if(!y){var M=o.reduce(((n,s)=>n+s[1]),"");n.raws[s]={raw:M,value:_}}n[s]=_}rule(n){n.pop();var s=new c;this.init(s,n[0][2]),s.raws.between=this.spacesAndCommentsFromEnd(n),this.raw(s,"selector",n),this.current=s}spacesAndCommentsFromEnd(n){for(var s,o="";n.length&&("space"===(s=n[n.length-1][0])||"comment"===s);)o=n.pop()[1]+o;return o}spacesAndCommentsFromStart(n){for(var s,o="";n.length&&("space"===(s=n[0][0])||"comment"===s);)o+=n.shift()[1];return o}spacesFromEnd(n){for(var s="";n.length&&"space"===n[n.length-1][0];)s=n.pop()[1]+s;return s}stringFrom(n,s){for(var o="",l=s;l<n.length;l++)o+=n[l][1];return n.splice(s,n.length-s),o}unclosedBlock(){var n=this.current.source.start;throw this.input.error("Unclosed block",n.line,n.column)}unclosedBracket(n){throw this.input.error("Unclosed bracket",{offset:n[2]},{offset:n[2]+1})}unexpectedClose(n){throw this.input.error("Unexpected }",{offset:n[2]},{offset:n[2]+1})}unknownWord(n){throw this.input.error("Unknown word",{offset:n[0][2]},{offset:n[0][2]+n[0][1].length})}unnamedAtrule(n,s){throw this.input.error("At-rule without name",{offset:s[2]},{offset:s[2]+s[1].length})}}}function De2(){if(Vt)return Wt;Vt=1;var n=Re2(),s=Ee2(),o=je2();function i22(n,l){var c=new s(n,l),d=new o(c);try{d.parse()}catch(h){throw h}return d.root}return Wt=i22,i22.default=i22,n.registerParse(i22),Wt}function Ue2(){if(Yt)return Gt;Yt=1;class t22{constructor(n,s){if(void 0===s&&(s={}),this.type="warning",this.text=n,s.node&&s.node.source){var o=s.node.rangeBy(s);this.line=o.start.line,this.column=o.start.column,this.endLine=o.end.line,this.endColumn=o.end.column}for(var l in s)this[l]=s[l]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return Gt=t22,t22.default=t22,Gt}function Pe2(){if(Kt)return Zt;Kt=1;var n=Ue2();class e22{constructor(n,s,o){this.processor=n,this.messages=[],this.root=s,this.opts=o,this.css=void 0,this.map=void 0}toString(){return this.css}warn(s,o){void 0===o&&(o={}),o.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(o.plugin=this.lastPlugin.postcssPlugin);var l=new n(s,o);return this.messages.push(l),l}warnings(){return this.messages.filter((n=>"warning"===n.type))}get content(){return this.css}}return Zt=e22,e22.default=e22,Zt}function We2(){if(er)return Qt;er=1;var n=Re2(),s=_e2(),o=Fe2(),l=De2(),c=Pe2(),d=Ae2(),h=St2(),{isClean:p,my:f}=ke2(),m={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},_={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},y={Once:!0,postcssPlugin:!0,prepare:!0};function m22(n){return"object"==typeof n&&"function"==typeof n.then}function g22(n){var s=!1,o=m[n.type];return"decl"===n.type?s=n.prop.toLowerCase():"atrule"===n.type&&(s=n.name.toLowerCase()),s&&n.append?[o,o+"-"+s,0,o+"Exit",o+"Exit-"+s]:s?[o,o+"-"+s,o+"Exit",o+"Exit-"+s]:n.append?[o,0,o+"Exit"]:[o,o+"Exit"]}function w22(n){return{eventIndex:0,events:"document"===n.type?["Document",0,"DocumentExit"]:"root"===n.type?["Root",0,"RootExit"]:g22(n),iterator:0,node:n,visitorIndex:0,visitors:[]}}function y22(n){return n[p]=!1,n.nodes&&n.nodes.forEach((n=>y22(n))),n}var E={};class S22{constructor(s,o,d){var h;if(this.stringified=!1,this.processed=!1,"object"!=typeof o||null===o||"root"!==o.type&&"document"!==o.type)if(o instanceof S22||o instanceof c)h=y22(o.root),o.map&&(void 0===d.map&&(d.map={}),d.map.inline||(d.map.inline=!1),d.map.prev=o.map);else{var p=l;d.syntax&&(p=d.syntax.parse),d.parser&&(p=d.parser),p.parse&&(p=p.parse);try{h=p(o,d)}catch(m){this.processed=!0,this.error=m}h&&!h[f]&&n.rebuild(h)}else h=y22(o);this.result=new c(s,h,d),this.helpers=r2({},E,{postcss:E,result:this.result}),this.plugins=this.processor.plugins.map((n=>"object"==typeof n&&n.prepare?r2({},n,n.prepare(this.result)):n))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(n){return this.async().catch(n)}finally(n){return this.async().then(n,n)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(n,s){var o=this.result.lastPlugin;try{if(s&&s.addToError(n),this.error=n,"CssSyntaxError"!==n.name||n.plugin)o.postcssVersion,0;else n.plugin=o.postcssPlugin,n.setMessage()}catch(l){console&&console.error&&console.error(l)}return n}prepareVisitors(){this.listeners={};var t3=(n,s,o)=>{this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push([n,o])};for(var n of this.plugins)if("object"==typeof n)for(var s in n){if(!_[s]&&/^[A-Z]/.test(s))throw new Error("Unknown event "+s+" in "+n.postcssPlugin+". Try to update PostCSS ("+this.processor.version+" now).");if(!y[s])if("object"==typeof n[s])for(var o in n[s])t3(n,"*"===o?s:s+"-"+o.toLowerCase(),n[s][o]);else"function"==typeof n[s]&&t3(n,s,n[s])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){var n=this;return e2((function*(){n.plugin=0;for(var s=0;s<n.plugins.length;s++){var o=n.plugins[s],l=n.runOnRoot(o);if(m22(l))try{yield l}catch(y){throw n.handleError(y)}}if(n.prepareVisitors(),n.hasListener){for(var c=n.result.root;!c[p];){c[p]=!0;for(var d=[w22(c)];d.length>0;){var h=n.visitTick(d);if(m22(h))try{yield h}catch(y){var f=d[d.length-1].node;throw n.handleError(y,f)}}}if(n.listeners.OnceExit){var h3=function*(s){n.result.lastPlugin=m;try{if("document"===c.type){var o=c.nodes.map((o=>s(o,n.helpers)));yield Promise.all(o)}else yield s(c,n.helpers)}catch(l){throw n.handleError(l)}};for(var[m,_]of n.listeners.OnceExit)yield*h3(_)}}return n.processed=!0,n.stringify()}))()}runOnRoot(n){this.result.lastPlugin=n;try{if("object"==typeof n&&n.Once){if("document"===this.result.root.type){var s=this.result.root.nodes.map((s=>n.Once(s,this.helpers)));return m22(s[0])?Promise.all(s):s}return n.Once(this.result.root,this.helpers)}if("function"==typeof n)return n(this.result.root,this.result)}catch(o){throw this.handleError(o)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var n=this.result.opts,s=h;n.syntax&&(s=n.syntax.stringify),n.stringifier&&(s=n.stringifier),s.stringify&&(s=s.stringify);var l=new o(s,this.result.root,this.result.opts).generate();return this.result.css=l[0],this.result.map=l[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(var n of this.plugins)if(m22(this.runOnRoot(n)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){for(var s=this.result.root;!s[p];)s[p]=!0,this.walkSync(s);if(this.listeners.OnceExit)if("document"===s.type)for(var o of s.nodes)this.visitSync(this.listeners.OnceExit,o);else this.visitSync(this.listeners.OnceExit,s)}return this.result}then(n,s){return this.async().then(n,s)}toString(){return this.css}visitSync(n,s){for(var[o,l]of n){this.result.lastPlugin=o;var c=void 0;try{c=l(s,this.helpers)}catch(d){throw this.handleError(d,s.proxyOf)}if("root"!==s.type&&"document"!==s.type&&!s.parent)return!0;if(m22(c))throw this.getAsyncError()}}visitTick(n){var s=n[n.length-1],{node:o,visitors:l}=s;if("root"===o.type||"document"===o.type||o.parent){if(l.length>0&&s.visitorIndex<l.length){var[c,d]=l[s.visitorIndex];s.visitorIndex+=1,s.visitorIndex===l.length&&(s.visitors=[],s.visitorIndex=0),this.result.lastPlugin=c;try{return d(o.toProxy(),this.helpers)}catch(y){throw this.handleError(y,o)}}if(0!==s.iterator){for(var h,f=s.iterator;h=o.nodes[o.indexes[f]];)if(o.indexes[f]+=1,!h[p])return h[p]=!0,void n.push(w22(h));s.iterator=0,delete o.indexes[f]}for(var m=s.events;s.eventIndex<m.length;){var _=m[s.eventIndex];if(s.eventIndex+=1,0===_)return void(o.nodes&&o.nodes.length&&(o[p]=!0,s.iterator=o.getIterator()));if(this.listeners[_])return void(s.visitors=this.listeners[_])}n.pop()}else n.pop()}walkSync(n){n[p]=!0;var s=g22(n);for(var o of s)if(0===o)n.nodes&&n.each((n=>{n[p]||this.walkSync(n)}));else{var l=this.listeners[o];if(l&&this.visitSync(l,n.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}}return S22.registerPostcss=n=>{E=n},Qt=S22,S22.default=S22,d.registerLazyResult(S22),s.registerLazyResult(S22),Qt}function ze2(){if(ur)return ar;ur=1;var n=xe2(),s=Ie2(),c=Re2(),d=yt2(),h=Me2(),p=_e2(),f=function(){if(Ot)return Mt;Ot=1;var n=xe2(),s=Ie2(),c=Me2(),d=Ee2(),h=Te2(),p=Ae2(),f=Le2();function c3(m,_){if(Array.isArray(m))return m.map((n=>c3(n)));var{inputs:y}=m,E=i2(m,o);if(y)for(var M of(_=[],y)){var P=r2({},M,{__proto__:d.prototype});P.map&&(P.map=r2({},P.map,{__proto__:h.prototype})),_.push(P)}if(E.nodes&&(E.nodes=m.nodes.map((n=>c3(n,_)))),E.source){var L=E.source,{inputId:N}=L,F=i2(L,l);E.source=F,null!=N&&(E.source.input=_[N])}if("root"===E.type)return new p(E);if("decl"===E.type)return new c(E);if("rule"===E.type)return new f(E);if("comment"===E.type)return new s(E);if("atrule"===E.type)return new n(E);throw new Error("Unknown node type: "+m.type)}return Mt=c3,c3.default=c3,Mt}(),m=Ee2(),_=We2(),y=Be2(),E=Ce2(),M=De2(),P=function(){if(or)return sr;or=1;var n=_e2(),s=We2(),o=function(){if(rr)return tr;rr=1;var n=Fe2(),s=De2(),o=Pe2(),l=St2();class s22{constructor(s,c,d){var h;c=c.toString(),this.stringified=!1,this._processor=s,this._css=c,this._opts=d,this._map=void 0;var p=l;this.result=new o(this._processor,h,this._opts),this.result.css=c;var f=this;Object.defineProperty(this.result,"root",{get:()=>f.root});var m=new n(p,h,this._opts,c);if(m.isMap()){var[_,y]=m.generate();_&&(this.result.css=_),y&&(this.result.map=y)}else m.clearAnnotation(),this.result.css=m.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(n){return this.async().catch(n)}finally(n){return this.async().then(n,n)}sync(){if(this.error)throw this.error;return this.result}then(n,s){return this.async().then(n,s)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;var n,o=s;try{n=o(this._css,this._opts)}catch(l){this.error=l}if(this.error)throw this.error;return this._root=n,n}get[Symbol.toStringTag](){return"NoWorkResult"}}return tr=s22,s22.default=s22,tr}(),l=Ae2();class n22{constructor(n){void 0===n&&(n=[]),this.version="8.5.1",this.plugins=this.normalize(n)}normalize(n){var s=[];for(var o of n)if(!0===o.postcss?o=o():o.postcss&&(o=o.postcss),"object"==typeof o&&Array.isArray(o.plugins))s=s.concat(o.plugins);else if("object"==typeof o&&o.postcssPlugin)s.push(o);else if("function"==typeof o)s.push(o);else if("object"!=typeof o||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");return s}process(n,l){return void 0===l&&(l={}),this.plugins.length||l.parser||l.stringifier||l.syntax?new s(this,n,l):new o(this,n,l)}use(n){return this.plugins=this.plugins.concat(this.normalize([n])),this}}return sr=n22,n22.default=n22,l.registerProcessor(n22),n.registerProcessor(n22),sr}(),L=Pe2(),N=Ae2(),F=Le2(),D=St2(),B=Ue2();function k22(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return 1===s.length&&Array.isArray(s[0])&&(s=s[0]),new P(s)}return k22.plugin=function(n,s){var o,l=!1;function n3(){console&&console.warn&&!l&&(l=!0,console.warn(n+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(n+": \u91cc\u9762 postcss.plugin \u88ab\u5f03\u7528. \u8fc1\u79fb\u6307\u5357:\nhttps://www.w3ctech.com/topic/2226"));var o=s(...arguments);return o.postcssPlugin=n,o.postcssVersion=(new P).version,o}return Object.defineProperty(n3,"postcss",{get:()=>(o||(o=n3()),o)}),n3.process=function(n,s,o){return k22([n3(o)]).process(n,s)},n3},k22.stringify=D,k22.parse=M,k22.fromJSON=f,k22.list=y,k22.comment=n=>new s(n),k22.atRule=s=>new n(s),k22.decl=n=>new h(n),k22.rule=n=>new F(n),k22.root=n=>new N(n),k22.document=n=>new p(n),k22.CssSyntaxError=d,k22.Declaration=h,k22.Container=c,k22.Processor=P,k22.Document=p,k22.Comment=s,k22.Warning=B,k22.AtRule=n,k22.Result=L,k22.Input=m,k22.Rule=F,k22.Root=N,k22.Node=E,_.registerPostcss(k22),ar=k22,k22.default=k22,ar}!function(){if(gr)return fr;gr=1;var{Input:n}=ze2(),s=function(){if(pr)return dr;pr=1;var n=Ie2(),s=je2(),o=Ne2();return dr=class extends s{checkMissedSemicolon(){}comment(s){var o=new n;this.init(o,s[2]);var l=this.input.fromOffset(s[3])||this.input.fromOffset(this.input.css.length-1);o.source.end={column:l.col,line:l.line,offset:s[3]+1};var c=s[1].slice(2);if("*/"===c.slice(-2)&&(c=c.slice(0,-2)),/^\s*$/.test(c))o.text="",o.raws.left=c,o.raws.right="";else{var d=c.match(/^(\s*)([^]*\S)(\s*)$/);o.text=d[2],o.raws.left=d[1],o.raws.right=d[3]}}createTokenizer(){this.tokenizer=o(this.input,{ignoreErrors:!0})}decl(n){n.length>1&&n.some((n=>"word"===n[0]))&&super.decl(n)}doubleColon(){}endFile(){for(this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces;this.current.parent;)this.current=this.current.parent,this.current.raws.after="";this.root.source.end=this.getPosition(this.tokenizer.position())}precheckMissedSemicolon(n){var s=this.colon(n);if(!1!==s){var o,l;for(o=s-1;o>=0&&"word"!==n[o][0];o--);if(!(0===o||o<0)){for(l=o-1;l>=0;l--)if("space"!==n[l][0]){l+=1;break}var c=n.slice(o),d=n.slice(l,o);n.splice(l,n.length-l),this.spaces=d.map((n=>n[1])).join(""),this.decl(c)}}}unclosedBracket(){}unexpectedClose(){this.current.raws.after+="}"}unknownWord(n){this.spaces+=n.map((n=>n[1])).join("")}unnamedAtrule(n){n.name=""}}}();fr=function(o,l){var c=new n(o,l),d=new s(c);return d.parse(),d.root}}();var wr=function(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}(ze2());wr.stringify,wr.fromJSON,wr.plugin,wr.parse,wr.list,wr.document,wr.comment,wr.atRule,wr.rule,wr.decl,wr.root,wr.CssSyntaxError,wr.Declaration,wr.Container,wr.Processor,wr.Document,wr.Comment,wr.Warning,wr.AtRule,wr.Result,wr.Input,wr.Rule,wr.Root,wr.Node;var Sr=Object.defineProperty,Ve2=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?Sr(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d};var Cr,kr={exports:{}};var Ir,Er,Tr,Ar,Mr,Rr,Or=function(n){if(n.__esModule)return n;var s=n.default;if("function"==typeof s){var o=function t3(){return this instanceof t3?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};o.prototype=s.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(n).forEach((function(s){var l=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(o,s,l.get?l:{enumerable:!0,get:function(){return n[s]}})})),o}(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));function or2(){if(Er)return Ir;Er=1;var n=function(){if(Cr)return kr.exports;Cr=1;var n=String,e22=function(){return{isColorSupported:!1,reset:n,bold:n,dim:n,italic:n,underline:n,inverse:n,hidden:n,strikethrough:n,black:n,red:n,green:n,yellow:n,blue:n,magenta:n,cyan:n,white:n,gray:n,bgBlack:n,bgRed:n,bgGreen:n,bgYellow:n,bgBlue:n,bgMagenta:n,bgCyan:n,bgWhite:n,blackBright:n,redBright:n,greenBright:n,yellowBright:n,blueBright:n,magentaBright:n,cyanBright:n,whiteBright:n,bgBlackBright:n,bgRedBright:n,bgGreenBright:n,bgYellowBright:n,bgBlueBright:n,bgMagentaBright:n,bgCyanBright:n,bgWhiteBright:n}};return kr.exports=e22(),kr.exports.createColors=e22,kr.exports}(),s=Or;class r22 extends Error{constructor(n,s,o,l,c,d){super(n),this.name="CssSyntaxError",this.reason=n,c&&(this.file=c),l&&(this.source=l),d&&(this.plugin=d),void 0!==s&&void 0!==o&&("number"==typeof s?(this.line=s,this.column=o):(this.line=s.line,this.column=s.column,this.endLine=o.line,this.endColumn=o.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,r22)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(o){if(!this.source)return"";var l=this.source;null==o&&(o=n.isColorSupported);var n22=n=>n,s22=n=>n,o22=n=>n;if(o){var{bold:c,gray:d,red:h}=n.createColors(!0);s22=n=>c(h(n)),n22=n=>d(n),s&&(o22=n=>s(n))}var p=l.split(/\r?\n/),f=Math.max(this.line-3,0),m=Math.min(this.line+2,p.length),_=String(m).length;return p.slice(f,m).map(((n,s)=>{var o=f+1+s,l=" "+(" "+o).slice(-_)+" | ";if(o===this.line){if(n.length>160){var c=Math.max(0,this.column-20),d=Math.max(this.column+20,this.endColumn+20),h=n.slice(c,d),p=n22(l.replace(/\d/g," "))+n.slice(0,Math.min(this.column-1,19)).replace(/[^\t]/g," ");return s22(">")+n22(l)+o22(h)+"\n "+p+s22("^")}var m=n22(l.replace(/\d/g," "))+n.slice(0,this.column-1).replace(/[^\t]/g," ");return s22(">")+n22(l)+o22(n)+"\n "+m+s22("^")}return" "+n22(l)+o22(n)})).join("\n")}toString(){var n=this.showSourceCode();return n&&(n="\n\n"+n+"\n"),this.name+": "+this.message+n}}return Ir=r22,r22.default=r22,Ir}function ar2(){if(Ar)return Tr;Ar=1;var n={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class e22{constructor(n){this.builder=n}atrule(n,s){var o="@"+n.name,l=n.params?this.rawValue(n,"params"):"";if(void 0!==n.raws.afterName?o+=n.raws.afterName:l&&(o+=" "),n.nodes)this.block(n,o+l);else{var c=(n.raws.between||"")+(s?";":"");this.builder(o+l+c,n)}}beforeAfter(n,s){var o;o="decl"===n.type?this.raw(n,null,"beforeDecl"):"comment"===n.type?this.raw(n,null,"beforeComment"):"before"===s?this.raw(n,null,"beforeRule"):this.raw(n,null,"beforeClose");for(var l=n.parent,c=0;l&&"root"!==l.type;)c+=1,l=l.parent;if(o.includes("\n")){var d=this.raw(n,null,"indent");if(d.length)for(var h=0;h<c;h++)o+=d}return o}block(n,s){var o,l=this.raw(n,"between","beforeOpen");this.builder(s+l+"{",n,"start"),n.nodes&&n.nodes.length?(this.body(n),o=this.raw(n,"after")):o=this.raw(n,"after","emptyBody"),o&&this.builder(o),this.builder("}",n,"end")}body(n){for(var s=n.nodes.length-1;s>0&&"comment"===n.nodes[s].type;)s-=1;for(var o=this.raw(n,"semicolon"),l=0;l<n.nodes.length;l++){var c=n.nodes[l],d=this.raw(c,"before");d&&this.builder(d),this.stringify(c,s!==l||o)}}comment(n){var s=this.raw(n,"left","commentLeft"),o=this.raw(n,"right","commentRight");this.builder("/*"+s+n.text+o+"*/",n)}decl(n,s){var o=this.raw(n,"between","colon"),l=n.prop+o+this.rawValue(n,"value");n.important&&(l+=n.raws.important||" !important"),s&&(l+=";"),this.builder(l,n)}document(n){this.body(n)}raw(s,o,l){var c;if(l||(l=o),o&&void 0!==(c=s.raws[o]))return c;var d=s.parent;if("before"===l){if(!d||"root"===d.type&&d.first===s)return"";if(d&&"document"===d.type)return""}if(!d)return n[l];var h=s.root();if(h.rawCache||(h.rawCache={}),void 0!==h.rawCache[l])return h.rawCache[l];if("before"===l||"after"===l)return this.beforeAfter(s,l);var p,f="raw"+((p=l)[0].toUpperCase()+p.slice(1));return this[f]?c=this[f](h,s):h.walk((n=>{if(void 0!==(c=n.raws[o]))return!1})),void 0===c&&(c=n[l]),h.rawCache[l]=c,c}rawBeforeClose(n){var s;return n.walk((n=>{if(n.nodes&&n.nodes.length>0&&void 0!==n.raws.after)return(s=n.raws.after).includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),s&&(s=s.replace(/\S/g,"")),s}rawBeforeComment(n,s){var o;return n.walkComments((n=>{if(void 0!==n.raws.before)return(o=n.raws.before).includes("\n")&&(o=o.replace(/[^\n]+$/,"")),!1})),void 0===o?o=this.raw(s,null,"beforeDecl"):o&&(o=o.replace(/\S/g,"")),o}rawBeforeDecl(n,s){var o;return n.walkDecls((n=>{if(void 0!==n.raws.before)return(o=n.raws.before).includes("\n")&&(o=o.replace(/[^\n]+$/,"")),!1})),void 0===o?o=this.raw(s,null,"beforeRule"):o&&(o=o.replace(/\S/g,"")),o}rawBeforeOpen(n){var s;return n.walk((n=>{if("decl"!==n.type&&void 0!==(s=n.raws.between))return!1})),s}rawBeforeRule(n){var s;return n.walk((o=>{if(o.nodes&&(o.parent!==n||n.first!==o)&&void 0!==o.raws.before)return(s=o.raws.before).includes("\n")&&(s=s.replace(/[^\n]+$/,"")),!1})),s&&(s=s.replace(/\S/g,"")),s}rawColon(n){var s;return n.walkDecls((n=>{if(void 0!==n.raws.between)return s=n.raws.between.replace(/[^\s:]/g,""),!1})),s}rawEmptyBody(n){var s;return n.walk((n=>{if(n.nodes&&0===n.nodes.length&&void 0!==(s=n.raws.after))return!1})),s}rawIndent(n){return n.raws.indent?n.raws.indent:(n.walk((o=>{var l=o.parent;if(l&&l!==n&&l.parent&&l.parent===n&&void 0!==o.raws.before){var c=o.raws.before.split("\n");return s=(s=c[c.length-1]).replace(/\S/g,""),!1}})),s);var s}rawSemicolon(n){var s;return n.walk((n=>{if(n.nodes&&n.nodes.length&&"decl"===n.last.type&&void 0!==(s=n.raws.semicolon))return!1})),s}rawValue(n,s){var o=n[s],l=n.raws[s];return l&&l.value===o?l.raw:o}root(n){this.body(n),n.raws.after&&this.builder(n.raws.after)}rule(n){this.block(n,this.rawValue(n,"selector")),n.raws.ownSemicolon&&this.builder(n.raws.ownSemicolon,n,"end")}stringify(n,s){if(!this[n.type])throw new Error("Unknown AST node type "+n.type+". Maybe you need to change PostCSS stringifier.");this[n.type](n,s)}}return Tr=e22,e22.default=e22,Tr}function hr2(){if(Rr)return Mr;Rr=1;var n=ar2();function e22(s,o){new n(o).stringify(s)}return Mr=e22,e22.default=e22,Mr}var jr,zr,qr,Vr,Gr,Yr,Zr,Kr,en,tn,rn,nn,sn,on,an,ln,un,dn,hn,pn,wn,Cn,On,Ln,Fn,Dn,Bn,$n,Un,Hn,jn,zn,qn,Wn,Vn,Gn,Yn,Zn,Jn,Xn,Kn,Qn,hi,mi,vi,_i,yi,wi,ki,xi,Ei,Mi={};function ui2(){return jr||(jr=1,Mi.isClean=Symbol("isClean"),Mi.my=Symbol("my")),Mi}function li2(){if(qr)return zr;qr=1;var n=or2(),s=ar2(),o=hr2(),{isClean:l,my:c}=ui2();function s22(n,s){var o=new n.constructor;for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)&&"proxyCache"!==l){var c=n[l],d=typeof c;"parent"===l&&"object"===d?s&&(o[l]=s):"source"===l?o[l]=c:Array.isArray(c)?o[l]=c.map((n=>s22(n,o))):("object"===d&&null!==c&&(c=s22(c)),o[l]=c)}return o}function o22(n,s){if(s&&void 0!==s.offset)return s.offset;for(var o=1,l=1,c=0,d=0;d<n.length;d++){if(l===s.line&&o===s.column){c=d;break}"\n"===n[d]?(o=1,l+=1):o+=1}return c}class a22{constructor(n){for(var s in void 0===n&&(n={}),this.raws={},this[l]=!1,this[c]=!0,n)if("nodes"===s)for(var o of(this.nodes=[],n[s]))"function"==typeof o.clone?this.append(o.clone()):this.append(o);else this[s]=n[s]}addToError(n){if(n.postcssNode=this,n.stack&&this.source&&/\n\s{4}at /.test(n.stack)){var s=this.source;n.stack=n.stack.replace(/\n\s{4}at /,"$&"+s.input.from+":"+s.start.line+":"+s.start.column+"$&")}return n}after(n){return this.parent.insertAfter(this,n),this}assign(n){for(var s in void 0===n&&(n={}),n)this[s]=n[s];return this}before(n){return this.parent.insertBefore(this,n),this}cleanRaws(n){delete this.raws.before,delete this.raws.after,n||delete this.raws.between}clone(n){void 0===n&&(n={});var s=s22(this);for(var o in n)s[o]=n[o];return s}cloneAfter(n){void 0===n&&(n={});var s=this.clone(n);return this.parent.insertAfter(this,s),s}cloneBefore(n){void 0===n&&(n={});var s=this.clone(n);return this.parent.insertBefore(this,s),s}error(s,o){if(void 0===o&&(o={}),this.source){var{end:l,start:c}=this.rangeBy(o);return this.source.input.error(s,{column:c.column,line:c.line},{column:l.column,line:l.line},o)}return new n(s)}getProxyProcessor(){return{get:(n,s)=>"proxyOf"===s?n:"root"===s?()=>n.root().toProxy():n[s],set:(n,s,o)=>(n[s]===o||(n[s]=o,"prop"!==s&&"value"!==s&&"name"!==s&&"params"!==s&&"important"!==s&&"text"!==s||n.markDirty()),!0)}}markClean(){this[l]=!0}markDirty(){if(this[l]){this[l]=!1;for(var n=this;n=n.parent;)n[l]=!1}}next(){if(this.parent){var n=this.parent.index(this);return this.parent.nodes[n+1]}}positionBy(n){var s=this.source.start;if(n.index)s=this.positionInside(n.index);else if(n.word){var o="document"in this.source.input?this.source.input.document:this.source.input.css,l=o.slice(o22(o,this.source.start),o22(o,this.source.end)).indexOf(n.word);-1!==l&&(s=this.positionInside(l))}return s}positionInside(n){for(var s=this.source.start.column,o=this.source.start.line,l=("document"in this.source.input?this.source.input.document:this.source.input.css),c=o22(l,this.source.start),d=c+n,h=c;h<d;h++)"\n"===l[h]?(s=1,o+=1):s+=1;return{column:s,line:o}}prev(){if(this.parent){var n=this.parent.index(this);return this.parent.nodes[n-1]}}rangeBy(n){var s={column:this.source.start.column,line:this.source.start.line},o=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:s.column+1,line:s.line};if(n.word){var l="document"in this.source.input?this.source.input.document:this.source.input.css,c=l.slice(o22(l,this.source.start),o22(l,this.source.end)).indexOf(n.word);-1!==c&&(s=this.positionInside(c),o=this.positionInside(c+n.word.length))}else n.start?s={column:n.start.column,line:n.start.line}:n.index&&(s=this.positionInside(n.index)),n.end?o={column:n.end.column,line:n.end.line}:"number"==typeof n.endIndex?o=this.positionInside(n.endIndex):n.index&&(o=this.positionInside(n.index+1));return(o.line<s.line||o.line===s.line&&o.column<=s.column)&&(o={column:s.column+1,line:s.line}),{end:o,start:s}}raw(n,o){return(new s).raw(this,n,o)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(){if(this.parent){for(var n=this,s=!1,o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];for(var d of l)d===this?s=!0:s?(this.parent.insertAfter(n,d),n=d):this.parent.insertBefore(n,d);s||this.remove()}return this}root(){for(var n=this;n.parent&&"document"!==n.parent.type;)n=n.parent;return n}toJSON(n,s){var o={},l=null==s;s=s||new Map;var c=0;for(var d in this)if(Object.prototype.hasOwnProperty.call(this,d)&&"parent"!==d&&"proxyCache"!==d){var h=this[d];if(Array.isArray(h))o[d]=h.map((n=>"object"==typeof n&&n.toJSON?n.toJSON(null,s):n));else if("object"==typeof h&&h.toJSON)o[d]=h.toJSON(null,s);else if("source"===d){var p=s.get(h.input);null==p&&(p=c,s.set(h.input,c),c++),o[d]={end:h.end,inputId:p,start:h.start}}else o[d]=h}return l&&(o.inputs=[...s.keys()].map((n=>n.toJSON()))),o}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(n){void 0===n&&(n=o),n.stringify&&(n=n.stringify);var s="";return n(this,(n=>{s+=n})),s}warn(n,s,o){var l={node:this};for(var c in o)l[c]=o[c];return n.warn(s,l)}get proxyOf(){return this}}return zr=a22,a22.default=a22,zr}function ci2(){if(Gr)return Vr;Gr=1;var n=li2();class e22 extends n{constructor(n){super(n),this.type="comment"}}return Vr=e22,e22.default=e22,Vr}function fi2(){if(Zr)return Yr;Zr=1;var n=li2();class e22 extends n{constructor(n){n&&void 0!==n.value&&"string"!=typeof n.value&&(n=r2({},n,{value:String(n.value)})),super(n),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}return Yr=e22,e22.default=e22,Yr}function di2(){if(en)return Kr;en=1;var n,s,o,l,c=ci2(),d=fi2(),h=li2(),{isClean:p,my:f}=ui2();function u22(n){return n.map((n=>(n.nodes&&(n.nodes=u22(n.nodes)),delete n.source,n)))}function l22(n){if(n[p]=!1,n.proxyOf.nodes)for(var s of n.proxyOf.nodes)l22(s)}class c22 extends h{append(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];for(var l of s){var c=this.normalize(l,this.last);for(var d of c)this.proxyOf.nodes.push(d)}return this.markDirty(),this}cleanRaws(n){if(super.cleanRaws(n),this.nodes)for(var s of this.nodes)s.cleanRaws(n)}each(n){if(this.proxyOf.nodes){for(var s,o,l=this.getIterator();this.indexes[l]<this.proxyOf.nodes.length&&(s=this.indexes[l],!1!==(o=n(this.proxyOf.nodes[s],s)));)this.indexes[l]+=1;return delete this.indexes[l],o}}every(n){return this.nodes.every(n)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var n=this.lastEach;return this.indexes[n]=0,n}getProxyProcessor(){return{get:(n,s)=>"proxyOf"===s?n:n[s]?"each"===s||"string"==typeof s&&s.startsWith("walk")?function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return n[s](...l.map((n=>"function"==typeof n?(s,o)=>n(s.toProxy(),o):n)))}:"every"===s||"some"===s?o=>n[s]((function(n){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];return o(n.toProxy(),...l)})):"root"===s?()=>n.root().toProxy():"nodes"===s?n.nodes.map((n=>n.toProxy())):"first"===s||"last"===s?n[s].toProxy():n[s]:n[s],set:(n,s,o)=>(n[s]===o||(n[s]=o,"name"!==s&&"params"!==s&&"selector"!==s||n.markDirty()),!0)}}index(n){return"number"==typeof n?n:(n.proxyOf&&(n=n.proxyOf),this.proxyOf.nodes.indexOf(n))}insertAfter(n,s){var o,l=this.index(n),c=this.normalize(s,this.proxyOf.nodes[l]).reverse();for(var d of(l=this.index(n),c))this.proxyOf.nodes.splice(l+1,0,d);for(var h in this.indexes)l<(o=this.indexes[h])&&(this.indexes[h]=o+c.length);return this.markDirty(),this}insertBefore(n,s){var o,l=this.index(n),c=0===l&&"prepend",d=this.normalize(s,this.proxyOf.nodes[l],c).reverse();for(var h of(l=this.index(n),d))this.proxyOf.nodes.splice(l,0,h);for(var p in this.indexes)l<=(o=this.indexes[p])&&(this.indexes[p]=o+d.length);return this.markDirty(),this}normalize(o,h){if("string"==typeof o)o=u22(s(o).nodes);else if(void 0===o)o=[];else if(Array.isArray(o))for(var m of o=o.slice(0))m.parent&&m.parent.removeChild(m,"ignore");else if("root"===o.type&&"document"!==this.type)for(var _ of o=o.nodes.slice(0))_.parent&&_.parent.removeChild(_,"ignore");else if(o.type)o=[o];else if(o.prop){if(void 0===o.value)throw new Error("Value field is missed in node creation");"string"!=typeof o.value&&(o.value=String(o.value)),o=[new d(o)]}else if(o.selector||o.selectors)o=[new l(o)];else if(o.name)o=[new n(o)];else{if(!o.text)throw new Error("Unknown node type in node creation");o=[new c(o)]}return o.map((n=>(n[f]||c22.rebuild(n),(n=n.proxyOf).parent&&n.parent.removeChild(n),n[p]&&l22(n),n.raws||(n.raws={}),void 0===n.raws.before&&h&&void 0!==h.raws.before&&(n.raws.before=h.raws.before.replace(/\S/g,"")),n.parent=this.proxyOf,n)))}prepend(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];for(var l of s=s.reverse()){var c=this.normalize(l,this.first,"prepend").reverse();for(var d of c)this.proxyOf.nodes.unshift(d);for(var h in this.indexes)this.indexes[h]=this.indexes[h]+c.length}return this.markDirty(),this}push(n){return n.parent=this,this.proxyOf.nodes.push(n),this}removeAll(){for(var n of this.proxyOf.nodes)n.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(n){var s;for(var o in n=this.index(n),this.proxyOf.nodes[n].parent=void 0,this.proxyOf.nodes.splice(n,1),this.indexes)(s=this.indexes[o])>=n&&(this.indexes[o]=s-1);return this.markDirty(),this}replaceValues(n,s,o){return o||(o=s,s={}),this.walkDecls((l=>{s.props&&!s.props.includes(l.prop)||s.fast&&!l.value.includes(s.fast)||(l.value=l.value.replace(n,o))})),this.markDirty(),this}some(n){return this.nodes.some(n)}walk(n){return this.each(((s,o)=>{var l;try{l=n(s,o)}catch(c){throw s.addToError(c)}return!1!==l&&s.walk&&(l=s.walk(n)),l}))}walkAtRules(n,s){return s?n instanceof RegExp?this.walk(((o,l)=>{if("atrule"===o.type&&n.test(o.name))return s(o,l)})):this.walk(((o,l)=>{if("atrule"===o.type&&o.name===n)return s(o,l)})):(s=n,this.walk(((n,o)=>{if("atrule"===n.type)return s(n,o)})))}walkComments(n){return this.walk(((s,o)=>{if("comment"===s.type)return n(s,o)}))}walkDecls(n,s){return s?n instanceof RegExp?this.walk(((o,l)=>{if("decl"===o.type&&n.test(o.prop))return s(o,l)})):this.walk(((o,l)=>{if("decl"===o.type&&o.prop===n)return s(o,l)})):(s=n,this.walk(((n,o)=>{if("decl"===n.type)return s(n,o)})))}walkRules(n,s){return s?n instanceof RegExp?this.walk(((o,l)=>{if("rule"===o.type&&n.test(o.selector))return s(o,l)})):this.walk(((o,l)=>{if("rule"===o.type&&o.selector===n)return s(o,l)})):(s=n,this.walk(((n,o)=>{if("rule"===n.type)return s(n,o)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}return c22.registerParse=n=>{s=n},c22.registerRule=n=>{l=n},c22.registerAtRule=s=>{n=s},c22.registerRoot=n=>{o=n},Kr=c22,c22.default=c22,c22.rebuild=s=>{"atrule"===s.type?Object.setPrototypeOf(s,n.prototype):"rule"===s.type?Object.setPrototypeOf(s,l.prototype):"decl"===s.type?Object.setPrototypeOf(s,d.prototype):"comment"===s.type?Object.setPrototypeOf(s,c.prototype):"root"===s.type&&Object.setPrototypeOf(s,o.prototype),s[f]=!0,s.nodes&&s.nodes.forEach((n=>{c22.rebuild(n)}))},Kr}function vi2(){if(rn)return tn;rn=1;var n=di2();class e22 extends n{constructor(n){super(n),this.type="atrule"}append(){return this.proxyOf.nodes||(this.nodes=[]),super.append(...arguments)}prepend(){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...arguments)}}return tn=e22,e22.default=e22,n.registerAtRule(e22),tn}function pi2(){if(sn)return nn;sn=1;var n,s,o=di2();class n22 extends o{constructor(n){super(r2({type:"document"},n)),this.nodes||(this.nodes=[])}toResult(o){return void 0===o&&(o={}),new n(new s,this,o).stringify()}}return n22.registerLazyResult=s=>{n=s},n22.registerProcessor=n=>{s=n},nn=n22,n22.default=n22,nn}function gi2(){if(un)return ln;un=1;var{existsSync:n,readFileSync:s}=Or,{dirname:o,join:l}=Or,{SourceMapConsumer:c,SourceMapGenerator:d}=Or;class o22{constructor(n,s){if(!1!==s.map){this.loadAnnotation(n),this.inline=this.startWith(this.annotation,"data:");var l=s.map?s.map.prev:void 0,c=this.loadMap(s.from,l);!this.mapFile&&s.from&&(this.mapFile=s.from),this.mapFile&&(this.root=o(this.mapFile)),c&&(this.text=c)}}consumer(){return this.consumerCache||(this.consumerCache=new c(this.text)),this.consumerCache}decodeInline(n){var s=n.match(/^data:application\/json;charset=utf-?8,/)||n.match(/^data:application\/json,/);if(s)return decodeURIComponent(n.substr(s[0].length));var o,l=n.match(/^data:application\/json;charset=utf-?8;base64,/)||n.match(/^data:application\/json;base64,/);if(l)return o=n.substr(l[0].length),Buffer?Buffer.from(o,"base64").toString():window.atob(o);var c=n.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+c)}getAnnotationURL(n){return n.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(n){return"object"==typeof n&&("string"==typeof n.mappings||"string"==typeof n._mappings||Array.isArray(n.sections))}loadAnnotation(n){var s=n.match(/\/\*\s*# sourceMappingURL=/g);if(s){var o=n.lastIndexOf(s.pop()),l=n.indexOf("*/",o);o>-1&&l>-1&&(this.annotation=this.getAnnotationURL(n.substring(o,l)))}}loadFile(l){if(this.root=o(l),n(l))return this.mapFile=l,s(l,"utf-8").toString().trim()}loadMap(n,s){if(!1===s)return!1;if(s){if("string"==typeof s)return s;if("function"!=typeof s){if(s instanceof c)return d.fromSourceMap(s).toString();if(s instanceof d)return s.toString();if(this.isMap(s))return JSON.stringify(s);throw new Error("Unsupported previous source map format: "+s.toString())}var h=s(n);if(h){var p=this.loadFile(h);if(!p)throw new Error("Unable to load previous source map: "+h.toString());return p}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var f=this.annotation;return n&&(f=l(o(n),f)),this.loadFile(f)}}}startWith(n,s){return!!n&&n.substr(0,s.length)===s}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return ln=o22,o22.default=o22,ln}function wi2(){if(hn)return dn;hn=1;var{nanoid:n}=an?on:(an=1,on={nanoid:function(n){void 0===n&&(n=21);for(var s="",o=0|n;o--;)s+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return s},customAlphabet:function(n,s){return void 0===s&&(s=21),function(o){void 0===o&&(o=s);for(var l="",c=0|o;c--;)l+=n[Math.random()*n.length|0];return l}}}),{isAbsolute:s,resolve:o}=Or,{SourceMapConsumer:l,SourceMapGenerator:c}=Or,{fileURLToPath:d,pathToFileURL:h}=Or,p=or2(),f=gi2(),m=Or,_=Symbol("fromOffsetCache"),y=Boolean(l&&c),E=Boolean(o&&s);class v22{constructor(l,c){if(void 0===c&&(c={}),null==l||"object"==typeof l&&!l.toString)throw new Error("PostCSS received "+l+" instead of CSS string");if(this.css=l.toString(),"\ufeff"===this.css[0]||"\ufffe"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,c.document&&(this.document=c.document.toString()),c.from&&(!E||/^\w+:\/\//.test(c.from)||s(c.from)?this.file=c.from:this.file=o(c.from)),E&&y){var d=new f(this.css,c);if(d.text){this.map=d;var h=d.consumer().file;!this.file&&h&&(this.file=this.mapResolve(h))}}this.file||(this.id="<input css "+n(6)+">"),this.map&&(this.map.file=this.from)}error(n,s,o,l){var c,d,f;if(void 0===l&&(l={}),s&&"object"==typeof s){var m=s,_=o;if("number"==typeof m.offset){var y=this.fromOffset(m.offset);s=y.line,o=y.col}else s=m.line,o=m.column;if("number"==typeof _.offset){var E=this.fromOffset(_.offset);d=E.line,c=E.col}else d=_.line,c=_.column}else if(!o){var M=this.fromOffset(s);s=M.line,o=M.col}var P=this.origin(s,o,d,c);return(f=P?new p(n,void 0===P.endLine?P.line:{column:P.column,line:P.line},void 0===P.endLine?P.column:{column:P.endColumn,line:P.endLine},P.source,P.file,l.plugin):new p(n,void 0===d?s:{column:o,line:s},void 0===d?o:{column:c,line:d},this.css,this.file,l.plugin)).input={column:o,endColumn:c,endLine:d,line:s,source:this.css},this.file&&(h&&(f.input.url=h(this.file).toString()),f.input.file=this.file),f}fromOffset(n){var s;if(this[_])s=this[_];else{var o=this.css.split("\n");s=new Array(o.length);for(var l=0,c=0,d=o.length;c<d;c++)s[c]=l,l+=o[c].length+1;this[_]=s}var h=0;if(n>=s[s.length-1])h=s.length-1;else for(var p,f=s.length-2;h<f;)if(n<s[p=h+(f-h>>1)])f=p-1;else{if(!(n>=s[p+1])){h=p;break}h=p+1}return{col:n-s[h]+1,line:h+1}}mapResolve(n){return/^\w+:\/\//.test(n)?n:o(this.map.consumer().sourceRoot||this.map.root||".",n)}origin(n,o,l,c){if(!this.map)return!1;var p,f,m=this.map.consumer(),_=m.originalPositionFor({column:o,line:n});if(!_.source)return!1;"number"==typeof l&&(p=m.originalPositionFor({column:c,line:l})),f=s(_.source)?h(_.source):new URL(_.source,this.map.consumer().sourceRoot||h(this.map.mapFile));var y={column:_.column,endColumn:p&&p.column,endLine:p&&p.line,line:_.line,url:f.toString()};if("file:"===f.protocol){if(!d)throw new Error("file: protocol is not available in this PostCSS build");y.file=d(f)}var E=m.sourceContentFor(_.source);return E&&(y.source=E),y}toJSON(){var n={};for(var s of["hasBOM","css","file","id"])null!=this[s]&&(n[s]=this[s]);return this.map&&(n.map=r2({},this.map),n.map.consumerCache&&(n.map.consumerCache=void 0)),n}get from(){return this.file||this.id}}return dn=v22,v22.default=v22,m&&m.registerInput&&m.registerInput(v22),dn}function yi2(){if(wn)return pn;wn=1;var n,s,o=di2();class i22 extends o{constructor(n){super(n),this.type="root",this.nodes||(this.nodes=[])}normalize(n,s,o){var l=super.normalize(n);if(s)if("prepend"===o)this.nodes.length>1?s.raws.before=this.nodes[1].raws.before:delete s.raws.before;else if(this.first!==s)for(var c of l)c.raws.before=s.raws.before;return l}removeChild(n,s){var o=this.index(n);return!s&&0===o&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[o].raws.before),super.removeChild(n)}toResult(o){return void 0===o&&(o={}),new n(new s,this,o).stringify()}}return i22.registerLazyResult=s=>{n=s},i22.registerProcessor=n=>{s=n},pn=i22,i22.default=i22,o.registerRoot(i22),pn}function bi2(){if(On)return Cn;On=1;var n={comma:s=>n.split(s,[","],!0),space:s=>n.split(s,[" ","\n","\t"]),split(n,s,o){var l=[],c="",d=!1,h=0,p=!1,f="",m=!1;for(var _ of n)m?m=!1:"\\"===_?m=!0:p?_===f&&(p=!1):'"'===_||"'"===_?(p=!0,f=_):"("===_?h+=1:")"===_?h>0&&(h-=1):0===h&&s.includes(_)&&(d=!0),d?(""!==c&&l.push(c.trim()),c="",d=!1):c+=_;return(o||""!==c)&&l.push(c.trim()),l}};return Cn=n,n.default=n,Cn}function Si2(){if(Fn)return Ln;Fn=1;var n=di2(),s=bi2();class r22 extends n{constructor(n){super(n),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return s.comma(this.selector)}set selectors(n){var s=this.selector?this.selector.match(/,\s*/):null,o=s?s[0]:","+this.raw("between","beforeOpen");this.selector=n.join(o)}}return Ln=r22,r22.default=r22,n.registerRule(r22),Ln}function ki2(){if(Un)return $n;Un=1;var{dirname:n,relative:s,resolve:o,sep:l}=Or,{SourceMapConsumer:c,SourceMapGenerator:d}=Or,{pathToFileURL:h}=Or,p=wi2(),f=Boolean(c&&d),m=Boolean(n&&o&&s&&l);return $n=class{constructor(n,s,o,l){this.stringify=n,this.mapOpts=o.map||{},this.root=s,this.opts=o,this.css=l,this.originalCSS=l,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){var n;n=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var s="\n";this.css.includes("\r\n")&&(s="\r\n"),this.css+=s+"/*# sourceMappingURL="+n+" */"}applyPrevMaps(){for(var s of this.previous()){var o=this.toUrl(this.path(s.file)),l=s.root||n(s.file),d=void 0;!1===this.mapOpts.sourcesContent?(d=new c(s.text)).sourcesContent&&(d.sourcesContent=null):d=s.consumer(),this.map.applySourceMap(d,o,this.toUrl(this.path(l)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root)for(var n,s=this.root.nodes.length-1;s>=0;s--)"comment"===(n=this.root.nodes[s]).type&&n.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(s);else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),m&&f&&this.isMap())return this.generateMap();var n="";return this.stringify(this.root,(s=>{n+=s})),[n]}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){var n=this.previous()[0].consumer();n.file=this.outputFile(),this.map=d.fromSourceMap(n,{ignoreInvalidMapping:!0})}else this.map=new d({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new d({file:this.outputFile(),ignoreInvalidMapping:!0});var n,s,o=1,l=1,c="<no source>",h={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((d,p,f)=>{if(this.css+=d,p&&"end"!==f&&(h.generated.line=o,h.generated.column=l-1,p.source&&p.source.start?(h.source=this.sourcePath(p),h.original.line=p.source.start.line,h.original.column=p.source.start.column-1,this.map.addMapping(h)):(h.source=c,h.original.line=1,h.original.column=0,this.map.addMapping(h))),(s=d.match(/\n/g))?(o+=s.length,n=d.lastIndexOf("\n"),l=d.length-n):l+=d.length,p&&"start"!==f){var m=p.parent||{raws:{}};("decl"===p.type||"atrule"===p.type&&!p.nodes)&&p===m.last&&!m.raws.semicolon||(p.source&&p.source.end?(h.source=this.sourcePath(p),h.original.line=p.source.end.line,h.original.column=p.source.end.column-1,h.generated.line=o,h.generated.column=l-2,this.map.addMapping(h)):(h.source=c,h.original.line=1,h.original.column=0,h.generated.line=o,h.generated.column=l-1,this.map.addMapping(h)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((n=>n.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var n=this.mapOpts.annotation;return(void 0===n||!0===n)&&(!this.previous().length||this.previous().some((n=>n.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((n=>n.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(l){if(this.mapOpts.absolute)return l;if(60===l.charCodeAt(0))return l;if(/^\w+:\/\//.test(l))return l;var c=this.memoizedPaths.get(l);if(c)return c;var d=this.opts.to?n(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(d=n(o(d,this.mapOpts.annotation)));var h=s(d,l);return this.memoizedPaths.set(l,h),h}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((n=>{if(n.source&&n.source.input.map){var s=n.source.input.map;this.previousMaps.includes(s)||this.previousMaps.push(s)}}));else{var n=new p(this.originalCSS,this.opts);n.map&&this.previousMaps.push(n.map)}return this.previousMaps}setSourcesContent(){var n={};if(this.root)this.root.walk((s=>{if(s.source){var o=s.source.input.from;if(o&&!n[o]){n[o]=!0;var l=this.usesFileUrls?this.toFileUrl(o):this.toUrl(this.path(o));this.map.setSourceContent(l,s.source.input.css)}}}));else if(this.css){var s=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(s,this.css)}}sourcePath(n){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(n.source.input.from):this.toUrl(this.path(n.source.input.from))}toBase64(n){return Buffer?Buffer.from(n).toString("base64"):window.btoa(unescape(encodeURIComponent(n)))}toFileUrl(n){var s=this.memoizedFileURLs.get(n);if(s)return s;if(h){var o=h(n).toString();return this.memoizedFileURLs.set(n,o),o}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(n){var s=this.memoizedURLs.get(n);if(s)return s;"\\"===l&&(n=n.replace(/\\/g,"/"));var o=encodeURI(n).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(n,o),o}}}function Ci2(){if(jn)return Hn;jn=1;var n="'".charCodeAt(0),s='"'.charCodeAt(0),o="\\".charCodeAt(0),l="/".charCodeAt(0),c="\n".charCodeAt(0),d=" ".charCodeAt(0),h="\f".charCodeAt(0),p="\t".charCodeAt(0),f="\r".charCodeAt(0),m="[".charCodeAt(0),_="]".charCodeAt(0),y="(".charCodeAt(0),E=")".charCodeAt(0),M="{".charCodeAt(0),P="}".charCodeAt(0),L=";".charCodeAt(0),N="*".charCodeAt(0),F=":".charCodeAt(0),D="@".charCodeAt(0),B=/[\t\n\f\r "#'()/;[\\\]{}]/g,$=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,U=/.[\r\n"'(/\\]/,H=/[\da-f]/i;return Hn=function(z,q){void 0===q&&(q={});var V,Z,ee,ne,ie,se,oe,le,ce,pe,fe=z.css.valueOf(),ge=q.ignoreErrors,be=fe.length,Oe=0,Ne=[],Fe=[];function W22(n){throw z.error("Unclosed "+n,Oe)}return{back:function(n){Fe.push(n)},endOfFile:function(){return 0===Fe.length&&Oe>=be},nextToken:function(z){if(Fe.length)return Fe.pop();if(!(Oe>=be)){var q=!!z&&z.ignoreUnclosed;switch(V=fe.charCodeAt(Oe)){case c:case d:case p:case f:case h:ne=Oe;do{ne+=1,V=fe.charCodeAt(ne)}while(V===d||V===c||V===p||V===f||V===h);se=["space",fe.slice(Oe,ne)],Oe=ne-1;break;case m:case _:case M:case P:case F:case L:case E:var De=String.fromCharCode(V);se=[De,De,Oe];break;case y:if(pe=Ne.length?Ne.pop()[1]:"",ce=fe.charCodeAt(Oe+1),"url"===pe&&ce!==n&&ce!==s&&ce!==d&&ce!==c&&ce!==p&&ce!==h&&ce!==f){ne=Oe;do{if(oe=!1,-1===(ne=fe.indexOf(")",ne+1))){if(ge||q){ne=Oe;break}W22("bracket")}for(le=ne;fe.charCodeAt(le-1)===o;)le-=1,oe=!oe}while(oe);se=["brackets",fe.slice(Oe,ne+1),Oe,ne],Oe=ne}else ne=fe.indexOf(")",Oe+1),Z=fe.slice(Oe,ne+1),-1===ne||U.test(Z)?se=["(","(",Oe]:(se=["brackets",Z,Oe,ne],Oe=ne);break;case n:case s:ie=V===n?"'":'"',ne=Oe;do{if(oe=!1,-1===(ne=fe.indexOf(ie,ne+1))){if(ge||q){ne=Oe+1;break}W22("string")}for(le=ne;fe.charCodeAt(le-1)===o;)le-=1,oe=!oe}while(oe);se=["string",fe.slice(Oe,ne+1),Oe,ne],Oe=ne;break;case D:B.lastIndex=Oe+1,B.test(fe),ne=0===B.lastIndex?fe.length-1:B.lastIndex-2,se=["at-word",fe.slice(Oe,ne+1),Oe,ne],Oe=ne;break;case o:for(ne=Oe,ee=!0;fe.charCodeAt(ne+1)===o;)ne+=1,ee=!ee;if(V=fe.charCodeAt(ne+1),ee&&V!==l&&V!==d&&V!==c&&V!==p&&V!==f&&V!==h&&(ne+=1,H.test(fe.charAt(ne)))){for(;H.test(fe.charAt(ne+1));)ne+=1;fe.charCodeAt(ne+1)===d&&(ne+=1)}se=["word",fe.slice(Oe,ne+1),Oe,ne],Oe=ne;break;default:V===l&&fe.charCodeAt(Oe+1)===N?(0===(ne=fe.indexOf("*/",Oe+2)+1)&&(ge||q?ne=fe.length:W22("comment")),se=["comment",fe.slice(Oe,ne+1),Oe,ne],Oe=ne):($.lastIndex=Oe+1,$.test(fe),ne=0===$.lastIndex?fe.length-1:$.lastIndex-2,se=["word",fe.slice(Oe,ne+1),Oe,ne],Ne.push(se),Oe=ne)}return Oe++,se}},position:function(){return Oe}}}}function Ii2(){if(qn)return zn;qn=1;var n=vi2(),s=ci2(),o=fi2(),l=yi2(),c=Si2(),d=Ci2(),h={empty:!0,space:!0};return zn=class{constructor(n){this.input=n,this.root=new l,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:n,start:{column:1,line:1,offset:0}}}atrule(s){var o,l,c,d=new n;d.name=s[1].slice(1),""===d.name&&this.unnamedAtrule(d,s),this.init(d,s[2]);for(var h=!1,p=!1,f=[],m=[];!this.tokenizer.endOfFile();){if("("===(o=(s=this.tokenizer.nextToken())[0])||"["===o?m.push("("===o?")":"]"):"{"===o&&m.length>0?m.push("}"):o===m[m.length-1]&&m.pop(),0===m.length){if(";"===o){d.source.end=this.getPosition(s[2]),d.source.end.offset++,this.semicolon=!0;break}if("{"===o){p=!0;break}if("}"===o){if(f.length>0){for(l=f[c=f.length-1];l&&"space"===l[0];)l=f[--c];l&&(d.source.end=this.getPosition(l[3]||l[2]),d.source.end.offset++)}this.end(s);break}f.push(s)}else f.push(s);if(this.tokenizer.endOfFile()){h=!0;break}}d.raws.between=this.spacesAndCommentsFromEnd(f),f.length?(d.raws.afterName=this.spacesAndCommentsFromStart(f),this.raw(d,"params",f),h&&(s=f[f.length-1],d.source.end=this.getPosition(s[3]||s[2]),d.source.end.offset++,this.spaces=d.raws.between,d.raws.between="")):(d.raws.afterName="",d.params=""),p&&(d.nodes=[],this.current=d)}checkMissedSemicolon(n){var s=this.colon(n);if(!1!==s){for(var o,l=0,c=s-1;c>=0&&("space"===(o=n[c])[0]||2!==(l+=1));c--);throw this.input.error("Missed semicolon","word"===o[0]?o[3]+1:o[2])}}colon(n){var s,o,l,c=0;for(var[d,h]of n.entries()){if("("===(l=(o=h)[0])&&(c+=1),")"===l&&(c-=1),0===c&&":"===l){if(s){if("word"===s[0]&&"progid"===s[1])continue;return d}this.doubleColon(o)}s=o}return!1}comment(n){var o=new s;this.init(o,n[2]),o.source.end=this.getPosition(n[3]||n[2]),o.source.end.offset++;var l=n[1].slice(2,-2);if(/^\s*$/.test(l))o.text="",o.raws.left=l,o.raws.right="";else{var c=l.match(/^(\s*)([^]*\S)(\s*)$/);o.text=c[2],o.raws.left=c[1],o.raws.right=c[3]}}createTokenizer(){this.tokenizer=d(this.input)}decl(n,s){var l=new o;this.init(l,n[0][2]);var c,d=n[n.length-1];for(";"===d[0]&&(this.semicolon=!0,n.pop()),l.source.end=this.getPosition(d[3]||d[2]||function(n){for(var s=n.length-1;s>=0;s--){var o=n[s],l=o[3]||o[2];if(l)return l}}(n)),l.source.end.offset++;"word"!==n[0][0];)1===n.length&&this.unknownWord(n),l.raws.before+=n.shift()[1];for(l.source.start=this.getPosition(n[0][2]),l.prop="";n.length;){var h=n[0][0];if(":"===h||"space"===h||"comment"===h)break;l.prop+=n.shift()[1]}for(l.raws.between="";n.length;){if(":"===(c=n.shift())[0]){l.raws.between+=c[1];break}"word"===c[0]&&/\w/.test(c[1])&&this.unknownWord([c]),l.raws.between+=c[1]}"_"!==l.prop[0]&&"*"!==l.prop[0]||(l.raws.before+=l.prop[0],l.prop=l.prop.slice(1));for(var p,f=[];n.length&&("space"===(p=n[0][0])||"comment"===p);)f.push(n.shift());this.precheckMissedSemicolon(n);for(var m=n.length-1;m>=0;m--){if("!important"===(c=n[m])[1].toLowerCase()){l.important=!0;var _=this.stringFrom(n,m);" !important"!==(_=this.spacesFromEnd(n)+_)&&(l.raws.important=_);break}if("important"===c[1].toLowerCase()){for(var y=n.slice(0),E="",M=m;M>0;M--){var P=y[M][0];if(E.trim().startsWith("!")&&"space"!==P)break;E=y.pop()[1]+E}E.trim().startsWith("!")&&(l.important=!0,l.raws.important=E,n=y)}if("space"!==c[0]&&"comment"!==c[0])break}n.some((n=>"space"!==n[0]&&"comment"!==n[0]))&&(l.raws.between+=f.map((n=>n[1])).join(""),f=[]),this.raw(l,"value",f.concat(n),s),l.value.includes(":")&&!s&&this.checkMissedSemicolon(n)}doubleColon(n){throw this.input.error("Double colon",{offset:n[2]},{offset:n[2]+n[1].length})}emptyRule(n){var s=new c;this.init(s,n[2]),s.selector="",s.raws.between="",this.current=s}end(n){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(n[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(n)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(n){if(this.spaces+=n[1],this.current.nodes){var s=this.current.nodes[this.current.nodes.length-1];s&&"rule"===s.type&&!s.raws.ownSemicolon&&(s.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(n){var s=this.input.fromOffset(n);return{column:s.col,line:s.line,offset:n}}init(n,s){this.current.push(n),n.source={input:this.input,start:this.getPosition(s)},n.raws.before=this.spaces,this.spaces="","comment"!==n.type&&(this.semicolon=!1)}other(n){for(var s=!1,o=null,l=!1,c=null,d=[],h=n[1].startsWith("--"),p=[],f=n;f;){if(o=f[0],p.push(f),"("===o||"["===o)c||(c=f),d.push("("===o?")":"]");else if(h&&l&&"{"===o)c||(c=f),d.push("}");else if(0===d.length){if(";"===o){if(l)return void this.decl(p,h);break}if("{"===o)return void this.rule(p);if("}"===o){this.tokenizer.back(p.pop()),s=!0;break}":"===o&&(l=!0)}else o===d[d.length-1]&&(d.pop(),0===d.length&&(c=null));f=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(s=!0),d.length>0&&this.unclosedBracket(c),s&&l){if(!h)for(;p.length&&("space"===(f=p[p.length-1][0])||"comment"===f);)this.tokenizer.back(p.pop());this.decl(p,h)}else this.unknownWord(p)}parse(){for(var n;!this.tokenizer.endOfFile();)switch((n=this.tokenizer.nextToken())[0]){case"space":this.spaces+=n[1];break;case";":this.freeSemicolon(n);break;case"}":this.end(n);break;case"comment":this.comment(n);break;case"at-word":this.atrule(n);break;case"{":this.emptyRule(n);break;default:this.other(n)}this.endFile()}precheckMissedSemicolon(){}raw(n,s,o,l){for(var c,d,p,f,m=o.length,_="",y=!0,E=0;E<m;E+=1)"space"!==(d=(c=o[E])[0])||E!==m-1||l?"comment"===d?(f=o[E-1]?o[E-1][0]:"empty",p=o[E+1]?o[E+1][0]:"empty",h[f]||h[p]||","===_.slice(-1)?y=!1:_+=c[1]):_+=c[1]:y=!1;if(!y){var M=o.reduce(((n,s)=>n+s[1]),"");n.raws[s]={raw:M,value:_}}n[s]=_}rule(n){n.pop();var s=new c;this.init(s,n[0][2]),s.raws.between=this.spacesAndCommentsFromEnd(n),this.raw(s,"selector",n),this.current=s}spacesAndCommentsFromEnd(n){for(var s,o="";n.length&&("space"===(s=n[n.length-1][0])||"comment"===s);)o=n.pop()[1]+o;return o}spacesAndCommentsFromStart(n){for(var s,o="";n.length&&("space"===(s=n[0][0])||"comment"===s);)o+=n.shift()[1];return o}spacesFromEnd(n){for(var s="";n.length&&"space"===n[n.length-1][0];)s=n.pop()[1]+s;return s}stringFrom(n,s){for(var o="",l=s;l<n.length;l++)o+=n[l][1];return n.splice(s,n.length-s),o}unclosedBlock(){var n=this.current.source.start;throw this.input.error("Unclosed block",n.line,n.column)}unclosedBracket(n){throw this.input.error("Unclosed bracket",{offset:n[2]},{offset:n[2]+1})}unexpectedClose(n){throw this.input.error("Unexpected }",{offset:n[2]},{offset:n[2]+1})}unknownWord(n){throw this.input.error("Unknown word",{offset:n[0][2]},{offset:n[0][2]+n[0][1].length})}unnamedAtrule(n,s){throw this.input.error("At-rule without name",{offset:s[2]},{offset:s[2]+s[1].length})}}}function Mi2(){if(Vn)return Wn;Vn=1;var n=di2(),s=wi2(),o=Ii2();function i22(n,l){var c=new s(n,l),d=new o(c);try{d.parse()}catch(h){throw h}return d.root}return Wn=i22,i22.default=i22,n.registerParse(i22),Wn}function Ri2(){if(Yn)return Gn;Yn=1;class t22{constructor(n,s){if(void 0===s&&(s={}),this.type="warning",this.text=n,s.node&&s.node.source){var o=s.node.rangeBy(s);this.line=o.start.line,this.column=o.start.column,this.endLine=o.end.line,this.endColumn=o.end.column}for(var l in s)this[l]=s[l]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return Gn=t22,t22.default=t22,Gn}function xi2(){if(Jn)return Zn;Jn=1;var n=Ri2();class e22{constructor(n,s,o){this.processor=n,this.messages=[],this.root=s,this.opts=o,this.css=void 0,this.map=void 0}toString(){return this.css}warn(s,o){void 0===o&&(o={}),o.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(o.plugin=this.lastPlugin.postcssPlugin);var l=new n(s,o);return this.messages.push(l),l}warnings(){return this.messages.filter((n=>"warning"===n.type))}get content(){return this.css}}return Zn=e22,e22.default=e22,Zn}function Oi2(){if(Kn)return Xn;Kn=1;var n=di2(),s=pi2(),o=ki2(),l=Mi2(),c=xi2(),d=yi2(),h=hr2(),{isClean:p,my:f}=ui2(),m={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},_={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},y={Once:!0,postcssPlugin:!0,prepare:!0};function m22(n){return"object"==typeof n&&"function"==typeof n.then}function g22(n){var s=!1,o=m[n.type];return"decl"===n.type?s=n.prop.toLowerCase():"atrule"===n.type&&(s=n.name.toLowerCase()),s&&n.append?[o,o+"-"+s,0,o+"Exit",o+"Exit-"+s]:s?[o,o+"-"+s,o+"Exit",o+"Exit-"+s]:n.append?[o,0,o+"Exit"]:[o,o+"Exit"]}function w22(n){return{eventIndex:0,events:"document"===n.type?["Document",0,"DocumentExit"]:"root"===n.type?["Root",0,"RootExit"]:g22(n),iterator:0,node:n,visitorIndex:0,visitors:[]}}function y22(n){return n[p]=!1,n.nodes&&n.nodes.forEach((n=>y22(n))),n}var E={};class S22{constructor(s,o,d){var h;if(this.stringified=!1,this.processed=!1,"object"!=typeof o||null===o||"root"!==o.type&&"document"!==o.type)if(o instanceof S22||o instanceof c)h=y22(o.root),o.map&&(void 0===d.map&&(d.map={}),d.map.inline||(d.map.inline=!1),d.map.prev=o.map);else{var p=l;d.syntax&&(p=d.syntax.parse),d.parser&&(p=d.parser),p.parse&&(p=p.parse);try{h=p(o,d)}catch(m){this.processed=!0,this.error=m}h&&!h[f]&&n.rebuild(h)}else h=y22(o);this.result=new c(s,h,d),this.helpers=r2({},E,{postcss:E,result:this.result}),this.plugins=this.processor.plugins.map((n=>"object"==typeof n&&n.prepare?r2({},n,n.prepare(this.result)):n))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(n){return this.async().catch(n)}finally(n){return this.async().then(n,n)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(n,s){var o=this.result.lastPlugin;try{if(s&&s.addToError(n),this.error=n,"CssSyntaxError"!==n.name||n.plugin)o.postcssVersion,0;else n.plugin=o.postcssPlugin,n.setMessage()}catch(l){console&&console.error&&console.error(l)}return n}prepareVisitors(){this.listeners={};var t3=(n,s,o)=>{this.listeners[s]||(this.listeners[s]=[]),this.listeners[s].push([n,o])};for(var n of this.plugins)if("object"==typeof n)for(var s in n){if(!_[s]&&/^[A-Z]/.test(s))throw new Error("Unknown event "+s+" in "+n.postcssPlugin+". Try to update PostCSS ("+this.processor.version+" now).");if(!y[s])if("object"==typeof n[s])for(var o in n[s])t3(n,"*"===o?s:s+"-"+o.toLowerCase(),n[s][o]);else"function"==typeof n[s]&&t3(n,s,n[s])}this.hasListener=Object.keys(this.listeners).length>0}runAsync(){var n=this;return e2((function*(){n.plugin=0;for(var s=0;s<n.plugins.length;s++){var o=n.plugins[s],l=n.runOnRoot(o);if(m22(l))try{yield l}catch(y){throw n.handleError(y)}}if(n.prepareVisitors(),n.hasListener){for(var c=n.result.root;!c[p];){c[p]=!0;for(var d=[w22(c)];d.length>0;){var h=n.visitTick(d);if(m22(h))try{yield h}catch(y){var f=d[d.length-1].node;throw n.handleError(y,f)}}}if(n.listeners.OnceExit){var h3=function*(s){n.result.lastPlugin=m;try{if("document"===c.type){var o=c.nodes.map((o=>s(o,n.helpers)));yield Promise.all(o)}else yield s(c,n.helpers)}catch(l){throw n.handleError(l)}};for(var[m,_]of n.listeners.OnceExit)yield*h3(_)}}return n.processed=!0,n.stringify()}))()}runOnRoot(n){this.result.lastPlugin=n;try{if("object"==typeof n&&n.Once){if("document"===this.result.root.type){var s=this.result.root.nodes.map((s=>n.Once(s,this.helpers)));return m22(s[0])?Promise.all(s):s}return n.Once(this.result.root,this.helpers)}if("function"==typeof n)return n(this.result.root,this.result)}catch(o){throw this.handleError(o)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var n=this.result.opts,s=h;n.syntax&&(s=n.syntax.stringify),n.stringifier&&(s=n.stringifier),s.stringify&&(s=s.stringify);var l=new o(s,this.result.root,this.result.opts).generate();return this.result.css=l[0],this.result.map=l[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(var n of this.plugins)if(m22(this.runOnRoot(n)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){for(var s=this.result.root;!s[p];)s[p]=!0,this.walkSync(s);if(this.listeners.OnceExit)if("document"===s.type)for(var o of s.nodes)this.visitSync(this.listeners.OnceExit,o);else this.visitSync(this.listeners.OnceExit,s)}return this.result}then(n,s){return this.async().then(n,s)}toString(){return this.css}visitSync(n,s){for(var[o,l]of n){this.result.lastPlugin=o;var c=void 0;try{c=l(s,this.helpers)}catch(d){throw this.handleError(d,s.proxyOf)}if("root"!==s.type&&"document"!==s.type&&!s.parent)return!0;if(m22(c))throw this.getAsyncError()}}visitTick(n){var s=n[n.length-1],{node:o,visitors:l}=s;if("root"===o.type||"document"===o.type||o.parent){if(l.length>0&&s.visitorIndex<l.length){var[c,d]=l[s.visitorIndex];s.visitorIndex+=1,s.visitorIndex===l.length&&(s.visitors=[],s.visitorIndex=0),this.result.lastPlugin=c;try{return d(o.toProxy(),this.helpers)}catch(y){throw this.handleError(y,o)}}if(0!==s.iterator){for(var h,f=s.iterator;h=o.nodes[o.indexes[f]];)if(o.indexes[f]+=1,!h[p])return h[p]=!0,void n.push(w22(h));s.iterator=0,delete o.indexes[f]}for(var m=s.events;s.eventIndex<m.length;){var _=m[s.eventIndex];if(s.eventIndex+=1,0===_)return void(o.nodes&&o.nodes.length&&(o[p]=!0,s.iterator=o.getIterator()));if(this.listeners[_])return void(s.visitors=this.listeners[_])}n.pop()}else n.pop()}walkSync(n){n[p]=!0;var s=g22(n);for(var o of s)if(0===o)n.nodes&&n.each((n=>{n[p]||this.walkSync(n)}));else{var l=this.listeners[o];if(l&&this.visitSync(l,n.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}}return S22.registerPostcss=n=>{E=n},Xn=S22,S22.default=S22,d.registerLazyResult(S22),s.registerLazyResult(S22),Xn}function Ei2(){if(yi)return _i;yi=1;var n=vi2(),s=ci2(),o=di2(),l=or2(),h=fi2(),p=pi2(),f=function(){if(Bn)return Dn;Bn=1;var n=vi2(),s=ci2(),o=fi2(),l=wi2(),h=gi2(),p=yi2(),f=Si2();function c3(m,_){if(Array.isArray(m))return m.map((n=>c3(n)));var{inputs:y}=m,E=i2(m,c);if(y)for(var M of(_=[],y)){var P=r2({},M,{__proto__:l.prototype});P.map&&(P.map=r2({},P.map,{__proto__:h.prototype})),_.push(P)}if(E.nodes&&(E.nodes=m.nodes.map((n=>c3(n,_)))),E.source){var L=E.source,{inputId:N}=L,F=i2(L,d);E.source=F,null!=N&&(E.source.input=_[N])}if("root"===E.type)return new p(E);if("decl"===E.type)return new o(E);if("rule"===E.type)return new f(E);if("comment"===E.type)return new s(E);if("atrule"===E.type)return new n(E);throw new Error("Unknown node type: "+m.type)}return Dn=c3,c3.default=c3,Dn}(),m=wi2(),_=Oi2(),y=bi2(),E=li2(),M=Mi2(),P=function(){if(vi)return mi;vi=1;var n=pi2(),s=Oi2(),o=function(){if(hi)return Qn;hi=1;var n=ki2(),s=Mi2(),o=xi2(),l=hr2();class s22{constructor(s,c,d){var h;c=c.toString(),this.stringified=!1,this._processor=s,this._css=c,this._opts=d,this._map=void 0;var p=l;this.result=new o(this._processor,h,this._opts),this.result.css=c;var f=this;Object.defineProperty(this.result,"root",{get:()=>f.root});var m=new n(p,h,this._opts,c);if(m.isMap()){var[_,y]=m.generate();_&&(this.result.css=_),y&&(this.result.map=y)}else m.clearAnnotation(),this.result.css=m.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(n){return this.async().catch(n)}finally(n){return this.async().then(n,n)}sync(){if(this.error)throw this.error;return this.result}then(n,s){return this.async().then(n,s)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;var n,o=s;try{n=o(this._css,this._opts)}catch(l){this.error=l}if(this.error)throw this.error;return this._root=n,n}get[Symbol.toStringTag](){return"NoWorkResult"}}return Qn=s22,s22.default=s22,Qn}(),l=yi2();class n22{constructor(n){void 0===n&&(n=[]),this.version="8.5.1",this.plugins=this.normalize(n)}normalize(n){var s=[];for(var o of n)if(!0===o.postcss?o=o():o.postcss&&(o=o.postcss),"object"==typeof o&&Array.isArray(o.plugins))s=s.concat(o.plugins);else if("object"==typeof o&&o.postcssPlugin)s.push(o);else if("function"==typeof o)s.push(o);else if("object"!=typeof o||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");return s}process(n,l){return void 0===l&&(l={}),this.plugins.length||l.parser||l.stringifier||l.syntax?new s(this,n,l):new o(this,n,l)}use(n){return this.plugins=this.plugins.concat(this.normalize([n])),this}}return mi=n22,n22.default=n22,l.registerProcessor(n22),n.registerProcessor(n22),mi}(),L=xi2(),N=yi2(),F=Si2(),D=hr2(),B=Ri2();function k22(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return 1===s.length&&Array.isArray(s[0])&&(s=s[0]),new P(s)}return k22.plugin=function(n,s){var o,l=!1;function n3(){console&&console.warn&&!l&&(l=!0,console.warn(n+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(n+": \u91cc\u9762 postcss.plugin \u88ab\u5f03\u7528. \u8fc1\u79fb\u6307\u5357:\nhttps://www.w3ctech.com/topic/2226"));var o=s(...arguments);return o.postcssPlugin=n,o.postcssVersion=(new P).version,o}return Object.defineProperty(n3,"postcss",{get:()=>(o||(o=n3()),o)}),n3.process=function(n,s,o){return k22([n3(o)]).process(n,s)},n3},k22.stringify=D,k22.parse=M,k22.fromJSON=f,k22.list=y,k22.comment=n=>new s(n),k22.atRule=s=>new n(s),k22.decl=n=>new h(n),k22.rule=n=>new F(n),k22.root=n=>new N(n),k22.document=n=>new p(n),k22.CssSyntaxError=l,k22.Declaration=h,k22.Container=o,k22.Processor=P,k22.Document=p,k22.Comment=s,k22.Warning=B,k22.AtRule=n,k22.Result=L,k22.Input=m,k22.Rule=F,k22.Root=N,k22.Node=E,_.registerPostcss(k22),_i=k22,k22.default=k22,_i}!function(){if(Ei)return xi;Ei=1;var{Input:n}=Ei2(),s=function(){if(ki)return wi;ki=1;var n=ci2(),s=Ii2(),o=Ci2();return wi=class extends s{checkMissedSemicolon(){}comment(s){var o=new n;this.init(o,s[2]);var l=this.input.fromOffset(s[3])||this.input.fromOffset(this.input.css.length-1);o.source.end={column:l.col,line:l.line,offset:s[3]+1};var c=s[1].slice(2);if("*/"===c.slice(-2)&&(c=c.slice(0,-2)),/^\s*$/.test(c))o.text="",o.raws.left=c,o.raws.right="";else{var d=c.match(/^(\s*)([^]*\S)(\s*)$/);o.text=d[2],o.raws.left=d[1],o.raws.right=d[3]}}createTokenizer(){this.tokenizer=o(this.input,{ignoreErrors:!0})}decl(n){n.length>1&&n.some((n=>"word"===n[0]))&&super.decl(n)}doubleColon(){}endFile(){for(this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces;this.current.parent;)this.current=this.current.parent,this.current.raws.after="";this.root.source.end=this.getPosition(this.tokenizer.position())}precheckMissedSemicolon(n){var s=this.colon(n);if(!1!==s){var o,l;for(o=s-1;o>=0&&"word"!==n[o][0];o--);if(!(0===o||o<0)){for(l=o-1;l>=0;l--)if("space"!==n[l][0]){l+=1;break}var c=n.slice(o),d=n.slice(l,o);n.splice(l,n.length-l),this.spaces=d.map((n=>n[1])).join(""),this.decl(c)}}}unclosedBracket(){}unexpectedClose(){this.current.raws.after+="}"}unknownWord(n){this.spaces+=n.map((n=>n[1])).join("")}unnamedAtrule(n){n.name=""}}}();xi=function(o,l){var c=new n(o,l),d=new s(c);return d.parse(),d.root}}();var Ri=function(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}(Ei2());Ri.stringify,Ri.fromJSON,Ri.plugin,Ri.parse,Ri.list,Ri.document,Ri.comment,Ri.atRule,Ri.rule,Ri.decl,Ri.root,Ri.CssSyntaxError,Ri.Declaration,Ri.Container,Ri.Processor,Ri.Document,Ri.Comment,Ri.Warning,Ri.AtRule,Ri.Result,Ri.Input,Ri.Rule,Ri.Root,Ri.Node;class Bi2{constructor(){Ve2(this,"parentElement",null),Ve2(this,"parentNode",null),Ve2(this,"ownerDocument"),Ve2(this,"firstChild",null),Ve2(this,"lastChild",null),Ve2(this,"previousSibling",null),Ve2(this,"nextSibling",null),Ve2(this,"ELEMENT_NODE",1),Ve2(this,"TEXT_NODE",3),Ve2(this,"nodeType"),Ve2(this,"nodeName"),Ve2(this,"RRNodeType")}get childNodes(){for(var n=[],s=this.firstChild;s;)n.push(s),s=s.nextSibling;return n}contains(n){if(!(n instanceof Bi2))return!1;if(n.ownerDocument!==this.ownerDocument)return!1;if(n===this)return!0;for(;n.parentNode;){if(n.parentNode===this)return!0;n=n.parentNode}return!1}appendChild(n){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(n,s){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(n){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}var Pi={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Ni={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Fi={};function ji2(n){if(Fi[n])return Fi[n];var s,o,l,c,d=(s=n,((c=null==(l=null==(o=null==globalThis?void 0:globalThis.Zone)?void 0:o.__symbol__)?void 0:l.call(o,s))&&globalThis[c]?globalThis[c]:void 0)||globalThis[n]),h=d.prototype,p=n in Pi?Pi[n]:void 0,f=Boolean(p&&p.every((n=>{var s,o;return Boolean(null==(o=null==(s=Object.getOwnPropertyDescriptor(h,n))?void 0:s.get)?void 0:o.toString().includes("[native code]"))}))),m=n in Ni?Ni[n]:void 0,_=Boolean(m&&m.every((n=>{var s;return"function"==typeof h[n]&&(null==(s=h[n])?void 0:s.toString().includes("[native code]"))})));if(f&&_)return Fi[n]=d.prototype,d.prototype;try{var y=document.createElement("iframe");document.body.appendChild(y);var E=y.contentWindow;if(!E)return d.prototype;var M=E[n].prototype;return document.body.removeChild(y),M?Fi[n]=M:h}catch(s){return h}}var ji={};function Ui2(n,s,o){var l,c=n+"."+String(o);if(ji[c])return ji[c].call(s);var d=ji2(n),h=null==(l=Object.getOwnPropertyDescriptor(d,o))?void 0:l.get;return h?(ji[c]=h,h.call(s)):s[o]}var qi={};function $i2(n,s,o){var l=n+"."+String(o);if(qi[l])return qi[l].bind(s);var c=ji2(n)[o];return"function"!=typeof c?s[o]:(qi[l]=c,c.bind(s))}function Wi2(){return ji2("MutationObserver").constructor}function qi2(n,s,o){try{if(!(s in n))return()=>{};var l=n[s],c=o(l);return"function"==typeof c&&(c.prototype=c.prototype||{},Object.defineProperties(c,{__rrweb_original__:{enumerable:!1,value:l}})),n[s]=c,()=>{n[s]=l}}catch(d){return()=>{}}}var zi2_childNodes=function(n){return Ui2("Node",n,"childNodes")},zi2_parentNode=function(n){return Ui2("Node",n,"parentNode")},zi2_parentElement=function(n){return Ui2("Node",n,"parentElement")},zi2_textContent=function(n){return Ui2("Node",n,"textContent")},zi2_contains=function(n,s){return $i2("Node",n,"contains")(s)},zi2_getRootNode=function(n){return $i2("Node",n,"getRootNode")()},zi2_host=function(n){return n&&"host"in n?Ui2("ShadowRoot",n,"host"):null},zi2_shadowRoot=function(n){return n&&"shadowRoot"in n?Ui2("Element",n,"shadowRoot"):null};function Gi2(n,s,o){void 0===o&&(o=document);var l={capture:!0,passive:!0};return o.addEventListener(n,s,l),()=>o.removeEventListener(n,s,l)}var Vi="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",Gi={map:{},getId:()=>(console.error(Vi),-1),getNode:()=>(console.error(Vi),null),removeNodeFromMap(){console.error(Vi)},has:()=>(console.error(Vi),!1),reset(){console.error(Vi)}};function Ji2(n,s,o){void 0===o&&(o={});var l=null,c=0;return function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];var f=Date.now();c||!1!==o.leading||(c=f);var m=s-(f-c),_=this;m<=0||m>s?(l&&(clearTimeout(l),l=null),c=f,n.apply(_,h)):l||!1===o.trailing||(l=setTimeout((()=>{c=!1===o.leading?0:Date.now(),l=null,n.apply(_,h)}),m))}}function Yi2(n,s,o,l,c){void 0===c&&(c=window);var d=c.Object.getOwnPropertyDescriptor(n,s);return c.Object.defineProperty(n,s,l?o:{set(n){setTimeout((()=>{o.set.call(this,n)}),0),d&&d.set&&d.set.call(this,n)}}),()=>Yi2(n,s,d||{},!0)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Gi=new Proxy(Gi,{get:(n,s,o)=>("map"===s&&console.error(Vi),Reflect.get(n,s,o))}));var Yi=Date.now;function Ki2(n){var s,o,l,c,d=n.document;return{left:d.scrollingElement?d.scrollingElement.scrollLeft:void 0!==n.pageXOffset?n.pageXOffset:d.documentElement.scrollLeft||(null==d?void 0:d.body)&&(null==(s=zi2_parentElement(d.body))?void 0:s.scrollLeft)||(null==(o=null==d?void 0:d.body)?void 0:o.scrollLeft)||0,top:d.scrollingElement?d.scrollingElement.scrollTop:void 0!==n.pageYOffset?n.pageYOffset:(null==d?void 0:d.documentElement.scrollTop)||(null==d?void 0:d.body)&&(null==(l=zi2_parentElement(d.body))?void 0:l.scrollTop)||(null==(c=null==d?void 0:d.body)?void 0:c.scrollTop)||0}}function Zi2(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Qi2(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function tn2(n){return n?n.nodeType===n.ELEMENT_NODE?n:zi2_parentElement(n):null}function en2(n,s,o,l){if(!n)return!1;var c=tn2(n);if(!c)return!1;try{if("string"==typeof s){if(c.classList.contains(s))return!0;if(l&&null!==c.closest("."+s))return!0}else if(et2(c,s,l))return!0}catch(d){}if(o){if(c.matches(o))return!0;if(l&&null!==c.closest(o))return!0}return!1}function rn2(n,s,o){return!("TITLE"!==n.tagName||!o.headTitleMutations)||-2===s.getId(n)}function nn2(n,s){if(M2(n))return!1;var o=s.getId(n);if(!s.has(o))return!0;var l=zi2_parentNode(n);return(!l||l.nodeType!==n.DOCUMENT_NODE)&&(!l||nn2(l,s))}function sn2(n){return Boolean(n.changedTouches)}function on2(n,s){return Boolean("IFRAME"===n.nodeName&&s.getMeta(n))}function an2(n,s){return Boolean("LINK"===n.nodeName&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&"stylesheet"===n.getAttribute("rel")&&s.getMeta(n))}function hn2(n){return!!n&&(n instanceof Bi2&&"shadowRoot"in n?Boolean(n.shadowRoot):Boolean(zi2_shadowRoot(n)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Yi=()=>(new Date).getTime());class un2{constructor(){c2(this,"id",1),c2(this,"styleIDMap",new WeakMap),c2(this,"idStyleMap",new Map)}getId(n){var s;return null!==(s=this.styleIDMap.get(n))&&void 0!==s?s:-1}has(n){return this.styleIDMap.has(n)}add(n,s){return this.has(n)?this.getId(n):(o=void 0===s?this.id++:s,this.styleIDMap.set(n,o),this.idStyleMap.set(o,n),o);var o}getStyle(n){return this.idStyleMap.get(n)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ln2(n){var s,o=null;return"getRootNode"in n&&(null==(s=zi2_getRootNode(n))?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&zi2_host(zi2_getRootNode(n))&&(o=zi2_host(zi2_getRootNode(n))),o}function fn2(n){var s=n.ownerDocument;return!!s&&(zi2_contains(s,n)||function(n){var s=n.ownerDocument;if(!s)return!1;var o=function(n){for(var s,o=n;s=ln2(o);)o=s;return o}(n);return zi2_contains(s,o)}(n))}var Ji=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(Ji||{}),Xi=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))(Xi||{}),Ki=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(Ki||{}),Qi=(n=>(n[n.Mouse=0]="Mouse",n[n.Pen=1]="Pen",n[n.Touch=2]="Touch",n))(Qi||{}),es=(n=>(n[n["2D"]=0]="2D",n[n.WebGL=1]="WebGL",n[n.WebGL2=2]="WebGL2",n))(es||{}),ts=(n=>(n[n.Play=0]="Play",n[n.Pause=1]="Pause",n[n.Seeked=2]="Seeked",n[n.VolumeChange=3]="VolumeChange",n[n.RateChange=4]="RateChange",n))(ts||{}),rs=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(rs||{});function bn2(n){return"__ln"in n}class Sn2{constructor(){c2(this,"length",0),c2(this,"head",null),c2(this,"tail",null)}get(n){if(n>=this.length)throw new Error("Position outside of list range");for(var s=this.head,o=0;o<n;o++)s=(null==s?void 0:s.next)||null;return s}addNode(n){var s={value:n,previous:null,next:null};if(n.__ln=s,n.previousSibling&&bn2(n.previousSibling)){var o=n.previousSibling.__ln.next;s.next=o,s.previous=n.previousSibling.__ln,n.previousSibling.__ln.next=s,o&&(o.previous=s)}else if(n.nextSibling&&bn2(n.nextSibling)&&n.nextSibling.__ln.previous){var l=n.nextSibling.__ln.previous;s.previous=l,s.next=n.nextSibling.__ln,n.nextSibling.__ln.previous=s,l&&(l.next=s)}else this.head&&(this.head.previous=s),s.next=this.head,this.head=s;null===s.next&&(this.tail=s),this.length++}removeNode(n){var s=n.__ln;this.head&&(s.previous?(s.previous.next=s.next,s.next?s.next.previous=s.previous:this.tail=s.previous):(this.head=s.next,this.head?this.head.previous=null:this.tail=null),n.__ln&&delete n.__ln,this.length--)}}var ns,Cn2=(n,s)=>n+"@"+s;class In2{constructor(){c2(this,"frozen",!1),c2(this,"locked",!1),c2(this,"texts",[]),c2(this,"attributes",[]),c2(this,"attributeMap",new WeakMap),c2(this,"removes",[]),c2(this,"mapRemoves",[]),c2(this,"movedMap",{}),c2(this,"addedSet",new Set),c2(this,"movedSet",new Set),c2(this,"droppedSet",new Set),c2(this,"removesSubTreeCache",new Set),c2(this,"mutationCb"),c2(this,"blockClass"),c2(this,"blockSelector"),c2(this,"maskTextClass"),c2(this,"maskTextSelector"),c2(this,"inlineStylesheet"),c2(this,"maskInputOptions"),c2(this,"maskTextFn"),c2(this,"maskInputFn"),c2(this,"keepIframeSrcFn"),c2(this,"recordCanvas"),c2(this,"inlineImages"),c2(this,"slimDOMOptions"),c2(this,"dataURLOptions"),c2(this,"doc"),c2(this,"mirror"),c2(this,"iframeManager"),c2(this,"stylesheetManager"),c2(this,"shadowDomManager"),c2(this,"canvasManager"),c2(this,"processedNodeManager"),c2(this,"unattachedDoc"),c2(this,"processMutations",(n=>{n.forEach(this.processMutation),this.emit()})),c2(this,"emit",(()=>{if(!this.frozen&&!this.locked){for(var n=[],s=new Set,o=new Sn2,i22=n=>{for(var s=n,o=-2;-2===o;)o=(s=s&&s.nextSibling)&&this.mirror.getId(s);return o},n22=l=>{var c=zi2_parentNode(l);if(c&&fn2(l)&&"TEXTAREA"!==c.tagName){var d=M2(c)?this.mirror.getId(ln2(l)):this.mirror.getId(c),h=i22(l);if(-1===d||-1===h)return o.addNode(l);var p=ot2(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:n=>{on2(n,this.mirror)&&this.iframeManager.addIframe(n),an2(n,this.mirror)&&this.stylesheetManager.trackLinkElement(n),hn2(l)&&this.shadowDomManager.addShadowRoot(zi2_shadowRoot(l),this.doc)},onIframeLoad:(n,s)=>{this.iframeManager.attachIframe(n,s),this.shadowDomManager.observeAttachShadow(n)},onStylesheetLoad:(n,s)=>{this.stylesheetManager.attachLinkElement(n,s)}});p&&(n.push({parentId:d,nextId:h,node:p}),s.add(p.id))}};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(var l of this.movedSet)Rn2(this.removesSubTreeCache,l,this.mirror)&&!this.movedSet.has(zi2_parentNode(l))||n22(l);for(var c of this.addedSet)xn2(this.droppedSet,c)||Rn2(this.removesSubTreeCache,c,this.mirror)?xn2(this.movedSet,c)?n22(c):this.droppedSet.add(c):n22(c);for(var d=null;o.length;){var h=null;if(d){var p=this.mirror.getId(zi2_parentNode(d.value)),f=i22(d.value);-1!==p&&-1!==f&&(h=d)}if(!h)for(var m=o.tail;m;){var _=m;if(m=m.previous,_){var y=this.mirror.getId(zi2_parentNode(_.value));if(-1===i22(_.value))continue;if(-1!==y){h=_;break}var E=_.value,M=zi2_parentNode(E);if(M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var P=zi2_host(M);if(-1!==this.mirror.getId(P)){h=_;break}}}}if(!h){for(;o.head;)o.removeNode(o.head.value);break}d=h.previous,o.removeNode(h.value),n22(h.value)}var L={texts:this.texts.map((n=>{var s=n.node,o=zi2_parentNode(s);return o&&"TEXTAREA"===o.tagName&&this.genTextAreaValueMutation(o),{id:this.mirror.getId(s),value:n.value}})).filter((n=>!s.has(n.id))).filter((n=>this.mirror.has(n.id))),attributes:this.attributes.map((n=>{var{attributes:s}=n;if("string"==typeof s.style){var o=JSON.stringify(n.styleDiff),l=JSON.stringify(n._unchangedStyles);o.length<s.style.length&&(o+l).split("var(").length===s.style.split("var(").length&&(s.style=n.styleDiff)}return{id:this.mirror.getId(n.node),attributes:s}})).filter((n=>!s.has(n.id))).filter((n=>this.mirror.has(n.id))),removes:this.removes,adds:n};(L.texts.length||L.attributes.length||L.removes.length||L.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(L))}})),c2(this,"genTextAreaValueMutation",(n=>{var s=this.attributeMap.get(n);s||(s={node:n,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(n,s)),s.attributes.value=Array.from(zi2_childNodes(n),(n=>zi2_textContent(n)||"")).join("")})),c2(this,"processMutation",(n=>{if(!rn2(n.target,this.mirror,this.slimDOMOptions))switch(n.type){case"characterData":var s=zi2_textContent(n.target);en2(n.target,this.blockClass,this.blockSelector,!1)||s===n.oldValue||this.texts.push({value:rt2(n.target,this.maskTextClass,this.maskTextSelector,!0)&&s?this.maskTextFn?this.maskTextFn(s,tn2(n.target)):s.replace(/[\S]/g,"*"):s,node:n.target});break;case"attributes":var o=n.target,l=n.attributeName,c=n.target.getAttribute(l);if("value"===l){var d=B2(o);c=T2({element:o,maskInputOptions:this.maskInputOptions,tagName:o.tagName,type:d,value:c,maskInputFn:this.maskInputFn})}if(en2(n.target,this.blockClass,this.blockSelector,!1)||c===n.oldValue)return;var h=this.attributeMap.get(n.target);if("IFRAME"===o.tagName&&"src"===l&&!this.keepIframeSrcFn(c)){if(o.contentDocument)return;l="rr_src"}if(h||(h={node:n.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(h),this.attributeMap.set(n.target,h)),"type"===l&&"INPUT"===o.tagName&&"password"===(n.oldValue||"").toLowerCase()&&o.setAttribute("data-rr-is-password","true"),!tt2(o.tagName,l))if(h.attributes[l]=Q2(this.doc,E2(o.tagName),E2(l),c),"style"===l){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(E){this.unattachedDoc=this.doc}var p=this.unattachedDoc.createElement("span");for(var f of(n.oldValue&&p.setAttribute("style",n.oldValue),Array.from(o.style))){var m=o.style.getPropertyValue(f),_=o.style.getPropertyPriority(f);m!==p.style.getPropertyValue(f)||_!==p.style.getPropertyPriority(f)?h.styleDiff[f]=""===_?m:[m,_]:h._unchangedStyles[f]=[m,_]}for(var y of Array.from(p.style))""===o.style.getPropertyValue(y)&&(h.styleDiff[y]=!1)}else"open"===l&&"DIALOG"===o.tagName&&(o.matches("dialog:modal")?h.attributes.rr_open_mode="modal":h.attributes.rr_open_mode="non-modal");break;case"childList":if(en2(n.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===n.target.tagName)return void this.genTextAreaValueMutation(n.target);n.addedNodes.forEach((s=>this.genAdds(s,n.target))),n.removedNodes.forEach((s=>{var o,l=this.mirror.getId(s),c=M2(n.target)?this.mirror.getId(zi2_host(n.target)):this.mirror.getId(n.target);en2(n.target,this.blockClass,this.blockSelector,!1)||rn2(s,this.mirror,this.slimDOMOptions)||(o=s,-1===this.mirror.getId(o))||(this.addedSet.has(s)?(Mn2(this.addedSet,s),this.droppedSet.add(s)):this.addedSet.has(n.target)&&-1===l||nn2(n.target,this.mirror)||(this.movedSet.has(s)&&this.movedMap[Cn2(l,c)]?Mn2(this.movedSet,s):(this.removes.push({parentId:c,id:l,isShadow:!(!M2(n.target)||!R2(n.target))||void 0}),function(n,s){for(var o=[n];o.length;){var l=o.pop();s.has(l)||(s.add(l),zi2_childNodes(l).forEach((n=>o.push(n))))}}(s,this.removesSubTreeCache))),this.mapRemoves.push(s))}))}})),c2(this,"genAdds",((n,s)=>{if(!this.processedNodeManager.inOtherBuffer(n,this)&&!this.addedSet.has(n)&&!this.movedSet.has(n)){if(this.mirror.hasNode(n)){if(rn2(n,this.mirror,this.slimDOMOptions))return;this.movedSet.add(n);var o=null;s&&this.mirror.hasNode(s)&&(o=this.mirror.getId(s)),o&&-1!==o&&(this.movedMap[Cn2(this.mirror.getId(n),o)]=!0)}else this.addedSet.add(n),this.droppedSet.delete(n);en2(n,this.blockClass,this.blockSelector,!1)||(zi2_childNodes(n).forEach((n=>this.genAdds(n))),hn2(n)&&zi2_childNodes(zi2_shadowRoot(n)).forEach((s=>{this.processedNodeManager.add(s,this),this.genAdds(s,n)})))}}))}init(n){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((s=>{this[s]=n[s]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Mn2(n,s){n.delete(s),zi2_childNodes(s).forEach((s=>Mn2(n,s)))}function Rn2(n,s,o){return 0!==n.size&&(l=n,!!(c=zi2_parentNode(s))&&l.has(c));var l,c}function xn2(n,s){return 0!==n.size&&_n2(n,s)}function _n2(n,s){var o=zi2_parentNode(s);return!!o&&(!!n.has(o)||_n2(n,o))}var On2=n=>ns?function(){try{return n(...arguments)}catch(s){if(ns&&!0===ns(s))return;throw s}}:n,is=[];function En2(n){try{if("composedPath"in n){var s=n.composedPath();if(s.length)return s[0]}else if("path"in n&&n.path.length)return n.path[0]}catch(o){}return n&&n.target}function An2(n,s){var o=new In2;is.push(o),o.init(n);var l=new(Wi2())(On2(o.processMutations.bind(o)));return l.observe(s,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),l}function Ln2(n){var{scrollCb:s,doc:o,mirror:l,blockClass:c,blockSelector:d,sampling:h}=n;return Gi2("scroll",On2(Ji2(On2((n=>{var h=En2(n);if(h&&!en2(h,c,d,!0)){var p=l.getId(h);if(h===o&&o.defaultView){var f=Ki2(o.defaultView);s({id:p,x:f.left,y:f.top})}else s({id:p,x:h.scrollLeft,y:h.scrollTop})}})),h.scroll||100)),o)}var ss=["INPUT","TEXTAREA","SELECT"],os=new WeakMap;function jn2(n){return function(n,s){if($n2("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||$n2("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||$n2("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||$n2("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){var o=Array.from(n.parentRule.cssRules).indexOf(n);s.unshift(o)}else if(n.parentStyleSheet){var l=Array.from(n.parentStyleSheet.cssRules).indexOf(n);s.unshift(l)}return s}(n,[])}function Dn2(n,s,o){var l,c;return n?(n.ownerNode?l=s.getId(n.ownerNode):c=o.getId(n),{styleId:c,id:l}):{}}function Un2(n,s){var o,l,c,d,{mirror:h,stylesheetManager:p}=n;d="#document"===s.nodeName?h.getId(s):h.getId(zi2_host(s));var f="#document"===s.nodeName?null==(o=s.defaultView)?void 0:o.Document:null==(c=null==(l=s.ownerDocument)?void 0:l.defaultView)?void 0:c.ShadowRoot,m=(null==f?void 0:f.prototype)?Object.getOwnPropertyDescriptor(null==f?void 0:f.prototype,"adoptedStyleSheets"):void 0;return null!==d&&-1!==d&&f&&m?(Object.defineProperty(s,"adoptedStyleSheets",{configurable:m.configurable,enumerable:m.enumerable,get(){var n;return null==(n=m.get)?void 0:n.call(this)},set(n){var s,o=null==(s=m.set)?void 0:s.call(this,n);if(null!==d&&-1!==d)try{p.adoptStyleSheets(n,d)}catch(l){}return o}}),On2((()=>{Object.defineProperty(s,"adoptedStyleSheets",{configurable:m.configurable,enumerable:m.enumerable,get:m.get,set:m.set})}))):()=>{}}function Pn2(n,s){void 0===s&&(s={});var o,l=n.doc.defaultView;if(!l)return()=>{};!function(n,s){var{mutationCb:o,mousemoveCb:l,mouseInteractionCb:c,scrollCb:d,viewportResizeCb:h,inputCb:p,mediaInteractionCb:f,styleSheetRuleCb:m,styleDeclarationCb:_,canvasMutationCb:y,fontCb:E,selectionCb:M,customElementCb:P}=n;n.mutationCb=function(){s.mutation&&s.mutation(...arguments),o(...arguments)},n.mousemoveCb=function(){s.mousemove&&s.mousemove(...arguments),l(...arguments)},n.mouseInteractionCb=function(){s.mouseInteraction&&s.mouseInteraction(...arguments),c(...arguments)},n.scrollCb=function(){s.scroll&&s.scroll(...arguments),d(...arguments)},n.viewportResizeCb=function(){s.viewportResize&&s.viewportResize(...arguments),h(...arguments)},n.inputCb=function(){s.input&&s.input(...arguments),p(...arguments)},n.mediaInteractionCb=function(){s.mediaInteaction&&s.mediaInteaction(...arguments),f(...arguments)},n.styleSheetRuleCb=function(){s.styleSheetRule&&s.styleSheetRule(...arguments),m(...arguments)},n.styleDeclarationCb=function(){s.styleDeclaration&&s.styleDeclaration(...arguments),_(...arguments)},n.canvasMutationCb=function(){s.canvasMutation&&s.canvasMutation(...arguments),y(...arguments)},n.fontCb=function(){s.font&&s.font(...arguments),E(...arguments)},n.selectionCb=function(){s.selection&&s.selection(...arguments),M(...arguments)},n.customElementCb=function(){s.customElement&&s.customElement(...arguments),P(...arguments)}}(n,s),n.recordDOM&&(o=An2(n,n.doc));var c=function(n){var{mousemoveCb:s,sampling:o,doc:l,mirror:c}=n;if(!1===o.mousemove)return()=>{};var d,h="number"==typeof o.mousemove?o.mousemove:50,p="number"==typeof o.mousemoveCallback?o.mousemoveCallback:500,f=[],m=Ji2(On2((n=>{var o=Date.now()-d;s(f.map((n=>(n.timeOffset-=o,n))),n),f=[],d=null})),p),_=On2(Ji2(On2((n=>{var s=En2(n),{clientX:o,clientY:l}=sn2(n)?n.changedTouches[0]:n;d||(d=Yi()),f.push({x:o,y:l,id:c.getId(s),timeOffset:Yi()-d}),m("undefined"!=typeof DragEvent&&n instanceof DragEvent?Xi.Drag:n instanceof MouseEvent?Xi.MouseMove:Xi.TouchMove)})),h,{trailing:!1})),y=[Gi2("mousemove",_,l),Gi2("touchmove",_,l),Gi2("drag",_,l)];return On2((()=>{y.forEach((n=>n()))}))}(n),d=function(n){var{mouseInteractionCb:s,doc:o,mirror:l,blockClass:c,blockSelector:d,sampling:h}=n;if(!1===h.mouseInteraction)return()=>{};var p=!0===h.mouseInteraction||void 0===h.mouseInteraction?{}:h.mouseInteraction,f=[],m=null;return Object.keys(Ki).filter((n=>Number.isNaN(Number(n))&&!n.endsWith("_Departed")&&!1!==p[n])).forEach((n=>{var h=E2(n),p=(n=>o=>{var h=En2(o);if(!en2(h,c,d,!0)){var p=null,f=n;if("pointerType"in o){switch(o.pointerType){case"mouse":p=Qi.Mouse;break;case"touch":p=Qi.Touch;break;case"pen":p=Qi.Pen}p===Qi.Touch?Ki[n]===Ki.MouseDown?f="TouchStart":Ki[n]===Ki.MouseUp&&(f="TouchEnd"):Qi.Pen}else sn2(o)&&(p=Qi.Touch);null!==p?(m=p,(f.startsWith("Touch")&&p===Qi.Touch||f.startsWith("Mouse")&&p===Qi.Mouse)&&(p=null)):Ki[n]===Ki.Click&&(p=m,m=null);var _=sn2(o)?o.changedTouches[0]:o;if(_){var y=l.getId(h),{clientX:E,clientY:M}=_;On2(s)(r2({type:Ki[f],id:y,x:E,y:M},null!==p&&{pointerType:p}))}}})(n);if(window.PointerEvent)switch(Ki[n]){case Ki.MouseDown:case Ki.MouseUp:h=h.replace("mouse","pointer");break;case Ki.TouchStart:case Ki.TouchEnd:return}f.push(Gi2(h,p,o))})),On2((()=>{f.forEach((n=>n()))}))}(n),h=Ln2(n),p=function(n,s){var{viewportResizeCb:o}=n,{win:l}=s,c=-1,d=-1;return Gi2("resize",On2(Ji2(On2((()=>{var n=Zi2(),s=Qi2();c===n&&d===s||(o({width:Number(s),height:Number(n)}),c=n,d=s)})),200)),l)}(n,{win:l}),f=function(n){var{inputCb:s,doc:o,mirror:l,blockClass:c,blockSelector:d,ignoreClass:h,ignoreSelector:p,maskInputOptions:f,maskInputFn:m,sampling:_,userTriggeredOnInput:y}=n;function d3(n){var s=En2(n),l=n.isTrusted,_=s&&s.tagName;if(s&&"OPTION"===_&&(s=zi2_parentElement(s)),s&&_&&!(ss.indexOf(_)<0)&&!en2(s,c,d,!0)&&!(s.classList.contains(h)||p&&s.matches(p))){var E=s.value,M=!1,P=B2(s)||"";"radio"===P||"checkbox"===P?M=s.checked:(f[_.toLowerCase()]||f[P])&&(E=T2({element:s,maskInputOptions:f,tagName:_,type:P,value:E,maskInputFn:m})),v3(s,y?{text:E,isChecked:M,userTriggered:l}:{text:E,isChecked:M});var L=s.name;"radio"===P&&L&&M&&o.querySelectorAll('input[type="radio"][name="'+L+'"]').forEach((n=>{if(n!==s){var o=n.value;v3(n,y?{text:o,isChecked:!M,userTriggered:!1}:{text:o,isChecked:!M})}}))}}function v3(n,o){var c=os.get(n);if(!c||c.text!==o.text||c.isChecked!==o.isChecked){os.set(n,o);var d=l.getId(n);On2(s)(r2({},o,{id:d}))}}var E=("last"===_.input?["change"]:["input","change"]).map((n=>Gi2(n,On2(d3),o))),M=o.defaultView;if(!M)return()=>{E.forEach((n=>n()))};var P=M.Object.getOwnPropertyDescriptor(M.HTMLInputElement.prototype,"value"),L=[[M.HTMLInputElement.prototype,"value"],[M.HTMLInputElement.prototype,"checked"],[M.HTMLSelectElement.prototype,"value"],[M.HTMLTextAreaElement.prototype,"value"],[M.HTMLSelectElement.prototype,"selectedIndex"],[M.HTMLOptionElement.prototype,"selected"]];return P&&P.set&&E.push(...L.map((n=>Yi2(n[0],n[1],{set(){On2(d3)({target:this,isTrusted:!1})}},!1,M)))),On2((()=>{E.forEach((n=>n()))}))}(n),m=function(n){var{mediaInteractionCb:s,blockClass:o,blockSelector:l,mirror:c,sampling:d,doc:h}=n,p=On2((n=>Ji2(On2((d=>{var h=En2(d);if(h&&!en2(h,o,l,!0)){var{currentTime:p,volume:f,muted:m,playbackRate:_,loop:y}=h;s({type:n,id:c.getId(h),currentTime:p,volume:f,muted:m,playbackRate:_,loop:y})}})),d.media||500))),f=[Gi2("play",p(ts.Play),h),Gi2("pause",p(ts.Pause),h),Gi2("seeked",p(ts.Seeked),h),Gi2("volumechange",p(ts.VolumeChange),h),Gi2("ratechange",p(ts.RateChange),h)];return On2((()=>{f.forEach((n=>n()))}))}(n),c22=()=>{},f22=()=>{},d22=()=>{},v22=()=>{};n.recordDOM&&(c22=function(n,s){var{styleSheetRuleCb:o,mirror:l,stylesheetManager:c}=n,{win:d}=s;if(!d.CSSStyleSheet||!d.CSSStyleSheet.prototype)return()=>{};var h=d.CSSStyleSheet.prototype.insertRule;d.CSSStyleSheet.prototype.insertRule=new Proxy(h,{apply:On2(((n,s,d)=>{var[h,p]=d,{id:f,styleId:m}=Dn2(s,l,c.styleMirror);return(f&&-1!==f||m&&-1!==m)&&o({id:f,styleId:m,adds:[{rule:h,index:p}]}),n.apply(s,d)}))}),d.CSSStyleSheet.prototype.addRule=function(n,s,o){void 0===o&&(o=this.cssRules.length);var l=n+" { "+s+" }";return d.CSSStyleSheet.prototype.insertRule.apply(this,[l,o])};var p,f,m=d.CSSStyleSheet.prototype.deleteRule;d.CSSStyleSheet.prototype.deleteRule=new Proxy(m,{apply:On2(((n,s,d)=>{var[h]=d,{id:p,styleId:f}=Dn2(s,l,c.styleMirror);return(p&&-1!==p||f&&-1!==f)&&o({id:p,styleId:f,removes:[{index:h}]}),n.apply(s,d)}))}),d.CSSStyleSheet.prototype.removeRule=function(n){return d.CSSStyleSheet.prototype.deleteRule.apply(this,[n])},d.CSSStyleSheet.prototype.replace&&(p=d.CSSStyleSheet.prototype.replace,d.CSSStyleSheet.prototype.replace=new Proxy(p,{apply:On2(((n,s,d)=>{var[h]=d,{id:p,styleId:f}=Dn2(s,l,c.styleMirror);return(p&&-1!==p||f&&-1!==f)&&o({id:p,styleId:f,replace:h}),n.apply(s,d)}))})),d.CSSStyleSheet.prototype.replaceSync&&(f=d.CSSStyleSheet.prototype.replaceSync,d.CSSStyleSheet.prototype.replaceSync=new Proxy(f,{apply:On2(((n,s,d)=>{var[h]=d,{id:p,styleId:f}=Dn2(s,l,c.styleMirror);return(p&&-1!==p||f&&-1!==f)&&o({id:p,styleId:f,replaceSync:h}),n.apply(s,d)}))}));var _={};Wn2("CSSGroupingRule")?_.CSSGroupingRule=d.CSSGroupingRule:(Wn2("CSSMediaRule")&&(_.CSSMediaRule=d.CSSMediaRule),Wn2("CSSConditionRule")&&(_.CSSConditionRule=d.CSSConditionRule),Wn2("CSSSupportsRule")&&(_.CSSSupportsRule=d.CSSSupportsRule));var y={};return Object.entries(_).forEach((n=>{var[s,d]=n;y[s]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(y[s].insertRule,{apply:On2(((n,s,d)=>{var[h,p]=d,{id:f,styleId:m}=Dn2(s.parentStyleSheet,l,c.styleMirror);return(f&&-1!==f||m&&-1!==m)&&o({id:f,styleId:m,adds:[{rule:h,index:[...jn2(s),p||0]}]}),n.apply(s,d)}))}),d.prototype.deleteRule=new Proxy(y[s].deleteRule,{apply:On2(((n,s,d)=>{var[h]=d,{id:p,styleId:f}=Dn2(s.parentStyleSheet,l,c.styleMirror);return(p&&-1!==p||f&&-1!==f)&&o({id:p,styleId:f,removes:[{index:[...jn2(s),h]}]}),n.apply(s,d)}))})})),On2((()=>{d.CSSStyleSheet.prototype.insertRule=h,d.CSSStyleSheet.prototype.deleteRule=m,p&&(d.CSSStyleSheet.prototype.replace=p),f&&(d.CSSStyleSheet.prototype.replaceSync=f),Object.entries(_).forEach((n=>{var[s,o]=n;o.prototype.insertRule=y[s].insertRule,o.prototype.deleteRule=y[s].deleteRule}))}))}(n,{win:l}),f22=Un2(n,n.doc),d22=function(n,s){var{styleDeclarationCb:o,mirror:l,ignoreCSSAttributes:c,stylesheetManager:d}=n,{win:h}=s,p=h.CSSStyleDeclaration.prototype.setProperty;h.CSSStyleDeclaration.prototype.setProperty=new Proxy(p,{apply:On2(((n,s,h)=>{var f,[m,_,y]=h;if(c.has(m))return p.apply(s,[m,_,y]);var{id:E,styleId:M}=Dn2(null==(f=s.parentRule)?void 0:f.parentStyleSheet,l,d.styleMirror);return(E&&-1!==E||M&&-1!==M)&&o({id:E,styleId:M,set:{property:m,value:_,priority:y},index:jn2(s.parentRule)}),n.apply(s,h)}))});var f=h.CSSStyleDeclaration.prototype.removeProperty;return h.CSSStyleDeclaration.prototype.removeProperty=new Proxy(f,{apply:On2(((n,s,h)=>{var p,[m]=h;if(c.has(m))return f.apply(s,[m]);var{id:_,styleId:y}=Dn2(null==(p=s.parentRule)?void 0:p.parentStyleSheet,l,d.styleMirror);return(_&&-1!==_||y&&-1!==y)&&o({id:_,styleId:y,remove:{property:m},index:jn2(s.parentRule)}),n.apply(s,h)}))}),On2((()=>{h.CSSStyleDeclaration.prototype.setProperty=p,h.CSSStyleDeclaration.prototype.removeProperty=f}))}(n,{win:l}),n.collectFonts&&(v22=function(n){var{fontCb:s,doc:o}=n,l=o.defaultView;if(!l)return()=>{};var c=[],d=new WeakMap,h=l.FontFace;l.FontFace=function(n,s,o){var l=new h(n,s,o);return d.set(l,{family:n,buffer:"string"!=typeof s,descriptors:o,fontSource:"string"==typeof s?s:JSON.stringify(Array.from(new Uint8Array(s)))}),l};var p=qi2(o.fonts,"add",(function(n){return function(o){return setTimeout(On2((()=>{var n=d.get(o);n&&(s(n),d.delete(o))})),0),n.apply(this,[o])}}));return c.push((()=>{l.FontFace=h})),c.push(p),On2((()=>{c.forEach((n=>n()))}))}(n)));var _=function(n){var{doc:s,mirror:o,blockClass:l,blockSelector:c,selectionCb:d}=n,h=!0,p=On2((()=>{var n=s.getSelection();if(!(!n||h&&(null==n?void 0:n.isCollapsed))){h=n.isCollapsed||!1;for(var p=[],f=n.rangeCount||0,m=0;m<f;m++){var _=n.getRangeAt(m),{startContainer:y,startOffset:E,endContainer:M,endOffset:P}=_;en2(y,l,c,!0)||en2(M,l,c,!0)||p.push({start:o.getId(y),startOffset:E,end:o.getId(M),endOffset:P})}d({ranges:p})}}));return p(),Gi2("selectionchange",p)}(n),y=function(n){var{doc:s,customElementCb:o}=n,l=s.defaultView;return l&&l.customElements?qi2(l.customElements,"define",(function(n){return function(s,l,c){try{o({define:{name:s}})}catch(d){console.warn("Custom element callback failed for "+s)}return n.apply(this,[s,l,c])}})):()=>{}}(n),E=[];for(var M of n.plugins)E.push(M.observer(M.callback,l,M.options));return On2((()=>{is.forEach((n=>n.reset())),null==o||o.disconnect(),c(),d(),h(),p(),f(),m(),c22(),f22(),d22(),v22(),_(),y(),E.forEach((n=>n())),is.length=0}))}function $n2(n){return void 0!==window[n]}function Wn2(n){return Boolean(void 0!==window[n]&&window[n].prototype&&"insertRule"in window[n].prototype&&"deleteRule"in window[n].prototype)}class qn2{constructor(n){c2(this,"iframeIdToRemoteIdMap",new WeakMap),c2(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=n}getId(n,s,o,l){var c=o||this.getIdToRemoteIdMap(n),d=l||this.getRemoteIdToIdMap(n),h=c.get(s);return h||(h=this.generateIdFn(),c.set(s,h),d.set(h,s)),h}getIds(n,s){var o=this.getIdToRemoteIdMap(n),l=this.getRemoteIdToIdMap(n);return s.map((s=>this.getId(n,s,o,l)))}getRemoteId(n,s,o){var l=o||this.getRemoteIdToIdMap(n);return"number"!=typeof s?s:l.get(s)||-1}getRemoteIds(n,s){var o=this.getRemoteIdToIdMap(n);return s.map((s=>this.getRemoteId(n,s,o)))}reset(n){if(!n)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(n),this.iframeRemoteIdToIdMap.delete(n)}getIdToRemoteIdMap(n){var s=this.iframeIdToRemoteIdMap.get(n);return s||(s=new Map,this.iframeIdToRemoteIdMap.set(n,s)),s}getRemoteIdToIdMap(n){var s=this.iframeRemoteIdToIdMap.get(n);return s||(s=new Map,this.iframeRemoteIdToIdMap.set(n,s)),s}}class zn2{constructor(n){c2(this,"iframes",new WeakMap),c2(this,"crossOriginIframeMap",new WeakMap),c2(this,"crossOriginIframeMirror",new qn2(H2)),c2(this,"crossOriginIframeStyleMirror"),c2(this,"crossOriginIframeRootIdMap",new WeakMap),c2(this,"mirror"),c2(this,"mutationCb"),c2(this,"wrappedEmit"),c2(this,"loadListener"),c2(this,"stylesheetManager"),c2(this,"recordCrossOriginIframes"),c2(this,"messageHandler"),c2(this,"nestedIframeListeners",new Map),this.mutationCb=n.mutationCb,this.wrappedEmit=n.wrappedEmit,this.stylesheetManager=n.stylesheetManager,this.recordCrossOriginIframes=n.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new qn2(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=n.mirror,this.messageHandler=this.handleMessage.bind(this),this.recordCrossOriginIframes&&window.addEventListener("message",this.messageHandler)}addIframe(n){this.iframes.set(n,!0),n.contentWindow&&this.crossOriginIframeMap.set(n.contentWindow,n)}addLoadListener(n){this.loadListener=n}removeLoadListener(){this.loadListener=void 0}attachIframe(n,s){var o;this.mutationCb({adds:[{parentId:this.mirror.getId(n),nextId:null,node:s}],removes:[],texts:[],attributes:[],isAttachIframe:!0});var l=n.contentWindow;if(this.recordCrossOriginIframes&&l&&!this.nestedIframeListeners.has(l)){var c=this.handleMessage.bind(this);this.nestedIframeListeners.set(l,c),l.addEventListener("message",c)}null==(o=this.loadListener)||o.call(this,n),n.contentDocument&&n.contentDocument.adoptedStyleSheets&&n.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.contentDocument.adoptedStyleSheets,this.mirror.getId(n.contentDocument))}handleMessage(n){var s=n;if("rrweb"===s.data.type&&s.origin===s.data.origin&&n.source){var o=this.crossOriginIframeMap.get(n.source);if(o){var l=this.transformCrossOriginEvent(o,s.data.event);l&&this.wrappedEmit(l,s.data.isCheckout)}}}transformCrossOriginEvent(n,s){var o;switch(s.type){case Ji.FullSnapshot:this.crossOriginIframeMirror.reset(n),this.crossOriginIframeStyleMirror.reset(n),this.replaceIdOnNode(s.data.node,n);var l=s.data.node.id;return this.crossOriginIframeRootIdMap.set(n,l),this.patchRootIdOnNode(s.data.node,l),{timestamp:s.timestamp,type:Ji.IncrementalSnapshot,data:{source:Xi.Mutation,adds:[{parentId:this.mirror.getId(n),nextId:null,node:s.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case Ji.Meta:case Ji.Load:case Ji.DomContentLoaded:return!1;case Ji.Plugin:return s;case Ji.Custom:return this.replaceIds(s.data.payload,n,["id","parentId","previousId","nextId"]),s;case Ji.IncrementalSnapshot:switch(s.data.source){case Xi.Mutation:return s.data.adds.forEach((s=>{this.replaceIds(s,n,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,n);var o=this.crossOriginIframeRootIdMap.get(n);o&&this.patchRootIdOnNode(s.node,o)})),s.data.removes.forEach((s=>{this.replaceIds(s,n,["parentId","id"])})),s.data.attributes.forEach((s=>{this.replaceIds(s,n,["id"])})),s.data.texts.forEach((s=>{this.replaceIds(s,n,["id"])})),s;case Xi.Drag:case Xi.TouchMove:case Xi.MouseMove:return s.data.positions.forEach((s=>{this.replaceIds(s,n,["id"])})),s;case Xi.ViewportResize:return!1;case Xi.MediaInteraction:case Xi.MouseInteraction:case Xi.Scroll:case Xi.CanvasMutation:case Xi.Input:return this.replaceIds(s.data,n,["id"]),s;case Xi.StyleSheetRule:case Xi.StyleDeclaration:return this.replaceIds(s.data,n,["id"]),this.replaceStyleIds(s.data,n,["styleId"]),s;case Xi.Font:return s;case Xi.Selection:return s.data.ranges.forEach((s=>{this.replaceIds(s,n,["start","end"])})),s;case Xi.AdoptedStyleSheet:return this.replaceIds(s.data,n,["id"]),this.replaceStyleIds(s.data,n,["styleIds"]),null==(o=s.data.styles)||o.forEach((s=>{this.replaceStyleIds(s,n,["styleId"])})),s}}return!1}replace(n,s,o,l){for(var c of l)(Array.isArray(s[c])||"number"==typeof s[c])&&(Array.isArray(s[c])?s[c]=n.getIds(o,s[c]):s[c]=n.getId(o,s[c]));return s}replaceIds(n,s,o){return this.replace(this.crossOriginIframeMirror,n,s,o)}replaceStyleIds(n,s,o){return this.replace(this.crossOriginIframeStyleMirror,n,s,o)}replaceIdOnNode(n,s){this.replaceIds(n,s,["id","rootId"]),"childNodes"in n&&n.childNodes.forEach((n=>{this.replaceIdOnNode(n,s)}))}patchRootIdOnNode(n,s){n.type===rs.Document||n.rootId||(n.rootId=s),"childNodes"in n&&n.childNodes.forEach((n=>{this.patchRootIdOnNode(n,s)}))}destroy(){this.recordCrossOriginIframes&&window.removeEventListener("message",this.messageHandler),this.nestedIframeListeners.forEach(((n,s)=>{s.removeEventListener("message",n)})),this.nestedIframeListeners.clear()}}class Gn2{constructor(n){c2(this,"shadowDoms",new WeakSet),c2(this,"mutationCb"),c2(this,"scrollCb"),c2(this,"bypassOptions"),c2(this,"mirror"),c2(this,"restoreHandlers",[]),this.mutationCb=n.mutationCb,this.scrollCb=n.scrollCb,this.bypassOptions=n.bypassOptions,this.mirror=n.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(n,s){if(R2(n)&&!this.shadowDoms.has(n)){this.shadowDoms.add(n);var o=An2(r2({},this.bypassOptions,{doc:s,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),n);this.restoreHandlers.push((()=>o.disconnect())),this.restoreHandlers.push(Ln2(r2({},this.bypassOptions,{scrollCb:this.scrollCb,doc:n,mirror:this.mirror}))),setTimeout((()=>{n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(zi2_host(n))),this.restoreHandlers.push(Un2({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},n))}),0)}}observeAttachShadow(n){n.contentWindow&&n.contentDocument&&this.patchAttachShadow(n.contentWindow.Element,n.contentDocument)}patchAttachShadow(n,s){var o=this;this.restoreHandlers.push(qi2(n.prototype,"attachShadow",(function(n){return function(l){var c=n.call(this,l),d=zi2_shadowRoot(this);return d&&fn2(this)&&o.addShadowRoot(d,s),c}})))}reset(){this.restoreHandlers.forEach((n=>{try{n()}catch(s){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var as="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ls="undefined"==typeof Uint8Array?[]:new Uint8Array(256),cs=0;cs<64;cs++)ls[as.charCodeAt(cs)]=cs;var us=new Map,Xn2=(n,s,o)=>{if(n&&(Qn2(n,s)||"object"==typeof n)){var l=(d=o,h=n.constructor.name,(p=us.get(d))||(p=new Map,us.set(d,p)),p.has(h)||p.set(h,[]),p.get(h)),c=l.indexOf(n);return-1===c&&(c=l.length,l.push(n)),c}var d,h,p};function Kn2(n,s,o){if(n instanceof Array)return n.map((n=>Kn2(n,s,o)));if(null===n)return n;if(n instanceof Float32Array||n instanceof Float64Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Int16Array||n instanceof Int8Array||n instanceof Uint8ClampedArray)return{rr_type:n.constructor.name,args:[Object.values(n)]};if(n instanceof ArrayBuffer)return{rr_type:n.constructor.name,base64:function(n){var s,o=new Uint8Array(n),l=o.length,c="";for(s=0;s<l;s+=3)c+=as[o[s]>>2],c+=as[(3&o[s])<<4|o[s+1]>>4],c+=as[(15&o[s+1])<<2|o[s+2]>>6],c+=as[63&o[s+2]];return l%3==2?c=c.substring(0,c.length-1)+"=":l%3==1&&(c=c.substring(0,c.length-2)+"=="),c}(n)};if(n instanceof DataView)return{rr_type:n.constructor.name,args:[Kn2(n.buffer,s,o),n.byteOffset,n.byteLength]};if(n instanceof HTMLImageElement){var l=n.constructor.name,{src:c}=n;return{rr_type:l,src:c}}return n instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:n.toDataURL()}:n instanceof ImageData?{rr_type:n.constructor.name,args:[Kn2(n.data,s,o),n.width,n.height]}:Qn2(n,s)||"object"==typeof n?{rr_type:n.constructor.name,index:Xn2(n,s,o)}:n}var Zn2=(n,s,o)=>n.map((n=>Kn2(n,s,o))),Qn2=(n,s)=>{var o=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((n=>"function"==typeof s[n]));return Boolean(o.find((o=>n instanceof s[o])))};function ts2(n,s,o,l){var c=[];try{var d=qi2(n.HTMLCanvasElement.prototype,"getContext",(function(n){return function(c){for(var d=arguments.length,h=new Array(d>1?d-1:0),p=1;p<d;p++)h[p-1]=arguments[p];if(!en2(this,s,o,!0)){var f=function(n){return"experimental-webgl"===n?"webgl":n}(c);if("__context"in this||(this.__context=f),l&&["webgl","webgl2"].includes(f))if(h[0]&&"object"==typeof h[0]){var m=h[0];m.preserveDrawingBuffer||(m.preserveDrawingBuffer=!0)}else h.splice(0,1,{preserveDrawingBuffer:!0})}return n.apply(this,[c,...h])}}));c.push(d)}catch(h){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{c.forEach((n=>n()))}}function es2(n,s,o,l,c,d){var h=[],p=Object.getOwnPropertyNames(n),h22=function(p){if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(p))return 0;try{if("function"!=typeof n[p])return 0;var f=qi2(n,p,(function(n){return function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];var _=n.apply(this,f);if(Xn2(_,d,this),"tagName"in this.canvas&&!en2(this.canvas,l,c,!0)){var y=Zn2(f,d,this),E={type:s,property:p,args:y};o(this.canvas,E)}return _}}));h.push(f)}catch(_){var m=Yi2(n,p,{set(n){o(this.canvas,{type:s,property:p,args:[n],setter:!0})}});h.push(m)}};for(var f of p)h22(f);return h}var ds,Cs,Es,Ms='(function() {\n  "use strict";\n  var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";\n  var lookup = typeof Uint8Array === "undefined" ? [] : new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n  var encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i2, len = bytes.length, base64 = "";\n    for (i2 = 0; i2 < len; i2 += 3) {\n      base64 += chars[bytes[i2] >> 2];\n      base64 += chars[(bytes[i2] & 3) << 4 | bytes[i2 + 1] >> 4];\n      base64 += chars[(bytes[i2 + 1] & 15) << 2 | bytes[i2 + 2] >> 6];\n      base64 += chars[bytes[i2 + 2] & 63];\n    }\n    if (len % 3 === 2) {\n      base64 = base64.substring(0, base64.length - 1) + "=";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + "==";\n    }\n    return base64;\n  };\n  const lastBlobMap = /* @__PURE__ */ new Map();\n  const transparentBlobMap = /* @__PURE__ */ new Map();\n  async function getTransparentBlobFor(width, height, dataURLOptions) {\n    const id = `${width}-${height}`;\n    if ("OffscreenCanvas" in globalThis) {\n      if (transparentBlobMap.has(id)) return transparentBlobMap.get(id);\n      const offscreen = new OffscreenCanvas(width, height);\n      offscreen.getContext("2d");\n      const blob = await offscreen.convertToBlob(dataURLOptions);\n      const arrayBuffer = await blob.arrayBuffer();\n      const base64 = encode(arrayBuffer);\n      transparentBlobMap.set(id, base64);\n      return base64;\n    } else {\n      return "";\n    }\n  }\n  const worker = self;\n  worker.onmessage = async function(e) {\n    if ("OffscreenCanvas" in globalThis) {\n      const { id, bitmap, width, height, dataURLOptions } = e.data;\n      const transparentBase64 = getTransparentBlobFor(\n        width,\n        height,\n        dataURLOptions\n      );\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext("2d");\n      ctx.drawImage(bitmap, 0, 0);\n      bitmap.close();\n      const blob = await offscreen.convertToBlob(dataURLOptions);\n      const type = blob.type;\n      const arrayBuffer = await blob.arrayBuffer();\n      const base64 = encode(arrayBuffer);\n      if (!lastBlobMap.has(id) && await transparentBase64 === base64) {\n        lastBlobMap.set(id, base64);\n        return worker.postMessage({ id });\n      }\n      if (lastBlobMap.get(id) === base64) return worker.postMessage({ id });\n      worker.postMessage({\n        id,\n        type,\n        base64,\n        width,\n        height\n      });\n      lastBlobMap.set(id, base64);\n    } else {\n      return worker.postMessage({ id: e.data.id });\n    }\n  };\n})();\n//# sourceMappingURL=image-bitmap-data-url-worker-IJpC7g_b.js.map\n',Os="undefined"!=typeof self&&self.Blob&&new Blob([Ms],{type:"text/javascript;charset=utf-8"});function as2(n){var s;try{if(!(s=Os&&(self.URL||self.webkitURL).createObjectURL(Os)))throw"";var o=new Worker(s,{name:null==n?void 0:n.name});return o.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(s)})),o}catch(l){return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(Ms),{name:null==n?void 0:n.name})}finally{s&&(self.URL||self.webkitURL).revokeObjectURL(s)}}class hs2{constructor(n){c2(this,"pendingCanvasMutations",new Map),c2(this,"rafStamps",{latestId:0,invokeId:null}),c2(this,"mirror"),c2(this,"mutationCb"),c2(this,"resetObservers"),c2(this,"frozen",!1),c2(this,"locked",!1),c2(this,"processMutation",((n,s)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(n)||this.pendingCanvasMutations.set(n,[]),this.pendingCanvasMutations.get(n).push(s)}));var{sampling:s="all",win:o,blockClass:l,blockSelector:c,recordCanvas:d,dataURLOptions:h}=n;this.mutationCb=n.mutationCb,this.mirror=n.mirror,d&&"all"===s&&this.initCanvasMutationObserver(o,l,c),d&&"number"==typeof s&&this.initCanvasFPSObserver(s,o,l,c,{dataURLOptions:h})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(n,s,o,l,c){var d=this,h=ts2(s,o,l,!0),p=new Map,f=new as2;f.onmessage=n=>{var{id:s}=n.data;if(p.set(s,!1),"base64"in n.data){var{base64:o,type:l,width:c,height:d}=n.data;this.mutationCb({id:s,type:es["2D"],commands:[{property:"clearRect",args:[0,0,c,d]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:l}]},0,0]}]})}};var m,_=1e3/n,y=0,d22=n=>{var h,E,M;y&&n-y<_||(y=n,(h=[],E=n=>{n.querySelectorAll("canvas").forEach((n=>{en2(n,o,l,!0)||h.push(n)})),n.querySelectorAll("*").forEach((n=>{n.shadowRoot&&E(n.shadowRoot)}))},E(s.document),h).forEach((M=e2((function*(n){var s,o=d.mirror.getId(n);if(!p.get(o)&&0!==n.width&&0!==n.height){if(p.set(o,!0),["webgl","webgl2"].includes(n.__context)){var l=n.getContext(n.__context);!1===(null==(s=null==l?void 0:l.getContextAttributes())?void 0:s.preserveDrawingBuffer)&&l.clear(l.COLOR_BUFFER_BIT)}var h=n.clientWidth||n.width,m=n.clientHeight||n.height,_=yield createImageBitmap(n,{resizeWidth:h,resizeHeight:m});f.postMessage({id:o,bitmap:_,width:h,height:m,dataURLOptions:c.dataURLOptions},[_])}})),function(n){return M.apply(this,arguments)}))),m=requestAnimationFrame(d22)};m=requestAnimationFrame(d22),this.resetObservers=()=>{h(),cancelAnimationFrame(m)}}initCanvasMutationObserver(n,s,o){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var l,c,d,h,p,f=ts2(n,s,o,!1),m=function(n,s,o,l){var c=[],d=Object.getOwnPropertyNames(s.CanvasRenderingContext2D.prototype),o22=function(d){try{if("function"!=typeof s.CanvasRenderingContext2D.prototype[d])return 1;var h=qi2(s.CanvasRenderingContext2D.prototype,d,(function(c){return function(){for(var h=arguments.length,p=new Array(h),f=0;f<h;f++)p[f]=arguments[f];return en2(this.canvas,o,l,!0)||setTimeout((()=>{var o=Zn2(p,s,this);n(this.canvas,{type:es["2D"],property:d,args:o})}),0),c.apply(this,p)}}));c.push(h)}catch(f){var p=Yi2(s.CanvasRenderingContext2D.prototype,d,{set(s){n(this.canvas,{type:es["2D"],property:d,args:[s],setter:!0})}});c.push(p)}};for(var h of d)o22(h);return()=>{c.forEach((n=>n()))}}(this.processMutation.bind(this),n,s,o),_=(l=this.processMutation.bind(this),d=s,h=o,(p=[]).push(...es2((c=n).WebGLRenderingContext.prototype,es.WebGL,l,d,h,c)),void 0!==c.WebGL2RenderingContext&&p.push(...es2(c.WebGL2RenderingContext.prototype,es.WebGL2,l,d,h,c)),()=>{p.forEach((n=>n()))});this.resetObservers=()=>{f(),m(),_()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){var t22=n=>{this.rafStamps.latestId=n,requestAnimationFrame(t22)};requestAnimationFrame(t22)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((n,s)=>{var o=this.mirror.getId(s);this.flushPendingCanvasMutationFor(s,o)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(n,s){if(!this.frozen&&!this.locked){var o=this.pendingCanvasMutations.get(n);if(o&&-1!==s){var l=o.map((n=>i2(n,h))),{type:c}=o[0];this.mutationCb({id:s,type:c,commands:l}),this.pendingCanvasMutations.delete(n)}}}}class us2{constructor(n){c2(this,"trackedLinkElements",new WeakSet),c2(this,"mutationCb"),c2(this,"adoptedStyleSheetCb"),c2(this,"styleMirror",new un2),this.mutationCb=n.mutationCb,this.adoptedStyleSheetCb=n.adoptedStyleSheetCb}attachLinkElement(n,s){"_cssText"in s.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:s.id,attributes:s.attributes}]}),this.trackLinkElement(n)}trackLinkElement(n){this.trackedLinkElements.has(n)||(this.trackedLinkElements.add(n),this.trackStylesheetInLinkElement(n))}adoptStyleSheets(n,s){var o=this;if(0!==n.length){var l={id:s,styleIds:[]},c=[],s22=function(n){var s;o.styleMirror.has(n)?s=o.styleMirror.getId(n):(s=o.styleMirror.add(n),c.push({styleId:s,rules:Array.from(n.rules||CSSRule,((s,o)=>({rule:_2(s,n.href),index:o})))})),l.styleIds.push(s)};for(var d of n)s22(d);c.length>0&&(l.styles=c),this.adoptedStyleSheetCb(l)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(n){}}class ls2{constructor(){c2(this,"nodeMap",new WeakMap),c2(this,"active",!1)}inOtherBuffer(n,s){var o=this.nodeMap.get(n);return o&&Array.from(o).some((n=>n!==s))}add(n,s){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(n,(this.nodeMap.get(n)||new Set).add(s))}destroy(){}}var Ps=!1;try{if(2!==Array.from([1],(n=>2*n))[0]){var Ls=document.createElement("iframe");document.body.appendChild(Ls),Array.from=(null==(n=Ls.contentWindow)?void 0:n.Array.from)||Array.from,document.body.removeChild(Ls)}}catch(s){console.debug("Unable to override Array.from",s)}var Ns,Fs,Ds=new O2;function ms2(n){void 0===n&&(n={});var{emit:s,checkoutEveryNms:o,checkoutEveryNth:l,blockClass:c="rr-block",blockSelector:d=null,ignoreClass:h="rr-ignore",ignoreSelector:p=null,maskTextClass:f="rr-mask",maskTextSelector:m=null,inlineStylesheet:_=!0,maskAllInputs:y,maskInputOptions:E,slimDOMOptions:M,maskInputFn:P,maskTextFn:L,hooks:N,packFn:F,sampling:D={},dataURLOptions:B={},mousemoveWait:$,recordDOM:U=!0,recordCanvas:H=!1,recordCrossOriginIframes:z=!1,recordAfter:q=("DOMContentLoaded"===n.recordAfter?n.recordAfter:"load"),userTriggeredOnInput:V=!1,collectFonts:Z=!1,inlineImages:ee=!1,plugins:ne,keepIframeSrcFn:ie=()=>!1,ignoreCSSAttributes:se=new Set([]),errorHandler:oe}=n;ns=oe;var le=!z||window.parent===window,ce=!1;if(!le)try{window.parent.document&&(ce=!1)}catch(fe){ce=!0}if(le&&!s)throw new Error("emit function is required");if(!le&&!ce)return()=>{};void 0!==$&&void 0===D.mousemove&&(D.mousemove=$),Ds.reset();var pe,fe,ge=!0===y?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==E?E:{password:!0},be=!0===M||"all"===M?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===M,headMetaDescKeywords:"all"===M,headTitleMutations:"all"===M}:M||{};void 0===fe&&(fe=window),"NodeList"in fe&&!fe.NodeList.prototype.forEach&&(fe.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in fe&&!fe.DOMTokenList.prototype.forEach&&(fe.DOMTokenList.prototype.forEach=Array.prototype.forEach);var Oe=0,P22=n=>{for(var s of ne||[])s.eventProcessor&&(n=s.eventProcessor(n));return F&&!ce&&(n=F(n)),n};ds=(n,c)=>{var d,h=n;if(h.timestamp=Yi(),!(null==(d=is[0])?void 0:d.isFrozen())||h.type===Ji.FullSnapshot||h.type===Ji.IncrementalSnapshot&&h.data.source===Xi.Mutation||is.forEach((n=>n.unfreeze())),le)null==s||s(P22(h),c);else if(ce){var p={type:"rrweb",event:P22(h),origin:window.location.origin,isCheckout:c};window.parent.postMessage(p,"*")}if(h.type===Ji.FullSnapshot)pe=h,Oe=0;else if(h.type===Ji.IncrementalSnapshot){if(h.data.source===Xi.Mutation&&h.data.isAttachIframe)return;Oe++;var f=l&&Oe>=l,m=o&&h.timestamp-pe.timestamp>o;(f||m)&&Cs(!0)}};var W22=n=>{ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.Mutation},n)})},q22=n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.Scroll},n)}),z22=n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.CanvasMutation},n)}),Ne=new us2({mutationCb:W22,adoptedStyleSheetCb:n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.AdoptedStyleSheet},n)})}),Fe=new zn2({mirror:Ds,mutationCb:W22,stylesheetManager:Ne,recordCrossOriginIframes:z,wrappedEmit:ds});for(var De of ne||[])De.getMirror&&De.getMirror({nodeMirror:Ds,crossOriginIframeMirror:Fe.crossOriginIframeMirror,crossOriginIframeStyleMirror:Fe.crossOriginIframeStyleMirror});var Be=new ls2;Es=new hs2({recordCanvas:H,mutationCb:z22,win:window,blockClass:c,blockSelector:d,mirror:Ds,sampling:D.canvas,dataURLOptions:B});var Ue=new Gn2({mutationCb:W22,scrollCb:q22,bypassOptions:{blockClass:c,blockSelector:d,maskTextClass:f,maskTextSelector:m,inlineStylesheet:_,maskInputOptions:ge,dataURLOptions:B,maskTextFn:L,maskInputFn:P,recordCanvas:H,inlineImages:ee,sampling:D,slimDOMOptions:be,iframeManager:Fe,stylesheetManager:Ne,canvasManager:Es,keepIframeSrcFn:ie,processedNodeManager:Be},mirror:Ds});Cs=function(n){if(void 0===n&&(n=!1),U){ds({type:Ji.Meta,data:{href:window.location.href,width:Qi2(),height:Zi2()}},n),Ne.reset(),Ue.init(),is.forEach((n=>n.lock()));var s=function(n,s){var{mirror:o=new O2,blockClass:l="rr-block",blockSelector:c=null,maskTextClass:d="rr-mask",maskTextSelector:h=null,inlineStylesheet:p=!0,inlineImages:f=!1,recordCanvas:m=!1,maskAllInputs:_=!1,maskTextFn:y,maskInputFn:E,slimDOM:M=!1,dataURLOptions:P,preserveWhiteSpace:L,onSerialize:N,onIframeLoad:F,iframeLoadTimeout:D,onStylesheetLoad:B,stylesheetLoadTimeout:$,keepIframeSrcFn:U=()=>!1}=s||{};return ot2(n,{doc:n,mirror:o,blockClass:l,blockSelector:c,maskTextClass:d,maskTextSelector:h,skipChild:!1,inlineStylesheet:p,maskInputOptions:!0===_?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===_?{password:!0}:_,maskTextFn:y,maskInputFn:E,slimDOMOptions:!0===M||"all"===M?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===M,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===M?{}:M,dataURLOptions:P,inlineImages:f,recordCanvas:m,preserveWhiteSpace:L,onSerialize:N,onIframeLoad:F,iframeLoadTimeout:D,onStylesheetLoad:B,stylesheetLoadTimeout:$,keepIframeSrcFn:U,newlyAddedElement:!1})}(document,{mirror:Ds,blockClass:c,blockSelector:d,maskTextClass:f,maskTextSelector:m,inlineStylesheet:_,maskAllInputs:ge,maskTextFn:L,maskInputFn:P,slimDOM:be,dataURLOptions:B,recordCanvas:H,inlineImages:ee,onSerialize:n=>{on2(n,Ds)&&Fe.addIframe(n),an2(n,Ds)&&Ne.trackLinkElement(n),hn2(n)&&Ue.addShadowRoot(zi2_shadowRoot(n),document)},onIframeLoad:(n,s)=>{Fe.attachIframe(n,s),Ue.observeAttachShadow(n)},onStylesheetLoad:(n,s)=>{Ne.attachLinkElement(n,s)},keepIframeSrcFn:ie});if(!s)return console.warn("Failed to snapshot the document");ds({type:Ji.FullSnapshot,data:{node:s,initialOffset:Ki2(window)}},n),is.forEach((n=>n.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ne.adoptStyleSheets(document.adoptedStyleSheets,Ds.getId(document))}};try{var He=[],K22=n=>{var s;return On2(Pn2)({mutationCb:W22,mousemoveCb:(n,s)=>ds({type:Ji.IncrementalSnapshot,data:{source:s,positions:n}}),mouseInteractionCb:n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.MouseInteraction},n)}),scrollCb:q22,viewportResizeCb:n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.ViewportResize},n)}),inputCb:n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.Input},n)}),mediaInteractionCb:n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.MediaInteraction},n)}),styleSheetRuleCb:n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.StyleSheetRule},n)}),styleDeclarationCb:n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.StyleDeclaration},n)}),canvasMutationCb:z22,fontCb:n=>ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.Font},n)}),selectionCb:n=>{ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.Selection},n)})},customElementCb:n=>{ds({type:Ji.IncrementalSnapshot,data:r2({source:Xi.CustomElement},n)})},blockClass:c,ignoreClass:h,ignoreSelector:p,maskTextClass:f,maskTextSelector:m,maskInputOptions:ge,inlineStylesheet:_,sampling:D,recordDOM:U,recordCanvas:H,inlineImages:ee,userTriggeredOnInput:V,collectFonts:Z,doc:n,maskInputFn:P,maskTextFn:L,keepIframeSrcFn:ie,blockSelector:d,slimDOMOptions:be,dataURLOptions:B,mirror:Ds,iframeManager:Fe,stylesheetManager:Ne,shadowDomManager:Ue,processedNodeManager:Be,canvasManager:Es,ignoreCSSAttributes:se,plugins:(null==(s=null==ne?void 0:ne.filter((n=>n.observer)))?void 0:s.map((n=>({observer:n.observer,options:n.options,callback:s=>ds({type:Ji.Plugin,data:{plugin:n.name,payload:s}})}))))||[]},N)};Fe.addLoadListener((n=>{try{He.push(K22(n.contentDocument))}catch(s){console.warn(s)}}));var Z22=()=>{Cs(),He.push(K22(document)),Ps=!0};return"interactive"===document.readyState||"complete"===document.readyState?Z22():(He.push(Gi2("DOMContentLoaded",(()=>{ds({type:Ji.DomContentLoaded,data:{}}),"DOMContentLoaded"===q&&Z22()}))),He.push(Gi2("load",(()=>{ds({type:Ji.Load,data:{}}),"load"===q&&Z22()}),window))),()=>{He.forEach((n=>n())),Be.destroy(),Fe.removeLoadListener(),Fe.destroy(),Ps=!1,ns=void 0}}catch(fe){console.warn(fe)}}ms2.addCustomEvent=(n,s)=>{if(!Ps)throw new Error("please add custom event after start recording");ds({type:Ji.Custom,data:{tag:n,payload:s}})},ms2.freezePage=()=>{is.forEach((n=>n.freeze()))},ms2.takeFullSnapshot=n=>{if(!Ps)throw new Error("please take full snapshot after start recording");Cs(n)},ms2.mirror=Ds,(Fs=Ns||(Ns={}))[Fs.NotStarted=0]="NotStarted",Fs[Fs.Running=1]="Running",Fs[Fs.Stopped=2]="Stopped";var{addCustomEvent:Us}=ms2,{freezePage:Gs}=ms2,{takeFullSnapshot:Zs}=ms2,ro=Object.defineProperty,Ss2=(n,s,o)=>{return d=o,(c="symbol"!=typeof s?s+"":s)in(l=n)?ro(l,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[c]=d;var l,c,d};class ks2{constructor(n){Ss2(this,"fileName"),Ss2(this,"functionName"),Ss2(this,"lineNumber"),Ss2(this,"columnNumber"),this.fileName=n.fileName||"",this.functionName=n.functionName||"",this.lineNumber=n.lineNumber,this.columnNumber=n.columnNumber}toString(){var n=this.lineNumber||"",s=this.columnNumber||"";return this.functionName?this.functionName+" ("+this.fileName+":"+n+":"+s+")":this.fileName+":"+n+":"+s}}var oo=/(^|@)\S+:\d+/,ao=/^\s*at .*(\S+:\d+|\(native\))/m,co=/^(eval@)?(\[native code])?$/,ho={parse:function(n){return n?void 0!==n.stacktrace||void 0!==n["opera#sourceloc"]?this.parseOpera(n):n.stack&&n.stack.match(ao)?this.parseV8OrIE(n):n.stack?this.parseFFOrSafari(n):[]:[]},extractLocation:function(n){if(-1===n.indexOf(":"))return[n];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n.replace(/[()]/g,""));if(!s)throw new Error("Cannot parse given url: "+n);return[s[1],s[2]||void 0,s[3]||void 0]},parseV8OrIE:function(n){return n.stack.split("\n").filter((function(n){return!!n.match(ao)}),this).map((function(n){n.indexOf("(eval ")>-1&&(n=n.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var s=n.replace(/^\s+/,"").replace(/\(eval code/g,"("),o=s.match(/ (\((.+):(\d+):(\d+)\)$)/),l=(s=o?s.replace(o[0],""):s).split(/\s+/).slice(1),c=this.extractLocation(o?o[1]:l.pop()),d=l.join(" ")||void 0,h=["eval","<anonymous>"].indexOf(c[0])>-1?void 0:c[0];return new ks2({functionName:d,fileName:h,lineNumber:c[1],columnNumber:c[2]})}),this)},parseFFOrSafari:function(n){return n.stack.split("\n").filter((function(n){return!n.match(co)}),this).map((function(n){if(n.indexOf(" > eval")>-1&&(n=n.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===n.indexOf("@")&&-1===n.indexOf(":"))return new ks2({functionName:n});var s=/((.*".+"[^@]*)?[^@]*)(?:@)/,o=n.match(s),l=o&&o[1]?o[1]:void 0,c=this.extractLocation(n.replace(s,""));return new ks2({functionName:l,fileName:c[0],lineNumber:c[1],columnNumber:c[2]})}),this)},parseOpera:function(n){return!n.stacktrace||n.message.indexOf("\n")>-1&&n.message.split("\n").length>n.stacktrace.split("\n").length?this.parseOpera9(n):n.stack?this.parseOpera11(n):this.parseOpera10(n)},parseOpera9:function(n){for(var s=/Line (\d+).*script (?:in )?(\S+)/i,o=n.message.split("\n"),l=[],c=2,d=o.length;c<d;c+=2){var h=s.exec(o[c]);h&&l.push(new ks2({fileName:h[2],lineNumber:parseFloat(h[1])}))}return l},parseOpera10:function(n){for(var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=n.stacktrace.split("\n"),l=[],c=0,d=o.length;c<d;c+=2){var h=s.exec(o[c]);h&&l.push(new ks2({functionName:h[3]||void 0,fileName:h[2],lineNumber:parseFloat(h[1])}))}return l},parseOpera11:function(n){return n.stack.split("\n").filter((function(n){return!!n.match(oo)&&!n.match(/^Error created at/)}),this).map((function(n){var s=n.split("@"),o=this.extractLocation(s.pop()),l=(s.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new ks2({functionName:l,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}),this)}};function xs2(n){if(!n||!n.outerHTML)return"";for(var s="";n.parentElement;){var o=n.localName;if(!o)break;o=o.toLowerCase();var l=n.parentElement,c=[];if(l.children&&l.children.length>0)for(var d=0;d<l.children.length;d++){var h=l.children[d];h.localName&&h.localName.toLowerCase&&h.localName.toLowerCase()===o&&c.push(h)}c.length>1&&(o+=":eq("+c.indexOf(n)+")"),s=o+(s?">"+s:""),n=l}return s}function _s2(n){return"[object Object]"===Object.prototype.toString.call(n)}function Os2(n,s){if(0===s)return!0;var o=Object.keys(n);for(var l of o)if(_s2(n[l])&&Os2(n[l],s-1))return!0;return!1}function Ts2(n,s){var o={numOfKeysLimit:50,depthOfLimit:4};Object.assign(o,s);var l=[],c=[];return JSON.stringify(n,(function(n,s){if(l.length>0){var d=l.indexOf(this);~d?l.splice(d+1):l.push(this),~d?c.splice(d,1/0,n):c.push(n),~l.indexOf(s)&&(s=l[0]===s?"[Circular ~]":"[Circular ~."+c.slice(0,l.indexOf(s)).join(".")+"]")}else l.push(s);if(null===s)return s;if(void 0===s)return"undefined";if(_s2(h=s)&&Object.keys(h).length>o.numOfKeysLimit||"function"==typeof h||_s2(h)&&Os2(h,o.depthOfLimit))return function(n){var s=n.toString();return o.stringLengthLimit&&s.length>o.stringLengthLimit&&(s=s.slice(0,o.stringLengthLimit)+"..."),s}(s);var h;if("bigint"==typeof s)return s.toString()+"n";if(s instanceof Event){var p={};for(var f in s){var m=s[f];Array.isArray(m)?p[f]=xs2(m.length?m[0]:null):p[f]=m}return p}return s instanceof Node?s instanceof HTMLElement?s?s.outerHTML:"":s.nodeName:s instanceof Error?s.stack?s.stack+"\nEnd of stack for Error object":s.name+": "+s.message:s}))}var po={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function As2(n,s,o){var l,c=o?Object.assign({},po,o):po,d=c.logger;if(!d)return()=>{};l="string"==typeof d?s[d]:d;var h=0,p=!1,f=[];if(c.level.includes("error")){var u22=s=>{var o=s.message,l=s.error,d=ho.parse(l).map((n=>n.toString())),h=[Ts2(o,c.stringifyOptions)];n({level:"error",trace:d,payload:h})};s.addEventListener("error",u22),f.push((()=>{s.removeEventListener("error",u22)}));var l22=s=>{var o,l;s.reason instanceof Error?l=[Ts2("Uncaught (in promise) "+(o=s.reason).name+": "+o.message,c.stringifyOptions)]:(o=new Error,l=[Ts2("Uncaught (in promise)",c.stringifyOptions),Ts2(s.reason,c.stringifyOptions)]);var d=ho.parse(o).map((n=>n.toString()));n({level:"error",trace:d,payload:l})};s.addEventListener("unhandledrejection",l22),f.push((()=>{s.removeEventListener("unhandledrejection",l22)}))}for(var m of c.level)f.push(f22(l,m));return()=>{f.forEach((n=>n()))};function f22(s,o){var l=this;return s[o]?function(s,d){try{if(!(d in s))return()=>{};var f=s[d],m=(d=>function(){for(var f=arguments.length,m=new Array(f),_=0;_<f;_++)m[_]=arguments[_];if(d.apply(l,m),!("assert"===o&&m[0]||p)){p=!0;try{var y=ho.parse(new Error).map((n=>n.toString())).splice(1),E=("assert"===o?m.slice(1):m).map((n=>Ts2(n,c.stringifyOptions)));++h<c.lengthThreshold?n({level:o,trace:y,payload:E}):h===c.lengthThreshold&&n({level:"warn",trace:[],payload:[Ts2("The number of log records reached the threshold.")]})}catch(s){d("rrweb logger error:",s,...m)}finally{p=!1}}})(f);return"function"==typeof m&&(m.prototype=m.prototype||{},Object.defineProperties(m,{__rrweb_original__:{enumerable:!1,value:f}})),s[d]=m,()=>{s[d]=f}}catch(_){return()=>{}}}(s,o):()=>{}}}var Bs2=n=>({name:"rrweb/console@1",observer:As2,options:n}),fo="undefined"!=typeof window?window:void 0,go="undefined"!=typeof globalThis?globalThis:fo,mo=Array.prototype.forEach,vo=null==go?void 0:go.navigator,_o=null==go?void 0:go.document;null==go||go.location,null==go||go.fetch,null!=go&&go.XMLHttpRequest&&"withCredentials"in new go.XMLHttpRequest&&go.XMLHttpRequest,null==go||go.AbortController,null==vo||vo.userAgent;var yo=null!=fo?fo:{},bo=Array.isArray,wo=Object.prototype,So=wo.hasOwnProperty,jo=wo.toString,zo=bo||function(n){return"[object Array]"===jo.call(n)},Hs2=n=>"function"==typeof n,Vs2=n=>n===Object(n)&&!zo(n),Js2=n=>void 0===n,Ys2=n=>"[object String]"==jo.call(n),Xs2=n=>null===n,Ks2=n=>Js2(n)||Xs2(n),Zs2=n=>"[object Number]"==jo.call(n),Qs2=n=>"[object Boolean]"===jo.call(n),to2=n=>n instanceof FormData;function eo2(n,s,o,l,c){return s>o&&(l.warn("min cannot be greater than max."),s=o),Zs2(n)?n>o?(l.warn(" cannot be  greater than max: "+o+". Using max value instead."),o):n<s?(l.warn(" cannot be less than min: "+s+". Using min value instead."),s):n:(l.warn(" must be a number. using max or fallback. max: "+o+", fallback: "+c),eo2(c||o,s,o,l))}class ro2{constructor(n){this.t={},this.i=n.i,this.o=eo2(n.bucketSize,0,100,n.h),this.u=eo2(n.refillRate,0,this.o,n.h),this.v=eo2(n.refillInterval,0,864e5,n.h)}m(n,s){var o=s-n.lastAccess,l=Math.floor(o/this.v);if(l>0){var c=l*this.u;n.tokens=Math.min(n.tokens+c,this.o),n.lastAccess=n.lastAccess+l*this.v}}consumeRateLimit(n){var s,o=Date.now(),l=String(n),c=this.t[l];return c?this.m(c,o):(c={tokens:this.o,lastAccess:o},this.t[l]=c),0===c.tokens||(c.tokens--,0===c.tokens&&(null==(s=this.i)||s.call(this,n)),0===c.tokens)}stop(){this.t={}}}var Go="1.292.0",so2=n=>{var s={S:function(s){if(fo&&yo.POSTHOG_DEBUG&&!Js2(fo.console)&&fo.console){for(var o=("__rrweb_original__"in fo.console[s]?fo.console[s].__rrweb_original__:fo.console[s]),l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];o(n,...c)}},info:function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];s.S("log",...o)},warn:function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];s.S("warn",...o)},error:function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];s.S("error",...o)},critical:function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];console.error(n,...o)},uninitializedWarning:n=>{s.error("You must initialize PostHog before calling "+n)},createLogger:s=>so2(n+" "+s)};return s},Yo=so2("[PostHog.js]"),Jo=Yo.createLogger,Xo={};function uo2(n,s,o){if(!Ks2(n)){if(zo(n))return function(n,s,o){if(zo(n))if(mo&&n.forEach===mo)n.forEach(s,o);else if("length"in n&&n.length===+n.length)for(var l=0,c=n.length;l<c;l++)if(l in n&&s.call(o,n[l],l)===Xo)return}(n,s,o);if(to2(n)){for(var l of n.entries())if(s.call(o,l[1],l[0])===Xo)return}else for(var c in n)if(So.call(n,c)&&s.call(o,n[c],c)===Xo)return}}function lo2(n,s,o,l){var{capture:c=!1,passive:d=!0}={};null==n||n.addEventListener(s,o,{capture:c,passive:d})}var Ko=["localhost","127.0.0.1"],fo2=n=>{var s=null==_o?void 0:_o.createElement("a");return Js2(s)?null:(s.href=n,s)};function po2(n,s,o){try{if(!(s in n))return()=>{};var l=n[s],c=o(l);return Hs2(c)&&(c.prototype=c.prototype||{},Object.defineProperties(c,{__posthog_wrapped__:{enumerable:!1,value:!0}})),n[s]=c,()=>{n[s]=l}}catch(d){return()=>{}}}function mo2(n,s){var o,l=function(n){try{return"string"==typeof n?new URL(n).hostname:"url"in n?new URL(n.url).hostname:n.hostname}catch(s){return null}}(n),c={hostname:l,isHostDenied:!1};if(null==(o=s.payloadHostDenyList)||!o.length||null==l||!l.trim().length)return c;for(var d of s.payloadHostDenyList)if(l.endsWith(d))return{hostname:l,isHostDenied:!0};return c}var Qo="$session_is_sampled",ea="$session_past_minimum_duration",ta="$session_recording_url_trigger_activated_session",ra="$session_recording_event_trigger_activated_session",na=new RegExp("(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})"),ia=new RegExp("(\\d{3}-?\\d{2}-?\\d{4})"),ha="[SessionRecording]",ma="redacted",ya={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:n=>n,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},ba=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],wa=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Sa=["/s/","/e/","/i/"];function Oo2(n,s,o,l){if(Ks2(n))return n;var c=(null==s?void 0:s["content-length"])||new Blob([n]).size;return Ys2(c)&&(c=parseInt(c)),c>o?ha+" "+l+" body too large to record ("+c+" bytes)":n}function To2(n,s){if(Ks2(n))return n;var o=n;return function(n){if(Ks2(n))return!1;if(Ys2(n)){if(n=function(n){return n.trim()}(n),na.test((n||"").replace(/[- ]/g,"")))return!1;if(ia.test(n))return!1}return!0}(o)||(o=ha+" "+s+" body "+ma),uo2(wa,(n=>{var l,c;null!=(l=o)&&l.length&&-1!==(null==(c=o)?void 0:c.indexOf(n))&&(o=ha+" "+s+" body "+ma+" as might contain: "+n)})),o}var Ca=Jo("[Recorder]"),Bo2=n=>"navigation"===n.entryType,Lo2=n=>"resource"===n.entryType;function No2(n,s){return!!s&&(Qs2(s)||s[n])}function jo2(n){var{type:s,recordBody:o,headers:l,url:c}=n;function s22(n){var s=Object.keys(l).find((n=>"content-type"===n.toLowerCase())),o=s&&l[s];return n.some((n=>null==o?void 0:o.includes(n)))}if(!o)return!1;if(function t3(n){try{return"string"==typeof n?n.startsWith("blob:"):n instanceof URL?"blob:"===n.protocol:n instanceof Request&&t3(n.url)}catch(s){return!1}}(c))return!1;if(Qs2(o))return!0;if(zo(o))return s22(o);var d=o[s];return Qs2(d)?d:s22(d)}function Do2(n,s,o,l,c,d){return Uo2.apply(this,arguments)}function Uo2(){return Uo2=e2((function*(n,s,o,l,c,d){return void 0===d&&(d=0),d>10?(Ca.warn("Failed to get performance entry for request",{url:o,initiatorType:s}),null):function(n,s){for(var o=n.length-1;o>=0;o-=1)if(s(n[o]))return n[o]}(n.performance.getEntriesByName(o),(n=>Lo2(n)&&n.initiatorType===s&&(Js2(l)||n.startTime>=l)&&(Js2(c)||n.startTime<=c)))||(yield new Promise((n=>setTimeout(n,50*d))),Do2(n,s,o,l,c,d+1))})),Uo2.apply(this,arguments)}function Po2(n){var{body:s,options:o,url:l}=n;if(Ks2(s))return null;var{hostname:c,isHostDenied:d}=mo2(l,o);if(d)return c+" is in deny list";if(Ys2(s))return s;if((n=>n instanceof Document)(s))return s.textContent;if(to2(s))return function(n,s){var o,l;void 0===s&&(s="&");var c=[];return uo2(n,(function(n,s){Js2(n)||Js2(s)||"undefined"===s||(o=encodeURIComponent(n instanceof File?n.name:n.toString()),l=encodeURIComponent(s),c[c.length]=l+"="+o)})),c.join(s)}(s);if(Vs2(s))try{return JSON.stringify(s)}catch(h){return"[SessionReplay] Failed to stringify response object"}return"[SessionReplay] Cannot read body of type "+toString.call(s)}var $o2=n=>!Xs2(n)&&("navigation"===n.entryType||"resource"===n.entryType);function Wo2(n){var{entry:s,method:o,status:l,networkRequest:c,isInitial:d,start:h,end:p,url:f,initiatorType:m}=n;h=s?s.startTime:h,p=s?s.responseEnd:p;var _=Math.floor(Date.now()-performance.now()),y=Math.floor(_+(h||0)),E=[r2({},s?s.toJSON():{name:f},{startTime:Js2(h)?void 0:Math.round(h),endTime:Js2(p)?void 0:Math.round(p),timeOrigin:_,timestamp:y,method:o,initiatorType:m||(s?s.initiatorType:void 0),status:l,requestHeaders:c.requestHeaders,requestBody:c.requestBody,responseHeaders:c.responseHeaders,responseBody:c.responseBody,isInitial:d})];if($o2(s))for(var M of s.serverTiming||[])E.push({timeOrigin:_,timestamp:y,startTime:Math.round(s.startTime),name:M.name,duration:M.duration,entryType:"serverTiming"});return E}var ka=["video/","audio/"];function zo2(n){return new Promise(((s,o)=>{var l=setTimeout((()=>s("[SessionReplay] Timeout while trying to read body")),500);try{n.clone().text().then((n=>s(n)),(n=>o(n))).finally((()=>clearTimeout(l)))}catch(c){clearTimeout(l),s("[SessionReplay] Failed to read body")}}))}function Go2(){return(Go2=e2((function*(n){var{r:s,options:o,url:l}=n,{hostname:c,isHostDenied:d}=mo2(l,o);return d?Promise.resolve(c+" is in deny list"):zo2(s)}))).apply(this,arguments)}function Ho2(){return(Ho2=e2((function*(n){var{r:s,options:o,url:l}=n,c=function(n){var s,{r:o,options:l,url:c}=n;if("chunked"===o.headers.get("Transfer-Encoding"))return"Chunked Transfer-Encoding is not supported";var d=null==(s=o.headers.get("Content-Type"))?void 0:s.toLowerCase(),h=ka.some((n=>null==d?void 0:d.startsWith(n)));if(d&&h)return"Content-Type "+d+" is not supported";var{hostname:p,isHostDenied:f}=mo2(c,l);return f?p+" is in deny list":null}({r:s,options:o,url:l});return Xs2(c)?zo2(s):Promise.resolve(c)}))).apply(this,arguments)}var xa=null;function Yo2(n,s,o){if(!("performance"in s))return()=>{};if(xa)return Ca.warn("Network observer already initialised, doing nothing"),()=>{};var l=o?Object.assign({},ya,o):ya,s22=s=>{var o=[];s.requests.forEach((n=>{var s=l.maskRequestFn(n);s&&o.push(s)})),o.length>0&&n(r2({},s,{requests:o}))},c=function(n,s,o){if(o.recordInitialRequests){var l=s.performance.getEntries().filter((n=>Bo2(n)||Lo2(n)&&o.initiatorTypes.includes(n.initiatorType)));n({requests:l.flatMap((n=>Wo2({entry:n,method:void 0,status:void 0,networkRequest:{},isInitial:!0}))),isInitial:!0})}var c=new s.PerformanceObserver((s=>{var l=s.getEntries().filter((n=>{return Bo2(n)||Lo2(n)&&o.initiatorTypes.includes(n.initiatorType)&&(s=n,!o.recordBody&&!o.recordHeaders||"xmlhttprequest"!==s.initiatorType&&"fetch"!==s.initiatorType);var s}));n({requests:l.flatMap((n=>Wo2({entry:n,method:void 0,status:void 0,networkRequest:{}})))})})),d=PerformanceObserver.supportedEntryTypes.filter((n=>o.performanceEntryTypeToObserve.includes(n)));return c.observe({entryTypes:d}),()=>{c.disconnect()}}(s22,s,l),a22=()=>{},h22=()=>{};return(l.recordHeaders||l.recordBody)&&(a22=function(n,s,o){if(!o.initiatorTypes.includes("xmlhttprequest"))return()=>{};var l=No2("request",o.recordHeaders),c=No2("response",o.recordHeaders),d=po2(s.XMLHttpRequest.prototype,"open",(d=>function(h,p,f,m,_){void 0===f&&(f=!0);var y,E,M=this,P=new Request(p),L={},N={},F=M.setRequestHeader.bind(M);M.setRequestHeader=(n,s)=>(N[n]=s,F(n,s)),l&&(L.requestHeaders=N);var D=M.send.bind(M);M.send=n=>(jo2({type:"request",headers:N,url:p,recordBody:o.recordBody})&&(L.requestBody=Po2({body:n,options:o,url:p})),y=s.performance.now(),D(n));var y22=()=>{if(M.readyState===M.DONE){M.removeEventListener("readystatechange",y22),E=s.performance.now();var l={};M.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((n=>{var s=n.split(": "),o=s.shift(),c=s.join(": ");o&&(l[o]=c)})),c&&(L.responseHeaders=l),jo2({type:"response",headers:l,url:p,recordBody:o.recordBody})&&(L.responseBody=Po2({body:M.response,options:o,url:p})),Do2(s,"xmlhttprequest",P.url,y,E).then((s=>{var o=Wo2({entry:s,method:h,status:null==M?void 0:M.status,networkRequest:L,start:y,end:E,url:p.toString(),initiatorType:"xmlhttprequest"});n({requests:o})})).catch((()=>{}))}};M.addEventListener("readystatechange",y22),d.call(M,h,p.toString(),f,m,_)}));return()=>{d()}}(s22,s,l),h22=function(n,s,o){if(!o.initiatorTypes.includes("fetch"))return()=>{};var l=No2("request",o.recordHeaders),c=No2("response",o.recordHeaders),d=po2(s,"fetch",(d=>{return h=e2((function*(h,p){var f,m,_,y=new Request(h,p),E={};try{var M={};y.headers.forEach(((n,s)=>{M[s]=n})),l&&(E.requestHeaders=M),jo2({type:"request",headers:M,url:h,recordBody:o.recordBody})&&(E.requestBody=yield function(n){return Go2.apply(this,arguments)}({r:y,options:o,url:h})),m=s.performance.now(),f=yield d(y),_=s.performance.now();var P={};return f.headers.forEach(((n,s)=>{P[s]=n})),c&&(E.responseHeaders=P),jo2({type:"response",headers:P,url:h,recordBody:o.recordBody})&&(E.responseBody=yield function(n){return Ho2.apply(this,arguments)}({r:f,options:o,url:h})),f}finally{Do2(s,"fetch",y.url,m,_).then((s=>{var o,l=Wo2({entry:s,method:y.method,status:null==(o=f)?void 0:o.status,networkRequest:E,start:m,end:_,url:y.url,initiatorType:"fetch"});n({requests:l})})).catch((()=>{}))}})),function(n,s){return h.apply(this,arguments)};var h}));return()=>{d()}}(s22,s,l)),xa=()=>{c(),a22(),h22()}}var Xo2=n=>({name:"rrweb/network@1",observer:Yo2,options:n}),Ia=function(n){return n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n}({}),Ea=function(n){return n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n}({}),Aa="disabled",Oa="sampled",Na="active",Da="buffering",Ha="paused",ja="trigger",za=ja+"_activated",Va=ja+"_pending",Ga=ja+"_"+Aa;function ha2(n,s){return s.some((s=>"regex"===s.matching&&new RegExp(s.url).test(n)))}class ua2{constructor(n){this.k=n}triggerStatus(n){var s=this.k.map((s=>s.triggerStatus(n)));return s.includes(za)?za:s.includes(Va)?Va:Ga}stop(){this.k.forEach((n=>n.stop()))}}class la2{constructor(n){this.k=n}triggerStatus(n){var s=new Set;for(var o of this.k)s.add(o.triggerStatus(n));switch(s.delete(Ga),s.size){case 0:return Ga;case 1:return Array.from(s)[0];default:return Va}}stop(){this.k.forEach((n=>n.stop()))}}class ca2{triggerStatus(){return Va}stop(){}}var fa2=n=>"sessionRecording"in n;class da2{constructor(n){this.C=[],this.I=[],this.urlBlocked=!1,this._instance=n}onConfig(n){var s,o;this.C=(fa2(n)?Vs2(n.sessionRecording)?null==(s=n.sessionRecording)?void 0:s.urlTriggers:[]:null==n?void 0:n.urlTriggers)||[],this.I=(fa2(n)?Vs2(n.sessionRecording)?null==(o=n.sessionRecording)?void 0:o.urlBlocklist:[]:null==n?void 0:n.urlBlocklist)||[]}onRemoteConfig(n){this.onConfig(n)}M(n){var s;return 0===this.C.length?Ga:(null==(s=this._instance)?void 0:s.get_property(ta))===n?za:Va}triggerStatus(n){var s=this.M(n),o=s===za?za:s===Va?Va:Ga;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:o}),o}checkUrlTriggerConditions(n,s,o){if(void 0!==fo&&fo.location.href){var l=fo.location.href,c=this.urlBlocked,d=ha2(l,this.I);c&&d||(d&&!c?n():!d&&c&&s(),ha2(l,this.C)&&o("url"))}}stop(){}}class va2{constructor(n){this.linkedFlag=null,this.linkedFlagSeen=!1,this.R=()=>{},this._instance=n}triggerStatus(){var n=Va;return Ks2(this.linkedFlag)&&(n=Ga),this.linkedFlagSeen&&(n=za),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:n}),n}onConfig(n,s){var o;if(this.linkedFlag=(fa2(n)?Vs2(n.sessionRecording)?null==(o=n.sessionRecording)?void 0:o.linkedFlag:null:null==n?void 0:n.linkedFlag)||null,!Ks2(this.linkedFlag)&&!this.linkedFlagSeen){var l=Ys2(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,c=Ys2(this.linkedFlag)?null:this.linkedFlag.variant;this.R=this._instance.onFeatureFlags(((n,o)=>{var d=!1;if(Vs2(o)&&l in o){var h=o[l];d=Qs2(h)?!0===h:c?h===c:!!h}this.linkedFlagSeen=d,d&&s(l,c)}))}}onRemoteConfig(n,s){this.onConfig(n,s)}stop(){this.R()}}class pa2{constructor(n){this.O=[],this._instance=n}onConfig(n){var s;this.O=(fa2(n)?Vs2(n.sessionRecording)?null==(s=n.sessionRecording)?void 0:s.eventTriggers:[]:null==n?void 0:n.eventTriggers)||[]}onRemoteConfig(n){this.onConfig(n)}T(n){var s;return 0===this.O.length?Ga:(null==(s=this._instance)?void 0:s.get_property(ra))===n?za:Va}triggerStatus(n){var s=this.T(n),o=s===za?za:s===Va?Va:Ga;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:o}),o}stop(){}}function ma2(n){return n.isRecordingEnabled?Da:Aa}function ga2(n){if(!n.receivedFlags)return Da;if(!n.isRecordingEnabled)return Aa;if(n.urlTriggerMatching.urlBlocked)return Ha;var s=!0===n.isSampled,o=new ua2([n.eventTriggerMatching,n.urlTriggerMatching,n.linkedFlagMatching]).triggerStatus(n.sessionId);return s?Oa:o===za?Na:o===Va?Da:!1===n.isSampled?Aa:Na}function wa2(n){if(!n.receivedFlags)return Da;if(!n.isRecordingEnabled)return Aa;if(n.urlTriggerMatching.urlBlocked)return Ha;var s=new la2([n.eventTriggerMatching,n.urlTriggerMatching,n.linkedFlagMatching]).triggerStatus(n.sessionId),o=s!==Ga,l=Qs2(n.isSampled);return o&&s===Va?Da:o&&s===Ga||l&&!n.isSampled?Aa:!0===n.isSampled?Oa:Na}function ya2(n){var s,o;return(null==(s=JSON.stringify(n,(o=[],function(n,s){if(Vs2(s)){for(;o.length>0&&o[o.length-1]!==this;)o.pop();return o.includes(s)?"[Circular]":(o.push(s),s)}return s})))?void 0:s.length)||0}var Ya=Uint8Array,Ja=Uint16Array,Xa=Uint32Array,Ka=new Ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qa=new Ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),el=new Ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ra2=function(n,s){for(var o=new Ja(31),l=0;l<31;++l)o[l]=s+=1<<n[l-1];var c=new Xa(o[30]);for(l=1;l<30;++l)for(var d=o[l];d<o[l+1];++d)c[d]=d-o[l]<<5|l;return[o,c]},tl=Ra2(Ka,2),rl=tl[0],nl=tl[1];rl[28]=258,nl[258]=28;for(var il=Ra2(Qa,0)[1],sl=new Ja(32768),ol=0;ol<32768;++ol){var al=(43690&ol)>>>1|(21845&ol)<<1;al=(61680&(al=(52428&al)>>>2|(13107&al)<<2))>>>4|(3855&al)<<4,sl[ol]=((65280&al)>>>8|(255&al)<<8)>>>1}var La2=function(n,s,o){for(var l=n.length,c=0,d=new Ja(s);c<l;++c)++d[n[c]-1];var h,p=new Ja(s);for(c=0;c<s;++c)p[c]=p[c-1]+d[c-1]<<1;for(h=new Ja(l),c=0;c<l;++c)h[c]=sl[p[n[c]-1]++]>>>15-n[c];return h},ll=new Ya(288);for(ol=0;ol<144;++ol)ll[ol]=8;for(ol=144;ol<256;++ol)ll[ol]=9;for(ol=256;ol<280;++ol)ll[ol]=7;for(ol=280;ol<288;++ol)ll[ol]=8;var cl=new Ya(32);for(ol=0;ol<32;++ol)cl[ol]=5;var ul=La2(ll,9),dl=La2(cl,5),Ua2=function(n){return(n/8|0)+(7&n&&1)},Pa2=function(n,s,o){(null==o||o>n.length)&&(o=n.length);var l=new(n instanceof Ja?Ja:n instanceof Xa?Xa:Ya)(o-s);return l.set(n.subarray(s,o)),l},$a2=function(n,s,o){o<<=7&s;var l=s/8|0;n[l]|=o,n[l+1]|=o>>>8},Wa2=function(n,s,o){o<<=7&s;var l=s/8|0;n[l]|=o,n[l+1]|=o>>>8,n[l+2]|=o>>>16},qa2=function(n,s){for(var o=[],l=0;l<n.length;++l)n[l]&&o.push({s:l,f:n[l]});var c=o.length,d=o.slice();if(!c)return[new Ya(0),0];if(1==c){var h=new Ya(o[0].s+1);return h[o[0].s]=1,[h,1]}o.sort((function(n,s){return n.f-s.f})),o.push({s:-1,f:25001});var p=o[0],f=o[1],m=0,_=1,y=2;for(o[0]={s:-1,f:p.f+f.f,l:p,r:f};_!=c-1;)p=o[o[m].f<o[y].f?m++:y++],f=o[m!=_&&o[m].f<o[y].f?m++:y++],o[_++]={s:-1,f:p.f+f.f,l:p,r:f};var E=d[0].s;for(l=1;l<c;++l)d[l].s>E&&(E=d[l].s);var M=new Ja(E+1),P=za2(o[_-1],M,0);if(P>s){l=0;var L=0,N=P-s,F=1<<N;for(d.sort((function(n,s){return M[s.s]-M[n.s]||n.f-s.f}));l<c;++l){var D=d[l].s;if(!(M[D]>s))break;L+=F-(1<<P-M[D]),M[D]=s}for(L>>>=N;L>0;){var B=d[l].s;M[B]<s?L-=1<<s-M[B]++-1:++l}for(;l>=0&&L;--l){var $=d[l].s;M[$]==s&&(--M[$],++L)}P=s}return[new Ya(M),P]},za2=function(n,s,o){return-1==n.s?Math.max(za2(n.l,s,o+1),za2(n.r,s,o+1)):s[n.s]=o},Ga2=function(n){for(var s=n.length;s&&!n[--s];);for(var o=new Ja(++s),l=0,c=n[0],d=1,o22=function(n){o[l++]=n},h=1;h<=s;++h)if(n[h]==c&&h!=s)++d;else{if(!c&&d>2){for(;d>138;d-=138)o22(32754);d>2&&(o22(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(o22(c),--d;d>6;d-=6)o22(8304);d>2&&(o22(d-3<<5|8208),d=0)}for(;d--;)o22(c);d=1,c=n[h]}return[o.subarray(0,l),s]},Ha2=function(n,s){for(var o=0,l=0;l<s.length;++l)o+=n[l]*s[l];return o},Va2=function(n,s,o){var l=o.length,c=Ua2(s+2);n[c]=255&l,n[c+1]=l>>>8,n[c+2]=255^n[c],n[c+3]=255^n[c+1];for(var d=0;d<l;++d)n[c+d+4]=o[d];return 8*(c+4+l)},Ja2=function(n,s,o,l,c,d,h,p,f,m,_){$a2(s,_++,o),++c[256];for(var y=qa2(c,15),E=y[0],M=y[1],P=qa2(d,15),L=P[0],N=P[1],F=Ga2(E),D=F[0],B=F[1],$=Ga2(L),U=$[0],H=$[1],z=new Ja(19),q=0;q<D.length;++q)z[31&D[q]]++;for(q=0;q<U.length;++q)z[31&U[q]]++;for(var V=qa2(z,7),Z=V[0],ee=V[1],ne=19;ne>4&&!Z[el[ne-1]];--ne);var ie,se,oe,le,ce=m+5<<3,pe=Ha2(c,ll)+Ha2(d,cl)+h,fe=Ha2(c,E)+Ha2(d,L)+h+14+3*ne+Ha2(z,Z)+(2*z[16]+3*z[17]+7*z[18]);if(ce<=pe&&ce<=fe)return Va2(s,_,n.subarray(f,f+m));if($a2(s,_,1+(fe<pe)),_+=2,fe<pe){ie=La2(E,M),se=E,oe=La2(L,N),le=L;var ge=La2(Z,ee);for($a2(s,_,B-257),$a2(s,_+5,H-1),$a2(s,_+10,ne-4),_+=14,q=0;q<ne;++q)$a2(s,_+3*q,Z[el[q]]);_+=3*ne;for(var be=[D,U],Oe=0;Oe<2;++Oe){var Ne=be[Oe];for(q=0;q<Ne.length;++q){var Fe=31&Ne[q];$a2(s,_,ge[Fe]),_+=Z[Fe],Fe>15&&($a2(s,_,Ne[q]>>>5&127),_+=Ne[q]>>>12)}}}else ie=ul,se=ll,oe=dl,le=cl;for(q=0;q<p;++q)if(l[q]>255){Fe=l[q]>>>18&31,Wa2(s,_,ie[Fe+257]),_+=se[Fe+257],Fe>7&&($a2(s,_,l[q]>>>23&31),_+=Ka[Fe]);var De=31&l[q];Wa2(s,_,oe[De]),_+=le[De],De>3&&(Wa2(s,_,l[q]>>>5&8191),_+=Qa[De])}else Wa2(s,_,ie[l[q]]),_+=se[l[q]];return Wa2(s,_,ie[256]),_+se[256]},hl=new Xa([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pl=function(){for(var n=new Xa(256),s=0;s<256;++s){for(var o=s,l=9;--l;)o=(1&o&&3988292384)^o>>>1;n[s]=o}return n}(),Qa2=function(n,s,o){for(;o;++s)n[s]=o,o>>>=8};class rh2{constructor(n,s){var o,l;void 0===s&&(s={}),this.A={},this.B=n=>{if(!this.A[n]){var s,o;this.A[n]=!0;var l=this.L(n);null==(s=(o=this.F).onBlockedNode)||s.call(o,n,l)}},this.N=n=>{var s=this.L(n);if("svg"!==(null==s?void 0:s.nodeName)&&s instanceof Element){var o=s.closest("svg");if(o)return[this._rrweb.mirror.getId(o),o]}return[n,s]},this.L=n=>this._rrweb.mirror.getNode(n),this.j=n=>{var s,o,l,c,d,h,p,f;return(null!==(s=null==(o=n.removes)?void 0:o.length)&&void 0!==s?s:0)+(null!==(l=null==(c=n.attributes)?void 0:c.length)&&void 0!==l?l:0)+(null!==(d=null==(h=n.texts)?void 0:h.length)&&void 0!==d?d:0)+(null!==(p=null==(f=n.adds)?void 0:f.length)&&void 0!==p?p:0)},this.throttleMutations=n=>{if(3!==n.type||0!==n.data.source)return n;var s=n.data,o=this.j(s);s.attributes&&(s.attributes=s.attributes.filter((n=>{var[s]=this.N(n.id);return!this.D.consumeRateLimit(s)&&n})));var l=this.j(s);return 0!==l||o===l?n:void 0},this._rrweb=n,this.F=s,this.D=new ro2({bucketSize:null!==(o=this.F.bucketSize)&&void 0!==o?o:100,refillRate:null!==(l=this.F.refillRate)&&void 0!==l?l:10,refillInterval:1e3,i:this.B,h:Yo})}reset(){this.A={}}stop(){this.D.stop(),this.reset()}}var fl="$sess_rec_flush_size";class sh2{constructor(n){if(!n.persistence)throw new Error("it is not valid to not have persistence and be this far into setting up the application");this.U=n.get_property.bind(n),this.P=n.persistence.set_property.bind(n.persistence)}trackSize(n){var s=(Number(this.U(fl))||0)+n;this.P(fl,s)}reset(){return this.P(fl,0)}get currentTrackedSize(){return Number(this.U(fl))||0}}var gl="[SessionRecording]",ml=Jo(gl),vl=[Ea.MouseMove,Ea.MouseInteraction,Ea.Scroll,Ea.ViewportResize,Ea.Input,Ea.TouchMove,Ea.MediaInteraction,Ea.Drag],lh2=n=>({rrwebMethod:n,enqueuedAt:Date.now(),attempt:1});function ch2(){var n;return null==yo||null==(n=yo.__PosthogExtensions__)||null==(n=n.rrweb)?void 0:n.record}function fh2(n){return function(n){for(var s="",o=0;o<n.length;){var l=n[o++];s+=String.fromCharCode(l)}return s}(function(n,s){void 0===s&&(s={});var o=function(){var n=4294967295;return{p:function(s){for(var o=n,l=0;l<s.length;++l)o=pl[255&o^s[l]]^o>>>8;n=o},d:function(){return 4294967295^n}}}(),l=n.length;o.p(n);var c=function(n,s,o,l){return function(n,s,o,l,c){var d=n.length,h=new Ya(l+d+5*(1+Math.floor(d/7e3))+c),p=h.subarray(l,h.length-c),f=0;if(!s||d<8)for(var m=0;m<=d;m+=65535){var _=m+65535;_<d?f=Va2(p,f,n.subarray(m,_)):(p[m]=!0,f=Va2(p,f,n.subarray(m,d)))}else{for(var y=hl[s-1],E=y>>>13,M=8191&y,P=(1<<o)-1,L=new Ja(32768),N=new Ja(P+1),F=Math.ceil(o/3),D=2*F,b22=function(s){return(n[s]^n[s+1]<<F^n[s+2]<<D)&P},B=new Xa(25e3),$=new Ja(288),U=new Ja(32),H=0,z=0,q=(m=0,0),V=0,Z=0;m<d;++m){var ee=b22(m),ne=32767&m,ie=N[ee];if(L[ne]=ie,N[ee]=ne,V<=m){var se=d-m;if((H>7e3||q>24576)&&se>423){f=Ja2(n,p,0,B,$,U,z,q,Z,m-Z,f),q=H=z=0,Z=m;for(var oe=0;oe<286;++oe)$[oe]=0;for(oe=0;oe<30;++oe)U[oe]=0}var le=2,ce=0,pe=M,fe=ne-ie&32767;if(se>2&&ee==b22(m-fe))for(var ge=Math.min(E,se)-1,be=Math.min(32767,m),Oe=Math.min(258,se);fe<=be&&--pe&&ne!=ie;){if(n[m+le]==n[m+le-fe]){for(var Ne=0;Ne<Oe&&n[m+Ne]==n[m+Ne-fe];++Ne);if(Ne>le){if(le=Ne,ce=fe,Ne>ge)break;var Fe=Math.min(fe,Ne-2),De=0;for(oe=0;oe<Fe;++oe){var Be=m-fe+oe+32768&32767,Ue=Be-L[Be]+32768&32767;Ue>De&&(De=Ue,ie=Be)}}}fe+=(ne=ie)-(ie=L[ne])+32768&32767}if(ce){B[q++]=268435456|nl[le]<<18|il[ce];var He=31&nl[le],qe=31&il[ce];z+=Ka[He]+Qa[qe],++$[257+He],++U[qe],V=m+le,++H}else B[q++]=n[m],++$[n[m]]}}f=Ja2(n,p,!0,B,$,U,z,q,Z,m-Z,f)}return Pa2(h,0,l+Ua2(f)+c)}(n,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+s.mem,o,l)}(n,s,function(n){return 10+(n.filename&&n.filename.length+1||0)}(s),8),d=c.length;return function(n,s){var o=s.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=s.level<2?4:9==s.level?2:0,n[9]=3,0!=s.mtime&&Qa2(n,4,Math.floor(new Date(s.mtime||Date.now())/1e3)),o){n[3]=8;for(var l=0;l<=o.length;++l)n[l+10]=o.charCodeAt(l)}}(c,s),Qa2(c,d-8,o.d()),Qa2(c,d-4,l),c}(function(n){var s=n.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(n);for(var o=new Ya(n.length+(n.length>>>1)),l=0,s22=function(n){o[l++]=n},c=0;c<s;++c){if(l+5>o.length){var d=new Ya(l+8+(s-c<<1));d.set(o),o=d}var h=n.charCodeAt(c);h<128?s22(h):h<2048?(s22(192|h>>>6),s22(128|63&h)):h>55295&&h<57344?(s22(240|(h=65536+(1047552&h)|1023&n.charCodeAt(++c))>>>18),s22(128|h>>>12&63),s22(128|h>>>6&63),s22(128|63&h)):(s22(224|h>>>12),s22(128|h>>>6&63),s22(128|63&h))}return Pa2(o,0,l)}(JSON.stringify(n))))}function dh2(n,s){return n.type===Ia.Custom&&n.data.tag===s}function vh2(n){return dh2(n,"sessionIdle")}function ph2(n){return dh2(n,"$session_ending")}function mh2(n){return dh2(n,"$session_starting")}function gh2(n,s){if(void 0===s&&(s=6606028.8),n.size>=s&&n.data.length>1){var o=Math.floor(n.data.length/2),l=n.data.slice(0,o),c=n.data.slice(o);return[gh2({size:ya2(l),data:l,sessionId:n.sessionId,windowId:n.windowId}),gh2({size:ya2(c),data:c,sessionId:n.sessionId,windowId:n.windowId})].flatMap((n=>n))}return[n]}class wh2{get sessionId(){return this.$}get W(){if(!this._instance.sessionManager)throw new Error(gl+" must be started with a valid sessionManager.");return this._instance.sessionManager}get q(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get G(){var n=this._instance.get_property(Qo);return Qs2(n)?n:Ys2(n)?n===this.sessionId:null}get H(){var n,s=null==(n=this.V)?void 0:n.sampleRate;return Zs2(s)?s:null}get J(){var n,s=null==(n=this.V)?void 0:n.minimumDurationMilliseconds;return Zs2(s)?s:null}constructor(n){this.Y="/s/",this._forceAllowLocalhostNetworkCapture=!1,this.X=void 0,this.K=Date.now(),this.Z=[],this.tt="unknown",this.et=new ca2,this.rt=void 0,this.it=void 0,this.nt=ma2,this.st=void 0,this.ot=void 0,this.ht=void 0,this.ut=void 0,this.lt=(n,s,o)=>{if(o){var l,c,d,h=!o.noSessionId&&(o.activityTimeout||o.sessionPastMaximumLength);h&&(l=this.$,c=this.ct,this.ft("$session_ending",{nextSessionId:n,nextWindowId:s,changeReason:o,lastActivityTimestamp:this.K,flushed_size:null==(d=this.dt)?void 0:d.currentTrackedSize})),this.dt&&this.dt.reset(),this.ft("$session_id_change",{sessionId:n,windowId:s,changeReason:o}),this.vt(),this.X||this.start("session_id_changed"),h&&this.ft("$session_starting",{previousSessionId:l,previousWindowId:c,changeReason:o,lastActivityTimestamp:this.K}),Zs2(this.H)&&Ks2(this.ht)&&this.gt(n)}},this.wt=()=>{var n;return(null==(n=this._instance.persistence)?void 0:n.props[ea])===this.$},this.yt=()=>{var n,s;if(0===this.bt.data.length)return null;var o=null==(n=this.bt.data[0])?void 0:n.timestamp,l=null==(s=this.bt.data[this.bt.data.length-1])?void 0:s.timestamp;return Zs2(o)&&Zs2(l)?l-o:null},this.St=()=>{var n,s,o=this.J;if(!Zs2(o))return!1;if(null===(n=null==(s=this._instance.config.session_recording)?void 0:s.strictMinimumDuration)||void 0===n||!n){var l=this.kt;return Zs2(l)&&l>=0&&l<o}if(this.wt())return!1;var c,d=this.yt();return!(!Xs2(d)&&d>=o&&(null==(c=this._instance.persistence)||c.register({[ea]:this.$}),1))},this.Ct=()=>{this.It()},this.Mt=()=>{this.ft("browser offline",{})},this.Rt=()=>{this.ft("browser online",{})},this.xt=()=>{if(null!=_o&&_o.visibilityState){var n="window "+_o.visibilityState;this.ft(n,{})}},this._instance=n;var{sessionId:s,windowId:o}=this.W.checkAndGetSessionAndWindowId();this.$=s,this.ct=o,this._t=new va2(this._instance),this.Ot=new da2(this._instance),this.Tt=new pa2(this._instance),this.bt=this.Et(),this.q>=this.W.sessionTimeoutMs&&ml.warn("session_idle_threshold_ms ("+this.q+") is greater than the session timeout ("+this.W.sessionTimeoutMs+"). Session will never be detected as idle"),this.dt=new sh2(this._instance)}get At(){var n,s,o,l,c,d,h,p=null==(n=this.V)?void 0:n.masking,f={maskAllInputs:null==(s=this._instance.config.session_recording)?void 0:s.maskAllInputs,maskTextSelector:null==(o=this._instance.config.session_recording)?void 0:o.maskTextSelector,blockSelector:null==(l=this._instance.config.session_recording)?void 0:l.blockSelector},m=null!==(c=null==f?void 0:f.maskAllInputs)&&void 0!==c?c:null==p?void 0:p.maskAllInputs,_=null!==(d=null==f?void 0:f.maskTextSelector)&&void 0!==d?d:null==p?void 0:p.maskTextSelector,y=null!==(h=null==f?void 0:f.blockSelector)&&void 0!==h?h:null==p?void 0:p.blockSelector;return Js2(m)&&Js2(_)&&Js2(y)?void 0:{maskAllInputs:null==m||m,maskTextSelector:_,blockSelector:y}}get Bt(){var n,s,o,l,c,d,h,p=this._instance.config.session_recording.captureCanvas,f=null==(n=this.V)?void 0:n.canvasRecording,m=null!==(s=null!==(o=null==p?void 0:p.recordCanvas)&&void 0!==o?o:null==f?void 0:f.enabled)&&void 0!==s&&s,_=null!==(l=null!==(c=null==p?void 0:p.canvasFps)&&void 0!==c?c:null==f?void 0:f.fps)&&void 0!==l?l:4,y=null!==(d=null!==(h=null==p?void 0:p.canvasQuality)&&void 0!==h?h:null==f?void 0:f.quality)&&void 0!==d?d:.4;if("string"==typeof y){var E=parseFloat(y);y=isNaN(E)?.4:E}return{enabled:m,fps:eo2(_,0,12,Jo("canvas recording fps"),4),quality:eo2(y,0,1,Jo("canvas recording quality"),.4)}}get Lt(){var n,s=!(null==(n=this.V)||!n.consoleLogRecordingEnabled),o=this._instance.config.enable_recording_console_log;return null!=o?o:s}get Ft(){var n,s,o,l=null==(n=this.V)?void 0:n.networkPayloadCapture,c={recordHeaders:null==(s=this._instance.config.session_recording)?void 0:s.recordHeaders,recordBody:null==(o=this._instance.config.session_recording)?void 0:o.recordBody},d=(null==c?void 0:c.recordHeaders)||(null==l?void 0:l.recordHeaders),h=(null==c?void 0:c.recordBody)||(null==l?void 0:l.recordBody),p=Vs2(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,f=!!(Qs2(p)?p:null==l?void 0:l.capturePerformance);return d||h||f?{recordHeaders:d,recordBody:h,recordPerformance:f}:void 0}Nt(){var n,s,o=[],l=null==(n=yo.__PosthogExtensions__)||null==(n=n.rrwebPlugins)?void 0:n.getRecordConsolePlugin;l&&this.Lt&&o.push(l());var c=null==(s=yo.__PosthogExtensions__)||null==(s=s.rrwebPlugins)?void 0:s.getRecordNetworkPlugin;return this.Ft&&Hs2(c)&&(!Ko.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?o.push(c(((n,s)=>{var o,l,c,d={payloadSizeLimitBytes:ya.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...ya.performanceEntryTypeToObserve],payloadHostDenyList:[...s.payloadHostDenyList||[],...ya.payloadHostDenyList]},h=!1!==n.session_recording.recordHeaders&&s.recordHeaders,p=!1!==n.session_recording.recordBody&&s.recordBody,f=!1!==n.capture_performance&&s.recordPerformance,m=(o=d,c=Math.min(1e6,null!==(l=o.payloadSizeLimitBytes)&&void 0!==l?l:1e6),n=>(null!=n&&n.requestBody&&(n.requestBody=Oo2(n.requestBody,n.requestHeaders,c,"Request")),null!=n&&n.responseBody&&(n.responseBody=Oo2(n.responseBody,n.responseHeaders,c,"Response")),n)),c22=s=>{return m(((n,s)=>{var o,l=fo2(n.name),c=0===s.indexOf("http")?null==(o=fo2(s))?void 0:o.pathname:s;"/"===c&&(c="");var d=null==l?void 0:l.pathname.replace(c||"","");if(!(l&&d&&Sa.some((n=>0===d.indexOf(n)))))return n})((l=(o=s).requestHeaders,Ks2(l)||uo2(Object.keys(null!=l?l:{}),(n=>{ba.includes(n.toLowerCase())&&(l[n]=ma)})),o),n.api_host));var o,l},_=Hs2(n.session_recording.maskNetworkRequestFn);return _&&Hs2(n.session_recording.maskCapturedNetworkRequestFn)&&Yo.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),_&&(n.session_recording.maskCapturedNetworkRequestFn=s=>{var o=n.session_recording.maskNetworkRequestFn({url:s.name});return r2({},s,{name:null==o?void 0:o.url})}),d.maskRequestFn=Hs2(n.session_recording.maskCapturedNetworkRequestFn)?s=>{var o,l=c22(s);return l&&null!==(o=null==n.session_recording.maskCapturedNetworkRequestFn?void 0:n.session_recording.maskCapturedNetworkRequestFn(l))&&void 0!==o?o:void 0}:n=>function(n){if(!Js2(n))return n.requestBody=To2(n.requestBody,"Request"),n.responseBody=To2(n.responseBody,"Response"),n}(c22(n)),r2({},ya,d,{recordHeaders:h,recordBody:p,recordPerformance:f,recordInitialRequests:f})})(this._instance.config,this.Ft))):ml.info("NetworkCapture not started because we are on localhost.")),o}jt(n){var s=this._instance.config.session_recording;if(s.maskNetworkRequestFn){var o,l={url:n};return null==(o=l=s.maskNetworkRequestFn(l))?void 0:o.url}return n}Dt(n){try{return n.rrwebMethod(),!0}catch(s){return this.Z.length<10?this.Z.push({enqueuedAt:n.enqueuedAt||Date.now(),attempt:n.attempt+1,rrwebMethod:n.rrwebMethod}):ml.warn("could not emit queued rrweb event.",s,n),!1}}ft(n,s){return this.Dt(lh2((()=>ch2().addCustomEvent(n,s))))}Ut(){try{if(this._instance.config.capture_pageview||!fo)return;var n=new URL(fo.location.href),s=n.origin+n.pathname+n.search,o=this.jt(s);this.Pt!==o&&(this.Pt=o,this.ft("$url_changed",{href:o}))}catch(l){}}$t(){if(this.Z.length){var n=[...this.Z];this.Z=[],n.forEach((n=>{Date.now()-n.enqueuedAt<=2e3&&this.Dt(n)}))}}Wt(){return this.Dt(lh2((()=>ch2().takeFullSnapshot())))}get qt(){var n,s;return this.et.triggerStatus(this.sessionId)!==Va||["sampled","active"].includes(this.status)?null!==(n=null==(s=this._instance.config.session_recording)?void 0:s.full_snapshot_interval_millis)&&void 0!==n?n:3e5:6e4}zt(){if(this.Gt&&clearInterval(this.Gt),!0!==this.tt){var n=this.qt;n&&(this.Gt=setInterval((()=>{this.Wt()}),n))}}Ht(){this.Ot.urlBlocked||(this.Ot.urlBlocked=!0,clearInterval(this.Gt),ml.info("recording paused due to URL blocker"),this.ft("recording paused",{reason:"url blocker"}))}Vt(){this.Ot.urlBlocked&&(this.Ot.urlBlocked=!1,this.Wt(),this.zt(),this.ft("recording resumed",{reason:"left blocked url"}),ml.info("recording resumed"))}Jt(n){var s;this.et.triggerStatus(this.sessionId)===Va&&(null==(s=this._instance)||null==(s=s.persistence)||s.register({["url"===n?ta:ra]:this.$}),this.It(),this.Yt(n+"_trigger_matched"))}get isStarted(){return!!this.X}get V(){var n=this._instance.get_property("$session_recording_remote_config");if(n)return Vs2(n)?n:JSON.parse(n)}Xt(n,s){var o;this._instance.get_property(n)&&(s(),null==(o=this._instance.persistence)||o.unregister(n))}start(n){var s,o=this.V;if(o){var{sessionId:l,windowId:c}=this.W.checkAndGetSessionAndWindowId();this.$=l,this.ct=c,null!=o&&o.endpoint&&(this.Y=null==o?void 0:o.endpoint),"any"===(null==o?void 0:o.triggerMatchType)?(this.nt=ga2,this.et=new ua2([this.Tt,this.Ot])):(this.nt=wa2,this.et=new la2([this.Tt,this.Ot])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:null==o?void 0:o.triggerMatchType}),this.Ot.onConfig(o),this.Tt.onConfig(o),null==(s=this.it)||s.call(this),this.Kt(),this._t.onConfig(o,((n,s)=>{this.Yt("linked_flag_matched",{flag:n,variant:s})})),this.Xt("$replay_override_sampling",(()=>{this.overrideSampling()})),this.Xt("$replay_override_linked_flag",(()=>{this.overrideLinkedFlag()})),this.Xt("$replay_override_event_trigger",(()=>{this.overrideTrigger("event")})),this.Xt("$replay_override_url_trigger",(()=>{this.overrideTrigger("url")})),this.gt(this.sessionId),this.Zt(),lo2(fo,"beforeunload",this.Ct),lo2(fo,"offline",this.Mt),lo2(fo,"online",this.Rt),lo2(fo,"visibilitychange",this.xt),this.st||(this.st=this.W.onSessionId(this.lt)),this.ot||(this.ot=this.W.on("forcedIdleReset",(()=>{this.vt(),this.tt="unknown",this.stop(),this.ut=this.W.onSessionId(((n,s,o)=>{var l;null==(l=this.ut)||l.call(this),this.ut=void 0,this.lt(n,s,o)}))}))),Ks2(this.rt)&&(this.rt=this._instance.on("eventCaptured",(n=>{try{if("$pageview"===n.event){var s=null!=n&&n.properties.$current_url?this.jt(null==n?void 0:n.properties.$current_url):"";if(!s)return;this.ft("$pageview",{href:s})}}catch(o){ml.error("Could not add $pageview to rrweb session",o)}}))),this.status===Na&&this.Yt(n||"recording_initialized")}else ml.info("remote config must be stored in persistence before recording can start")}stop(){var n,s,o,l,c,d,h,p;null==fo||fo.removeEventListener("beforeunload",this.Ct),null==fo||fo.removeEventListener("offline",this.Mt),null==fo||fo.removeEventListener("online",this.Rt),null==fo||fo.removeEventListener("visibilitychange",this.xt),this.It(),this.Et(),clearInterval(this.Gt),this.Qt(),null==(n=this.rt)||n.call(this),this.rt=void 0,null==(s=this.it)||s.call(this),this.it=void 0,null==(o=this.st)||o.call(this),this.st=void 0,null==(l=this.ot)||l.call(this),this.ot=void 0,null==(c=this.ht)||c.call(this),this.ht=void 0,null==(d=this.ut)||d.call(this),this.ut=void 0,this.Tt.stop(),this.Ot.stop(),this._t.stop(),null==(h=this.te)||h.stop(),this.Z=[],null==(p=this.X)||p.call(this),this.X=void 0,ml.info("stopped")}onRRwebEmit(n){var s,o;if(this.$t(),n&&Vs2(n)){if(n.type===Ia.Meta){var l=this.jt(n.data.href);if(this.Pt=l,!l)return;n.data.href=l}else this.Ut();if(this.Ot.checkUrlTriggerConditions((()=>this.Ht()),(()=>this.Vt()),(n=>this.Jt(n))),!this.Ot.urlBlocked||(c=n).type===Ia.Custom&&"recording paused"===c.data.tag){var c,d;n.type===Ia.FullSnapshot&&(this.zt(),null==(d=this.te)||d.reset()),n.type===Ia.FullSnapshot&&this.et.triggerStatus(this.sessionId)===Va&&this.ee();var h=this.te?this.te.throttleMutations(n):n;if(h){var p=function(n){var s=n;if(s&&Vs2(s)&&6===s.type&&Vs2(s.data)&&"rrweb/console@1"===s.data.plugin){s.data.payload.payload.length>10&&(s.data.payload.payload=s.data.payload.payload.slice(0,10),s.data.payload.payload.push("...[truncated]"));for(var o=[],l=0;l<s.data.payload.payload.length;l++)s.data.payload.payload[l]&&s.data.payload.payload[l].length>2e3?o.push(s.data.payload.payload[l].slice(0,2e3)+"...[truncated]"):o.push(s.data.payload.payload[l]);return s.data.payload.payload=o,n}return n}(h);if(this.re(p),!0!==this.tt||(vh2(o=p)||ph2(o)||mh2(o))){if(vh2(p)){var f=p.data.payload;if(f){var m=f.lastActivityTimestamp,_=f.threshold;p.timestamp=m+_}}if(ph2(p)||mh2(p)){var y=p.data.payload;null!=y&&y.lastActivityTimestamp&&(p.timestamp=y.lastActivityTimestamp)}var E=null===(s=this._instance.config.session_recording.compress_events)||void 0===s||s?function(n){try{if(n.type===Ia.FullSnapshot)return r2({},n,{data:fh2(n.data),cv:"2024-10"});if(n.type===Ia.IncrementalSnapshot&&n.data.source===Ea.Mutation)return r2({},n,{cv:"2024-10",data:r2({},n.data,{texts:fh2(n.data.texts),attributes:fh2(n.data.attributes),removes:fh2(n.data.removes),adds:fh2(n.data.adds)})});if(n.type===Ia.IncrementalSnapshot&&n.data.source===Ea.StyleSheetRule)return r2({},n,{cv:"2024-10",data:r2({},n.data,{adds:n.data.adds?fh2(n.data.adds):void 0,removes:n.data.removes?fh2(n.data.removes):void 0})})}catch(s){ml.error("could not compress event - will use uncompressed event",s)}return n}(p):p,M={$snapshot_bytes:ya2(E),$snapshot_data:E,$session_id:this.$,$window_id:this.ct};this.status!==Aa?this.ie(M):this.Et()}}}}}get status(){return this.nt({receivedFlags:!0,isRecordingEnabled:!0,isSampled:this.G,urlTriggerMatching:this.Ot,eventTriggerMatching:this.Tt,linkedFlagMatching:this._t,sessionId:this.sessionId})}log(n,s){var o;void 0===s&&(s="log"),null==(o=this._instance.sessionRecording)||o.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:s,trace:[],payload:[JSON.stringify(n)]}},timestamp:Date.now()})}overrideLinkedFlag(){this._t.linkedFlagSeen=!0,this.Wt(),this.Yt("linked_flag_overridden")}overrideSampling(){var n;null==(n=this._instance.persistence)||n.register({[Qo]:this.sessionId}),this.Wt(),this.Yt("sampling_overridden")}overrideTrigger(n){this.Jt(n)}Qt(){this.ne&&(clearTimeout(this.ne),this.ne=void 0)}It(){this.Qt();var n=this.St();return this.status===Da||this.status===Ha||this.status===Aa||n?(this.ne=setTimeout((()=>{this.It()}),2e3),this.bt):(this.bt.data.length>0&&gh2(this.bt).forEach((n=>{var s;null==(s=this.dt)||s.trackSize(n.size),this.se({$snapshot_bytes:n.size,$snapshot_data:n.data,$session_id:n.sessionId,$window_id:n.windowId,$lib:"web",$lib_version:Go})})),this.Et())}ie(n){var s,o=2+((null==(s=this.bt)?void 0:s.data.length)||0);!this.tt&&(this.bt.size+n.$snapshot_bytes+o>943718.4||this.bt.sessionId!==this.$)&&(this.bt=this.It()),this.bt.size+=n.$snapshot_bytes,this.bt.data.push(n.$snapshot_data),this.ne||this.tt||(this.ne=setTimeout((()=>{this.It()}),2e3))}se(n){this._instance.capture("$snapshot",n,{_url:this._instance.requestRouter.endpointFor("api",this.Y),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}get kt(){var n,s,o=null==(n=this.bt)?void 0:n.data[(null==(s=this.bt)?void 0:s.data.length)-1],{sessionStartTimestamp:l}=this.W.checkAndGetSessionAndWindowId(!0);return o?o.timestamp-l:null}ee(){if(!this.bt||0===this.bt.data.length)return this.Et();for(var n=-1,s=this.bt.data.length-1;s>=0;s--)if(this.bt.data[s].type===Ia.Meta){n=s;break}return n>=0?(this.bt.data=this.bt.data.slice(n),this.bt.size=this.bt.data.reduce(((n,s)=>n+ya2(s)),0),this.bt):this.Et()}Et(){return this.bt={size:0,data:[],sessionId:this.$,windowId:this.ct},this.bt}Yt(n,s){this._instance.register_for_session({$session_recording_start_reason:n}),ml.info(n.replace("_"," "),s),-1===["recording_initialized","session_id_changed"].indexOf(n)&&this.ft(n,s)}oe(n){var s;return 3===n.type&&-1!==vl.indexOf(null==(s=n.data)?void 0:s.source)}re(n){var s=this.oe(n);s||this.tt||n.timestamp-this.K>this.q&&(this.tt=!0,clearInterval(this.Gt),this.ft("sessionIdle",{eventTimestamp:n.timestamp,lastActivityTimestamp:this.K,threshold:this.q,bufferLength:this.bt.data.length,bufferSize:this.bt.size}),this.It());var o=!1;if(s&&(this.K=n.timestamp,this.tt)){var l="unknown"===this.tt;this.tt=!1,l||(this.ft("sessionNoLongerIdle",{reason:"user activity",type:n.type}),o=!0)}if(!this.tt){var{windowId:c,sessionId:d}=this.W.checkAndGetSessionAndWindowId(!s,n.timestamp),h=this.$!==d,p=this.ct!==c;this.ct=c,this.$=d,h||p?(this.stop(),this.start("session_id_changed")):o&&this.zt()}}vt(){var n,s,o,l;null==(n=this._instance)||null==(n=n.persistence)||n.unregister(ra),null==(s=this._instance)||null==(s=s.persistence)||s.unregister(ta),null==(o=this._instance)||null==(o=o.persistence)||o.unregister(Qo),null==(l=this._instance)||null==(l=l.persistence)||l.unregister(ea)}gt(n){var s,o=this.$!==n,l=this.H;if(Zs2(l)){var c=this.G,d=o||!Qs2(c),h=d?function(n,s){return function(n){for(var s=0,o=0;o<n.length;o++)s=(s<<5)-s+n.charCodeAt(o),s|=0;return Math.abs(s)}(n)%100<eo2(100*s,0,100,Yo)}(n,l):c;d&&(h?this.Yt(Oa):ml.warn("Sample rate ("+l+") has determined that this sessionId ("+n+") will not be sent to the server."),this.ft("samplingDecisionMade",{sampleRate:l,isSampled:h})),null==(s=this._instance.persistence)||s.register({[Qo]:!!h&&n})}else{var p;null==(p=this._instance.persistence)||p.unregister(Qo)}}Kt(){0!==this.Tt.O.length&&Ks2(this.it)&&(this.it=this._instance.on("eventCaptured",(n=>{try{this.Tt.O.includes(n.event)&&this.Jt("event")}catch(s){ml.error("Could not activate event trigger",s)}})))}get sdkDebugProperties(){var n,{sessionStartTimestamp:s}=this.W.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.bt.data.length,$sdk_debug_replay_internal_buffer_size:this.bt.size,$sdk_debug_current_session_duration:this.kt,$sdk_debug_session_start:s,$sdk_debug_replay_flushed_size:null==(n=this.dt)?void 0:n.currentTrackedSize}}Zt(){var n;if(!this.X){var s,o,l,c={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},d=this._instance.config.session_recording;for(var[h,p]of Object.entries(d||{}))h in c&&("maskInputOptions"===h?c.maskInputOptions=r2({password:!0},p):c[h]=p);this.Bt&&this.Bt.enabled&&(c.recordCanvas=!0,c.sampling={canvas:this.Bt.fps},c.dataURLOptions={type:"image/webp",quality:this.Bt.quality}),this.At&&(c.maskAllInputs=null===(s=this.At.maskAllInputs)||void 0===s||s,c.maskTextSelector=null!==(o=this.At.maskTextSelector)&&void 0!==o?o:void 0,c.blockSelector=null!==(l=this.At.blockSelector)&&void 0!==l?l:void 0);var f=ch2();if(f){this.te=null!==(n=this.te)&&void 0!==n?n:new rh2(f,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(n,s)=>{var o="Too many mutations on node '"+n+"'. Rate limiting. This could be due to SVG animations or something similar";ml.info(o,{node:s}),this.log(gl+" "+o,"warn")}});var m=this.Nt();this.X=f(r2({emit:n=>{this.onRRwebEmit(n)},plugins:m},c)),this.K=Date.now(),this.tt=Qs2(this.tt)?this.tt:"unknown",this.tryAddCustomEvent("$remote_config_received",this.V),this.ft("$session_options",{sessionRecordingOptions:c,activePlugins:m.map((n=>null==n?void 0:n.name))}),this.ft("$posthog_config",{config:this._instance.config})}else ml.error("_startRecorder was called but rrwebRecord is not available. This indicates something has gone wrong.")}}tryAddCustomEvent(n,s){return this.ft(n,s)}}yo.__PosthogExtensions__=yo.__PosthogExtensions__||{},yo.__PosthogExtensions__.rrwebPlugins={getRecordConsolePlugin:Bs2,getRecordNetworkPlugin:Xo2},yo.__PosthogExtensions__.rrweb={record:ms2,version:"v2"},yo.__PosthogExtensions__.initSessionRecording=n=>new wh2(n),yo.rrweb={record:ms2,version:"v2"},yo.rrwebConsoleRecord={getRecordConsolePlugin:Bs2},yo.getRecordNetworkPlugin=Xo2}();const Em="telemetry_session_id";let Tm=null;function generateUUID(){return"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():`${Date.now().toString(16)}-${Math.random().toString(16).slice(2,10)}-${Math.random().toString(16).slice(2,10)}`}async function getSessionId(){if(Tm)return Tm;const n=await async function(){try{return(await s.storage.local.get([Em]))[Em]??null}catch(n){return console.warn("[Telemetry] Failed to read distinct id:",n),null}}();if(n)return Tm=n,n;const o=generateUUID();return Tm=o,await async function(n){try{await s.storage.local.set({[Em]:n})}catch(o){console.warn("[Telemetry] Failed to persist distinct id:",o)}}(o),o}function getSessionIdSync(){return Tm||(Tm=generateUUID(),getSessionId().catch(console.error),Tm)}const Am=class _ConfirmitPostHogManager{constructor(){__publicField(this,"isInitialized",!1)}static getInstance(){return _ConfirmitPostHogManager.instance||(_ConfirmitPostHogManager.instance=new _ConfirmitPostHogManager),_ConfirmitPostHogManager.instance}initialize(n){if(!this.isInitialized)try{const s=getSessionIdSync();Im.init("phc_9EXhTA8aIYO7hvqRzboyf5IqPUhi26NrFy93lzPbfFV",{api_host:n.apiHost,persistence:n.persistence||"localStorage",autocapture:n.autocapture??!0,disable_session_recording:n.disable_session_recording??!0,capture_pageview:n.capture_pageview??!1,disable_cookie:!0,disable_external_dependency_loading:!0,bootstrap:{distinctID:s},loaded:()=>{console.log("[PostHog] PostHog initialized successfully"),n.debug&&console.log("[PostHog] Debug mode enabled")}}),this.isInitialized=!0}catch(s){console.error("[PostHog] Failed to initialize PostHog:",s)}}track(n,s){if(this.isInitialized)try{Im.capture(n,{...s,timestamp:(new Date).toISOString(),extension_version:chrome?.runtime?.getManifest?.()?.version||"unknown"})}catch(o){console.error("[PostHog] Failed to track event:",o)}}identify(n,s){if(this.isInitialized)try{Im.identify(n,s)}catch(o){console.error("[PostHog] Failed to identify user:",o)}}identifyWithContext(n,s,o){if(this.isInitialized)try{const l={...o,surveyId:s,timestamp:(new Date).toISOString()};Im.identify(n,l),console.log("[PostHog] User identified with context:",n,s)}catch(l){console.error("[PostHog] Failed to identify user with context:",l)}}shutdown(){if(this.isInitialized)try{console.log("[PostHog] Shutting down PostHog tracking"),Im.reset(),this.isInitialized=!1,console.log("[PostHog] PostHog shut down successfully")}catch(n){console.error("[PostHog] Error during shutdown:",n)}else console.log("[PostHog] Not initialized, skipping shutdown")}reset(){this.isInitialized&&Im.reset()}};__publicField(Am,"instance");const Mm=Am.getInstance(),Rm=Object.prototype.toString;function isPlainObject(n){return function(n,s){return Rm.call(n)===`[object ${s}]`}(n,"Object")}function isThenable(n){return Boolean(n&&n.then&&"function"==typeof n.then)}function isGlobalObj(n){return n&&n.Math==Math?n:void 0}const Om="object"==typeof globalThis&&isGlobalObj(globalThis)||"object"==typeof window&&isGlobalObj(window)||"object"==typeof self&&isGlobalObj(self)||"object"==typeof global&&isGlobalObj(global)||function(){return this}()||{};function getGlobalSingleton(n,s,o){const l=o||Om,c=l.__SENTRY__=l.__SENTRY__||{};return c[n]||(c[n]=s())}const Pm="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Lm=["debug","info","warn","error","log","assert","trace"],Nm={};function consoleSandbox(n){if(!("console"in Om))return n();const s=Om.console,o={},l=Object.keys(Nm);l.forEach((n=>{const l=Nm[n];o[n]=s[n],s[n]=l}));try{return n()}finally{l.forEach((n=>{s[n]=o[n]}))}}const Fm=function(){let n=!1;const s={enable:()=>{n=!0},disable:()=>{n=!1},isEnabled:()=>n};return Pm?Lm.forEach((o=>{s[o]=(...s)=>{n&&consoleSandbox((()=>{Om.console[o](`Sentry Logger [${o}]:`,...s)}))}})):Lm.forEach((n=>{s[n]=()=>{}})),s}();function dropUndefinedKeys(n){return _dropUndefinedKeys(n,new Map)}function _dropUndefinedKeys(n,s){if(function(n){if(!isPlainObject(n))return!1;try{const s=Object.getPrototypeOf(n).constructor.name;return!s||"Object"===s}catch(es){return!0}}(n)){const o=s.get(n);if(void 0!==o)return o;const l={};s.set(n,l);for(const c of Object.keys(n))void 0!==n[c]&&(l[c]=_dropUndefinedKeys(n[c],s));return l}if(Array.isArray(n)){const o=s.get(n);if(void 0!==o)return o;const l=[];return s.set(n,l),n.forEach((n=>{l.push(_dropUndefinedKeys(n,s))})),l}return n}function uuid4(){const n=Om,s=n.crypto||n.msCrypto;let getRandomByte=()=>16*Math.random();try{if(s&&s.randomUUID)return s.randomUUID().replace(/-/g,"");s&&s.getRandomValues&&(getRandomByte=()=>{const n=new Uint8Array(1);return s.getRandomValues(n),n[0]})}catch(o){}return"10000000100040008000100000000000".replace(/[018]/g,(n=>(n^(15&getRandomByte())>>n/4).toString(16)))}var Dm;!function(n){n[n.PENDING=0]="PENDING";n[n.RESOLVED=1]="RESOLVED";n[n.REJECTED=2]="REJECTED"}(Dm||(Dm={}));class SyncPromise{constructor(n){SyncPromise.prototype.__init.call(this),SyncPromise.prototype.__init2.call(this),SyncPromise.prototype.__init3.call(this),SyncPromise.prototype.__init4.call(this),this._state=Dm.PENDING,this._handlers=[];try{n(this._resolve,this._reject)}catch(es){this._reject(es)}}then(n,s){return new SyncPromise(((o,l)=>{this._handlers.push([!1,s=>{if(n)try{o(n(s))}catch(es){l(es)}else o(s)},n=>{if(s)try{o(s(n))}catch(es){l(es)}else l(n)}]),this._executeHandlers()}))}catch(n){return this.then((n=>n),n)}finally(n){return new SyncPromise(((s,o)=>{let l,c;return this.then((s=>{c=!1,l=s,n&&n()}),(s=>{c=!0,l=s,n&&n()})).then((()=>{c?o(l):s(l)}))}))}__init(){this._resolve=n=>{this._setResult(Dm.RESOLVED,n)}}__init2(){this._reject=n=>{this._setResult(Dm.REJECTED,n)}}__init3(){this._setResult=(n,s)=>{this._state===Dm.PENDING&&(isThenable(s)?s.then(this._resolve,this._reject):(this._state=n,this._value=s,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Dm.PENDING)return;const n=this._handlers.slice();this._handlers=[],n.forEach((n=>{n[0]||(this._state===Dm.RESOLVED&&n[1](this._value),this._state===Dm.REJECTED&&n[2](this._value),n[0]=!0)}))}}}function dateTimestampInSeconds(){return Date.now()/1e3}const Bm=function(){const{performance:n}=Om;if(!n||!n.now)return dateTimestampInSeconds;const s=Date.now()-n.now(),o=null==n.timeOrigin?s:n.timeOrigin;return()=>(o+n.now())/1e3}();(()=>{const{performance:n}=Om;if(!n||!n.now)return;const s=36e5,o=n.now(),l=Date.now(),c=n.timeOrigin?Math.abs(n.timeOrigin+o-l):s,d=c<s,h=n.timing&&n.timing.navigationStart,p="number"==typeof h?Math.abs(h+o-l):s;(d||p<s)&&(c<=p&&n.timeOrigin)})();const $m="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Um="production";function notifyEventProcessors(n,s,o,l=0){return new SyncPromise(((c,d)=>{const h=n[l];if(null===s||"function"!=typeof h)c(s);else{const p=h({...s},o);$m&&h.id&&null===p&&Fm.log(`Event processor "${h.id}" dropped event`),isThenable(p)?p.then((s=>notifyEventProcessors(n,s,o,l+1).then(c))).then(null,d):notifyEventProcessors(n,p,o,l+1).then(c).then(null,d)}}))}function makeSession(n){const s=Bm(),o={sid:uuid4(),init:!0,timestamp:s,started:s,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(n){return dropUndefinedKeys({sid:`${n.sid}`,init:n.init,started:new Date(1e3*n.started).toISOString(),timestamp:new Date(1e3*n.timestamp).toISOString(),status:n.status,errors:n.errors,did:"number"==typeof n.did||"string"==typeof n.did?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}(o)};return n&&updateSession(o,n),o}function updateSession(n,s={}){if(s.user&&(!n.ipAddress&&s.user.ip_address&&(n.ipAddress=s.user.ip_address),n.did||s.did||(n.did=s.user.id||s.user.email||s.user.username)),n.timestamp=s.timestamp||Bm(),s.abnormal_mechanism&&(n.abnormal_mechanism=s.abnormal_mechanism),s.ignoreDuration&&(n.ignoreDuration=s.ignoreDuration),s.sid&&(n.sid=32===s.sid.length?s.sid:uuid4()),void 0!==s.init&&(n.init=s.init),!n.did&&s.did&&(n.did=`${s.did}`),"number"==typeof s.started&&(n.started=s.started),n.ignoreDuration)n.duration=void 0;else if("number"==typeof s.duration)n.duration=s.duration;else{const s=n.timestamp-n.started;n.duration=s>=0?s:0}s.release&&(n.release=s.release),s.environment&&(n.environment=s.environment),!n.ipAddress&&s.ipAddress&&(n.ipAddress=s.ipAddress),!n.userAgent&&s.userAgent&&(n.userAgent=s.userAgent),"number"==typeof s.errors&&(n.errors=s.errors),s.status&&(n.status=s.status)}function spanToTraceContext(n){const{spanId:s,traceId:o}=n.spanContext(),{data:l,op:c,parent_span_id:d,status:h,tags:p,origin:f}=spanToJSON(n);return dropUndefinedKeys({data:l,op:c,parent_span_id:d,span_id:s,status:h,tags:p,trace_id:o,origin:f})}function spanToJSON(n){return function(n){return"function"==typeof n.getSpanJSON}(n)?n.getSpanJSON():"function"==typeof n.toJSON?n.toJSON():{}}function captureException(n,s){return getCurrentHub().captureException(n,void 0)}function addBreadcrumb(n,s){getCurrentHub().addBreadcrumb(n,s)}function withScope(...n){const s=getCurrentHub();if(2===n.length){const[o,l]=n;return o?s.withScope((()=>(s.getStackTop().scope=o,l(o)))):s.withScope(l)}return s.withScope(n[0])}function getRootSpan(n){return n.transaction}function getDynamicSamplingContextFromSpan(n){const s=getCurrentHub().getClient();if(!s)return{};const o=function(n,s,o){const l=s.getOptions(),{publicKey:c}=s.getDsn()||{},{segment:d}=o&&o.getUser()||{},h=dropUndefinedKeys({environment:l.environment||Um,release:l.release,user_segment:d,public_key:c,trace_id:n});return s.emit&&s.emit("createDsc",h),h}(spanToJSON(n).trace_id||"",s,getCurrentHub().getScope()),l=getRootSpan(n);if(!l)return o;const c=l&&l._frozenDynamicSamplingContext;if(c)return c;const{sampleRate:d,source:h}=l.metadata;null!=d&&(o.sample_rate=`${d}`);const p=spanToJSON(l);return h&&"url"!==h&&(o.transaction=p.description),o.sampled=String(function(n){const{traceFlags:s}=n.spanContext();return Boolean(1&s)}(l)),s.emit&&s.emit("createDsc",o),o}function applyScopeDataToEvent(n,s){const{fingerprint:o,span:l,breadcrumbs:c,sdkProcessingMetadata:d}=s;!function(n,s){const{extra:o,tags:l,user:c,contexts:d,level:h,transactionName:p}=s,f=dropUndefinedKeys(o);f&&Object.keys(f).length&&(n.extra={...f,...n.extra});const m=dropUndefinedKeys(l);m&&Object.keys(m).length&&(n.tags={...m,...n.tags});const _=dropUndefinedKeys(c);_&&Object.keys(_).length&&(n.user={..._,...n.user});const y=dropUndefinedKeys(d);y&&Object.keys(y).length&&(n.contexts={...y,...n.contexts});h&&(n.level=h);p&&(n.transaction=p)}(n,s),l&&function(n,s){n.contexts={trace:spanToTraceContext(s),...n.contexts};const o=getRootSpan(s);if(o){n.sdkProcessingMetadata={dynamicSamplingContext:getDynamicSamplingContextFromSpan(s),...n.sdkProcessingMetadata};const l=spanToJSON(o).description;l&&(n.tags={transaction:l,...n.tags})}}(n,l),function(n,s){n.fingerprint=n.fingerprint?function(n){return Array.isArray(n)?n:[n]}(n.fingerprint):[],s&&(n.fingerprint=n.fingerprint.concat(s));n.fingerprint&&!n.fingerprint.length&&delete n.fingerprint}(n,o),function(n,s){const o=[...n.breadcrumbs||[],...s];n.breadcrumbs=o.length?o:void 0}(n,c),function(n,s){n.sdkProcessingMetadata={...n.sdkProcessingMetadata,...s}}(n,d)}class Scope{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=generatePropagationContext()}static clone(n){return n?n.clone():new Scope}clone(){const n=new Scope;return n._breadcrumbs=[...this._breadcrumbs],n._tags={...this._tags},n._extra={...this._extra},n._contexts={...this._contexts},n._user=this._user,n._level=this._level,n._span=this._span,n._session=this._session,n._transactionName=this._transactionName,n._fingerprint=this._fingerprint,n._eventProcessors=[...this._eventProcessors],n._requestSession=this._requestSession,n._attachments=[...this._attachments],n._sdkProcessingMetadata={...this._sdkProcessingMetadata},n._propagationContext={...this._propagationContext},n._client=this._client,n}setClient(n){this._client=n}getClient(){return this._client}addScopeListener(n){this._scopeListeners.push(n)}addEventProcessor(n){return this._eventProcessors.push(n),this}setUser(n){return this._user=n||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&updateSession(this._session,{user:n}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(n){return this._requestSession=n,this}setTags(n){return this._tags={...this._tags,...n},this._notifyScopeListeners(),this}setTag(n,s){return this._tags={...this._tags,[n]:s},this._notifyScopeListeners(),this}setExtras(n){return this._extra={...this._extra,...n},this._notifyScopeListeners(),this}setExtra(n,s){return this._extra={...this._extra,[n]:s},this._notifyScopeListeners(),this}setFingerprint(n){return this._fingerprint=n,this._notifyScopeListeners(),this}setLevel(n){return this._level=n,this._notifyScopeListeners(),this}setTransactionName(n){return this._transactionName=n,this._notifyScopeListeners(),this}setContext(n,s){return null===s?delete this._contexts[n]:this._contexts[n]=s,this._notifyScopeListeners(),this}setSpan(n){return this._span=n,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const n=this._span;return n&&n.transaction}setSession(n){return n?this._session=n:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(n){if(!n)return this;const s="function"==typeof n?n(this):n;if(s instanceof Scope){const n=s.getScopeData();this._tags={...this._tags,...n.tags},this._extra={...this._extra,...n.extra},this._contexts={...this._contexts,...n.contexts},n.user&&Object.keys(n.user).length&&(this._user=n.user),n.level&&(this._level=n.level),n.fingerprint.length&&(this._fingerprint=n.fingerprint),s.getRequestSession()&&(this._requestSession=s.getRequestSession()),n.propagationContext&&(this._propagationContext=n.propagationContext)}else if(isPlainObject(s)){const s=n;this._tags={...this._tags,...s.tags},this._extra={...this._extra,...s.extra},this._contexts={...this._contexts,...s.contexts},s.user&&(this._user=s.user),s.level&&(this._level=s.level),s.fingerprint&&(this._fingerprint=s.fingerprint),s.requestSession&&(this._requestSession=s.requestSession),s.propagationContext&&(this._propagationContext=s.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=generatePropagationContext(),this}addBreadcrumb(n,s){const o="number"==typeof s?s:100;if(o<=0)return this;const l={timestamp:dateTimestampInSeconds(),...n},c=this._breadcrumbs;return c.push(l),this._breadcrumbs=c.length>o?c.slice(-o):c,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(n){return this._attachments.push(n),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:n,_attachments:s,_contexts:o,_tags:l,_extra:c,_user:d,_level:h,_fingerprint:p,_eventProcessors:f,_propagationContext:m,_sdkProcessingMetadata:_,_transactionName:y,_span:E}=this;return{breadcrumbs:n,attachments:s,contexts:o,tags:l,extra:c,user:d,level:h,fingerprint:p||[],eventProcessors:f,propagationContext:m,sdkProcessingMetadata:_,transactionName:y,span:E}}applyToEvent(n,s={},o=[]){applyScopeDataToEvent(n,this.getScopeData());return notifyEventProcessors([...o,...getGlobalSingleton("globalEventProcessors",(()=>[])),...this._eventProcessors],n,s)}setSDKProcessingMetadata(n){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...n},this}setPropagationContext(n){return this._propagationContext=n,this}getPropagationContext(){return this._propagationContext}captureException(n,s){const o=s&&s.event_id?s.event_id:uuid4();if(!this._client)return Fm.warn("No client configured on scope - will not capture exception!"),o;const l=new Error("Sentry syntheticException");return this._client.captureException(n,{originalException:n,syntheticException:l,...s,event_id:o},this),o}captureMessage(n,s,o){const l=o&&o.event_id?o.event_id:uuid4();if(!this._client)return Fm.warn("No client configured on scope - will not capture message!"),l;const c=new Error(n);return this._client.captureMessage(n,s,{originalException:n,syntheticException:c,...o,event_id:l},this),l}captureEvent(n,s){const o=s&&s.event_id?s.event_id:uuid4();return this._client?(this._client.captureEvent(n,{...s,event_id:o},this),o):(Fm.warn("No client configured on scope - will not capture event!"),o)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((n=>{n(this)})),this._notifyingListeners=!1)}}function generatePropagationContext(){return{traceId:uuid4(),spanId:uuid4().substring(16)}}const Hm=parseFloat("7.120.3"),jm=100;class Hub{constructor(n,s,o,l=Hm){let c,d;this._version=l,s?c=s:(c=new Scope,c.setClient(n)),o?d=o:(d=new Scope,d.setClient(n)),this._stack=[{scope:c}],n&&this.bindClient(n),this._isolationScope=d}isOlderThan(n){return this._version<n}bindClient(n){const s=this.getStackTop();s.client=n,s.scope.setClient(n),n&&n.setupIntegrations&&n.setupIntegrations()}pushScope(){const n=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:n}),n}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(n){const s=this.pushScope();let o;try{o=n(s)}catch(es){throw this.popScope(),es}return isThenable(o)?o.then((n=>(this.popScope(),n)),(n=>{throw this.popScope(),n})):(this.popScope(),o)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(n,s){const o=this._lastEventId=s&&s.event_id?s.event_id:uuid4(),l=new Error("Sentry syntheticException");return this.getScope().captureException(n,{originalException:n,syntheticException:l,...s,event_id:o}),o}captureMessage(n,s,o){const l=this._lastEventId=o&&o.event_id?o.event_id:uuid4(),c=new Error(n);return this.getScope().captureMessage(n,s,{originalException:n,syntheticException:c,...o,event_id:l}),l}captureEvent(n,s){const o=s&&s.event_id?s.event_id:uuid4();return n.type||(this._lastEventId=o),this.getScope().captureEvent(n,{...s,event_id:o}),o}lastEventId(){return this._lastEventId}addBreadcrumb(n,s){const{scope:o,client:l}=this.getStackTop();if(!l)return;const{beforeBreadcrumb:c=null,maxBreadcrumbs:d=jm}=l.getOptions&&l.getOptions()||{};if(d<=0)return;const h={timestamp:dateTimestampInSeconds(),...n},p=c?consoleSandbox((()=>c(h,s))):h;null!==p&&(l.emit&&l.emit("beforeAddBreadcrumb",p,s),o.addBreadcrumb(p,d))}setUser(n){this.getScope().setUser(n),this.getIsolationScope().setUser(n)}setTags(n){this.getScope().setTags(n),this.getIsolationScope().setTags(n)}setExtras(n){this.getScope().setExtras(n),this.getIsolationScope().setExtras(n)}setTag(n,s){this.getScope().setTag(n,s),this.getIsolationScope().setTag(n,s)}setExtra(n,s){this.getScope().setExtra(n,s),this.getIsolationScope().setExtra(n,s)}setContext(n,s){this.getScope().setContext(n,s),this.getIsolationScope().setContext(n,s)}configureScope(n){const{scope:s,client:o}=this.getStackTop();o&&n(s)}run(n){const s=makeMain(this);try{n(this)}finally{makeMain(s)}}getIntegration(n){const s=this.getClient();if(!s)return null;try{return s.getIntegration(n)}catch(o){return $m&&Fm.warn(`Cannot retrieve integration ${n.id} from the current Hub`),null}}startTransaction(n,s){const o=this._callExtensionMethod("startTransaction",n,s);if($m&&!o){this.getClient()?Fm.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):Fm.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return o}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(n=!1){if(n)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,s=n.getSession();s&&function(n){let s={};"ok"===n.status&&(s={status:"exited"}),updateSession(n,s)}(s),this._sendSessionUpdate(),n.setSession()}startSession(n){const{scope:s,client:o}=this.getStackTop(),{release:l,environment:c=Um}=o&&o.getOptions()||{},{userAgent:d}=Om.navigator||{},h=makeSession({release:l,environment:c,user:s.getUser(),...d&&{userAgent:d},...n}),p=s.getSession&&s.getSession();return p&&"ok"===p.status&&updateSession(p,{status:"exited"}),this.endSession(),s.setSession(h),h}shouldSendDefaultPii(){const n=this.getClient(),s=n&&n.getOptions();return Boolean(s&&s.sendDefaultPii)}_sendSessionUpdate(){const{scope:n,client:s}=this.getStackTop(),o=n.getSession();o&&s&&s.captureSession&&s.captureSession(o)}_callExtensionMethod(n,...s){const o=getMainCarrier().__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[n])return o.extensions[n].apply(this,s);$m&&Fm.warn(`Extension method ${n} couldn't be found, doing nothing.`)}}function getMainCarrier(){return Om.__SENTRY__=Om.__SENTRY__||{extensions:{},hub:void 0},Om}function makeMain(n){const s=getMainCarrier(),o=getHubFromCarrier(s);return setHubOnCarrier(s,n),o}function getCurrentHub(){const n=getMainCarrier();if(n.__SENTRY__&&n.__SENTRY__.acs){const s=n.__SENTRY__.acs.getCurrentHub();if(s)return s}return function(n=getMainCarrier()){s=n,s&&s.__SENTRY__&&s.__SENTRY__.hub&&!getHubFromCarrier(n).isOlderThan(Hm)||setHubOnCarrier(n,new Hub);var s;return getHubFromCarrier(n)}(n)}function getHubFromCarrier(n){return getGlobalSingleton("hub",(()=>new Hub),n)}function setHubOnCarrier(n,s){if(!n)return!1;return(n.__SENTRY__=n.__SENTRY__||{}).hub=s,!0}const zm=class _TelemetryManager{constructor(n={}){__publicField(this,"events",[]),__publicField(this,"metrics"),__publicField(this,"config"),__publicField(this,"flushTimer"),__publicField(this,"eventListeners",new Map),__publicField(this,"startTime",Date.now()),this.config={enabled:!0,level:"info",maxEvents:1e4,flushInterval:3e4,enablePerformanceMonitoring:!0,enableErrorTracking:!0,enableApiMonitoring:!0,enableResourceMonitoring:!0,bufferSize:100,...n},this.metrics={apiResponseTimes:new Map,componentRenderTimes:new Map,errorRates:new Map,throughput:new Map,memoryUsage:[],activeConnections:0,toolCallMetrics:{totalExecuted:0,totalFailed:0,averageExecutionTime:0,retryRate:0}},this.initializeMonitoring()}static getInstance(n){return _TelemetryManager.instance||(_TelemetryManager.instance=new _TelemetryManager(n)),_TelemetryManager.instance}initializeMonitoring(){this.config.enabled&&(this.flushTimer=setInterval((()=>{this.collectResourceMetrics(),this.flushEvents()}),this.config.flushInterval),this.config.enableErrorTracking&&(window.addEventListener("error",(n=>{this.trackError("window_error",new Error(n.message),{filename:n.filename,lineno:n.lineno,colno:n.colno})})),window.addEventListener("unhandledrejection",(n=>{this.trackError("unhandled_rejection",new Error(n.reason),{promise:n.promise})}))),this.config.enablePerformanceMonitoring&&this.startPerformanceMonitoring())}startPerformanceMonitoring(){"memory"in performance&&setInterval((()=>{const n=performance.memory;this.metrics.memoryUsage.push(n.usedJSHeapSize),this.metrics.memoryUsage.length>100&&this.metrics.memoryUsage.shift()}),5e3)}generateEventId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}shouldLog(n){const s=["debug","info","warn","error"],o=s.indexOf(this.config.level);return s.indexOf(n)>=o}track(n,o,l={},c="info"){if(!this.config.enabled||!this.shouldLog(c))return;const d={id:this.generateEventId(),timestamp:Date.now(),type:n,category:this.categorizeEvent(n),level:c,message:o,context:{...l,sessionId:getSessionIdSync(),extensionId:s?.runtime?.id,userAgent:navigator.userAgent,url:window.location.href}};this.addEvent(d),this.notifyListeners(n,d)}trackApiCall(n,s,o,l,c,d={}){const h=l-o;this.track("api_call",`API ${s} ${n}`,{...d,api:{endpoint:n,method:s,status:c,responseTime:h,size:d.responseSize,retryCount:d.retryCount||0}},c>=400?"error":"info"),this.metrics.apiResponseTimes.has(n)||this.metrics.apiResponseTimes.set(n,[]);const p=this.metrics.apiResponseTimes.get(n);p.push(h),p.length>100&&p.shift();const f=`${s}_${n}`;if(c>=400){const n=this.metrics.errorRates.get(f)||0;this.metrics.errorRates.set(f,n+1)}}trackToolCallExecution(n,s,o,l,c,d={}){const h=l-o;this.track("tool_call_execution",`Tool call ${s} ${c?"succeeded":"failed"}`,{...d,toolCallId:n,toolCallType:s,duration:h,success:c},c?"info":"error"),this.metrics.toolCallMetrics.totalExecuted++,c||this.metrics.toolCallMetrics.totalFailed++;const p=this.metrics.toolCallMetrics.totalExecuted,f=this.metrics.toolCallMetrics.averageExecutionTime;this.metrics.toolCallMetrics.averageExecutionTime=(f*(p-1)+h)/p}trackComponentLifecycle(n,s,o,l={}){if(this.track(`component_${s}`,`Component ${n} ${s}`,{...l,componentName:n,duration:o}),"render"===s&&o){this.metrics.componentRenderTimes.has(n)||this.metrics.componentRenderTimes.set(n,[]);const s=this.metrics.componentRenderTimes.get(n);s.push(o),s.length>50&&s.shift()}}trackError(n,o,l={}){const c={id:this.generateEventId(),timestamp:Date.now(),type:"error",category:"error",level:"error",message:`Error in ${n}: ${o.message}`,context:{...l,source:n,sessionId:getSessionIdSync()},error:{name:o.name,message:o.message,stack:o.stack,code:o.code}};this.addEvent(c),this.notifyListeners("error",c),function(n,o){withScope((l=>{if(o&&l.setExtras(o),l.setTag("extensionId",s?.runtime?.id||"unknown"),l.setTag("errorSource",o?.source||"unknown"),l.setTag("sessionId",getSessionIdSync()),"memory"in performance){const n=performance.memory;l.setContext("performance",{usedJSHeapSize:n.usedJSHeapSize,totalJSHeapSize:n.totalJSHeapSize,timestamp:Date.now()})}l.setContext("navigation",{url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()}),captureException(n)}))}(o,{source:n,...l,telemetryEventId:c.id})}trackUserAction(n,s={}){this.track("user_action",`User ${n}`,{...s,action:n,timestamp:Date.now()})}trackPerformance(n,s,o,l={}){const c=o-s;this.track("performance",`Performance: ${n}`,{...l,operation:n,performance:{startTime:s,endTime:o,duration:c,memory:this.getCurrentMemoryUsage()}})}categorizeEvent(n){return n.startsWith("api_")?"api":n.startsWith("component_")?"ui":n.startsWith("websocket_")?"websocket":n.startsWith("auth_")?"auth":n.startsWith("tool_call_")?"tool_calls":"performance"===n?"performance":"error"===n?"error":"user_action"===n?"user":"system"}addEvent(n){this.events.push(n),this.events.length>this.config.maxEvents&&(this.events=this.events.slice(-this.config.maxEvents))}notifyListeners(n,s){(this.eventListeners.get(n)||[]).forEach((n=>{try{n(s)}catch(o){console.error("Telemetry listener error:",o)}}))}getCurrentMemoryUsage(){return"memory"in performance?performance.memory.usedJSHeapSize:0}collectResourceMetrics(){if(!this.config.enableResourceMonitoring)return;const n={heap:this.getCurrentMemoryUsage(),domNodes:document.querySelectorAll("*").length,listeners:this.countEventListeners(),scriptDuration:Date.now()-this.startTime};this.track("performance","Resource metrics collected",{resources:n},"debug")}countEventListeners(){return Array.from(document.querySelectorAll("*")).reduce(((n,s)=>n+Object.getOwnPropertyNames(s).filter((n=>n.startsWith("on"))).filter((n=>null!==s[n])).length),0)}flushEvents(){0!==this.events.length&&this.config.exportEndpoint&&this.exportEvents()}async exportEvents(){if(this.config.exportEndpoint)try{const n=[...this.events];this.events=[],await fetch(this.config.exportEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:n,metrics:this.getMetricsSummary(),metadata:{sessionId:getSessionIdSync(),extensionId:s?.runtime?.id,timestamp:Date.now()}})})}catch(n){console.error("Failed to export telemetry events:",n)}}addEventListener(n,s){this.eventListeners.has(n)||this.eventListeners.set(n,[]),this.eventListeners.get(n).push(s)}removeEventListener(n,s){const o=this.eventListeners.get(n);if(o){const n=o.indexOf(s);n>-1&&o.splice(n,1)}}getEvents(n){return n?this.events.filter((s=>(!n.type||s.type===n.type)&&((!n.category||s.category===n.category)&&((!n.level||s.level===n.level)&&(!(n.startTime&&s.timestamp<n.startTime)&&!(n.endTime&&s.timestamp>n.endTime)))))):[...this.events]}getMetrics(){return{...this.metrics}}getMetricsSummary(){const n=Date.now(),s=n-6e4,o=this.events.filter((n=>n.timestamp>s));return{totalEvents:this.events.length,recentEvents:o.length,errorRate:o.filter((n=>"error"===n.level)).length/Math.max(o.length,1),averageApiResponseTime:this.calculateAverageResponseTime(),toolCallMetrics:this.metrics.toolCallMetrics,memoryUsage:{current:this.getCurrentMemoryUsage(),average:this.metrics.memoryUsage.length>0?this.metrics.memoryUsage.reduce(((n,s)=>n+s),0)/this.metrics.memoryUsage.length:0},activeConnections:this.metrics.activeConnections,uptime:n-this.startTime}}calculateAverageResponseTime(){const n=[];return this.metrics.apiResponseTimes.forEach((s=>n.push(...s))),n.length>0?n.reduce(((n,s)=>n+s),0)/n.length:0}getHealthStatus(){const n=[],s=this.getMetricsSummary();s.errorRate>.1&&n.push(`High error rate: ${(100*s.errorRate).toFixed(1)}%`),s.averageApiResponseTime>5e3&&n.push(`Slow API responses: ${s.averageApiResponseTime.toFixed(0)}ms`);const o=s.memoryUsage.current/1048576;o>100&&n.push(`High memory usage: ${o.toFixed(1)}MB`);const l=s.toolCallMetrics.totalFailed/Math.max(s.toolCallMetrics.totalExecuted,1);l>.2&&n.push(`High tool call failure rate: ${(100*l).toFixed(1)}%`);return{status:0===n.length?"healthy":n.length<3?"degraded":"unhealthy",issues:n,metrics:s}}exportEventsAsJSON(){return JSON.stringify({events:this.events,metrics:this.getMetricsSummary(),healthStatus:this.getHealthStatus(),exportedAt:(new Date).toISOString()},null,2)}clearEvents(){this.events=[],this.metrics={apiResponseTimes:new Map,componentRenderTimes:new Map,errorRates:new Map,throughput:new Map,memoryUsage:[],activeConnections:0,toolCallMetrics:{totalExecuted:0,totalFailed:0,averageExecutionTime:0,retryRate:0}}}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.eventListeners.clear(),this.clearEvents()}};__publicField(zm,"instance");const qm=zm.getInstance({enabled:!0,level:"info",enablePerformanceMonitoring:!0,enableErrorTracking:!0,enableApiMonitoring:!0,enableResourceMonitoring:!0}),Wm=qm.trackApiCall.bind(qm);qm.trackError.bind(qm),qm.trackUserAction.bind(qm),qm.trackPerformance.bind(qm),qm.trackComponentLifecycle.bind(qm),qm.trackToolCallExecution.bind(qm);const Vm=class _ApiInterceptor{constructor(){__publicField(this,"activeRequests",new Map),__publicField(this,"requestQueue",[]),__publicField(this,"isEnabled",!0),this.interceptFetch(),this.interceptXHR()}static getInstance(){return _ApiInterceptor.instance||(_ApiInterceptor.instance=new _ApiInterceptor),_ApiInterceptor.instance}interceptFetch(){const n=window.fetch;window.fetch=async(s,o)=>{if(!this.isEnabled)return n(s,o);const l="string"==typeof s?s:s.toString(),c=o?.method||"GET",d=this.generateOperationId(),h=performance.now(),p={operationId:d,sessionId:getSessionIdSync(),correlationId:this.generateCorrelationId()},f=this.calculateRequestSize(o),m={endpoint:this.sanitizeUrl(l),method:c,startTime:h,retryCount:0,requestSize:f,context:{...p,userAgent:navigator.userAgent,timestamp:(new Date).toISOString()}};this.activeRequests.set(d,m),addBreadcrumb({type:"http",category:"fetch",data:{url:this.sanitizeUrl(l),method:c,operationId:d},level:"info"});try{const l=await n(s,o),c=performance.now(),h=this.calculateResponseSize(l);return m.endTime=c,m.status=l.status,m.responseSize=h,Wm(m.endpoint,m.method,m.startTime,c,l.status,{...m.context,responseSize:h,requestSize:f,duration:c-m.startTime}),this.sendToSentry(m,l.ok),this.activeRequests.delete(d),l}catch(_){const n=performance.now();throw m.endTime=n,m.error=_,qm.trackError("api_fetch_error",_,{...m.context,endpoint:m.endpoint,method:m.method,duration:n-m.startTime,operationId:d}),this.sendErrorToSentry(m,_),this.activeRequests.delete(d),_}}}interceptXHR(){const n=XMLHttpRequest.prototype.open,s=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(s,o,l,c,d){if(!_ApiInterceptor.instance.isEnabled)return n.call(this,s,o,l??!0,c,d);const h=_ApiInterceptor.instance.generateOperationId(),p="string"==typeof o?o:o.toString();return this.__apiInterceptor={operationId:h,method:s,url:p,startTime:performance.now()},n.call(this,s,o,l??!0,c,d)},XMLHttpRequest.prototype.send=function(n){if(!_ApiInterceptor.instance.isEnabled||!this.__apiInterceptor)return s.call(this,n);const o=this.__apiInterceptor,l=_ApiInterceptor.instance.calculateXHRRequestSize(n),c={operationId:o.operationId,sessionId:getSessionIdSync(),correlationId:_ApiInterceptor.instance.generateCorrelationId()},d={endpoint:_ApiInterceptor.instance.sanitizeUrl(o.url),method:o.method,startTime:o.startTime,retryCount:0,requestSize:l,context:{...c,userAgent:navigator.userAgent,timestamp:(new Date).toISOString()}};return _ApiInterceptor.instance.activeRequests.set(o.operationId,d),addBreadcrumb({type:"http",category:"xhr",data:{url:d.endpoint,method:o.method,operationId:o.operationId},level:"info"}),this.addEventListener("loadend",(()=>{const n=performance.now();d.endTime=n,d.status=this.status,d.responseSize=this.responseText?.length||0,Wm(d.endpoint,d.method,d.startTime,n,this.status,{...d.context,responseSize:d.responseSize,requestSize:l,duration:n-d.startTime}),_ApiInterceptor.instance.sendToSentry(d,this.status<400),_ApiInterceptor.instance.activeRequests.delete(o.operationId)})),this.addEventListener("error",(()=>{const n=performance.now(),s=new Error(`XHR request failed: ${o.method} ${o.url}`);d.endTime=n,d.error=s,qm.trackError("api_xhr_error",s,{...d.context,endpoint:d.endpoint,method:d.method,duration:n-d.startTime}),_ApiInterceptor.instance.sendErrorToSentry(d,s),_ApiInterceptor.instance.activeRequests.delete(o.operationId)})),s.call(this,n)}}sendToSentry(n,s){const o=(n.endTime||0)-n.startTime,l=(c={name:`${n.method} ${n.endpoint}`,op:"http.client",data:{...n.context,endpoint:n.endpoint,method:n.method,status:n.status,duration:o,requestSize:n.requestSize,responseSize:n.responseSize,success:s}},getCurrentHub().startTransaction({...c},d));var c,d;l.setStatus(s?"ok":"internal_error"),l.finish(),addBreadcrumb({type:"http",category:"api_call",data:{endpoint:n.endpoint,method:n.method,status:n.status,duration:o,operationId:n.context.operationId,success:s},level:s?"info":"error"}),function(n,s){const o="string"==typeof s?s:void 0,l="string"!=typeof s?{captureContext:s}:void 0;getCurrentHub().captureMessage(n,o,l)}(`API Call: ${n.method} ${n.endpoint}`,{level:s?"info":"warning",tags:{api_endpoint:n.endpoint,api_method:n.method,api_status:n.status?.toString(),success:s.toString()},extra:{metrics:{duration:o,requestSize:n.requestSize,responseSize:n.responseSize,retryCount:n.retryCount},context:n.context}})}sendErrorToSentry(n,s){const o=(n.endTime||0)-n.startTime;withScope((l=>{l.setTag("error_type","api_error"),l.setTag("api_endpoint",n.endpoint),l.setTag("api_method",n.method),l.setTag("operation_id",n.context.operationId),l.setContext("api_call",{endpoint:n.endpoint,method:n.method,duration:o,requestSize:n.requestSize,retryCount:n.retryCount,startTime:n.startTime,endTime:n.endTime}),l.setContext("request_context",n.context),l.setLevel("error"),captureException(s)}))}generateOperationId(){return`op_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateCorrelationId(){return`corr_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}sanitizeUrl(n){try{const s=new URL(n);return["token","key","password","auth","secret"].forEach((n=>{s.searchParams.has(n)&&s.searchParams.set(n,"[REDACTED]")})),s.toString()}catch{return n}}calculateRequestSize(n){if(!n?.body)return 0;if("string"==typeof n.body)return new Blob([n.body]).size;if(n.body instanceof FormData){let s=0;for(const[o,l]of n.body.entries())s+=o.length,"string"==typeof l?s+=l.length:l instanceof File&&(s+=l.size);return s}return n.body instanceof Blob?n.body.size:0}calculateXHRRequestSize(n){if(!n)return 0;if("string"==typeof n)return new Blob([n]).size;if(n instanceof Document)return(new XMLSerializer).serializeToString(n).length;if(n instanceof FormData){let s=0;for(const[o,l]of n.entries())s+=o.length,"string"==typeof l?s+=l.length:l instanceof File&&(s+=l.size);return s}return n instanceof Blob?n.size:n instanceof ArrayBuffer?n.byteLength:0}calculateResponseSize(n){const s=n.headers.get("content-length");return s?parseInt(s,10):0}getActiveRequests(){return new Map(this.activeRequests)}getMetricsSummary(){const n=this.requestQueue.length,s=this.requestQueue.filter((n=>n.error||n.status&&n.status>=400)).length,o=this.requestQueue.filter((n=>n.endTime)).length,l=o>0?this.requestQueue.filter((n=>n.endTime)).reduce(((n,s)=>n+((s.endTime||0)-s.startTime)),0)/o:0;return{activeRequests:this.activeRequests.size,totalRequests:n,averageResponseTime:l,errorRate:n>0?s/n:0}}setEnabled(n){this.isEnabled=n}clearMetrics(){this.requestQueue=[],this.activeRequests.clear()}exportMetrics(){return JSON.stringify({activeRequests:Array.from(this.activeRequests.entries()),requestQueue:this.requestQueue,summary:this.getMetricsSummary(),exportedAt:(new Date).toISOString()},null,2)}};function initializeTelemetry(n){try{s={serviceName:"confirmit-extension",environment:"production",console:!1},Ki.initialize(s);window.location.protocol;const o=!n?.skipPostHog;o||console.log("[Telemetry] Skipping PostHog initialization (explicitly disabled)"),qm.track("info","Telemetry systems initialized",{logfire:!0,posthog:o,telemetryManager:!0,apiInterceptor:!0,timestamp:(new Date).toISOString()}),console.log("[Telemetry] All systems initialized successfully")}catch(o){console.error("[Telemetry] Failed to initialize telemetry systems:",o);try{qm.trackError("telemetry_init_error",o,{source:"telemetry_initialization"})}catch(l){console.error("[Telemetry] Failed to track initialization error:",l)}}var s}__publicField(Vm,"instance"),Vm.getInstance();const Gm="__confirmitTelemetryInitialized__",Ym="__confirmitPostHogActive__";function isSurveyDesignerPage(){return window.location.pathname.includes("/surveydesigner/")}async function initializePostHogIfNeeded(){if(!isSurveyDesignerPage())return void console.log("[Confirmit] Not on surveydesigner page, skipping PostHog");const n=(await s.storage.local.get("confirmit_extension_session")).confirmit_extension_session;if(!n)return void console.log("[Confirmit] No session found, skipping PostHog");if(window[Ym])return void console.log("[Confirmit] PostHog already active");const o=function(){const n=window.location.pathname.match(/\/surveydesigner\/([^/]+)/);return n?n[1]:null}();console.log("[Confirmit] Initializing PostHog on surveydesigner page",{surveyId:o,userId:n.userId});try{const s=window.location.protocol;l={apiKey:"phc_9EXhTA8aIYO7hvqRzboyf5IqPUhi26NrFy93lzPbfFV",apiHost:"https://us.i.posthog.com",persistence:"chrome-extension:"===s?"localStorage":"memory",capture_pageview:!0,autocapture:!0,disable_session_recording:!1,debug:!1},Mm.initialize(l),o&&((n,s,o)=>{Mm.identifyWithContext(n,s,o)})(n.userId,o,{email:n.email,fullName:n.fullName}),window[Ym]=!0,console.log("[Confirmit] PostHog tracking started")}catch(c){console.error("[Confirmit] Failed to initialize PostHog:",c)}var l}function cleanupPostHog(){window[Ym]&&(console.log("[Confirmit] Stopping PostHog tracking"),Mm.shutdown(),window[Ym]=!1)}const Zm={matches:["https://*/*","http://*/*"],runAt:"document_start",async main(){if(!window[Gm]){window[Gm]=!0;try{initializeTelemetry({skipPostHog:!0}),console.log("[Confirmit] Content telemetry script loaded"),"complete"===document.readyState?await initializePostHogIfNeeded():window.addEventListener("load",(async()=>{await initializePostHogIfNeeded()}));let n=window.location.href;new MutationObserver((async()=>{const s=window.location.href;s!==n&&(n=s,console.log("[Confirmit] URL changed, checking PostHog conditions"),isSurveyDesignerPage()?await initializePostHogIfNeeded():cleanupPostHog())})).observe(document,{subtree:!0,childList:!0}),s.runtime.onMessage.addListener((n=>{"session_update"===n.type?(console.log("[Confirmit] Session updated, checking PostHog conditions"),isSurveyDesignerPage()&&initializePostHogIfNeeded()):"session_clear"===n.type?(console.log("[Confirmit] Session cleared, stopping PostHog"),cleanupPostHog()):"stop_tracking"===n.type&&(console.log("[Confirmit] Stop tracking message received"),cleanupPostHog())})),console.log("[Confirmit] Telemetry system ready")}catch(n){console.error("[Confirmit] Failed to initialize telemetry:",n),window[Gm]=!1}}}};var logger_error=(...n)=>{console.error};(async()=>{try{await Zm.main()}catch(n){logger_error('The unlisted script "content-telemetry" crashed on startup!',n)}})()}();
